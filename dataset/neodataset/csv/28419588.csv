issuekey,created,title,description,storypoints
91083357,2021-02-23 06:37:51,Register view does not update when using gdbmidebugger,"
<h3><details><summary>Original Reporter info from Mantis: <small>ccrause @ccrause</small></summary><small>

- **Reporter name:** Christo Crause
</small></details></h3>

## Description:

A suspected side effect of r62591 is that gdbmidebugger doesn't update register information after the first evaluation.  Although changed register entries are marked as modified, this property is not checked in UpdateFormat.  To fix this I changed setting the Modified property for changed entries to DataValidity := ddsInvalid.

Patch attached. 

## Mantis conversion info:

- **Mantis ID:** 38534
- **Version:** 2.1 (SVN)
- **Fixed in version:** 2.2
- **Fixed in revision:** 60267 (#211ab886b0a35986005411d789cba71ec6f933b6)
- **Monitored by:** » @d.ioannidis (Dimitrios Chr. Ioannidis)
- **Target version:** 2.2",100
91076108,2020-03-08 22:55:41,"Using ""make"" to build Lazarus results in an access violation","
<h3><details><summary>Original Reporter info from Mantis: <small>CuriousKit @CuriousKit</small></summary><small>

- **Reporter name:** J. Gareth Moreton
</small></details></h3>

## Description:

When attempting to build Lazarus with ""make all"", the compiler raises an access violation - e.g:

```
...
make -C ide ide
make[1]: Entering directory `C:/Users/NLO-012/Documents/Programming/lazarus/ide'
../tools/svn2revisioninc.exe .. revision.inc
An unhandled exception occurred at $000000010000919A:
EAccessViolation: Access violation
  $000000010000919A
  $000000010000F318
  $000000010000F0FF
  $000000010000E40B
  $000000010000DECE
  $000000010003980D
  $0000000100001882  fin$00000010,  line 118 of svn2revisioninc.pas
  $000000010000190D  SVNINPATH,  line 109 of svn2revisioninc.pas
  $0000000100003D75  PARAMSVALID,  line 572 of svn2revisioninc.pas
  $00000001000047ED  GITREVISIONFROMGITCOMMIT,  line 769 of svn2revisioninc.pas
  $00000001000048E7  main,  line 788 of svn2revisioninc.pas
  $0000000100004906
  $00000001000159E0
  $0000000100001856
  $00007FF91D487BD4
  $00007FF91DD8CED1
```

make[1]: *** [revisioninc] Error 217<br/>
make[1]: Leaving directory `C:/Users/NLO-012/Documents/Programming/lazarus/ide'<br/>
make: *** [ide] Error 2

## Steps to reproduce:

With the most up-to-date files for Lazarus and FPC, attempt to build Lazarus with the following command line:

make clean all FPC=""\pp\bin\x86_64-win64\ppcx64.exe"" (replace the directory with where the compiler executable gets installed.

## Additional information:

The compiler was built using the following command line:

make distclean all install DATA2INC=C:\Users\NLO-012\Documents\Programming\fpc\utils\bin\x86_64-win64\data2inc.exe OPT=""-O4""

Find attached my error log (generated by specifying ""> errorlog.log 2>&1"" after the make command.

## Mantis conversion info:

- **Mantis ID:** 36774
- **OS:** Microsoft Windows
- **OS Build:** 10 Professional
- **Build:** r44289
- **Platform:** x86_64-win64",200
91055849,2016-03-21 08:41:33,Remove CC-licensed icons from the LCL,"
<h3><details><summary>Original Reporter info from Mantis: <small>kluug.net @onpok</small></summary><small>

- **Reporter name:** Ondrej Pokorny
</small></details></h3>

## Description:

Every LCL application includes icons (at least) from the famfamfam (Silk icon set http://www.famfamfam.com/lab/icons/silk/ ) that are licensed under Creative Commons Attribution 2.5/3.0 license.

As a result every LCL application that does not acknowledge them, breaks the CC license.

LCL is advertised as ""(L)GPL licensed with static linking exception"", which is not true because the LCL includes CC-licensed icons. The CC-licensed icons have to be removed from the LCL.

## Additional information:

The icons are located in ""lcl/images"" and are automatically linked by the LCL into the final executable (through RES files).

## Mantis conversion info:

- **Mantis ID:** 29869
- **Version:** 1.7 (SVN)
- **Fixed in revision:** 52007 (#764da242fd71586ca90b111476217cfe75de819d),52010 (#a41772455c587e4cfbbf7952196a6925e3f9e232),52014 (#965080c1f638ca66037ad50539382e7ca2cfdae4),52015 (#258c8ce7d2185d52ec775d982e30a45c5d6f3d62),52017 (#375a90a350ba344a16a85d70ac298a8dbe7cb7ab),52022 (#2941de50c44dbe6cb3c3c81ab9f52b363dd6fc12),52023 (#4380653d04e638d26fd5c5535b3a05df1281ae14),52038 (#e3734f359ce586d8c39bd8053d1e0b9b4192bff5),52039 (#566977914ef6235d6f55972468fa063b8ecce739)
- **Monitored by:** » dezlov (Denis Kozlov)
- **Target version:** 1.6.2",100
91055456,2016-02-21 18:41:30,Modal Dialog Parent Change in v1.6,"
<h3><details><summary>Original Reporter info from Mantis: <small>JimKueneman</small></summary><small>

- **Reporter name:** Jim Kueneman
</small></details></h3>

## Description:

[Critical Issue] Lazarus 1.6 and up is not usable with OS X.  

The change in the code to find the parent window for modal dialog form causes issues in OS X that are critical.  The dialog becomes the top most window in all the OS X window manager causing system dialogs that are shown from one of these modal dialogs to be pushed down in Z order and hanging the application.  This is apparent in the Lazarus IDE as well.


## Steps to reproduce:

http://forum.lazarus.freepascal.org/index.php/topic,31575.msg202829.html#msg202829

and subsequent messages

## Mantis conversion info:

- **Mantis ID:** 29694
- **OS:** OS X
- **OS Build:** All
- **Platform:** Apple
- **Version:** 1.6
- **Fixed in revision:** 51680 (#46ea37d068adc8b40b299e596d94536d00756402)
- **Monitored by:** » JimKueneman (Jim Kueneman)
- **Target version:** 1.6",100
91054557,2015-12-06 14:28:26,Error when compiling for CustomDrawn widgetset,"
<h3><details><summary>Original Reporter info from Mantis: <small>Bart @flyingsheep</small></summary><small>

- **Reporter name:** Bart Broersma
</small></details></h3>

## Description:

Compiling the CustomDrawn widgetset results in a fatal error:

customdrawnwinapi.inc(1139,97) Error: Wrong number of parameters specified for call to ""DrawButton""

## Steps to reproduce:

Create a new application.<br/>
Set WidgetSet to CustomDrawn.<br/>
Build.

## Additional information:

This is a regression as compared to 1.4 fixes branch.

## Mantis conversion info:

- **Mantis ID:** 29142
- **OS:** Window
- **OS Build:** Win7
- **Build:** r50691
- **Platform:** i386
- **Version:** 1.7 (SVN)
- **Fixed in revision:** r50699 (#6f72c3980af10ade7fc7f3d0687ef50b30a2faf6), r50704 (#bfb40fcde53a55b5a68182a723be5315910a6bdb)
- **Target version:** 1.6",200
91052847,2015-04-09 20:38:08,Paint issue,"
<h3><details><summary>Original Reporter info from Mantis: <small>mftq75</small></summary><small>

- **Reporter name:** C Western
</small></details></h3>

## Description:

In attached project, pushing button has no effect. If the line:

```  TextH := PaintBox1.Canvas.TextHeight('Hello');```<br/>

is replaced by:

```  TextH := 15```<br/>

a focus rectangle is drawn

## Additional information:

This appears to be related to:<br/>
r48643 | zeljko | 2015-04-06 12:04:26 +0100 (Mon, 06 Apr 2015) | 2 lines

Gtk2: fixed crash when GtkDeviceContext widget isn't mapped yet. Use default root win as drawable. issue #27795

which caused my actual program to stop drawing the focus rectangle following a mouse event

## Mantis conversion info:

- **Mantis ID:** 27821
- **OS:** fedora
- **Platform:** x86_64
- **Version:** 1.5 (SVN)
- **Fixed in revision:** 48697 (#894fe3d7d4dd93407f2a33d75d55084b308fe731)",100
91052380,2015-03-05 20:41:41,Setting z-order of objects does not work - regression,"
<h3><details><summary>Original Reporter info from Mantis: <small>Windy</small></summary><small>

- **Reporter name:** Mike Sapsard
</small></details></h3>

## Description:

z-order depends on the order of objects in the .lfm file. The attached example shows two buttons and two comboboxes. The z-order in the lfm file is btn1, cmbox1, cmbox2, btn2. 

1) When the form is reduced in width by dragging the right side, the comboboxes and btn2 slide over btn1. They should slide under.

2) Right clicking and changing the z-order also does not move the object begin ... end block in the .lfm file.


## Steps to reproduce:

Run attached file

## Additional information:

There are several bug reports, patches/fixes for related problems. This may be an accidental regression.

## Mantis conversion info:

- **Mantis ID:** 27609
- **OS:** Linux Mint
- **OS Build:** 17.1
- **Platform:** i7 PC
- **Version:** 1.4RC1
- **Monitored by:** » Windy (Mike Sapsard), » @martin_frb (Martin Friebe), » mike.cornflake (Mike Thompson)",100
91050992,2014-09-02 20:32:23,ShowCalendarPopup() crashes app if performed when form is maximized (Linux QT/GTK2),"
<h3><details><summary>Original Reporter info from Mantis: <small>Bart @flyingsheep</small></summary><small>

- **Reporter name:** Bart Broersma
</small></details></h3>

## Description:

When you do a call to ShowCalendarPopup and you have the current form maximized, the a crash occurs.<br/>
The app gets a SIGABRT and a memorydump is done.

This bug does not show on Win32 WS.<br/>
(I am unable to test GTK2 or Qt on Windows)

## Steps to reproduce:

Unzip, and build attached sample app.<br/>
In Project Options you can switch between GTK2 and QT widgetset.

Run the program from the console<br/>
Click on Button1: a CalendarPopup will show (you can omit this step)<br/>
Maximize the form<br/>
Click on Button1 and wait: the app crashes.<br/>
A memory stacktrace/dump will show on the console

## Additional information:

I attached bot GTK2 and Qt crash dumps as they appear on my system.

## Mantis conversion info:

- **Mantis ID:** 26670
- **OS:** Linux
- **OS Build:** Fedora Core 18
- **Build:** r46104
- **Platform:** i386
- **Version:** 1.3 (SVN)
- **Fixed in revision:** 46115 (#c348278854db03a615f34c2de0a3299c6af7c6d2)
- **Monitored by:** » Alexsander (Alexsander)
- **Target version:** 1.2.6",100
91050246,2014-05-31 21:53:25,SynEdit: SynPasSyn missed coloring or 1.2e+3,"
<h3><details><summary>Original Reporter info from Mantis: <small>Alextp</small></summary><small>

- **Reporter name:** CudaText man
</small></details></h3>

## Description:

1.2e-3 1e-3 10e+2          

such must be 1 token (float number). Now it's 3 tokens, which is bad for future when I want to get 1 token in code.

Maybe SynCppSyn, SynJavaSyn-- Same

## Mantis conversion info:

- **Mantis ID:** 26245
- **Version:** 1.2.2
- **Fixed in version:** 1.3 (SVN)
- **Fixed in revision:** 46388 (#d767272fa96096b724dc691607825722cdf1c630)
- **Target version:** 1.4",100
91104187,2014-03-21 09:45:01,Report doesn't fire frRepEnterRect event if launched in Design mode,"
<h3><details><summary>Original Reporter info from Mantis: <small>nachoap</small></summary><small>

- **Reporter name:** Nacho Asensio
</small></details></h3>

## Description:

Hi!

I've just updated my Lazarus from 1.0.14 to 1.2.0 (sourceforge version). 

If I launch my report with DesignReport and, from Lazreport I show the report, it does'n fire the frRepEnterRect event. If I simply change ""DesignReport"" and use ""ShowReport"" it fires this event (and works correctly).

It worked fine in previous versions, compiled with Lazarus 1.0.12, 1.0.10 and 1.0.14.

I'm working with this event in order to show some design images which varies with a database field value, but that isn't important. If I work with DesignReport it doesn't works and if I work with ShowReport it fires this event perfectly.

My code is this:

``` pascal
procedure TfRecetas.btListadoClick(Sender: TObject);
var iPos : Integer;
    sInforme : String;
begin
     with fInformes, fDatos do
     begin
          try
             qConsulta.Active := False;
             qConsulta.SQL.Clear;

             if MessageDlg('Mostrar informe', 
                           '¿Deseas mostrar el informe detallado?',
                           mtConfirmation, mbYesNo, 0) = mrYes then
             begin
                  sInforme := 'Fichas de recetas.lrf';
                  qConsulta.SQL.Text := zRecetas.SQL.Text;
             end
             else
             begin
                  sInforme := 'listado.lrf';

                  iPos := Pos('order by', zRecetas.SQL.Text);

                  if iPos > 0 then
                  begin
                       qConsulta.SQL.Text := 
                            Copy(zRecetas.SQL.Text, 1, iPos - 1);
                  end
                  else
                  begin
                       qConsulta.SQL.Text := zRecetas.SQL.Text;
                  end;

                  qConsulta.SQL.Add('order by CATEGORIA, NOMBRE');
             end;

             qConsulta.Active := True;

             frDS.DataSet := fDatos.qConsulta;
             frDS.DataSet.DisableControls;

             frRep.LoadFromFile(ExtractFilePath(ParamStr(0)) +
                 'INFORMES\' + sInforme);
             frRep.ShowReport; // ********** 

          except
                ShowMessage('No se pudo mostrar el listado');
          end;

     end;
end;           
```

## Steps to reproduce:

Write a program with two buttons who launchs a report with a TfrPictureView. Put a DesignReport in one of them, and a ShowReport in the other. Put 'Sample' in the memo text of TfrPictureView. Change EnterRect event in FReport in order to do something and place a breakpoint.

When you push ShowReport you go to the EnterRect breakpoint. When you push DesignReport and afterwards you push the ""Eye"" LazReport button (in order to show the report) Lazarus doesn't fire the EnterRect event.

## Additional information:

I'll send you a sample program. If I compile it with previous Lazarus it works fine, but with Lazarus 1.2.0 DesignReport has a bad work.

## Mantis conversion info:

- **Mantis ID:** 25896
- **OS:** Windows 7
- **OS Build:** x64
- **Build:** SVN 44303
- **Platform:** Win32
- **Version:** 1.2.0
- **Fixed in version:** 1.3 (SVN)
- **Fixed in revision:** 44281 (#5f2c42d8c1de757a84fa5faa24e0715572050a46)
- **Target version:** 1.2.4",100
91049413,2014-02-20 20:15:27,AV on moving IBConnection component,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

After updating to r44156<br/>
Moving a IBConnection component dropped on form designer causes AV

## Steps to reproduce:

Create a new application<br/>
From SQLDB palette tab, Drop a TIBConnection on form designer<br/>
Move the TIBConnection by drag and drop<br/>
AV will immediately occur.

BT in additional information.

## Additional information:

```
AddComponent TIBConnection Parent=Form1:TForm1 78,72,0,0
Parent is 'Form1:TForm1'
TMainIDE.OnPropHookPersistentAdded A IBConnection1:TIBConnection
TPkgManager.AddUnitDependenciesForComponentClasses Adding Project Dependency project1 -> SQLDBLaz
TPkgManager.AddUnitDependenciesForComponentClasses Extending Uses unit1.pas IBConnection
[TEventsCodeTool.CompleteComponent]  CurComponent=IBConnection1:TIBConnection
TApplication.HandleException Access violation
  Stack trace:
  $0000000000BC3E98 line 1696 of ../designer/designer.pp
  $0000000000BDF28C line 1012 of ../designer/controlselection.pp
  $0000000000BDECC4 line 1038 of ../designer/controlselection.pp
  $0000000000BE3260 line 2304 of ../designer/controlselection.pp
  $0000000000BC756B line 2612 of ../designer/designer.pp
  $0000000000BC8851 line 2926 of ../designer/designer.pp
  $00000000008A1781 line 2013 of include/control.inc
  $0000000000892BC6 line 5327 of include/wincontrol.inc
  $00000000006A35BE line 1430 of include/customform.inc
  $000000000097DAF4 line 112 of lclmessageglue.pas
  $0000000000933A5D line 3593 of gtk2/gtk2proc.inc
  $00000000009435D8 line 1421 of gtk2/gtk2callback.inc
  $0000000000943BB8 line 1598 of gtk2/gtk2callback.inc
  $00007F262ACD6DD8
[TMainIDE.Destroy] A 
```

## Mantis conversion info:

- **Mantis ID:** 25748
- **OS:** Linux
- **OS Build:** 3.2.0-58-generic
- **Build:** 44156
- **Platform:** x86_64
- **Version:** 1.3 (SVN)
- **Fixed in revision:** 44200 (#e72d3ad58483a1066bcdb7da9d7aac83e834e50e)
- **Monitored by:** » deepaak99 (Deepaak)
- **Target version:** 1.4",100
91049411,2014-02-19 20:19:56,Setting anything Debugger_Startup_Options will cause Access Violation.,"
<h3><details><summary>Original Reporter info from Mantis: <small>Raid</small></summary><small>

- **Reporter name:** Dennis Fehr
</small></details></h3>

## Description:

Type in anything in Debugger_Startup_Options and click away from the edit or 'OK' and it will crash.

## Mantis conversion info:

- **Mantis ID:** 25739
- **Build:** 44161M
- **Version:** 1.3 (SVN)
- **Fixed in revision:** 44177 (#f9ba490c538f32162629005a9ac69d2b41601676)
- **Monitored by:** » Raid (Dennis Fehr)
- **Target version:** 1.4",100
91049053,2014-01-02 14:07:46,CairoCanvas - repair Clipping,"
<h3><details><summary>Original Reporter info from Mantis: <small>Petr-K</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

Added missing RequiredState([csHandleValid]);

GdkCairoCanvas ignored Controls coordinates, always paints on parent (0, 0) position.

## Mantis conversion info:

- **Mantis ID:** 25485
- **Build:** trunk #43585
- **Version:** 1.3 (SVN)
- **Fixed in version:** 1.3 (SVN)
- **Fixed in revision:** 44432 (#b6ea3d2753e6a2cf05e0606825ea2c8ce8dbae96)
- **Target version:** 1.4",100
91049051,2014-01-02 13:53:51,CairoCanvas WordBreak implementation with pango_layout,"
<h3><details><summary>Original Reporter info from Mantis: <small>Petr-K</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

In CairoCanvas was not implented WordBreak.

## Mantis conversion info:

- **Mantis ID:** 25484
- **Build:** trunk #43585
- **Version:** 1.3 (SVN)
- **Fixed in version:** 1.3 (SVN)
- **Fixed in revision:** 44430 (#585b1dd06aa01e7537469870d138d63e6deb7a35)
- **Target version:** 1.4",100
91093641,2013-10-17 09:35:24,"FBAdmin, FBEventMonitor, PQEventMonitor, SQLDBLibraryLoader available since FPC 2.6.2, not 2.6.3","
<h3><details><summary>Original Reporter info from Mantis: <small>BigChimp</small></summary><small>

- **Reporter name:** Reinier Olislagers
</small></details></h3>

## Description:

The FBAdmin, FBEventMonitor, PQEventMonitor, SQLDBLibraryLoader components have been available in FPC 2.6.2, not only 2.6.3+

The attached patches <br/>
dbcomps_since262.diff for Laz trunk<br/>
laz1199_dbcomps_since262.diff for Laz 1.1.99<br/>
add compilation support for trunk+Laz 1.1.99; request application to trunk but especially to the 1.2RC branch so it can be included in end user testing.<br/>
I will included a merge request on the wiki once the wiki is up again.

Thanks a lot.

## Additional information:

Verified patch works (compiles, shows components, project with components on a form compiles) on <br/>
\- Laz trunk+FPC trunk x86, Windows<br/>
\- Laz lazarus_1_1_99pre+FPC 2.6.2 x86, Windows

Sorry about proposing the previous patch that allows compilation from 2.6.3+; I didn't check when the components where actually available.

Just confirmed on a stock Lazarus stable install by searching for the ppu files of the FPC components:<br/>
FBAdmin: 2.6.2: C:\Lazarus\fpc\2.6.2\units\i386-win32\fcl-db\fbadmin.ppu<br/>
FBEventMonitor: 2.6.2: C:\Lazarus\fpc\2.6.2\units\i386-win32\fcl-db\fbeventmonitor.ppu<br/>
PQEventMonitor: 2.6.2: C:\Lazarus\fpc\2.6.2\units\i386-win32\fcl-db\pqeventmonitor.ppu<br/>
SQLDBLibraryLoader: 2.6.2: C:\Lazarus\fpc\2.6.2\units\i386-win32\fcl-db\sqldblib.ppu

## Mantis conversion info:

- **Mantis ID:** 25200
- **OS:** Windows
- **OS Build:** Windows 7
- **Build:** 43261
- **Platform:** x64 (with x86 compiler)
- **Version:** 1.3 (SVN)
- **Fixed in version:** 1.2.0
- **Fixed in revision:** 43263 (#bde487616b9f38d2ed890d6a17cf45529bafe946), 43265 (#b46dd27c715ec70e239e1b21b3076f4cba2dcc24)
- **Target version:** 1.2.0",100
91046543,2013-05-21 22:54:49,"Error ""Can not find db used by RegisterFCL""","
<h3><details><summary>Original Reporter info from Mantis: <small>wp @wpam</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

Update Lazarus 1.1 trunk with fpc 2.7.1 by fpcup<br/>
Run the new Lazarus and compile an empty project.<br/>
Fails because of ""registerfcl.pas(45,31) Fatal: Can not find db used by RegisterFCL, ppu=..\..\..\fpc\units\i386-win32\fcl-db\db.ppu, package FCL""

## Mantis conversion info:

- **Mantis ID:** 24462
- **OS:** Win-32
- **OS Build:** Windows 7
- **Platform:** i386
- **Version:** 1.1 (SVN)",200
91046518,2013-05-17 03:07:14,TListView.Clear List index out of bounds,"
<h3><details><summary>Original Reporter info from Mantis: <small>slemat</small></summary><small>

- **Reporter name:** Sylvain
</small></details></h3>

## Description:

Hi,

I've got a TreeView to select options, and when one is selected, I display items in a TListView.

Each time I select an option in the TreeView, I clear up the ListView (with TListView.Clear) and generate new Items with TListView.Items.Add.

This process works very well as long I don't select any item in the TListView. If I select an item in the TListView, then the TListView Clear shows a failure message ""List index (index) out of bounds"". (index) is the index of the selected item, as if the selected item was not in the TListView anymore.

Thank you.

## Additional information:

Lazarus 1.0.8<br/>
FPC 2.6.2<br/>
Revision SVN 40573

## Mantis conversion info:

- **Mantis ID:** 24441
- **OS:** Windows Vista",200
91046480,2013-05-10 22:25:10,Directory is not deleted if it has at least one link,"
<h3><details><summary>Original Reporter info from Mantis: <small>khvalera</small></summary><small>

- **Reporter name:** khvalera
</small></details></h3>

## Description:

Function DeleteDirectory of fileutil.inc, are not deleted directory if in it there is at least one link

## Mantis conversion info:

- **Mantis ID:** 24415
- **OS:** AgiliaLinux
- **OS Build:** 8.1.1
- **Platform:** i686, x86_64
- **Version:** 1.0.8
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** r41159 (#d219baae5f5526f80edc4b7c683f2c527df83ba6)
- **Monitored by:** » khvalera (khvalera)",200
91046415,2013-05-06 16:51:29,"Patch for LazReport - property ""ZOOM"" of the object ""Barcode""","
<h3><details><summary>Original Reporter info from Mantis: <small>Sergey</small></summary><small>

- **Reporter name:** Sergey S.
</small></details></h3>

## Description:

The functions of the GetSaveProperty (on line 11659):
``` pascal
tkFloat: begin
           OldSep := DecimalSeparator;
           DecimalSeparator := '.';
           Result := FloatToStr(GetFloatProp(aObj,Prop));
           DecimalSeparator := OldSep;
         end;
--> replaced:
tkFloat: begin                                       
            s := FloatToStr(GetFloatProp(aObj,Prop));
            s := StringReplace(s, ThousandSeparator, '', [rfReplaceAll, rfIgnoreCase]);
            Result := StringReplace(s, DecimalSeparator, '.', [rfReplaceAll, rfIgnoreCase]);
         end;
```

and The functions of the RestoreProperty(on line 11703):
<pre>
tkFloat                     : SetFloatProp(aObj,Prop,StrToFloat(aValue));
--> replaced:
tkFloat: begin
            s := StringReplace(aValue, '.', DecimalSeparator, [rfReplaceAll, rfIgnoreCase]);
            SetFloatProp(aObj,Prop,StrToFloat(s));
</pre>
          end;

## Mantis conversion info:

- **Mantis ID:** 24393
- **Version:** 1.0.8
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** 41070 (#49effd635f60be8032ce6e8933adf46ae119b4f5)
- **Target version:** 1.4",100
91046363,2013-05-02 10:05:57,FindAllFiles don't works,"
<h3><details><summary>Original Reporter info from Mantis: <small>bonmario @bonmario</small></summary><small>

- **Reporter name:** Mario Bonati
</small></details></h3>

## Description:

Hi,<br/>
cause of last modifies at TFileSearcher, now FindAllFiles don't works.

I have uploaded a patch.

Thanks, Mario

## Mantis conversion info:

- **Mantis ID:** 24362
- **OS:** Windows XP
- **OS Build:** SP3
- **Build:** Lazarus 1.1 r40991M FPC 2.6.2 i3
- **Platform:** Windows
- **Version:** 1.1 (SVN)
- **Fixed in revision:** 40996 (#33e67992e54b1b2c8240a4d5f194a9f7dc68b125)",100
91046317,2013-04-28 13:06:14,DrawText output is different on Bitmap.Canvas and Form.Canvas,"
<h3><details><summary>Original Reporter info from Mantis: <small>salyzhyn</small></summary><small>

- **Reporter name:** Yurii Salyzhyn
</small></details></h3>

## Description:

DrawText output is different on Bitmap.Canvas and Form.Canvas for strings which combine arabic and other symbols (Linux, qt). See attached screenshot.<br/>
Strings like this 'Pa ,تنش' are shown in a proper way both in Linux and Windows but not this '% ,خطأ نسبي' or ':مایع تحقیق'.

## Steps to reproduce:

Create new project and add this procedures:

``` pascal
procedure TForm1.FormCreate(Sender: TObject);
begin
  Bitmap := TBitmap.Create;
  Bitmap.Width := 150;
  Bitmap.Height := 50;
end;

procedure TForm1.FormPaint(Sender: TObject);
var
  s: string;
  R: TRect;
begin
  s := '% ,خطأ نسبي';
  R := Rect(10, 10, 200, 40);
  DrawText(Form1.Canvas.Handle, PChar(s), Length(s), R, DT_WORDBREAK or DT_RTLREADING);
  DrawText(Bitmap.Canvas.Handle, PChar(s), Length(s), R, DT_WORDBREAK or DT_RTLREADING);
  Form1.Canvas.Draw (10, 40, Bitmap);
end;
```

## Mantis conversion info:

- **Mantis ID:** 24340
- **OS:** Kubuntu
- **OS Build:** 12.04
- **Build:** 40563
- **Platform:** i386
- **Version:** 1.0.7 (SVN)
- **Fixed in revision:** 40956 (#e70b5f66bb9dec0b3070fc60787d9f60a1e07c4a)",100
91046154,2013-04-22 06:38:46,TFileSearcher have different result than FindFirst + FindNext,"
<h3><details><summary>Original Reporter info from Mantis: <small>bonmario @bonmario</small></summary><small>

- **Reporter name:** Mario Bonati
</small></details></h3>

## Description:

Hi,<br/>
i have found this problem that is an only Windows's error.

The problem is that searching for ""*.*"" in Windows, have different result if it is done with TFileSearcher or FindFirst + FindNext.

I have uploaded a test program that do this:<br/>
\- create a new directory<br/>
\- create in that directory some files without extension and some files with extension<br/>
\- show list of the files contained in the directory with TFileSearcher and with FindFirst + FindNext using the mask ""*.*""

The result is different, because TFileSearcher don't show files without extension. <br/>
I think that this is correct in Linux, but not in Windows.

Thanks, Mario

## Mantis conversion info:

- **Mantis ID:** 24306
- **OS:** Windows XP
- **OS Build:** SP3
- **Build:** Lazarus 1.1 r40850M FPC 2.6.2 i3
- **Platform:** Windows
- **Version:** 1.1 (SVN)
- **Fixed in revision:** r40873 (#07d79d253681797ccf593677db0c51a56674b3c5), 40877 (#518250f92c5be13c39adb364f295528e1e9914dc), r40970 (#fe79a8fdffebaa4210e4436ed4138bff43f39de2), r40973 (#5fcdbd6c7dc4621aef817ee8aec58a8c3e3654b4)
- **Monitored by:** » @bonmario (Mario Bonati)",100
91046108,2013-04-17 17:00:24,TFileSearcher and symlink on Linux,"
<h3><details><summary>Original Reporter info from Mantis: <small>bonmario @bonmario</small></summary><small>

- **Reporter name:** Mario Bonati
</small></details></h3>

## Description:

Hi,<br/>
i have attached a project that search all directories on ""/proc"".<br/>
When i run it on my Ubuntu 12.10 64 bit, it goes in loop.<br/>
I think that it happens because TFileSearcher don't discard the symbolic link.

Thanks in advance, Mario

## Mantis conversion info:

- **Mantis ID:** 24291
- **OS:** Ubuntu Linux 64 bit
- **OS Build:** 12.10
- **Build:** Lazarus 1.1 r40829 FPC 2.6.2 x86
- **Platform:** Linux
- **Version:** 1.1 (SVN)
- **Fixed in revision:** r40848 (#bb419695bb5d5f39dfb74f2f0c463ffad647ed9b)",100
91046056,2013-04-11 11:02:52,TStringgrid much lines and timers will be crash. Ported from delphi 7.,"
<h3><details><summary>Original Reporter info from Mantis: <small>atiati100</small></summary><small>

- **Reporter name:** Sarok Attila
</small></details></h3>

## Description:

Please put one or more stringgird one or more form. Use at least two or 3 timer (or idle timer), write a serius program and crash.<br/>
Regard Ati.

## Mantis conversion info:

- **Mantis ID:** 24258
- **OS:** Windows
- **OS Build:** XP Prof. SP3
- **Platform:** PC",200
91046051,2013-04-09 15:10:57,Delphi 7 program 900+ lines please help me ...,"
<h3><details><summary>Original Reporter info from Mantis: <small>atiati100</small></summary><small>

- **Reporter name:** Sarok Attila
</small></details></h3>

## Description:

a program which simulates the operation of DC without the internet.<br/>
In Delphi 7 to Delphi little slow, so I attach the complete source.

## Mantis conversion info:

- **Mantis ID:** 24250
- **OS:** Windows
- **OS Build:** XP Prof. SP3
- **Platform:** PC
- **Version:** 1.0.8",100
91045964,2013-04-02 09:41:40,"cairocanvas.pas(10,69) Fatal: Can't find unit Cairo used by CairoCanvas","
<h3><details><summary>Original Reporter info from Mantis: <small>madeinoz</small></summary><small>

- **Reporter name:** Stephen Eaton
</small></details></h3>

## Description:

when doing a bare metal install of Lazarus using fpcup64.exe the above message is displayed and compilation of lazarus errors out during the make of BIGIDE

This is similar to error being reported in 24205 but problem still appears to be there, at least in windows anyway.

local repository is at 40693 

## Steps to reproduce:

fpcup64.exe from clean install i.e. c:\development directories have been deleted

## Additional information:

Binutils/make dir:      C:\development\fpcbootstrap<br/>
Bootstrap compiler dir: C:\development\fpcbootstrap<br/>
Lazarus shortcut name:  Lazarus_fpcup<br/>
Shortcut fpcup name:    fpcup_update<br/>
FPC URL:                http://svn.freepascal.org/svn/fpc/branches/fixes_2_6<br/>
FPC options:<br/>
FPC directory:          C:\development\fpc<br/>
Lazarus directory:      C:\development\lazarus<br/>
Lazarus primary config path:<br/>
(Lazarus settings path) C:\development\config_lazarus<br/>
Lazarus URL:            http://svn.freepascal.org/svn/lazarus/trunk<br/>
Lazarus options:<br/>
Keep local changes:     no<br/>
Log file name:          fpcup.log<br/>
Parameter list:

## Mantis conversion info:

- **Mantis ID:** 24215
- **OS:** Windows 7 64bit
- **OS Build:** 7
- **Build:** 40693
- **Platform:** windows x86_64
- **Version:** 1.1 (SVN)
- **Monitored by:** » zaher (Zaher Dirkey)",200
91093426,2013-04-02 06:43:50,Corrections I made on some LCL components,"
<h3><details><summary>Original Reporter info from Mantis: <small>EdyKnopfler</small></summary><small>

- **Reporter name:** Éderson Cássio
</small></details></h3>

## Description:

The solutions I have created for some problems I reported here. See #0024207, #0024206, #0024196, #0024194, #0024191.<br/>
The great objective is reproduce the real behavior of these components in Delphi, in the aspects I reported.

## Steps to reproduce:

The steps are in the respective issue numbers above.

## Additional information:

In the last few times I get interested in Lazarus development and I'm finally getting an application migrated from Delphi (despite the headaches with these bugs). I'm so eager to contribute and make Lazarus a big and respectable tool, but until now I didn't know how to use SVN. Sorry for some mistakes!

## Mantis conversion info:

- **Mantis ID:** 24213
- **OS:** WindowsXP
- **OS Build:** SP3
- **Platform:** Win32
- **Version:** 1.0.8",100
91045946,2013-03-31 18:34:59,Component bleed-through on TGroupBox,"
<h3><details><summary>Original Reporter info from Mantis: <small>paul@paul-robinson.us</small></summary><small>

- **Reporter name:** Paul Robinson
</small></details></h3>

## Description:

I have some TGroupBoxes I am using in effect as virtual forms, in which one is moved in (and the others moved out) and made visible when using that item.  Some click events cause nasty ""bleed through"" in which an underlying color - that shouldn't even be there, I move the unused other elements offscreen by making the top property -1000 - bleeds through and overwrites the component. This happens in which I click on a radio button, or a shape, and a ""green flash"" ostensibly from another group box comes through and changes, say, several radio buttons into a rectangle of green. Not every control is affected. A minimise/maximize or moving the mouse over the control restores most of them, but I just think this shouldn't happen.

## Steps to reproduce:

Clicking on some spots, a spot on the form, a control or some others, causes a full or partial bleed-through to occur in which the controls all ""flash over"" to something else, usually a green block although sometimes partial change or a different color occurs

## Mantis conversion info:

- **Mantis ID:** 24188
- **OS:** Windows 7
- **OS Build:** 64 Bit
- **Build:** Lazarus 1.0.2
- **Version:** 2.3 (SVN)",100
91045933,2013-03-29 22:25:07,"BeginUpdate for ListView and Repaint for another component, is still drawing","
<h3><details><summary>Original Reporter info from Mantis: <small>khvalera</small></summary><small>

- **Reporter name:** khvalera
</small></details></h3>

## Description:

BeginUpdate for ListView and Repaint for another component, is still drawing.<br/>
example is attached:

## Mantis conversion info:

- **Mantis ID:** 24173
- **OS:** AgiliaLinux
- **OS Build:** 8.1.1
- **Platform:** i686, x86_64
- **Version:** 1.0.8",100
91045900,2013-03-27 08:44:25,érdekes problémát fogtam nézzetek utánna esetleg ? intresting problem ?,"
<h3><details><summary>Original Reporter info from Mantis: <small>atiati100</small></summary><small>

- **Reporter name:** Sarok Attila
</small></details></h3>

## Description:

lazarus 1.08 new program application do nothing run, close program. no error, but messages window right click help and ACCES VIOLATION, and close. And CTRL ALT DEL kill? free pascal... try your computers ...

## Mantis conversion info:

- **Mantis ID:** 24148
- **OS:** Windows
- **OS Build:** XP Prof. SP3
- **Platform:** PC
- **Version:** 1.0.8",100
91045751,2013-03-21 14:19:15,[SynEdit] Currpted text when Selecting then presseing Enter then Undo (ctrl+z),"
<h3><details><summary>Original Reporter info from Mantis: <small>zaher</small></summary><small>

- **Reporter name:** Zaher Dirkey
</small></details></h3>

## Description:

Select a text and press enter then undo it make corrupted text, try to select text not from start of line.

## Steps to reproduce:

Open ""controls"" unit, After selecting the word in uses for example ""SysUtils"", i pressed Enter to make new line and SysUtils removed, now then Undo (ctrl+z) it make corrupted text.<br/>
My environment attached.

## Additional information:

Martin respond in message list.

It's the ""position only"" trim trailing spaces.<br/>
The space is not restored.

## Mantis conversion info:

- **Mantis ID:** 24101
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** 40680 (#63634bb913e091d88dba3c40d3c5bec1672b38a7)
- **Monitored by:** » zaher (Zaher Dirkey)
- **Target version:** 1.0.8",100
91045734,2013-03-19 19:48:42,TFileStream does not support Unicode/UTF8 file names,"
<h3><details><summary>Original Reporter info from Mantis: <small>kluug.net @onpok</small></summary><small>

- **Reporter name:** Ondrej Pokorny
</small></details></h3>

## Description:

There is no way you can create a TFileStream with a utf8/unicode file name under Windows.

The resolution is very simple: just use FileOpenW and FileCreateW in TFileStream.Create() in streams.inc.

See the project with a fully functional UTF8-enabled filestream.

I use TFileStream_UTF8 as a workaround but it would be great if you added UTF8-support to default TFileStream because then TMemoryStream.LoadFromFile() etc. would also work with UTF8 filenames.

Tested in current Lazarus 1.0.8.

## Steps to reproduce:

See the demo project.

## Mantis conversion info:

- **Mantis ID:** 24083
- **OS:** Windows
- **OS Build:** NT - 8
- **Build:** 1.0.8 40573
- **Platform:** Windows NT
- **Version:** 1.0.7 (SVN)",100
91045654,2013-03-15 13:00:34,Toolbutton.Height does not equal ToolBar.ButtonHeight,"
<h3><details><summary>Original Reporter info from Mantis: <small>Anna</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

I set ToolBar.ButtonHeight to 16, it trigger all toolbuttons height to 16. <br/>
 I add ImageList with images 16x16 and fill ToolBar.Images.

But when I fill image index of Toolbutton, Toolbutton height spontaneous jump to 24 or 26 or 20.

## Mantis conversion info:

- **Mantis ID:** 24049
- **OS:** WinXP RPO SP3 Russian
- **OS Build:** 5.1.2600
- **Platform:** 32-bit
- **Version:** 1.1 (SVN)",100
91045624,2013-03-13 01:08:45,Implement text 'Select All' in code editor with mouse right-click,"
<h3><details><summary>Original Reporter info from Mantis: <small>vfclists</small></summary><small>

- **Reporter name:** Frank Church
</small></details></h3>

## Description:

Implement text 'Select All' in code editor with mouse right-click. Is it a present facility in many text editors and its absence is jarring.

## Mantis conversion info:

- **Mantis ID:** 24037
- **Version:** 1.0.7 (SVN)
- **Fixed in revision:** r41525 (#8d30ca2251bd8e24e44a479d71baff9199eac3ce)
- **Monitored by:** » vfclists (Frank Church)",100
91045491,2013-03-10 19:16:51,abnormal MDI child behavior,"
<h3><details><summary>Original Reporter info from Mantis: <small>tekka</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

Created 2 forms, Form1 = fsMDIForm, Form2 = fsMDIChild + set parent to Form1.

If I add a panel with align <> alNone to Form1, then Form2 cannot be moved, if align is set to alNone, no problem. (See attached code).


## Steps to reproduce:

See attached files

## Mantis conversion info:

- **Mantis ID:** 24025
- **Build:** 40379
- **Version:** 1.1 (SVN)",200
91045383,2013-03-02 14:54:54,TAChart creates faulty SVG files,"
<h3><details><summary>Original Reporter info from Mantis: <small>jwdietrich @jwdietrich21</small></summary><small>

- **Reporter name:** Johannes W. Dietrich
</small></details></h3>

## Description:

The SVG export option for line graphs seems to be buggy. SVG files created by the SVG drawer are ugly and don't match the graph drawn on the screen.

## Steps to reproduce:

This behaviour is always reproducible. Create a form with a TAChart, then create a line series and add data points and finaly save it as SVG. See attached source code for details.

## Mantis conversion info:

- **Mantis ID:** 23982
- **OS:** Mac OS X and Windows
- **Platform:** Mac and Windows
- **Version:** 1.0.6
- **Fixed in revision:** 41769 (#26622f6defa09283d5ac0278d4e7e70f70074af5)
- **Monitored by:** » @jwdietrich21 (Johannes W. Dietrich), » @wpam (wp)",100
91045322,2013-02-19 22:00:21,wrong TStringGrid behavior,"
<h3><details><summary>Original Reporter info from Mantis: <small>giao</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

when stringgrid in goEditing mode and I'm pressing special keys (such as Ctrl, Caps, Shift or etc), I have a char '?' inserted in a cell. So I can't paste or insert data into a cell (ctrl-v for except not working). The Alt button works write ok. Tested on Calculate Linux, Fedora 18, OpenSuse 12.2 and Debian 6.0.6 (GTK). Windows XP, Windows 7 works fine. Lazarus 1.0.6 stable, Lazarus 1.0.7 16.02.13

## Mantis conversion info:

- **Mantis ID:** 23924
- **OS:** fedora 18, opensuse 12.2
- **Platform:** gtk
- **Version:** 1.0.6
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** 37446 (#8dd4e1d1d75a76d121eb394d82b3957ac236b116) merged in 40363 (#99302175ab625a541d9731f0aad0fc60c4632a4e)
- **Target version:** 1.0.8",100
91045162,2013-02-17 23:49:24,Scrolling bug in TListBox with large amount of items in it (Windows),"
<h3><details><summary>Original Reporter info from Mantis: <small>robbanux</small></summary><small>

- **Reporter name:** Rob Bob
</small></details></h3>

## Description:

I love lazarus and Freepascal and at last I can see that it is possible for me to go from Delphi to Lazarus but,there is some problems.<br/>
Look at my file.<br/>
The listbox on the left can't be scrolled to the last item,cause of to mutch info!<br/>
I need the listbox to hold double the items, in the future.<br/>
Possible?

## Steps to reproduce:

Compile the file and run.Try to scroll to the last item in the left Listbox!<br/>
The right box is a memo1 box and work perfect.

## Additional information:

ICore5 8GB Fujitsu Lifebook AH531.

Lazarus 1.0.6 r40119 FPC 2.6.0 i386-win32-win32/win64

## Mantis conversion info:

- **Mantis ID:** 23914
- **OS:** Windows
- **OS Build:** 7 64 bit
- **Build:** ?
- **Platform:** Windows 7 64 bit
- **Version:** 1.0.6
- **Fixed in version:** 1.6.2
- **Fixed in revision:** r52246 (#178c43a3f6aed32ba5cf4a873f3b9af5b83701d5)
- **Monitored by:** » Cyrax (Cyrax)
- **Target version:** 1.6.2",100
91045157,2013-02-17 10:01:08,Cannot open Lazarus without Error,"
<h3><details><summary>Original Reporter info from Mantis: <small>mmvisual</small></summary><small>

- **Reporter name:** Markus Müller
</small></details></h3>

## Description:

The SVN Setup ""Lazarus-1.1-40334-fpc-2.6.0-20130217-win32.exe"" install wrong lazarus.<br/>
This Setup copy the FPC Source in a wrong folder.

This SVN Setup have work better:<br/>
Lazarus-1.1-40325-fpc-2.6.0-20130216-win32.exe

## Steps to reproduce:

Install the Setup and start Lazarus

## Mantis conversion info:

- **Mantis ID:** 23908
- **OS:** Win7
- **OS Build:** 64 Bit
- **Build:** 40334
- **Platform:** Win32
- **Version:** 1.1 (SVN)",300
91045111,2013-02-16 11:12:50,Connot compile Lazarus,"
<h3><details><summary>Original Reporter info from Mantis: <small>mmvisual</small></summary><small>

- **Reporter name:** Markus Müller
</small></details></h3>

## Description:

If I want compile the SVN Setup ""Lazarus-1.1-40325-fpc-2.6.0-20130216-win32.exe"" comes this error:

C:\lazarus\fpc\2.6.0\bin\i386-win32\make.exe: *** [cleanide] Error 255

With SVN 40217 was no error, with SVN 40312 comes the error.

Please, korrect the makefile and check the version from make.exe.

## Steps to reproduce:

See Picture ""Bild1.png"". I not know the english words in the Lazarus menu.

## Additional information:

If I replace the make.exe from FPC into V3.8.2, then I can compile lazarus.<br/>
In FPC V2.6.0 is the makefile.exe V3.8.0 included.

## Mantis conversion info:

- **Mantis ID:** 23896
- **OS:** Win 7
- **OS Build:** 64Bit
- **Build:** 40325
- **Platform:** Win32
- **Version:** 1.1 (SVN)",300
91045104,2013-02-15 17:31:24,Misbehavior on moving/resizing LCL components designtime,"
<h3><details><summary>Original Reporter info from Mantis: <small>User137</small></summary><small>

- **Reporter name:** Teemu Valo
</small></details></h3>

## Description:

Some components sometimes go in state where i can't resize or move them by dragging with mouse. The bug has random aspects which i cannot reproduce. Restarting Lazarus usually fixes it for a while. Changing Left/Top/Width/Height property from the Object Inspector always works.

Scenarios that can happen:<br/>
1) Trying to change TImage height does nothing, but stays locked in earlier set height. Dragging Width/Left/Top still works.<br/>
2) Dragging TButton on form makes it go some crazy values like Left property at -35211. 1 pixel movement would throw it off at great speed.

## Steps to reproduce:

Create 1 component on form, for example TButton. Change Left or Top property by typing the number in Object Inspector. Leave the property as active (don't click another property).<br/>
Then try to move that same component on form. It will stay stuck, move quickly or something else buggy.

## Mantis conversion info:

- **Mantis ID:** 23891
- **OS:** Windows 7 32-bit
- **OS Build:** -
- **Build:** 40308
- **Platform:** -
- **Version:** 1.1 (SVN)
- **Fixed in revision:** 41866 (#4a4b3a8ecde02b99e6d3724d3f8b19feb999351d)",100
91045063,2013-02-09 16:55:15,TValueListEditor after entering value in cell it lose focuss,"
<h3><details><summary>Original Reporter info from Mantis: <small>Imants</small></summary><small>

- **Reporter name:** Imants
</small></details></h3>

## Description:

in TValueListEditor if I type in with keybord I can type only one character after that grid lose focuss and start to focuss other components or resets focuss on editor which makes it to select all text.

## Mantis conversion info:

- **Mantis ID:** 23865
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** r40253 (#bb1447887f8aba67c648cf0dce92b59259e1d152)",100
91044999,2013-02-08 13:38:56,Lazarus does not have support for iso8859_15 character encoding,"
<h3><details><summary>Original Reporter info from Mantis: <small>dcelso</small></summary><small>

- **Reporter name:** DCelso
</small></details></h3>

## Description:

Lazarus does have support for iso8859_1 character encoding(without euro char and others needed western european languages) but it was improved with the version iso8859_15.

I attach the patch with the necessary changes to give support to this improved character encoding to lazarus.


## Mantis conversion info:

- **Mantis ID:** 23856
- **OS:** all
- **OS Build:** all
- **Platform:** i886
- **Version:** 1.1 (SVN)
- **Fixed in revision:** r40210 (#bee75f597a4c3ed74e2e737667030c4f713681c5)",100
91044961,2013-02-05 10:27:29,Text alignment in Lazreport,"
<h3><details><summary>Original Reporter info from Mantis: <small>alexkam</small></summary><small>

- **Reporter name:** Alexey Kamenskiy
</small></details></h3>

## Description:

Alignment text by width in lazreport doesn't work.

## Mantis conversion info:

- **Mantis ID:** 23830
- **Version:** 1.0.7 (SVN)",100
91044954,2013-02-05 02:35:11,FloatToStrF Mistake,"
<h3><details><summary>Original Reporter info from Mantis: <small>calc4fem</small></summary><small>

- **Reporter name:** Leo
</small></details></h3>

## Description:

FloatToStrF(aaa,ffGeneral,5,2) when aaa=29000 returns 29. 

## Steps to reproduce:

``` pascal
procedure TForm1.Button1Click(Sender: TObject);
var
aaa:Double;
begin

  showmessage(FloatToStrF(aaa,ffGeneral,5,2))  ;

end;       
```

## Mantis conversion info:

- **Mantis ID:** 23828
- **Version:** 1.0.2",200
91044821,2013-01-31 21:38:31,Attempts to access parent form properties result in SIGSEGV,"
<h3><details><summary>Original Reporter info from Mantis: <small>kpeters58</small></summary><small>

- **Reporter name:** Kai
</small></details></h3>

## Description:

Attempting to access a form parent's properties results in SIGSEGV when forms create other forms at runtime and that ""form chain"" is 3 levels (or more) deep.

## Steps to reproduce:

1) Create form1 with a button on it<br/>
2) Clicking this button dynamically creates form2 which also has a button on it<br/>
3) Clicking form2's button dynamically creates form3 which also has a button on it

4) In the form3 button's clickevent attempt to display<br/>
form2's caption

Reliably result in SISEGV in: .\include\control.inc at line 3246

## Additional information:

Note that all works fine with just two levels (i.e. remove form1 from project and the problem goes away)

Test project attached in ZIP format

## Mantis conversion info:

- **Mantis ID:** 23803
- **OS:** Windows
- **OS Build:** 7 - 64 bit
- **Platform:** Windows
- **Version:** 1.0.5 (SVN)",100
91042261,2012-10-21 10:32:37,[regression] OI: Access violation while trying to modify property,"
<h3><details><summary>Original Reporter info from Mantis: <small>Ask</small></summary><small>

- **Reporter name:** Alexander S. Klenin
</small></details></h3>

## Description:

See steps to reproduce

## Steps to reproduce:

1) Put TChart on a form<br/>
2) Select ""Bottom"" axis<br/>
3) Modify any property, e.g. ""Margin""<br/>
\=><br/>
""Access violation"" message box is displayed --<br/>
strangely, without usual ""Exit or continue"" interface.

## Mantis conversion info:

- **Mantis ID:** 23178
- **Fixed in revision:** r39184 (#a134c17799ecc21c4b1479ac033aeb931de61ab5)",100
91042260,2012-10-21 10:28:26,[regression] OI: Fields disappear from object inspector,"
<h3><details><summary>Original Reporter info from Mantis: <small>Ask</small></summary><small>

- **Reporter name:** Alexander S. Klenin
</small></details></h3>

## Description:

See steps to reproduce.<br/>
The issue is not specific to a particular component.

## Steps to reproduce:

1) Put TPageControl on a form<br/>
2) Add a page<br/>
\=><br/>
""Name"" field is absent from the OI

## Mantis conversion info:

- **Mantis ID:** 23177
- **Fixed in revision:** r39184 (#a134c17799ecc21c4b1479ac033aeb931de61ab5)",100
91042258,2012-10-21 10:25:21,"[regression] OI: ""List index out of bounds"" while selecting item in treeview","
<h3><details><summary>Original Reporter info from Mantis: <small>Ask</small></summary><small>

- **Reporter name:** Alexander S. Klenin
</small></details></h3>

## Description:

See steps to reproduce.

## Steps to reproduce:

1) Put TPageControl on a form<br/>
2) Add a page<br/>
3) Click on ""TTabSheet1"" in OI treeview<br/>
\=><br/>
""List index out of bounds"" error

## Mantis conversion info:

- **Mantis ID:** 23176
- **Fixed in revision:** r39184 (#a134c17799ecc21c4b1479ac033aeb931de61ab5)",100
91041613,2012-09-27 07:15:14,"IDE cannot compile (Laz 1.0.1 fixes, Qt ws).","
<h3><details><summary>Original Reporter info from Mantis: <small>zoran</small></summary><small>

- **Reporter name:** Zoran Vučenović
</small></details></h3>

## Description:

The easiest way to see what it is — just try to rebuild the IDE (fixes branch) with qt widgetset and see.<br/>
There is obvious syntax error in variable declaration of ExtTextOut function — the line ""R, R1: TRect;"" is wrongly positioned. 

## Mantis conversion info:

- **Mantis ID:** 22995
- **Version:** 1.0.1 (SVN)
- **Fixed in revision:** 38855 (#802017a7f1d71d5e2a5e47aae8590e50f6a21838)
- **Target version:** 1.0.2",100
91039235,2012-07-01 18:51:41,Regression in TColorBox.OnChange / and / IDE color options broken,"
<h3><details><summary>Original Reporter info from Mantis: <small>Martin @martin_frb</small></summary><small>

- **Reporter name:** Martin Friebe
</small></details></h3>

## Description:

the color dropdown, OnChange event is now called BEFORE the custom color <br/>
picker runs.

This leads to the wrong color being seen by the app


In the IDE this breaks setting custom colors for the editor...

## Additional information:

This worked in 0.9.30

## Mantis conversion info:

- **Mantis ID:** 22352
- **Version:** 1.1 (SVN)
- **Fixed in revision:** 37846 (#994d2dce9f09d0b8d06802250dae1b62e57dc99d)",100
91038429,2012-05-18 18:10:23,DragManager crashes application,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

When we start an drag operation (ctl is dmAutomatic) inside form and form is closed in the meantime, lcl apps crashes.All widgetsets crashes because of that.<br/>
Example shows how and when it happens.

## Mantis conversion info:

- **Mantis ID:** 22067
- **Version:** 1.1 (SVN)
- **Fixed in version:** 1.1 (SVN)
- **Fixed in revision:** 37369 (#6dc8b8cf949043de5e1abed63d2657613beda119)",100
91036938,2012-04-19 15:20:02,Qt: TCustomTabControl sends too much resize events,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

TCustomTabControl sends too much resize events when form is started for the first time. Also, problem is that some of those events have ugly sizes (eg. it can be Rect(0,0,0,0)).

## Mantis conversion info:

- **Mantis ID:** 21805
- **Fixed in revision:** 36925 (#362e4674d293e46826f005de9883b2512cb0e7c7)
- **Target version:** 1.0.0
- **LazTarget:** 0.99.0",100
91034466,2012-03-08 19:27:45,Qt: TListView.OnItemChanged is completelly messed,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

When viewStyle = vsReport it triggers after mouse up, when viewStyle = vsList it triggers sometimes

## Mantis conversion info:

- **Mantis ID:** 21446
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 35836 (#7ebe5af93878405d711d394317d67db6fe9c4bf1),35842 (#7d643c2a7702fcd8dec987efcb7f596c4a37ad00),35863 (#c0a39ccd1b03ae63878f66a1a08eb16683c03651),35864 (#202ad173157815b8a94b4a14a41532277578ed92)
- **Target version:** 0.99.0",100
91034083,2012-02-24 09:20:53,Gtk2 returns wrong ScreenToClient result,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

TGtk2WidgetSet.ScreenToClient always returns window position, but not client.

## Mantis conversion info:

- **Mantis ID:** 21366
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 35574 (#a31497d03bd41a55332bb05b07e812afd9724332)
- **Monitored by:** » seier (Christian Blackburn)
- **Target version:** 0.99.0",100
91031363,2011-12-06 08:15:55,Qt: Modal windows minimizing misbehaviour under X11,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Need 2 clicks onto minimize button of modal window to minimize complete app.<br/>
Problem exists when theres > 0 non modal forms opened and modal form over them.<br/>
Easy to reproduce: Open lazarus about box and click minimize button.<br/>
Gtk2 works fine, also qt on windows and carbon works fine, so this is X11 only issue.

## Mantis conversion info:

- **Mantis ID:** 20824
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 33995 (#e2870d69ef4ed65c941bda3c92abd49b5a6dcd9b)
- **Target version:** 0.99.0",100
91030349,2011-11-11 20:09:25,Wrong implementation of Wide2AnsiMove in paswstring.pas. (Breaks Lazarus and compiled programs on Win9x systems).,"
<h3><details><summary>Original Reporter info from Mantis: <small>Bart @flyingsheep</small></summary><small>

- **Reporter name:** Bart Broersma
</small></details></h3>

## Description:

The implementation of Wide2AnsiMove in ($LazarusDir)/components/lazutils/paswstring.pas uses the wrong count parameter in the call to System.Move().<br/>
Therefor assigning a WideString variable to an AnsiString fails.

As a result, in the IDE (on Win9x), the ImageListEditor does no longer function, that is, when you press the Add... button, the OpenPictureDialog does not show.<br/>
Somewhere along the line of showing this dialog on Win9x systems there is a call to Wide2AnsiMove with source = LAZ_PIC_DIALOG_TEMPLATE and the resulting outputted AnsiString is LAZ_PIC_DIAL (padded with null-characters or garbage).

## Steps to reproduce:

In a Lazarus project include the paswstring unit.

``` pascal
procedure TForm1.TestAllBtnClick(Sender: TObject);
var
  W1, W2, W3: WideString;
  S1, S2, S3: String;
begin
  W1 := 'abc';
  W2 := 'ABC';
  W3 := WideUppercase(W1);
  if W3 <> W2 then writeln('####### Fail on WideUpperCase')
    else writeln('WideUppercase OK');
  W1 := 'abc';
  W2 := 'ABC';
  W3 := WideLowerCase(W2);
  if W1 <> W3 then writeln('####### Fail on WideLowerCase')
    else writeln('WideLowercase OK');
  S1 := 'abc';
  S2 := 'ABC';
  S3 := Utf8UpperCase(S1);
  if S3 <> S2 then writeln('####### Fail on Utf8UpperCase')
    else writeln('Utf8Uppercase OK');
  S1 := 'abc';
  S2 := 'ABC';
  S3 := Utf8LowerCase(S1);
  if S1 <> S3 then writeln('####### Fail on Utf8LowerCase')
    else writeln('Utf8Lowercase OK');
  W1 := 'ABC';
  S1 := W1;
  if (S1 <> W1) then writeln('###### Fail on Wide2Ansi')
    else writeln('Wide2Ansi OK');
  S1 := 'ABC';
  W1 := S1;
  if (S1 <> W1) then writeln('###### Fail on Ansi2Wide')
    else writeln('Ansi2Wide OK');
end; 
```

Build and run on Windows 98 or WindowsME

Expected output:

WideUppercase OK<br/>
WideLowercase OK<br/>
Utf8Uppercase OK<br/>
Utf8Lowercase OK<br/>
Wide2Ansi OK<br/>
Ansi2Wide OK

Actual output:

WideUppercase OK<br/>
WideLowercase OK<br/>
Utf8Uppercase OK<br/>
Utf8Lowercase OK<br/>
\###### Fail on Wide2Ansi<br/>
Ansi2Wide OK

## Additional information:

``` pascal
procedure Wide2AnsiMove(source:pwidechar;var dest:ansistring;len:SizeInt);
var
  widestr: widestring;
begin
  {$ifdef PASWSTRING_VERBOSE}WriteLn('Wide2AnsiMove START');{$endif}
  // Copy the originating string taking into account the specified length
  SetLength(widestr, len);
  System.Move(source^, widestr[1], len);

This should be replaced by
  System.Move(source^, widestr[1], len * SizeOf(WChar));
```

Patch is attached.

NB. Target = 0.99.0 because this is a regression.

## Mantis conversion info:

- **Mantis ID:** 20668
- **OS:** WinMe
- **OS Build:** MS
- **Build:** r32978
- **Platform:** i386
- **Version:** 0.9.31 (SVN)
- **Fixed in version:** 0.9.31 (SVN)
- **Fixed in revision:** 33538 (#6c181cc045c7d75719621d9296bab547a4f9b173), 33553 (#028f7122647d81c2b5903afa7a2657b4771f5ed2)
- **Target version:** 0.99.0",100
91029784,2011-10-30 19:47:39,Discrepancy when calling show (bringtofront) of designed form,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Just open mentioned example and focus SE, so form is behind SE.<br/>
Press F12 - good it works fine.<br/>
Now, again focus SE and call that form via Laz IDE main menu Window->Form1 (click)<br/>
Form comes to front but it's resized ?!?<br/>
Original form is w320xh270<br/>
Now it's 787x560<br/>
Same thing happens with gtk2 and qt under linux.<br/>
Also you don't need to focus editor , just call that form with F12 and then click Window->Form1 ,same thing happens - form is resized.<br/>
Example is here: http://bugs.freepascal.org/view.php?id=20589

## Mantis conversion info:

- **Mantis ID:** 20595
- **Target version:** 0.99.0",100
91028950,2011-10-11 04:39:01,Using the grid's scrollbar may result in wrong cell coods,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

Reported by anton:

""it leads to incorrect Index and some bugs (mouse cursor is not changed to crHSplit when it must, column header click occurs for not correct columns etc.)<br/>
To reproduce these bugs you need grid with many columns""

Attached test project.

## Mantis conversion info:

- **Mantis ID:** 20461
- **Version:** 0.9.31 (SVN)
- **Fixed in version:** 0.9.31 (SVN)
- **Fixed in revision:** 32873 (#db602a17171a4e5fb4316fec3695587037b3a7f2)
- **Target version:** 0.99.0",100
91024163,2011-06-30 10:52:03,Revision 31470 breaks building Lazarus IDE,"
<h3><details><summary>Original Reporter info from Mantis: <small>Bart @flyingsheep</small></summary><small>

- **Reporter name:** Bart Broersma
</small></details></h3>

## Description:

r31470 changes the definiton of TWindowState in forms.pp to:<br/>
TWindowState = (wsNormal, wsMinimized, wsMaximized, wsFullScreen);<br/>
(line 69)

```
In ide/main.pp 
 6489   ShowCommands: array[TWindowState] of Integer =
 6490     (SW_SHOWNORMAL, SW_MINIMIZE, SW_SHOWMAXIMIZED);
```

will now raise a syntax error: <br/>
C:\lazarus\ide\main.pp(6490,50) Fatal: Syntax error, "","" expected but "")"" found

## Mantis conversion info:

- **Mantis ID:** 19659
- **Build:** r31470
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 31475 (#97bd2af53610a5b69254bc138f57e6c7bc276df1)
- **Monitored by:** » dirks (Dirk Schiphorst)
- **Target version:** 0.9.31 (SVN)",100
91023887,2011-06-22 10:14:35,Qt: ugly palette behaviour of some controls,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

eg. set font color of form to clBlue, add TCheckBox on form, change font color of TCheckBox to clDefault - everything fine in design time.<br/>
In runtime, TCheckbox font color is always clBlue.<br/>
2nd example is ugly look of TScrollbars, if parent.font.color <> clDefault then scrollbar arrows gets that color - again very ugly.

## Mantis conversion info:

- **Mantis ID:** 19612
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 31330 (#7789de2338225dc9866e93430f73291e1eff002a)",100
91022160,2011-04-29 16:04:11,"QT: stay-on-top form left on screen, if whole app is minimized","
<h3><details><summary>Original Reporter info from Mantis: <small>Martin @martin_frb</small></summary><small>

- **Reporter name:** Martin Friebe
</small></details></h3>

## Description:

Using the Lazarus IDE, and the ""leak view"" window.<br/>
The ""leak view"" window can be made ""stay on top.

If you minimize the whole IDE (usin gthe minimize on the main-form, then:<br/>
\- With the w32 widgetset, the stay-on-top form disappears<br/>
\- With QT, it is left behind (while all other windows disappear)

That is QT under Windows.<br/>
Not tested with gtk2

## Mantis conversion info:

- **Mantis ID:** 19264
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 31400 (#7af4c64f9d6b1e32a25df8e29a578f1643dff805)
- **Target version:** 0.99.0",100
91020999,2011-03-26 20:42:51,Find in files and replace destroys source files,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

Search Excercise and replace with Exercise 

```
 If you have 
  TSomeExcercise = Class(TExcercise)

Then you'll end up with
  TSomeExercise = Class(Exercisee)
```

i.e. the second occurrence is replaced, but the placement is offset by 1<br/>
character, presumably because the replace term is one character shorter as  <br/>
the search term. this is corroborated by the fact that

```  (TMyExcercise, TRunMyExcercise, TMyExcerciseHistory)```<br/>

is replaced by

```  (TMyExercise, TRunMExercisee, TExerciseseHistory)```<br/>

i.e. the third occurrence is replaced, 2 characters offset.

## Mantis conversion info:

- **Mantis ID:** 19001
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 30049 (#dfb1e9eb0cda454f7aebbbc0bb2fbb1aea1d48ac)",300
91020257,2011-02-24 18:10:38,Strange IDE window behaviour OR closing modal form changes Z order,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

In the IDE under GTK2, modal IDE dialogs completely mess up the Z-order of IDE windows. This is extremely annoying, because after every property editor, you must look for the form/data module which you were editing.

## Steps to reproduce:

1. Start new project (application)<br/>
2. Drop TSQLQuery on TForm1. IDE looks as 'before' screenshot.<br/>
3. Edit SQL property of the TSQLQuery component. IDE looks as the 'During' screenshot. (notice how suddenly the code explorer has popped into view)<br/>
4. Press OK button. Dialog closes, and once more all windows are rearranged.<br/>
```  (see screenshot 'after') Note how TForm1 is hidden somewhere.```<br/>

## Mantis conversion info:

- **Mantis ID:** 18823
- **Platform:** Linux GTK2 
- **Version:** 0.9.31 (SVN)
- **Fixed in revision:** 34003 (#2ce9d7f56a45923396b77d752573a245eaeafad1)
- **Target version:** 0.99.0",100
91018165,2011-01-07 13:32:36,Build modes switching fails,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

When switch build modes via dropdown buton in IDE to win32 it won't compile, must open Project Options and click ok, then compiles ok.Switching back to linux  works ok.<br/>
Main OS is linux, cross compiling to win32.<br/>
IMPORTANT NOTE: SIMPLE FORM WITHOUT ANY COMPONENT WORKS FINE (SWITCHING).

Attached sample project contains TDBF component, so problem is reproducable all the time.<br/>
Lazarus 0.9.31 r28870 

## Mantis conversion info:

- **Mantis ID:** 18421
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 28897 (#1b48dc89de30945cfac2ef41cf317f5b837d869b)",100
91017888,2011-01-03 11:12:59,"Compiling error on ""Clean Up + Build all""","
<h3><details><summary>Original Reporter info from Mantis: <small>Kjow</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

I noticed that this problem is present only when I do a ""Clean Up   Buils all"".<br/>
With ""Build all"" only, everything works fine.

Revisions.

Lazarus: 28857M<br/>
FPC 2.5.1: 16691

...<br/>
...<br/>
...<br/>
Compiling messagedialogs.pp<br/>
Compiling resource units\i386-win32\messagedialogs.or<br/>
Linking .\messagedialogs.exe<br/>
85 lines compiled, 0.7 sec , 1200960 bytes code, 287208 bytes data<br/>
C:/Develop/fpc/2.4.2/bin/i386-Win32/fpc.exe -gl<br/>
\-Fu../lcl/units/i386-win32 -Fu../lcl/units/i386-win32/win32<br/>
\-Fu../components/synedit/units/i386-win32<br/>
\-Fu../components/codetools/units/i386-win32 -Fu. -FE.<br/>
\-FUunits/i386-win32 -di386 notebk.pp<br/>
Free Pascal Compiler version 2.5.1 [2011/01/02] for i386<br/>
Copyright (c) 1993-2010 by Florian Klaempfl<br/>
Target OS: Win32 for i386<br/>
Compiling notebk.pp<br/>
Compiling notebku.pp<br/>
C:\Develop\lazarus\examples\notebku.pp(87,19) Error: Identifier not<br/>
found ""PageCount""<br/>
C:\Develop\lazarus\examples\notebku.pp(104,19) Error: Identifier not<br/>
found ""PageCount""<br/>
C:\Develop\lazarus\examples\notebku.pp(304,13) Error: identifier<br/>
idents no member ""ShowTabs""<br/>
C:\Develop\lazarus\examples\notebku.pp(304,39) Error: identifier<br/>
idents no member ""ShowTabs""<br/>
C:\Develop\lazarus\examples\notebku.pp(305,17) Error: identifier<br/>
idents no member ""ShowTabs""<br/>
C:\Develop\lazarus\examples\notebku.pp(330,16) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(331,16) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(332,21) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(333,16) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(334,21) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(335,16) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(336,21) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(337,16) Error: identifier<br/>
idents no member ""TabPosition""<br/>
C:\Develop\lazarus\examples\notebku.pp(343) Fatal: There were 13<br/>
errors compiling module, stopping

## Additional information:

Don't care about path / FPC version mismatch, it's a misprint.

## Mantis conversion info:

- **Mantis ID:** 18375
- **Version:** 0.9.31 (SVN)
- **Fixed in version:** 0.9.31 (SVN)
- **Fixed in revision:** 28916 (#76f0a18ff029e9b8e00daa63481237819ca74cd2)
- **Target version:** 0.99.0",100
91017464,2010-12-20 20:07:09,Cloning a file in editor and clicking the new window crashes Lazarus,"
<h3><details><summary>Original Reporter info from Mantis: <small>JuhaManninen @JuhaManninen</small></summary><small>

- **Reporter name:** Juha Manninen
</small></details></h3>

## Description:

gdb backtrace included.<br/>
The number of windows open is not relevant. Just clone it and click the new window.<br/>
Tested with both QT and GTK2 bindings.<br/>
Built with -gl -gw -gh -Cr -Co

Linux Fedora 13 64-bit.

## Additional information:

``` pascal
Program received signal SIGSEGV, Segmentation fault.
0x00000000008d3058 in HANDLEALLOCATED (this=0x0) at include/wincontrol.inc:7164
7164      HandleAllocated := (FHandle <> 0);
Missing separate debuginfos, use: debuginfo-install avahi-0.6.25-7.fc13.x86_64 cups-libs-1.4.4-11.fc13.x86_64 expat-2.0.1-10.fc13.x86_64 flac-1.2.1-6.fc12.x86_64 fontconfig-2.8.0-1.fc13.x86_64 freetype-2.3.11-7.fc13.x86_64 gnutls-2.8.6-2.fc13.x86_64 ibus-qt-1.3.0-3.fc13.x86_64 kdebase-workspace-4.5.4-1.fc13.x86_64 kdebase-workspace-libs-4.5.4-1.fc13.x86_64 keyutils-libs-1.2-6.fc12.x86_64 lcms-libs-1.19-1.fc13.x86_64 libXdmcp-1.0.3-3.fc13.x86_64 libXi-1.3.2-1.fc13.x86_64 libXinerama-1.1-2.fc13.x86_64 libXrandr-1.3.0-5.fc13.x86_64 libasyncns-0.8-1.fc13.x86_64 libgcrypt-1.4.5-4.fc13.x86_64 libgpg-error-1.7-1.fc13.x86_64 libicu-4.2.1-8.fc13.x86_64 libmng-1.0.10-4.fc12.x86_64 libogg-1.2.0-1.fc13.x86_64 libselinux-2.0.94-2.fc13.x86_64 libsndfile-1.0.20-5.fc13.x86_64 libtasn1-2.4-2.fc13.x86_64 libtiff-3.9.4-1.fc13.x86_64 libuuid-2.17.2-9.fc13.x86_64 libvorbis-1.3.1-1.fc13.x86_64 libxcb-1.5-1.fc13.x86_64 nss-softokn-freebl-3.12.8-1.fc13.x86_64 pulseaudio-libs-0.9.21-7.fc13.x86_64 pulseaudio-libs-glib2-0.9.21-7.fc13.x86_64 sqlite-3.6.22-1.fc13.x86_64 tcp_wrappers-libs-7.6-59.fc13.x86_64
(gdb) bt
#0  0x00000000008d3058 in HANDLEALLOCATED (this=0x0) at include/wincontrol.inc:7164
#1  0x0000000000cf8622 in DOINVALIDATE (this=0x7fffed153f00) at synpluginsyncroedit.pp:725
#2  0x0000000000cf873e in DOCARETCHANGED (this=0x7fffed153f00, SENDER=0x7fffe896bec0) at synpluginsyncroedit.pp:741
#3  0x00000000006e56d5 in CALLNOTIFYEVENTS (this=0x7fffe891bd00, SENDER=0x7fffe896bec0) at lclproc.pas:1527
#4  0x0000000000d3b71a in DOUNLOCK (this=0x7fffe896bec0) at syneditpointclasses.pas:666
#5  0x0000000000d3a1ff in UNLOCK (this=0x7fffe896bec0) at syneditpointclasses.pas:378
#6  0x0000000000d11115 in DODECPAINTLOCK (this=0x7fffe8d6e7d0, SENDER=0x7fffe8d6e7d0) at synedit.pp:1922
#7  0x00000000006e56d5 in CALLNOTIFYEVENTS (this=0x7fffe9cd2e00, SENDER=0x7fffe8d6e7d0) at lclproc.pas:1527
#8  0x0000000000d8bf87 in SENDNOTIFICATION (this=0x7ffff1ab5ca0, AREASON=SENRDECPAINTLOCK, ASENDER=0x7fffe8d6e7d0) at synedittextbuffer.pp:1138
#9  0x0000000000d89e67 in SETUPDATESTATE (this=0x7ffff1ab5ca0, UPDATING=false, SENDER=0x7fffe8d6e7d0) at synedittextbuffer.pp:966
#10 0x0000000000d332b7 in ENDUPDATE (this=0x7ffff1ab5ca0, SENDER=0x7fffe8d6e7d0) at synedittextbase.pas:462
#11 0x0000000000d10c3d in DECPAINTLOCK (this=0x7fffe8d6e7d0) at synedit.pp:1860
#12 0x0000000000d13eec in MOUSEDOWN (this=0x7fffe8d6e7d0, BUTTON=MBLEFT, SHIFT=8, X=346, Y=236) at synedit.pp:2779
#13 0x00000000008dde97 in DOMOUSEDOWN (this=0x7fffe8d6e7d0, MESSAGE=..., BUTTON=MBLEFT, SHIFT=0) at include/control.inc:1720
#14 0x00000000008de5e4 in WMLBUTTONDOWN (this=0x7fffe8d6e7d0, MESSAGE=...) at include/control.inc:1855
#15 0x00000000006ac385 in SYSTEM_TOBJECT_$__DISPATCH$formal ()
#16 0x00000000008de570 in ?? ()
#17 0x00007fffe8d6e7d0 in ?? ()
#18 0x000000000000002a in ?? ()
#19 0x0000000000000201 in ?? ()
#20 0x00007fffffffc690 in ?? ()
#21 0x00007fffe8d6e7d0 in ?? ()
#22 0x00007fffffffc690 in ?? ()
#23 0x0000000001cc9140 in _$SOURCESYNEDITOR$_Ld14 ()
#24 0x00007fffe8d6e7d0 in ?? ()
#25 0x00007fffe8d76db0 in ?? ()
#26 0x00007fffe8d76db0 in ?? ()
#27 0x00007fffe8d6e7d0 in ?? ()
#28 0x000000ec00000002 in ?? ()
#29 0x00000000008ddcd5 in WNDPROC (this=0x7fffe8d6e7d0, THEMESSAGE=...) at include/control.inc:1684
#30 0x00000000008cd570 in WNDPROC (this=0x7fffe8d6e7d0, MESSAGE=...) at include/wincontrol.inc:5241
#31 0x0000000000d21e9e in WNDPROC (this=0x7fffe8d6e7d0, MSG=...) at synedit.pp:5629
#32 0x00000000009bec47 in DELIVERMESSAGE (this=0x7fffe8d76db0, MSG=@0x7fffffffc690) at qtwidgets.pas:4383
#33 0x00000000009ba7b3 in SLOTMOUSE (this=0x7fffe8d76db0, SENDER=0x2c84180, EVENT=0x7fffffffcf50) at qtwidgets.pas:2778
#34 0x00000000009b89e2 in EVENTFILTER (this=0x7fffe8d76db0, SENDER=0x2c84180, EVENT=0x7fffffffcf50) at qtwidgets.pas:2153
#35 0x00000000009d2585 in EVENTFILTER (this=0x7fffe8d76db0, SENDER=0x2c84180, EVENT=0x7fffffffcf50) at qtwidgets.pas:11357
#36 0x00000000009d38b8 in VIEWPORTEVENTFILTER (this=0x7fffe8d89a10, EVENT=0x7fffffffcf50, RETVAL=0x7fffffffc8ff) at qtwidgets.pas:11750
#37 0x00007ffff7d555ed in QLCLAbstractScrollArea::viewportEvent (this=<value optimized out>, event=0x7fffe896bec0) at src/qlclabstractscrollarea.h:40
#38 0x00000034261531f7 in QCoreApplicationPrivate::sendThroughObjectEventFilters (this=<value optimized out>, receiver=0x2c84180, event=0x7fffed153f00)
    at kernel/qcoreapplication.cpp:841
#39 0x0000003f61bab36c in QApplicationPrivate::notify_helper (this=0x20d4ed0, receiver=0x2c84180, e=0x7fffffffcf50) at kernel/qapplication.cpp:4302
#40 0x0000003f61bb1e2d in QApplication::notify (this=<value optimized out>, receiver=0xec, e=0x7fffffffcf50) at kernel/qapplication.cpp:3871
#41 0x0000003426153ddc in QCoreApplication::notifyInternal (this=0x20d4eb0, receiver=0x2c84180, event=0x7fffffffcf50) at kernel/qcoreapplication.cpp:726
#42 0x0000003f61bb101e in sendEvent (receiver=0x2c84180, event=0x7fffffffcf50, alienWidget=0x2c84180, nativeWidget=0x2beab90, buttonDown=0x3f6262f088, 
    lastMouseReceiver=..., spontaneous=true) at ../../src/corelib/kernel/qcoreapplication.h:215
#43 QApplicationPrivate::sendMouseEvent (receiver=0x2c84180, event=0x7fffffffcf50, alienWidget=0x2c84180, nativeWidget=0x2beab90, buttonDown=0x3f6262f088, 
    lastMouseReceiver=..., spontaneous=true) at kernel/qapplication.cpp:2971
#44 0x0000003f61c23155 in QETWidget::translateMouseEvent (this=0x2beab90, event=<value optimized out>) at kernel/qapplication_x11.cpp:4380
#45 0x0000003f61c21acc in QApplication::x11ProcessEvent (this=0x20d4eb0, event=0x7fffffffd870) at kernel/qapplication_x11.cpp:3513
#46 0x0000003f61c4ab92 in x11EventSourceDispatch (s=0x20d90d0, callback=0, user_data=0x0) at kernel/qguieventdispatcher_glib.cpp:146
#47 0x0000003edf83bd02 in g_main_dispatch (context=0x20d8120) at gmain.c:1960
#48 IA__g_main_context_dispatch (context=0x20d8120) at gmain.c:2513
#49 0x0000003edf83fae8 in g_main_context_iterate (context=0x20d8120, block=1, dispatch=1, self=<value optimized out>) at gmain.c:2591
#50 0x0000003edf83fc9c in IA__g_main_context_iteration (context=0x20d8120, may_block=1) at gmain.c:2654
#51 0x0000003426179863 in QEventDispatcherGlib::processEvents (this=0x20c46b0, flags=<value optimized out>) at kernel/qeventdispatcher_glib.cpp:412
#52 0x0000003f61c4a84e in QGuiEventDispatcherGlib::processEvents (this=<value optimized out>, flags=<value optimized out>)
    at kernel/qguieventdispatcher_glib.cpp:204
#53 0x000000342615631f in QCoreApplication::processEvents (flags=...) at kernel/qcoreapplication.cpp:918
#54 0x00007ffff7d0069f in QCoreApplication_processEvents (flags=<value optimized out>) at src/qcoreapplication_c.cpp:105
#55 0x0000000000916c46 in APPWAITMESSAGE (this=0x7ffff7b5def0) at qtobject.inc:250
#56 0x00000000006da00f in IDLE (this=0x7ffff7b5c350, WAIT=true) at include/application.inc:384
---Type <return> to continue, or q <return> to quit---
#57 0x00000000006dc8f1 in HANDLEMESSAGE (this=0x7ffff7b5c350) at include/application.inc:1230
#58 0x00000000006dd01e in RUNLOOP (this=0x7ffff7b5c350) at include/application.inc:1362
#59 0x0000000000916c28 in APPRUN (this=0x7ffff7b5def0, ALOOP=...) at qtobject.inc:233
#60 0x00000000006dcfa4 in RUN (this=0x7ffff7b5c350) at include/application.inc:1350
#61 0x000000000069c7f4 in main () at lazarus.pp:112
```

## Mantis conversion info:

- **Mantis ID:** 18281
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 28794 (#caad22e1dbf22eb6adf3a4a8b030acda157a3af8)
- **Target version:** 0.9.30",100
91016855,2010-12-03 17:42:38,Can't build ide,"
<h3><details><summary>Original Reporter info from Mantis: <small>bonmario @bonmario</small></summary><small>

- **Reporter name:** Mario Bonati
</small></details></h3>

## Description:

Hi, i'm trying to build ide (SVN 28612) with commands:<br/>
make bigideclean<br/>
make bigide


This is the error:<br/>
Compiling lazbuild.lpr<br/>
lazbuild.lpr(467,84) Error: Wrong number of parameters specified for call to ""GetIDEInstallPackageOptions""<br/>
lazbuild.lpr(1277) Fatal: There were 1 errors compiling module, stopping<br/>
Fatal: Compilation aborted


Hi, Mario

## Mantis conversion info:

- **Mantis ID:** 18147
- **OS:** Linux
- **OS Build:** 10.10
- **Build:** SVN 28612
- **Platform:** Ubuntu
- **Version:** 0.9.29 (SVN)
- **Target version:** 0.9.30",300
91016462,2010-11-22 13:34:08,Cannot build lazarus with -dDebug (make bigide) because of tchart,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Range check fails in tafuncseries.pas line 288.

## Mantis conversion info:

- **Mantis ID:** 18018
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 28525 (#afcd16b76caf028b17d6388b0db9ba4c082c36a6)
- **Target version:** 0.9.30",200
91015811,2010-11-07 21:20:20,Revision 28130 will not compile.,"
<h3><details><summary>Original Reporter info from Mantis: <small>Bart @flyingsheep</small></summary><small>

- **Reporter name:** Bart Broersma
</small></details></h3>

## Description:

Tried to build r28130.<br/>
Got error: syncompletion.pas(162,74) Error: Identifier not found ""WM_MOUSEWHEEL""

## Additional information:

Linux GTK2 fpc 2.4.0

## Mantis conversion info:

- **Mantis ID:** 17872
- **OS:** Suse Linux
- **OS Build:** 10.0
- **Build:** revision 28130
- **Platform:** i386
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 28132 (#1730103b56f5f094b1aa34652a137751bc8c7b3b)
- **Target version:** 0.9.30",100
91014814,2010-10-30 10:13:01,Regression: IDE -> Project options -> InvalidatePreferredSize loop  detected,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

TControl.InvalidatePreferredSize loop detected ButtonPanel:TButtonPanel Bounds=l=6,t=578,r=825,b=612.

Press OK to ignore and risk data corruption.<br/>
Press Cancel to kill the program.

Lazarus 0.9.29 r27967 FPC 2.4.1

## Additional information:

```
TApplication.HandleException TControl.InvalidatePreferredSize loop detected ButtonPanel:TButtonPanel Bounds=l=6,t=578,r=825,b=612
  Stack trace:
  $081D73EE  RAISELOOP,  line 4695 of ./include/control.inc
  $081D72FB  TCONTROL__INVALIDATEPREFERREDSIZE,  line 4711 of ./include/control.inc
  $081CE3E5  TCONTROL__DOSETBOUNDS,  line 450 of ./include/control.inc
  $081C416B  TWINCONTROL__DOSETBOUNDS,  line 3731 of ./include/wincontrol.inc
  $081CDD7D  TCONTROL__CHANGEBOUNDS,  line 380 of ./include/control.inc
  $081D6E6E  TCONTROL__SETBOUNDSKEEPBASE,  line 4542 of ./include/control.inc
  $081C2A58  DOPOSITION,  line 2974 of ./include/wincontrol.inc
  $081C2269  DOALIGN,  line 3087 of ./include/wincontrol.inc
  $081C1DD3  TWINCONTROL__ALIGNCONTROLS,  line 3166 of ./include/wincontrol.inc
  $081C8AA1  TWINCONTROL__ALIGNCONTROL,  line 6159 of ./include/wincontrol.inc
  $081D1D03  AUTOSIZECONTROL,  line 2368 of ./include/control.inc
  $081D1D38  AUTOSIZECONTROL,  line 2370 of ./include/control.inc
  $081D1AD2  TCONTROL__DOALLAUTOSIZE,  line 2413 of ./include/control.inc
  $081C3940  TWINCONTROL__DOALLAUTOSIZE,  line 3475 of ./include/wincontrol.inc
  $081D7673  TCONTROL__ENABLEAUTOSIZING,  line 4801 of ./include/control.inc
  $081D4C79  TCONTROL__SETVISIBLE,  line 3680 of ./include/control.inc
  $0808089F  TCUSTOMFORM__SETVISIBLE,  line 404 of ./include/customform.inc
```

## Mantis conversion info:

- **Mantis ID:** 17764
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 27972 (#5c25c80665b750be3c6ab35055666830678a6a3b)
- **Target version:** 0.9.30",200
91014594,2010-10-28 12:11:32,Regression: ActiveControl is wrong as of r27900,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

ActiveControl setted up during design time isn't respected anymore because of r27900. Now it always calls FindDefaultForActiveControl() but it shouldn't if ActiveControl is already assigned.Before r27900 everything is ok.

## Mantis conversion info:

- **Mantis ID:** 17740
- **Fixed in revision:** 27925 (#e8bc52f11adb69c6d31abc2ab1f7210f8e050f71)
- **Target version:** 0.9.30",100
91014076,2010-10-17 12:00:16,Qt: QTreeWidget (TListView with vsReport style) bug with inserting items in the middle of the list.,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

eg. moving items in TListView, delete item from index 1 -> insert that item to pos 5 etc.<br/>
QTreeWidget is completely broken here, items captions from TListView completely diffs from QTreWidget items texts.<br/>
I've already fixed this bug, but opened it to easy track if it raises some new (other) bug in current implementation.

## Mantis conversion info:

- **Mantis ID:** 17650
- **Fixed in revision:** 27742 (#08bb81fce38b49acc2f6809520d0302e285e2a92)",200
91013934,2010-10-11 09:36:54,Gtk2: RawImage ops are wrong,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Try examples/dragimagelist under gtk2, and drag that button.<br/>
Image is much smaller (width and height are much smaller), under qt and others it's ok.

## Mantis conversion info:

- **Mantis ID:** 17601
- **Version:** 0.9.29 (SVN)",100
91091840,2010-10-10 12:02:46,Patch to fix compilation for the fpc-xpcom branch,"
<h3><details><summary>Original Reporter info from Mantis: <small>Joost</small></summary><small>

- **Reporter name:** Joost van der Sluis
</small></details></h3>

## Description:

There is a fpc-xpcom-branch in which the definition of IInterface has been changed and the constref keyword is introduced. This patch will make Lazarus compile with both the xpcom branch, and other fpc-versions.

This patch should be applied before I merge the xpcom branch to fpc-trunk, so that Lazarus' compilation will not fail when that happens.

## Mantis conversion info:

- **Mantis ID:** 17594
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 27667 (#6a2f27cac203eaebe85f1319ae552f3bc8bddfca)
- **Target version:** 0.9.30",200
91103026,2010-09-20 17:01:24,roIgnoreFieldNotFound=true  option makes aggregation function not working,"
<h3><details><summary>Original Reporter info from Mantis: <small>forest</small></summary><small>

- **Reporter name:** Boguslaw Brandys
</small></details></h3>

## Description:

When in TfrReport.Options there is roIgnoreFieldNotFound=true  option it disable any aggregation function used in group footer band .While any static text appear in group footer any computed value is empty

## Steps to reproduce:

I created a project using ODBC connection from sqldb suite thinking it is a problem with recordcount maybe but finally it seems the internal logic of group band is broken.

## Mantis conversion info:

- **Mantis ID:** 17452
- **OS:** windows xp home
- **OS Build:** 32-bit
- **Build:** Lazarus 0.9.29 r27372 FPC 2.5.1 
- **Platform:** windows
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 27429 (#1a459cb90ca678e0036939b52103f691bc1c6877)
- **Target version:** 0.9.30",100
91013260,2010-09-14 11:48:30,ScrollBox.VertScrollBar.Position values don't save,"
<h3><details><summary>Original Reporter info from Mantis: <small>GAMER</small></summary><small>

- **Reporter name:** Miroslav Nyameshchuk
</small></details></h3>

## Description:

ScrollBox.VertScrollBar.Position values (in object inspector) don't save after reopen project or form. Always =0 after open form.

## Mantis conversion info:

- **Mantis ID:** 17409
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.31 (SVN)
- **Fixed in revision:** 30220 (#5e397ae58328a1f76f6afdf41eb24b2c86d7c11c)
- **Target version:** 0.99.0",100
91013207,2010-09-11 13:47:19,TGtk2WidgetSet.WindowFromPoint() returns wrong results,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

When we use WindowFromPoint(P) in our app it returns handle from control under mouse pointer, in case of gtk2 returned handle cannot be found by FindControl() for some controls. eg. TCustomForm, TPanel, TTreeView etc.<br/>
Also, WindowFromPoint() in gtk2 case can return invisible or disabled control but shouldn't.

## Mantis conversion info:

- **Mantis ID:** 17389
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 27311 (#294038735076bffba4685d96ab1f11759b5f316d),28288 (#9815e521d3f8d53de5cf0159c2a202344e454a94)
- **Target version:** 0.9.30",100
91011666,2010-07-30 12:11:08,TDbGrid crash when connected to empty result of TSQlQuery,"
<h3><details><summary>Original Reporter info from Mantis: <small>forest</small></summary><small>

- **Reporter name:** Boguslaw Brandys
</small></details></h3>

## Description:

Crash occur when SQL returned with empty set because for example table is empty.Error Canvas does not allow drawing

## Mantis conversion info:

- **Mantis ID:** 17067
- **OS:** windows xp home
- **OS Build:** 32-bit
- **Build:** Lazarus 0.9.29 r26906 FPC 2.5.1 
- **Platform:** windows
- **Fixed in version:** 0.9.29 (SVN)
- **Target version:** 0.9.30",100
91011651,2010-07-28 17:53:55,Maximizing a form do not resize childs with align=alClient,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

This problem started on r26750

To reproduce the problem<br/>
in a new project, change form's window state to wsMaximized, drop a panel and change align to alClient, run the project. The window is maximized, but the panel remains the original size.


## Mantis conversion info:

- **Mantis ID:** 17053
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 26880 (#59a81fd8a533c33e6f88bc869a729757f404c28b)
- **Target version:** 0.9.30",200
91011575,2010-07-24 09:39:57,Division by zero when loading previously working project with a few forms and datamodule,"
<h3><details><summary>Original Reporter info from Mantis: <small>forest</small></summary><small>

- **Reporter name:** Boguslaw Brandys
</small></details></h3>

## Description:

Project which was loaded perfectly all the time causes now division by zero on loading.

## Steps to reproduce:

Sorry,cannot publish my project

## Additional information:

Lazarus stacktrace attached

## Mantis conversion info:

- **Mantis ID:** 17024
- **OS:** windows xp home
- **OS Build:** 32-bit
- **Build:** Lazarus 0.9.29 r26759 FPC 2.5.1 
- **Platform:** windows
- **Version:** 0.9.28.3 (SVN)
- **Fixed in revision:** 26801 (#d2392e836535547c1085b3d51800e3055e12fe4f)
- **Target version:** 0.9.30",100
91011341,2010-07-18 18:53:29,Left ALt key no longer works,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

left-alt tab is registered as tab in an LCL application.<br/>
If I use the right-alt key, then it is registered as alt-tab.

In the classic (TP) keyboard scheme of the IDE, ALT-Backspace is the 'Undo' function. This no longer works. <br/>
It used to work in earlier versions of Lazarus, in fact, as long as I can remember.

At home I have the latest SVN version of Lazarus with the problem. <br/>
At work I have an older version (maybe half a year or so) and there it works. Both systems run KUbuntu 10.4, 64-bit.

## Steps to reproduce:

\- Select TP keyboard scheme<br/>
\- Verify that Alt-tab is assigned to 'undo'<br/>
\- Type text in editor<br/>
\- Press alt-tab using left alt.<br/>
\-> reacts as normal backspace, i.e. undoes 1 character at a time.<br/>
(selecting undo from edit menu undoes all typing, as it should)

## Additional information:

Using linux, 64-bit GTK2

## Mantis conversion info:

- **Mantis ID:** 16978
- **Platform:** Linux-GTK2
- **Version:** 0.9.29 (SVN)
- **Target version:** 0.9.30",200
91008011,2010-04-22 13:33:16,Qt: TListView doesn't get OnChange() event when TListView.CheckBoxes=TRUE and pressed Space Key,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

TQtTreeWidget -> when we press Space key it changes checkbox , but doesn't send such change to lcl like mouse click does.

## Mantis conversion info:

- **Mantis ID:** 16317
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 24850 (#573fd149a27f7d13ac998ab2423d5b0dae38aaf2)",100
91007793,2010-04-15 08:13:35,Strange behavior of TListBox OnClick when ClickOnSelChange is true (Qt <> Gtk2),"
<h3><details><summary>Original Reporter info from Mantis: <small>ivo_steinmann@gmx.net</small></summary><small>

- **Reporter name:** Ivo Steinmann
</small></details></h3>

## Description:

With Qt Widget set I get notified, if<br/>
everything gets unselected.

On gtk2 this behavior is different.

In the other case, on Qt, when I select<br/>
the first time, two notifications are thrown.

## Steps to reproduce:

take a look at the sample project. test with gtk2 and Qt. Maybe on winapi there's another behavior also.

## Mantis conversion info:

- **Mantis ID:** 16275
- **OS:** Linux Gentoo x86_64
- **OS Build:** latest
- **Build:** r24610
- **Platform:** AMD64 Phenom X4
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 24723 (#3d2e80c49c0678123dd749362c01a365152980ce)",100
91006955,2010-03-23 09:15:07,Problem whein i paste from Clipboard (regression),"
<h3><details><summary>Original Reporter info from Mantis: <small>bonmario @bonmario</small></summary><small>

- **Reporter name:** Mario Bonati
</small></details></h3>

## Description:

See this code:

``` pascal
//////////////////////////BEGIN///////////////////////
procedure TForm1.Button1Click(Sender: TObject);
var Pippo, Pippo1:String;
begin
  Pippo:='Prova';
  Clipboard.AsText:=Pippo;

  InputQuery('Ricerca nell''albero','Digita la stringa da cercare:', Pippo1);
end;
//////////////////////////END///////////////////////
```

When InputQuery is showed and i paste from clipboard, the value of the InputQuery is ""ProvaProva"" instead of ""Prova""

## Mantis conversion info:

- **Mantis ID:** 16086
- **OS:** Windows XP
- **OS Build:** SP3
- **Build:** Lazarus 0.9.29 r24164 FPC 2.4.0 
- **Platform:** Windows
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 24206 (#db2312a9d865f0ceebc305499aa67b2222e5e6b8)
- **Monitored by:** » mdaems (Mark Daems), » warrence (Stefan Müller), » @martin_frb (Martin Friebe)
- **Target version:** 0.9.30",200
91006617,2010-03-14 22:11:10,"Resizing ""Search Results"" window freezes IDE after new autosize","
<h3><details><summary>Original Reporter info from Mantis: <small>etrusco</small></summary><small>

- **Reporter name:** Flávio Etrusco
</small></details></h3>

## Description:

While resizing the ""Search Results"" dialog (results from Find in Files) a bit, Lazarus freezes in an infinite loop (i.e. using 100% CPU).<br/>
Stacktrace attached (gdb.txt).

## Mantis conversion info:

- **Mantis ID:** 15996
- **Version:** 0.9.29 (SVN)
- **Target version:** 0.9.30",100
91006395,2010-03-11 16:40:56,Access Violation while trying to code-complete (with patch),"
<h3><details><summary>Original Reporter info from Mantis: <small>alexionne</small></summary><small>

- **Reporter name:** Aleksa Todorovic
</small></details></h3>

## Description:

I get AV when I try to code complete in my project. Unfortunately, I am not able to reproduce the problem with small project, but here is stack trace of exception.

```
#0 TSYNBASECOMPLETIONFORM__DOONRESIZE(0x97eb920) at syncompletion.pas:841
#1 TCONTROL__RESIZE(0x97eb920) at .\include\control.inc:2986
#2 TWINCONTROL__INITIALIZEWND(0x97eb920) at .\include\wincontrol.inc:7176
#3 TCUSTOMFORM__INITIALIZEWND(0x97eb920) at .\include\customform.inc:926
#4 TWINCONTROL__CREATEWND(0x97eb920) at .\include\wincontrol.inc:7054
#5 TSCROLLINGWINCONTROL__CREATEWND(0x97eb920) at .\include\scrollingwincontrol.inc:32
#6 TCUSTOMFORM__CREATEWND(0x97eb920) at .\include\customform.inc:2134
#7 TFORM__CREATEWND(0x97eb920) at .\include\customform.inc:2535
#8 TWINCONTROL__CREATEHANDLE(0x97eb920) at .\include\wincontrol.inc:6934
#9 TWINCONTROL__HANDLENEEDED(0x97eb920) at .\include\wincontrol.inc:7412
#10 TWINCONTROL__GETHANDLE(0x97eb920) at .\include\wincontrol.inc:6222
#11 TWINCONTROL__GETDEVICECONTEXT(0, 0x97eb920) at .\include\wincontrol.inc:7821
#12 TCONTROLCANVAS__CREATEHANDLE(0x8dbbd98) at .\include\controlcanvas.inc:90
#13 TCANVAS__REQUIREDSTATE([CSHANDLEVALID..CSBRUSHVALID], 0x8dbbd98) at .\include\canvas.inc:1550
#14 TCANVAS__GETHANDLE(0x8dbbd98) at .\include\canvas.inc:1450
#15 TSYNBASECOMPLETIONFORM__FONTCHANGED(0x7918dd0, 0x97eb920) at syncompletion.pas:862
#16 TSYNBASECOMPLETIONFORM__CREATE(0x9319118, 0xc6b968, 0x97eb920) at syncompletion.pas:426
#17 TSYNBASECOMPLETION__CREATE(0x7452688, 0x0, 0x9319118) at syncompletion.pas:927
#18 TSYNCOMPLETION__CREATE(0x7452688, 0xc6c36c, 0x9319118) at syncompletion.pas:1390
#19 TSOURCENOTEBOOK__CREATECOMPLETIONFORM(0x7452688) at sourceeditor.pp:3732
#20 TSOURCEEDITOR__STARTIDENTCOMPLETIONBOX(true, 0x787f360) at sourceeditor.pp:2806
#21 TSOURCEEDITOR__PROCESSUSERCOMMAND(0x91a1088, 1103, '', 0x0, 0x787f360) at sourceeditor.pp:1729
#22 TCUSTOMSYNEDIT__DOONPROCESSCOMMAND(1103, '', 0x0, 0x91a1088) at synedit.pp:6294
#23 TCUSTOMSYNEDIT__COMMANDPROCESSOR(1103, '', 0x0, 0x91a1088) at synedit.pp:5662
#24 TCUSTOMSYNEDIT__KEYDOWN(0, [SSCTRL], 0x91a1088) at synedit.pp:2234
#25 TWINCONTROL__KEYDOWNBEFOREINTERFACE(0, [SSCTRL], 0x91a1088) at .\include\wincontrol.inc:5364
#26 TWINCONTROL__DOKEYDOWNBEFOREINTERFACE({MSG = 48384, CHARCODE = 0, UNUSED = 1792, KEYDATA = 3735553, RESULT = 0}, 0x91a1088) at .\include\wincontrol.inc:5501
#27 TWINCONTROL__CNKEYDOWN({MSG = 48384, CHARCODE = 0, UNUSED = 1792, KEYDATA = 3735553, RESULT = 0}, 0x91a1088) at .\include\wincontrol.inc:6691
#28 SYSTEM_TOBJECT_$__DISPATCH$formal at :0
#29 TWINCONTROL__WMSIZE({MSG = 48384, SIZETYPE = 117440512, WIDTH = 1, HEIGHT = 57, RESULT = 0}, 0x91a1088) at .\include\wincontrol.inc:6679
#30 TWINCONTROL__WNDPROC({MSG = 48384, WPARAM = 117440512, LPARAM = 3735553, RESULT = 0, WPARAMLO = 0, WPARAMHI = 1792, LPARAMLO = 1, LPARAMHI = 57, RESULTLO = 0, RESULTHI = 0}, 0x91a1088) at .\include\wincontrol.inc:5130
#31 TCUSTOMSYNEDIT__WNDPROC({MSG = 48384, WPARAM = 117440512, LPARAM = 3735553, RESULT = 0, WPARAMLO = 0, WPARAMHI = 1792, LPARAMLO = 1, LPARAMHI = 57, RESULTLO = 0, RESULTHI = 0}, 0x91a1088) at synedit.pp:5223
#32 DELIVERMESSAGE(0x91a1088, void) at lclmessageglue.pas:111
#33 WINDOWPROC(11209350, 256, 32, 3735553) at win32callback.inc:2417
```

## Mantis conversion info:

- **Mantis ID:** 15964
- **OS:** XP
- **Platform:** Windows
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 23948 (#2749b31b1e013f4ccd69fbeabfe935ba68dd1d17)
- **Target version:** 0.9.30",200
91003723,2009-12-22 10:49:29,Designer does not set Message.Result after popup menu is handled,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

It should be setted as 1 (like in control.inc->WMContextMenu()) so widgetset <br/>
is informed about popup menu. This directly produces bug under qtlcl since<br/>
in designer message.Result is always 0.<br/>
Probably other widgetsets are directly affected too.


## Additional information:

``` pascal
lazarus/designer/designer.pp
procedure TDesigner.HandlePopupMenu(Sender: TControl; var Message: TLMMouse);
var
  PopupPos: TPoint;
begin
  PopupMenuComponentEditor := GetComponentEditorForSelection;
  BuildPopupMenu;
  with ControlSelection do
    PopupPos := Point(Left + Width, Top);
  with Form.ClientToScreen(PopupPos) do
    FDesignerPopupMenu.Popup(X, Y);
  Message.Result := 1; // <--- THIS IS MISSING
end;
```

## Mantis conversion info:

- **Mantis ID:** 15409
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 23234 (#d8faa4f5041da487c13cde233997cb7f3314c224)",100
91003191,2009-12-12 13:32:22,make bigide broken because of Jcf2,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

1.Makefiles contains ../../UI/Settings instead of ../../Ui/Settings<br/>
2.frFiles.pas cannot be compiled with 2.2.5, because lfm is added as resource {$R *.lfm} -> should be added lrs file and in initialization section {$i frFiles.lrs}

## Mantis conversion info:

- **Mantis ID:** 15328
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 23118 (#9e3f9a85b324b72d3512eac044dd34353a59e8f1)
- **Target version:** 0.9.30",100
91001342,2009-10-18 09:31:11,Qt: TScrollBox - vertical scrollbar doesn't work anymore,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

It does not change anything by mouse wheel or by moving vertical scrollbar.<br/>
Horizontal one works ok.

## Mantis conversion info:

- **Mantis ID:** 14840
- **Fixed in revision:** 22225 (#1ac7f1cedc0343f9223f65dcea2ddbd2eac9bb0b)
- **Target version:** 0.9.30",100
91001166,2009-10-11 09:32:44,Qt: complete desktop freeze when execute qtlcl app from another app in blocking mode - Win32,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Happens only on Win32.<br/>
When our qt-lcl app is executed from another app , using poWaitOnExit in TProcess.Options after just one mouse click on newly started app (inside main form or any control except buttons) complete windows desktop freeze (windows XP SP2, SP3). <br/>
Under wine it works ok.

## Additional information:

Just for my memo: mouse grabbing is definitely suspected.

## Mantis conversion info:

- **Mantis ID:** 14779
- **Version:** 0.9.29 (SVN)
- **Fixed in revision:** 22096 (#1f47e04ef2fe1e9a711ee0bd0f61a67b29f926c3)
- **Target version:** 0.9.30",100
90999656,2009-09-01 21:01:47,drag & drop from memo does not work,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

TMemo seems to use some default GTK 2 drag&drop stuff. When drag&dropping from TMemo to another control, the StartDrag event of TMemo is called, but the<br/>
OnDragDrop event of the target control is never executed.

## Steps to reproduce:

1. Drop listbox and memo on a form<br/>
2. In OnStartDrag of Memo, create TDragObjectEx  and write logmessage<br/>
3. Implement some log message in OnDragDrop of TListBox.<br/>
4. Run project<br/>
5. Try to drag something from memo to listbox. 

Notice strange shape of cursor.<br/>
The OnDragDrop event is never executed, but OnStartDrag is executed.

## Mantis conversion info:

- **Mantis ID:** 14477
- **Version:** 0.9.29 (SVN)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",200
91090621,2009-09-01 20:53:05,Custom Drag and drop objects implemented wrong,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

The Delphi documentation states that if the DragObject used in drag&drop operations  created in the OnStartDrag is a descendant of TDragObject, then the Source parameter in the DragDrop event is the DragObject instance itself, if not it is the Control object that started the drag operation.

The LCL always sets the source to the source control if it is a descendant of TDragObjectEx. That is because the LCL implementation uses the auto-free feature of TDragObjectEx  to determine source parameter. This is wrong. 

The attached patch fixes this, and implements the behavior as documented in Delphi.<br/>
i.e. for all descendents of TDragObject, as the source parameter in the OnDragDrop event, the object itself is passed.

## Mantis conversion info:

- **Mantis ID:** 14476
- **OS:** All
- **Platform:** All
- **Version:** 0.9.29 (SVN)
- **Fixed in version:** 0.9.29 (SVN)
- **Fixed in revision:** 21544 (#be1d125c8837ae55819f87fc872deb3c29759046)
- **Target version:** 0.9.30",200
90967237,2009-06-06 07:45:40,Transparency bug - regression,"
<h3><details><summary>Original Reporter info from Mantis: <small>zeljko@holobit.net @zeljan1</small></summary><small>

- **Reporter name:** Zeljan Rikalo
</small></details></h3>

## Description:

Due to latest changes in intfgrahpics .... this isn't fixed.<br/>
Here is screenshoot and test project which include png for button.<br/>
Before latest changes in intfgraphics it was ok.<br/>
You can see also menus with black transparency. TImageList is populated with png's.<br/>
One thing to mention: DURING DESIGN TIME eg. LOADING TBitBtn glyph IT LOOKS OK, seem that something is wrong with writing of lfm/lrs because mask is wrong during runtime, also if you close lazarus and open same form - it'll loose it's mask - becomes black.

## Additional information:

Tested with r 20466 on FC11 qt (screenshoot) and gtk2

## Mantis conversion info:

- **Mantis ID:** 13917
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 20498 (#960131938743495c74408840b1ab213582f7924b)
- **Target version:** 0.9.28",100
90967213,2009-06-05 08:57:51,"Codetools allways jump to Amiga zlib file, when zlib is in uses part","
<h3><details><summary>Original Reporter info from Mantis: <small>ivo_steinmann@gmx.net</small></summary><small>

- **Reporter name:** Ivo Steinmann
</small></details></h3>

## Description:

Codetools allways jump to Amiga zlib file, when zlib is in uses clause

## Steps to reproduce:

\-Create new project<br/>
\-Add zlib to the mainforms uses part<br/>
\-Press CTRL+SHIFT somewhere to open codetools

now codetools should jump to the zlib.pp of amiga:

{$I useamigasmartlink.inc}<br/>
{$ifdef use_amiga_smartlink}<br/>
```   {$smartlink on}```<br/>
{$endif use_amiga_smartlink}

## Mantis conversion info:

- **Mantis ID:** 13912
- **OS:** Linux Gentoo x86_64
- **OS Build:** latest
- **Platform:** AMD64 Phenom X4
- **Version:** 0.9.27 (SVN)
- **Target version:** 1.0.0
- **LazTarget:** 0.9.30",100
90967088,2009-05-28 18:06:27,Carbon: source editor does not show caret,"
<h3><details><summary>Original Reporter info from Mantis: <small>skalogryyz</small></summary><small>

- **Reporter name:** Dmitry Boyarintsev
</small></details></h3>

## Description:

SynEdit Source editor does not show caret since fixing windows focusing.<br/>
Reason: incorrect Carbon WinAPI function results (GetFocus).

## Additional information:

as a temporary solution, SynEdit component can be reverted back to r20240

cd components/synedit<br/>
svn update -r 20240

and the IDE rebuilt.

## Mantis conversion info:

- **Mantis ID:** 13855
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 20293 (#e1665eb0e81a3a78f5b31aa36c563144bcc28db2)
- **Monitored by:** » bkc1974 (Brad Campbell)
- **Target version:** 0.9.28",200
90967018,2009-05-26 19:16:02,Renaming a component that has an event handler produces AV,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

if a component, for example a button has an event handler, trying to rename produces an AV, this is a regresion, 0.9.26 works fine. see Steps to Reproduce.

```
TMainIDE.OnDesignerRenameComponent Old=btnOk:TButton New=btnAceptar Owner=Form1:TForm1
RenameMethods OldMethodName=""btnOkClick"" NewMethodName=""btnAceptarClick""
Codetools  Stack trace:
  $0000000000D21410 line 1054 of eventcodetool.pas
  $0000000000D1FC22 line 620 of eventcodetool.pas
  $0000000000D1FA21 line 596 of eventcodetool.pas
  $0000000000B7432F line 3139 of codetoolmanager.pas
  $00000000007A0A5F line 13608 of main.pp
  $00000000007A03FF line 13725 of main.pp
  $0000000000BEE2B7 line 2270 of ../designer/designer.pp
  $0000000000BD6DAA line 469 of ../designer/jitforms.pp
  $00000000007E79DF line 331 of ../objpas/classes/compon.inc
  $00000000008CA976 line 2457 of include/control.inc
  $000000000080C518 line 1343 of ../objpas/typinfo.pp
  $0000000000AB77D9 line 2647 of propedits.pp
  $0000000000AB934D line 3183 of propedits.pp
  $0000000000ABE5C0 line 4535 of propedits.pp
  $0000000000A9769D line 1247 of objectinspector.pp
  $0000000000A9BBF6 line 2085 of objectinspector.pp
  $0000000000A9B7B1 line 2106 of objectinspector.pp
### TCodeToolManager.HandleException: ""EAccessViolation: Access violation""
TMainIDE.OnDesignerRenameComponent.RenameMethods failed OldMethodName=""btnOkClick"" NewMethodName=""btnAceptarClick"" Error=EAccessViolation: Access violation
TMainIDE.DoNewProject A
```

## Steps to reproduce:

1. Project->New Project->Application->Ok<br/>
2. Drop a button on form designer<br/>
3. Change Button's name from Button1->btnOk<br/>
4. Double click btnOk<br/>
5. In Object Inspector rename button btnOk->btnAceptar


## Additional information:

Regresion, works fine in 0.9.26

## Mantis conversion info:

- **Mantis ID:** 13841
- **OS:** linux
- **OS Build:** open suse 11.0
- **Build:** 20248
- **Platform:** x86_64
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 20251 (#6ed092dce1850a9a1e0d4798b6b5c339fd73f623)
- **Target version:** 0.9.28",100
91090405,2009-05-25 13:09:28,Code Observer: Fix crash on entering published properties,"
<h3><details><summary>Original Reporter info from Mantis: <small>Ask</small></summary><small>

- **Reporter name:** Alexander S. Klenin
</small></details></h3>

## Description:

First attached patch does to things:<br/>
1) Fix crash<br/>
2) Add a hackish check to not show events in 'properties without default' list<br/>
You can opt to not apply the second change,<br/>
but I thought it is my chance to sneak it in ;-)

Second patch is a trivial cleanup made while investigating the crash.

## Steps to reproduce:

1) Enter code:

``` pascal
type
  TT = class
  published
    |
  end
, where ""|"" denotes cursor position
2) Enter ""property ""
=> Crash with ""identifier expected, but end found"".
```

Additionally, this crash produces ""there was another exception during showing the first exception"" error in debug log.

## Mantis conversion info:

- **Mantis ID:** 13821
- **Target version:** 0.9.28",100
90966464,2009-05-13 15:30:00,Search & Replace invalidate editor problem,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

while doing search and replace in editor with ""prompt on replace"", after each find the editor is not invalidated.

in order to reproduce this in any editor tab do:

1. CTRL+R in dialog find some existing string and replace with some other text.<br/>
2. Check option ""Propmpt On Replace""<br/>
3. Press ""Replace All""

## Mantis conversion info:

- **Mantis ID:** 13702
- **OS:** Windows
- **OS Build:** XP
- **Build:** 19946
- **Platform:** i386
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 19956 (#9274d85e5b719b293c390e67efc6a18efcc31bc5)
- **Target version:** 0.9.28",100
90965263,2009-03-31 11:13:37,TFloatSpinEdit discards changes on exit,"
<h3><details><summary>Original Reporter info from Mantis: <small>Ask</small></summary><small>

- **Reporter name:** Alexander S. Klenin
</small></details></h3>

## Description:

Since r18446, changes made to TFloatSpinEdit are reverted as soon as<br/>
editor looses focus.

I confirmed that reverting this revision fixes the problem.

I have no idea why I did not notice it sooner.

## Steps to reproduce:

1) Put TFloatSpinEdit on form<br/>
2) Run application<br/>
3) Change value in editor, navigate away<br/>
4) Focus on editor again<br/>
5) Change value in editor, navigate away

6) Changes made in step 5 are lost, but those made on step 3 are retained<br/>
(i.e. it works first time only).

## Mantis conversion info:

- **Mantis ID:** 13432
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 19176 (#eb967fd0a0e35fa5c20176ad54637813e9fb9845)
- **Target version:** 0.9.28",100
90964768,2009-03-06 05:03:28,Some keys do not trigger OnKeyPress on TEdit,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

Some keys, for example #8 (backspace) do not trigger OnKeyPress event for TEdit (probably others too) under GTk2, win and gtk1 works fine. This problem affects grids editing particularly dbgrid where field is not flagged as modified and once backspace is used old text is restored from field data.

The problem seems to be at gtkproc.inc:2319

``` pascal
        Character := UTF8Copy(im_context_string,1,1);
        im_context_string:='';// clear, to avoid sending again
        // Character := UnicodeToUTF8(gdk_keyval_to_unicode(AEvent^.KeyVal));
```

for keys like backspace, im_context_string is empty and further keypress processing is avoided.

see attached sample project.

## Mantis conversion info:

- **Mantis ID:** 13283
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 20256 (#8f6e69d14645ecd62d19b5555de7d065243bb58c)
- **Target version:** 0.9.28",100
90962938,2009-01-05 18:18:59,Bug in Codetools when using macros - it is blocking codetools completly,"
<h3><details><summary>Original Reporter info from Mantis: <small>ivo_steinmann@gmx.net</small></summary><small>

- **Reporter name:** Ivo Steinmann
</small></details></h3>

## Description:

When I use macros eg. for defining calling conventions, codetools allways jump to the macro and outputs errors like:

The component edtor of class ""TDefaultComponentEditor"" has created the error: ""Unable to find method. Please fix the error shown in the message window.""


it's a really ennoing problem, because it makes the IDE completly unusable.

## Steps to reproduce:

\- open my testproject and doubleklick on Form1 to create an event callback.<br/>
\- open my project and jump to TForm definition by clicking with the Mouse on TForm while holding CTRL key.

## Mantis conversion info:

- **Mantis ID:** 12919
- **OS:** Linux Gentoo x86_64
- **OS Build:** latest
- **Build:** 18034
- **Platform:** AMD64 Phenom X4
- **Version:** 0.9.27 (SVN)",100
90962640,2008-12-09 20:23:24,Checkbox cannot be put on a Tpanel,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

When a TCheckbox or TRadioButton is dropped on a TPanel, they are not drawn.

## Steps to reproduce:

\- Start new form<br/>
\- Drop panel on form<br/>
\- Drop checkbox on panel.<br/>
\-> checkbox is not visible. 

If you move or resize the panel, the checkbox flickers...

## Mantis conversion info:

- **Mantis ID:** 12777
- **Platform:** Linux
- **Version:** 0.9.27 (SVN)
- **Target version:** 0.9.28",100
90962638,2008-12-09 20:10:16,Actions not updated if only in menu,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

When an action is attached only to a menu item, it is not updated<br/>
when the menu item is made visible. Actions that are attached to menu items are not updated when a menu is popped up.

## Steps to reproduce:

Compile and run attached sample program.<br/>
Note that the checkbox is not checked, and hence the action should be disabled.<br/>
\- Click 'Test' menu: 'Test action' menu item should be enabled.<br/>
\- Click it. <br/>
```
  The action is NOT executed, because update handler is executed first
  and it disables the action.
```
\- Click 'test' menu again: 'Test action' menu item is now disabled.<br/>
The 'OnUpdate' handler should be executed whenever the associated menu item becomes visible.

## Mantis conversion info:

- **Mantis ID:** 12776
- **OS:** Linux
- **Platform:** Linux
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 18006 (#c4c8f0c88902f49a572d0e333f776aaaa7f877d6)
- **Monitored by:** » kayahr (Klaus Reimer)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",100
90962516,2008-11-26 00:16:37,Crash and oddity with code folding,"
<h3><details><summary>Original Reporter info from Mantis: <small>Martin @martin_frb</small></summary><small>

- **Reporter name:** Martin Friebe
</small></details></h3>

## Description:

use the following text, 1 empty line at start, one empty line at the ned (line 19)

begin

``` pascal
end
begin
begin
end
begin
end
begin
end
end
begin

end.
begin

end.
```

## Steps to reproduce:

Bug 1<br/>
Fold the 3 inner folds (line 6,8,10), then select all (ctrl-a) and delete => crash

Bug 2<br/>
Fold all  folds (the nested ones first. Then go to line 5 (the fold wich has the nested ones) and select the line (so cursor is below line 5 (which is line 13 due to folding). This means one visible line is selected, but that is a full fold.<br/>
Delete this block<br/>
The last fold (line 8) is corrupt (only the begin is shown, so it should be folded. The minus indicates, that it is unfolded). Not to speak there was, and still is an empty line after the last fold's ""end""

## Mantis conversion info:

- **Mantis ID:** 12717
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 17614 (#100ca00df15073d0363502d8627650f2360479bc)
- **Target version:** 0.9.28",100
90962483,2008-11-24 22:45:24,"Crash with Folding (2 folds, next to each other)","
<h3><details><summary>Original Reporter info from Mantis: <small>Martin @martin_frb</small></summary><small>

- **Reporter name:** Martin Friebe
</small></details></h3>

## Description:

enter the following source

begin

``` pascal
end
begin

end
```

fold both blocks, mark the line with the 2nd ""begin"" as selected block (the whole line, so the cursor is in the line below; this means the whole fold is selected)

press delete, crash

## Mantis conversion info:

- **Mantis ID:** 12706
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 17574 (#9e75e5068c84801d8fff52f69cddd5fdfd114e58)
- **Target version:** 0.9.28",100
91089864,2008-11-12 15:23:05,Grid editing ignores ReadOnly setting of grid columns,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

The TCustomGrid TGridColumn has a Readonly property, however this<br/>
property is ignored: when readonly=true the column can be edited <br/>
anyway.

The attached patch fixes this. A <br/>
```  function EditingAllowed(ACol : Integer) : Boolean```<br/>
is introduced and called everywhere. It tries to be safe, if ACol is invalid,<br/>
the 'old' behaviour is kept.

## Mantis conversion info:

- **Mantis ID:** 12617
- **OS:** All
- **OS Build:** All
- **Platform:** All
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 17479 (#c3ad1a6e385dcb01d7c5155a60b1788757b4e0a6)",100
90961882,2008-10-15 22:52:00,Lazarus crash with GTK+ 2.14.3,"
<h3><details><summary>Original Reporter info from Mantis: <small>ivo_steinmann@gmx.net</small></summary><small>

- **Reporter name:** Ivo Steinmann
</small></details></h3>

## Description:

Lazarus crash with GTK+ 2.14.3

It's easy to reproduce over Copy&past, but there are also other situations where it hangs.

## Steps to reproduce:

1. Start Lazarus<br/>
2. Select some text<br/>
3. Press CTRL+C (or right mouse button -> copy) to copy the text

Now lazarus hangs or terminates. Take a look at additional informations for a gdb backtracing.

## Additional information:

``` pascal
Program received signal SIGABRT, Aborted.
[Switching to Thread 0x7f1e3b1ac740 (LWP 31534)]
0x00007f1e38e9ad55 in raise () from /lib/libc.so.6
(gdb) bt
#0  0x00007f1e38e9ad55 in raise () from /lib/libc.so.6
#1  0x00007f1e38e9c0ce in abort () from /lib/libc.so.6
#2  0x00007f1e38ed3c07 in ?? () from /lib/libc.so.6
#3  0x00007f1e38ed8e0d in ?? () from /lib/libc.so.6
#4  0x00007f1e38edab06 in free () from /lib/libc.so.6
#5  0x00000000008c8925 in CLEARTARGETLISTS (WIDGET=0x161e460, parentfp=0x7fff432f2810) at ../gtk/gtkwidgetset.inc:5058
#6  0x00000000008c87be in SETCLIPBOARDWIDGET (TARGETWIDGET=0x0, this=0x15d1e48) at ../gtk/gtkwidgetset.inc:5078
#7  0x00000000008ca292 in CLIPBOARDGETOWNERSHIP (CLIPBOARDGETOWNERSHIP=false, CLIPBOARDTYPE=CTCLIPBOARD, ONREQUESTPROC=
      {Proc = {procedure (^pointer, QWord, ^TSTREAM = class )} 0x7fff432f28f8, Self = 0x2131918}, FORMATCOUNT=2, FORMATS=0x17aa608, this=0x15d1e48) at ../gtk/gtkwinapi.inc:689
#8  0x00000000007a29f2 in CLIPBOARDGETOWNERSHIP (CLIPBOARDGETOWNERSHIP=true (255), CLIPBOARDTYPE=CTCLIPBOARD, ONREQUESTPROC=
      {Proc = {procedure (^pointer, QWord, ^TSTREAM = class )} 0x7fff432f2938, Self = 0x2131918}, FORMATCOUNT=2, FORMATS=0x17aa608) at include/lclintf.inc:92
#9  0x000000000087d59a in GETOWNERSHIP (GETOWNERSHIP=false, this=0x2131918) at include/clipbrd.inc:217
#10 0x000000000087d69a in ENDUPDATE (ENDUPDATE=true, this=0x2131918) at include/clipbrd.inc:249
#11 0x000000000087d288 in ADDFORMAT (ADDFORMAT=false, FORMATID=136, BUFFER=@0x162b048, SIZE=12, this=0x2131918) at include/clipbrd.inc:145
#12 0x0000000000a913c8 in DOCOPYTOCLIPBOARD (STEXT=0x17a9db8 'LoadImages', this=0x1e2a7f8) at synedit.pp:1356
#13 0x0000000000a9151f in COPYTOCLIPBOARD (this=0x1e2a7f8) at synedit.pp:1425
#14 0x0000000000aa499a in EXECUTECOMMAND (COMMAND=201, ACHAR='', DATA=0x0, this=0x1e2a7f8) at synedit.pp:8366
#15 0x0000000000aa1ba9 in COMMANDPROCESSOR (COMMAND=201, ACHAR='', DATA=0x0, this=0x1e2a7f8) at synedit.pp:7497
#16 0x0000000000a94158 in KEYDOWN (KEY=@0x7fff432f3488, SHIFT=4, this=0x1e2a7f8) at synedit.pp:2274
#17 0x00000000007eac63 in KEYDOWNBEFOREINTERFACE (KEY=@0x7fff432f3488, SHIFT=4, this=0x1e2a7f8) at include/wincontrol.inc:4981
#18 0x00000000007eaff1 in DOKEYDOWNBEFOREINTERFACE (DOKEYDOWNBEFOREINTERFACE=true, MESSAGE=@0x7fff432f3480, this=0x1e2a7f8) at include/wincontrol.inc:5117
#19 0x00000000007ed225 in CNKEYDOWN (MESSAGE=@0x7fff432f3480, this=0x1e2a7f8) at include/wincontrol.inc:6200
#20 0x0000000000692a00 in DISPATCH (MESSAGE=@0x0, this=0x0) at ../inc/objpas.inc:451
#21 0x00000000007ed208 in ?? ()
#22 0x0000000001e2a7f8 in ?? ()
#23 0x000000000134ac40 in _$SYNEDIT$_Ld74 ()
#24 0x00007f1e0000001b in ?? ()
#25 0x00007f1e0000bd00 in ?? ()
#26 0x00007fff432f3480 in ?? ()
#27 0x0000000001e2a7f8 in ?? ()
#28 0x00007f1e3b2d0000 in ?? ()
#29 0x0000000001629c60 in ?? ()
#30 0x0000000000896680 in GTK2HIDECB (GTK2HIDECB=true (32542), WIDGET=0x7fff432f3480, DATA=0x1e2a7f8) at gtk2widgetset.inc:62
#31 0x00000000007ea1c8 in WNDPROC (MESSAGE=@0x7fff432f3480, this=0x1e2a7f8) at include/wincontrol.inc:4749
#32 0x0000000000aa0656 in WNDPROC (MSG=@0x7fff432f3480, this=0x1e2a7f8) at synedit.pp:7008
#33 0x00000000008e76c5 in DELIVERMESSAGE (DELIVERMESSAGE=6967070, TARGET=0x1e2a7f8, AMESSAGE=@0x7fff432f3480) at ../gtk/gtkproc.inc:3547
#34 0x00000000008e42d6 in HANDLEGTKKEYUPDOWN (HANDLEGTKKEYUPDOWN=false, AWIDGET=0x1a3abc0, AEVENT=0x20ffde0, ADATA=0x1b13268, ABEFOREEVENT=true, AHANDLEDOWN=true) at ../gtk/gtkproc.inc:2264
#35 0x00000000008966aa in GTK2KEYDOWN (GTK2KEYDOWN=false, WIDGET=0x1a3abc0, EVENT=0x20ffde0, DATA=0x1b13268) at gtk2widgetset.inc:68
#36 0x00007f1e3a72067d in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#37 0x00007f1e3a126d79 in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#38 0x00007f1e3a1372b1 in ?? () from /usr/lib/libgobject-2.0.so.0
#39 0x00007f1e3a1383b8 in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#40 0x00007f1e3a138753 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#41 0x00007f1e3a812cae in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#42 0x00007f1e3a719911 in gtk_propagate_event () from /usr/lib/libgtk-x11-2.0.so.0
#43 0x00007f1e3a71a957 in gtk_main_do_event () from /usr/lib/libgtk-x11-2.0.so.0
#44 0x00007f1e3a3ac50c in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#45 0x00007f1e39e754f2 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0
#46 0x00007f1e39e787d5 in ?? () from /usr/lib/libglib-2.0.so.0
#47 0x00007f1e39e78cdb in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0
#48 0x00007f1e3a71aadd in gtk_main_iteration_do () from /usr/lib/libgtk-x11-2.0.so.0
#49 0x00000000008c11d6 in APPWAITMESSAGE (this=0x15d1e48) at ../gtk/gtkwidgetset.inc:1253
#50 0x00000000006b079f in IDLE (WAIT=true, this=0x15bdc58) at include/application.inc:315
#51 0x00000000006b242a in HANDLEMESSAGE (this=0x15bdc58) at include/application.inc:985
#52 0x00000000006b27e2 in RUNLOOP (this=0x15bdc58) at include/application.inc:1095
#53 0x000000000072e068 in APPRUN (ALOOP={Proc = {procedure (^pointer)} 0x7fff432f3d00, Self = 0x15bdc58}, this=0x15d1e48) at include/interfacebase.inc:49
#54 0x00000000006b2784 in RUN (this=0x15bdc58) at include/application.inc:1082
#55 0x0000000000683b72 in main () at lazarus.pp:107
```

## Mantis conversion info:

- **Mantis ID:** 12407
- **OS:** Linux Gentoo x86_64
- **OS Build:** 2006
- **Build:** r17013
- **Platform:** AMD64 x2 am2
- **Version:** 0.9.27 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 17272 (#2e48fd922ad9cfdfd2eab14f0cc76236300241f5)
- **Monitored by:** » luizamerico (Luiz Americo)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",100
91089711,2008-09-24 19:31:28,Cannot select DB field in report designer memo editor,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

In the lazreport memo editor the 'DB Field' button pops up a dialog<br/>
that allows to select a field. For some reason the field is selected<br/>
in the onmousedown of a listbox. In GTK 1 the ItemIndex is not yet set<br/>
when the first OnMouseDown event is triggered, resulting in an empty field.

The patch checks to see if a valid fieldname was chosen in the field selection dialog, prior to closing the dialog. This fixes the issue in GTK1 and should<br/>
not change anything on other platforms.

## Steps to reproduce:

\- Set up a report with a dataset.<br/>
\- Edit memo<br/>
\- Click 'DB field' button<br/>
\- Select field.<br/>
\-> nothing will be selected.

## Mantis conversion info:

- **Mantis ID:** 12229
- **Platform:** Linux-x86_64
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Fixed in revision:** 16949 (#7c700525478a3e2e1296f3e6175311e01d4a4b78)
- **Target version:** 0.9.28",100
90961497,2008-09-23 19:48:45,Regression in Action list editor.,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

The action list editor raises an error 'Cannot perform this operation on<br/>
a sorted list' for some action lists.

It looks as if it is the case if the actions have a category assigned to them ?

## Steps to reproduce:

\- Open Address book demo<br/>
\- Edit action list<br/>
\-> error occurs

## Mantis conversion info:

- **Mantis ID:** 12216
- **OS:** all
- **OS Build:** all
- **Platform:** all
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16688 (#fa633cdfbcf1f0fc35d04e6e22366ef9ae1d6489)
- **Target version:** 0.9.28",200
90961241,2008-09-10 11:22:32,Error while converting a file from one encoding to enother,"
<h3><details><summary>Original Reporter info from Mantis: <small>PaulIsh</small></summary><small>

- **Reporter name:** Paul Ishenin
</small></details></h3>

## Description:

As reported that happened on ubuntu 8.04 x64

1. run Lazarus with an empty project<br/>
2. change file encoding

## Additional information:

TMainIDE.ParseCmdLineOptions:<br/>
```
  PrimaryConfigPath=""/home/dps/.lazarus""
  SecondaryConfigPath=""/etc/lazarus""
```
NOTE: help options config file not found - using defaults<br/>
TMainIDE.DoNewProject A<br/>
TCustomFormEditor.CreateComponent Form1:TForm1 True<br/>
TMainIDE.DoNewEditorFile END unit1.pas<br/>
TSourceNotebook.EncodingClicked CP1251<br/>
TSourceNotebook.EncodingClicked Old=utf8 New=CP1251<br/>
TApplication.HandleException Access violation<br/>
```
  Stack trace:
  $00000000006A5307
```

## Mantis conversion info:

- **Mantis ID:** 12114
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 160001
- **Monitored by:** » WhiteWind (WhiteWind)
- **Target version:** 0.9.28",200
90961222,2008-09-10 01:20:06,Embedded spinedit is not useful,"
<h3><details><summary>Original Reporter info from Mantis: <small>PaulIsh</small></summary><small>

- **Reporter name:** Paul Ishenin
</small></details></h3>

## Description:

When spinedit is embedded into grid you cannot spin value, moreover it left a part of control inside a cell after focus moved to another cell.

Is it a regression. According to russian forum it broke between 13400 & 13844 revisions.

## Mantis conversion info:

- **Mantis ID:** 12112
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16518 (#fb4e50d0fe5929f8a945f878e46fb8c96eb17ac7)
- **Target version:** 0.9.26",100
90961199,2008-09-07 15:47:15,duplicate units in packages/chmhelp,"
<h3><details><summary>Original Reporter info from Mantis: <small>marco @marcoonthegit</small></summary><small>

- **Reporter name:** Marco van de Voort
</small></details></h3>

## Description:

Current form of components/chmhelp (possibly?) installs 

components/chmhelp/packages/chm  

which are part of 2.2.2 in a slightly (64-bit) improved way

## Mantis conversion info:

- **Mantis ID:** 12091
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16490 (#c17fd46445fbbe658f8b862727ab2cef2bb61d0c)
- **Target version:** 0.9.26",100
90961017,2008-08-29 14:23:10,TListview does not show images in vsReport on GTK 1,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

TListview does not show images in vsReport viewstyle on GTK 1. It does on<br/>
Windows. This is true for both ImageIndex and StateIndex <br/>
(or Images and StateImages properties)

## Steps to reproduce:

\- Drop Imagelist on form, add 1 image.<br/>
\- Drop TListview on form<br/>
\- Add 2 columns.<br/>
\- Set viewstyle to vsReport<br/>
\- Add 1 item to the list, set ImageIndex to 0.

In windows, the item will be shown with the image in the first column (as it should) In linux GTK, nothing is shown.

Same story when using state images.

## Mantis conversion info:

- **Mantis ID:** 11994
- **OS:** Linux
- **Platform:** Linux
- **Version:** 0.9.25 (SVN)",100
90960942,2008-08-23 10:32:43,IDE's find dialog crashes,"
<h3><details><summary>Original Reporter info from Mantis: <small>Mattias @lazidealist</small></summary><small>

- **Reporter name:** Mattias Gaertner
</small></details></h3>

## Description:

Press Cmd-F to open find dialog.<br/>
Find text edit is focused.<br/>
Type some characters and press return.<br/>
Dialog will close and will create the following backtrace:

```
  $001D77D0  LCLSENDCLOSEUPMSG,  line 1165 of lclmessageglue.pas
  $001FA7B0  TCARBONCOMBOBOX__DROPDOWNTIMER,  line 569 of carbonedits.pp
  $001B2975  TCUSTOMTIMER__DOONTIMER,  line 177 of customtimer.pas
  $001B28DF  TCUSTOMTIMER__TIMER,  line 152 of customtimer.pas
  $001CA26D  TIMERCALLBACK,  line 1172 of carbonint.pas
```

## Mantis conversion info:

- **Mantis ID:** 11947
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16203 (#48d129c8460d56d2f0152fa546b737bffda750e2)
- **Target version:** 0.9.26",100
90960914,2008-08-20 10:11:32,Main form icon not stored in LFM file,"
<h3><details><summary>Original Reporter info from Mantis: <small>mazen</small></summary><small>

- **Reporter name:** Abou Al Montacir
</small></details></h3>

## Description:

```
Using object inspector you can not change the icon of the application main form
object Form1: TForm1
  Left = 338
  Height = 300
  Top = 201
  Width = 400
  Caption = 'Form1'
  Icon.Data = {
    00000000
  }
  LCLVersion = '0.9.25'
end
```

## Steps to reproduce:

Create a new application and try to chnage the icon using the object inspector

## Mantis conversion info:

- **Mantis ID:** 11929
- **OS:** Linux
- **OS Build:** kernel 2.6.18
- **Build:** svn revision 16158.
- **Platform:** i386
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16372 (#301ebd9881f2c87d20c9b3d10a560a566c140ff3) 16395 (#848eeac586a8d79c0223ac0b885111ed11b26355)
- **Monitored by:** » montanus_@web.de (Johannes Müller)
- **Target version:** 0.9.26",100
90960781,2008-08-11 10:10:28,"Handling of transparence for bitmaps if used at runtime in multiple objects (bitbtn, image, menuitem...)","
<h3><details><summary>Original Reporter info from Mantis: <small>giorgiotani</small></summary><small>

- **Reporter name:** 
</small></details></h3>

## Description:

If a bitmap file is loaded from a BMP file into a TBitmap object at runtime, and if the same bitmap is applied to multiple elements of a project (buttons, images, menu/popupmenu items) in some of the elements the transparence is not applied correctly to all elements, but only to one of them (maybe the last one created?).

In the example, the bitmap is loaded at copile time in Image1 and BitBtn1, and all works fine.<br/>
The same bitmap is loaded as ABitmap and used in Image2 at runtime (form create), and Image2 is set transparent; the same bitmap is used also in MenuItem1 and BitBtn2: the transparence is applied only to BitBtn2 and MenuItem1 and BitBtn2 are not transparent.

If you skip using the ABitmap in BitBtn2, the transparence is applied only to MenuItem1 and Image2 is not displayed transparent.<br/>
If you skip using ABitmap in MenuItem1 too, Image2 is correctly displayed transparent.

Setting ABitmap transparent doesn't change the result.

(the example doesn't show it explicitely, but BitBtn items too suffer of this issue)

## Additional information:

Tested with Lazarus 0.9.25 SVN 20080811 on Linux system, and Lazarus-0.9.25-fpc-2.2.2rc2-20080811-win32.exe and Lazarus-0.9.25-fpc-2.2.3-20080810-win32.exe on Windows XP SP3

## Mantis conversion info:

- **Mantis ID:** 11850
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.26
- **Fixed in revision:** 16216 (#ce312d71a9f83aa15b0174c73241de3041b9762a), 16265 (#354cd5a4fb4e629e7693fc2dcbb0a401523f8dc1)
- **Monitored by:** » luizamerico (Luiz Americo)
- **Target version:** 0.9.26",100
90960281,2008-07-11 16:42:23,Lazarus and apps crash with gtk2 human theme,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

If you use the ubuntu (7.10 and 8.04 tested) human theme on i386 or x86_64 linux with lazarus/trunk you'll get a crash. Both the IDE itself and some applications made with it crash inside the humantheme .so file. An example backtrace is at http://www.hu.freepascal.org/fpcircbot/cgipastebin?msgid=1854

## Mantis conversion info:

- **Mantis ID:** 11640
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_64
- **Version:** 0.9.25 (SVN)",100
90960087,2008-06-24 20:43:25,Drawing on a bitmap after assigned to a glyph crashes app,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

as summarized, see attached sample application. This problem affects lazreport.

some data: lazarus r15563, gtk1, display 16 bit

## Mantis conversion info:

- **Mantis ID:** 11550
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 15569 (#14ecdf824d8ef9a4824ec92693d7453fdb096eb0)
- **Target version:** 0.9.26",100
90958876,2008-03-11 10:35:45,Package install is broken,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

If you open for example the components/opengl package and try to install it, it will simply compile the files and restart lazarus without linking anything. Happens with all other packages I tried too.

## Mantis conversion info:

- **Mantis ID:** 10988
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_64
- **Version:** 0.9.25 (SVN)
- **Monitored by:** » luizamerico (Luiz Americo)
- **Target version:** 0.9.26",100
90958530,2008-02-03 12:57:39,"""None"" debugger forces xterm","
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

When ""none"" debugger is used, lazarus now tries to use xterm for running stuff, but it just doesn't work. See http://members.chello.sk/ales/bug.png and http://members.chello.sk/ales/bug2.png

Specifying ""run with"" has no impact.

## Mantis conversion info:

- **Mantis ID:** 10759
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_64
- **Version:** 0.9.25 (SVN)",100
91089169,2008-01-27 15:07:15,DBImage does not handle NULL blobs,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

When a blob field is NULL, CreateBlobStream can return Nil.<br/>
The Null case is not handled correctly by TDBImage. <br/>
Attached patch fixes this.

## Mantis conversion info:

- **Mantis ID:** 10711
- **OS:** All
- **Platform:** All
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 14122 (#4c570d42ab2615d1c5d39dbd435fdf3cc31e4f6c)
- **Target version:** 0.9.26",100
90958178,2008-01-01 00:42:24,Setting radiobutton.checked in code does not work under GTK1,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

A line such as <br/>
```  ARadioButton.Checked:=True;```<br/>
leads to the following warning with the latest D

home: >./fbaliasmanager<br/>
TLCLComponent.NewInstance WARNING: missing FWidgetSetClass TScreen<br/>
TLCLComponent.NewInstance WARNING: missing FWidgetSetClass TActionList<br/>
Gtk-WARNING **: gtk_accel_group_add(): could not find signal ""activate_item""in the `GtkRadioButton' class ancestry<br/>
Gtk-WARNING **: gtk_accel_group_add(): could not find signal ""activate_item""in the `GtkCheckButton' class ancestry

## Steps to reproduce:

Drop 3 radiobuttons on a form.<br/>
In OnShow of the form, add the following code:<br/>
RadioButton1.Checked:=True;<br/>
you should get the warning when running the project.

## Mantis conversion info:

- **Mantis ID:** 10529
- **Platform:** linux-i386
- **Version:** 0.9.25 (SVN)",100
90958174,2007-12-31 22:39:43,File dialog stopped working,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

When a filter is present, no files are shown<br/>
\- when the dialog is opened.<br/>
\- When a new directory is selected (using hierarchy or directory browser)<br/>
Selecting the same directory again then shows the files.

## Steps to reproduce:

\* drop TFileOpenDialog on form<br/>
\* Set filter to 'Pascal files|*.pp';<br/>
\* Select 'Test dialog' from component editor<br/>
\* Select any lazarus source directory. <br/>
```  Either no files are shown or all files are shown.```<br/>
\* Switch directories using hierarchy

## Mantis conversion info:

- **Mantis ID:** 10528
- **Platform:** Linux-i386
- **Fixed in version:** 0.9.25 (SVN)
- **Fixed in revision:** 16056 (#42e0b8c30193bac14705876fa34f9b41698ee9b2)
- **Target version:** 0.9.26",100
90957630,2007-11-11 11:37:34,Adding an action crashes the IDE,"
<h3><details><summary>Original Reporter info from Mantis: <small>michael @mvancanneyt</small></summary><small>

- **Reporter name:** Michael Van Canneyt
</small></details></h3>

## Description:

When adding an action in the IDE, the IDE just disappears

## Steps to reproduce:

\- Create new application<br/>
\- Drop action list on form<br/>
\- Edit action list<br/>
\- Click 'Add action' button.<br/>
Lazarus disappears

## Additional information:

Only on x86_64, not on I386

## Mantis conversion info:

- **Mantis ID:** 10146
- **OS:** Linux
- **Build:** 12822
- **Platform:** Linux-x86_64
- **Version:** 0.9.25 (SVN)
- **Fixed in version:** 0.9.25 (SVN)
- **Target version:** 0.9.26",200
90957588,2007-11-02 16:05:14,gtk1/gtk2 and transparent color,"
<h3><details><summary>Original Reporter info from Mantis: <small>PaulIsh</small></summary><small>

- **Reporter name:** Paul Ishenin
</small></details></h3>

## Description:

Uunder gtk attached code produce non-transparent drawing - clFuchsia is not masked. Under windows and qt it works.

Either no one should work or everyone should.

## Mantis conversion info:

- **Mantis ID:** 10100
- **Version:** 0.9.23 (SVN)
- **Fixed in version:** 0.9.23 (SVN)
- **Fixed in revision:** 12706 (#efe7d0f7c6cb7a3367555830bbec91c7378cd1f6), 12719 (#ecf446c193df86c1fcbd974baaf304bab0c01dc6)
- **Monitored by:** » luizamerico (Luiz Americo)
- **Target version:** 0.9.24",100
90957481,2007-10-24 18:09:51,IDE crash on questionable compiler options setting,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

See attached project. There's an invalid binary file which is set to execute before execution of project.

Having such an option (might happen on projects windows -> unix) crashes the IDE quite hard with both Gtk and Gtk2.

Just run the project :)

## Mantis conversion info:

- **Mantis ID:** 10010
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_32
- **Version:** 0.9.23 (SVN)
- **Target version:** 0.9.30",100
90957247,2007-09-30 10:03:38,Gtk2 options/any broken,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

If you in gtk2 Lazarus go to options/environment options for example, you'll get this error:

 SetMainWidget ChildWidget = nil

## Mantis conversion info:

- **Mantis ID:** 9820
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_32
- **Version:** 0.9.23 (SVN)
- **Fixed in version:** 0.9.23 (SVN)
- **Fixed in revision:** 12255 (#83df47bec7b20fc5b0f4eeee3255a5471a5dc99d)",100
90956749,2007-09-03 09:57:29,Lazarus GTK2 crashes on start,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

Works with gtk1, but with gtk2 I get:

TApplication.IconChanged - TODO: convert this message...no implementation in gtk or win32

(lazarus:7598): Gdk-CRITICAL **: gdk_visual_get_screen: assertion `GDK_IS_VISUAL (visual)' failed

(lazarus:7598): Gdk-CRITICAL **: _gdk_image_new_for_depth: assertion `!visual || GDK_IS_VISUAL (visual)' failed

```
(lazarus:7598): GLib-GObject-CRITICAL **: g_object_unref: assertion `G_IS_OBJECT (object)' failed
[TMainIDE.Destroy] A 
[TMainIDE.Destroy] B  -> inherited Destroy... TMainIDE
[TMainIDE.Destroy] END
[FORMS.PP] ExceptionOccurred 
  Sender=FPImageException
  Exception=Failed to create handles
  Stack trace:
  $08186650  TLAZINTFIMAGE__CREATEBITMAPS,  line 2985 of intfgraphics.pas
  $0812DE36  TBITMAP__READSTREAMWITHFPIMAGE,  line 903 of ./include/bitmap.inc
  $0812D539  TBITMAP__READSTREAM,  line 700 of ./include/bitmap.inc
  $0812CDB8  TBITMAP__LOADFROMSTREAM,  line 478 of ./include/bitmap.inc
  $0812CD52  TBITMAP__LOADFROMLAZARUSRESOURCE,  line 470 of ./include/bitmap.inc
  $081381EF  TCUSTOMIMAGELIST__ADDLAZARUSRESOURCE,  line 230 of ./include/imglist.inc
  $0845D6EC  TCOMPONENTTREEVIEW__CREATE,  line 251 of componenttreeview.pas
  $08284882  TOBJECTINSPECTOR__CREATE,  line 3184 of objectinspector.pp
  $08090B53  TMAINIDE__SETUPOBJECTINSPECTOR,  line 1522 of main.pp
  $0808F5D1  TMAINIDE__CREATE,  line 1110 of main.pp
  $0805B24A  main,  line 95 of lazarus.pp
TApplication.HandleException Failed to create handles
  Stack trace:
  $08186650  TLAZINTFIMAGE__CREATEBITMAPS,  line 2985 of intfgraphics.pas
  $0812DE36  TBITMAP__READSTREAMWITHFPIMAGE,  line 903 of ./include/bitmap.inc
  $0812D539  TBITMAP__READSTREAM,  line 700 of ./include/bitmap.inc
  $0812CDB8  TBITMAP__LOADFROMSTREAM,  line 478 of ./include/bitmap.inc
  $0812CD52  TBITMAP__LOADFROMLAZARUSRESOURCE,  line 470 of ./include/bitmap.inc
  $081381EF  TCUSTOMIMAGELIST__ADDLAZARUSRESOURCE,  line 230 of ./include/imglist.inc
  $0845D6EC  TCOMPONENTTREEVIEW__CREATE,  line 251 of componenttreeview.pas
  $08284882  TOBJECTINSPECTOR__CREATE,  line 3184 of objectinspector.pp
  $08090B53  TMAINIDE__SETUPOBJECTINSPECTOR,  line 1522 of main.pp
  $0808F5D1  TMAINIDE__CREATE,  line 1110 of main.pp
  $0805B24A  main,  line 95 of lazarus.pp
[TGtkWidgetSet.Destroy]
[TGtkWidgetSet.Destroy]  DCs:   B722F2A0
[TGtkWidgetSet.Destroy]
[TGtkWidgetSet.Destroy]   GDIOs: B74F2620 B74F25C0
[TGtkWidgetSet.Destroy]   gdiBitmap: 2
```

## Mantis conversion info:

- **Mantis ID:** 9582
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_32
- **Version:** 0.9.23 (SVN)
- **Fixed in version:** 0.9.23 (SVN)
- **Fixed in revision:** 11932 (#c640644c8f04b5fde1858863382ecfdc5d2963fe)",200
90956446,2007-08-10 11:18:09,TDBComboBox broken,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

Put a TDBComboBox on form, and then delete it, result is Lazarus-wide AV crash.

## Mantis conversion info:

- **Mantis ID:** 9415
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_32",100
90956375,2007-08-02 14:12:09,Segfault on IDE start,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

Error:<br/>
./lazarus <br/>
TApplication.IconChanged - TODO: convert this message...no implementation in gtk or win32<br/>
Segmentation fault (core dumped)

GDB:

```
0x0814f3cb in TWINCONTROL__GETCLIENTRECT (this=0xb75c9bd0, result=
        {LEFT = -1208511136, TOP = 341, RIGHT = -1085173664, BOTTOM = 135657582, TOPLEFT = {X = -1208511136, Y = 341}, BOTTOMRIGHT = {X = -1085173664, Y = 135657582}}) at wincontrol.inc:2348
```

Backtrace:

Too long, cutting off:

```
#0  0x0814f3cb in TWINCONTROL__GETCLIENTRECT (this=0xb7611bd0, result=
        {LEFT = -1208216224, TOP = 341, RIGHT = -1088769952, BOTTOM = 135657582, TOPLEFT = {X = -1208216224, Y = 341}, BOTTOMRIGHT = {X = -1088769952, Y = 135657582}}) at wincontrol.inc:2348
#1  0x0815956a in TCONTROL__GETCLIENTWIDTH (this=0xb7611bd0)
    at control.inc:1217
#2  0x081561a6 in FIXATESIDE (SIDE=AKRIGHT, parentfp=0xbf1ab0c8)
    at wincontrol.inc:5892
#3  0x08156100 in TWINCONTROL__GETCHILDBOUNDS (CHILDBOUNDS=
        {LEFT = 0, TOP = 0, RIGHT = 429, BOTTOM = 341, TOPLEFT = {X = 0, Y = 0}, BOTTOMRIGHT = {X = 429, Y = 341}}, WITHBORDERSPACE=true, this=0xb7611bd0)
    at wincontrol.inc:5938
#4  0x0814e492 in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1890
#5  0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#6  0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#7  0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#8  0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#9  0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#10 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
---Type <return> to continue, or q <return> to quit---
    at wincontrol.inc:1961
#11 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#12 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#13 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#14 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#15 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#16 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#17 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#18 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#19 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#20 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#21 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#22 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#23 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#24 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
---Type <return> to continue, or q <return> to quit---
    at control.inc:4099
#25 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#26 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#27 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#28 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#29 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#30 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#31 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#32 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#33 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#34 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#35 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#36 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#37 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
---Type <return> to continue, or q <return> to quit---
#38 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#39 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#40 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#41 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#42 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#43 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#44 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#45 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#46 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#47 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#48 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
#49 0x0814e74c in TWINCONTROL__DOAUTOSIZE (this=0xb7611bd0)
    at wincontrol.inc:1961
#50 0x08156dcb in TCONTROL__ADJUSTSIZE (this=0xb7611bd0) at control.inc:49
#51 0x0815fa26 in TCONTROL__ENABLEAUTOSIZING (this=0xb7611bd0)
    at control.inc:4099
...
```

## Additional information:

Also with gtk2

## Mantis conversion info:

- **Mantis ID:** 9372
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_32
- **Version:** 0.9.23 (SVN)
- **Fixed in version:** 0.9.23 (SVN)
- **Target version:** 0.9.24",100
90955125,2007-02-26 15:36:54,Error with codetools,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

unit1.pas(8,51) Error: source not found: unit /home/ales/lazarus/lcl/units/x86_64-linux/graphics.ppu

reproduced with fpc 2.0.4 and 2.1.1

## Steps to reproduce:

Make new project, double click form

## Mantis conversion info:

- **Mantis ID:** 8407
- **OS:** Linux
- **OS Build:** 2.6
- **Platform:** x86_64
- **Version:** 0.9.21 (SVN)
- **Target version:** 0.9.22",100
90954865,2007-01-31 12:25:53,"""Rescan FPC source directory"" command does not work","
<h3><details><summary>Original Reporter info from Mantis: <small>tsapi</small></summary><small>

- **Reporter name:** Tsvetoslav
</small></details></h3>

## Description:

Hi, with the recent SVN versions of Lazarus when I try to rescan FPC source directory using ""Environment|Rescan FPC source directory"" menu command, I receive the following error: <br/>
""The system.ppu was not found in the FPC directories. Make sure fpc is installed correctly and the fpc.cfg points to the right directory"". <br/>
I have set the proper paths in Lazarus/Environment Options dialog, and also in my fpc.cfg file, but the error always occurs.<br/>
This happens in Windows and Linux

## Additional information:

I rised priority due to my personal feelings.Lazarus become pure editor without code tools working properly.Please correct priority if you don't agree with me.

## Mantis conversion info:

- **Mantis ID:** 8249
- **OS:** Win XP SP2; FC 6
- **Platform:** win32; linux
- **Version:** 0.9.21 (SVN)
- **Fixed in version:** 0.9.21 (SVN)
- **Fixed in revision:** 10551 (#cbb5dc8f80ad00944492942e4bb6038fa6cd79a5)
- **Target version:** 0.9.22",100
90954734,2007-01-04 10:53:16,closing form shown by ShowModal causing  a large flicker on background (parent) form,"
<h3><details><summary>Original Reporter info from Mantis: <small>forest</small></summary><small>

- **Reporter name:** Boguslaw Brandys
</small></details></h3>

## Description:

Closing form shown by ShowModal causing  a large flicker on background (parent) form.In fact it looks like background form is hidden and immediately shown - I could see other application through it during this small time (about 0.5 sec) :-( 

This problem was surely not inside official Lazarus 0.9.20 and SVN from December 2006 AFAIK.

## Steps to reproduce:

Check attached example.Put explorer window at background , run program click to show second form then close this form (which is shown modally).You will see that explorer window blink over project main form.

## Additional information:

r10338 and previous work good<br/>
r10339 changes to CloseModal caused this problem

## Mantis conversion info:

- **Mantis ID:** 8059
- **OS:** windows xp home
- **OS Build:** 32-bit
- **Build:** 10369
- **Platform:** windows
- **Version:** 0.9.21 (SVN)
- **Fixed in version:** 0.9.21 (SVN)
- **Fixed in revision:** 10370 (#49a9083bf9c3d8bfa73062bc1c22b4b672f142f0)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",100
90954381,2006-11-26 16:54:33,Please implement multiple auto-uses units,"
<h3><details><summary>Original Reporter info from Mantis: <small>Almindor</small></summary><small>

- **Reporter name:** Ales Katona
</small></details></h3>

## Description:

When you make a package for Lazarus, only those units are added to uses section of a project which uses the package, which contain the main components.

It would be very nice to have the ability to add additional units per-component (or just per package) automatically to the uses section of a project.

For example: for lNet, I have lNetComponents unit which is added automatically if user adds any of my components on form. But in ALL cases I need the user to have visible types from unit lnet.pas (which is non-LCL/non-visual base unit of lNet).

Currently I circumvent this by delegating the types with TSome = lNet.TSome, and same goes for constants. I'd like to be able to have a list of units which get auto-added per component or at least per-package so when user uses lNet, his uses section automatically includes lNet.pas in uses section.

I think a per-component list of ""additional auto-added units"" would be best. So basically you 1st select the component in a combo-box somewhere in the main options of the package, and then you add any of the package units to it's ""auto-added"" list.

## Mantis conversion info:

- **Mantis ID:** 7888
- **OS:** any
- **OS Build:** any
- **Platform:** any
- **Target version:** post 1.0",100
90953524,2006-10-10 20:15:31,The spacing of the editor goes mad...,"
<h3><details><summary>Original Reporter info from Mantis: <small>Joost</small></summary><small>

- **Reporter name:** Joost van der Sluis
</small></details></h3>

## Description:

If I open a file in the lazarus-editor, it looks weird. There are spaces added, all over the place. And if a line is highlighted, it's differently spaced.

Hard to explain, but look at the screenshots. Both editors (gedit and lazarus) shows the same source-file.

## Mantis conversion info:

- **Mantis ID:** 7588
- **Version:** 0.9.19 (SVN)",100
90953137,2006-07-30 10:55:23,Properties not stored / restored.,"
<h3><details><summary>Original Reporter info from Mantis: <small>Matthijs</small></summary><small>

- **Reporter name:** Matthijs Willemstein
</small></details></h3>

## Description:

Properties of a component are set to 0. Whether this happens during saving or reading I do not know.

## Steps to reproduce:

Install latest lazarus snapshot.<br/>
Create a new application.<br/>
Place a component on the form (button / memo)<br/>
Run application.<br/>
No components visible.<br/>
Close application.<br/>
Close Lazarus<br/>
Restart lazarus<br/>
Reopen project.<br/>
Properties like top, left, height, width are set to 0.

## Mantis conversion info:

- **Mantis ID:** 7212
- **OS:** Win32 / Linux
- **OS Build:** XP / FC4
- **Platform:** Intel / AMD
- **Version:** 0.9.17 (SVN)
- **Monitored by:** » crossbuilder (Burkhard Carstens)
- **Target version:** post 1.0",100
90953061,2006-07-06 20:26:04,cannot select combox values,"
<h3><details><summary>Original Reporter info from Mantis: <small>darius</small></summary><small>

- **Reporter name:** Darius Blaszijk
</small></details></h3>

## Description:

when selecting a value from a combobox in the IDE the contents of the combobox remains empty.

## Mantis conversion info:

- **Mantis ID:** 7124
- **OS:** winxp
- **OS Build:** xp
- **Build:** 9572
- **Platform:** i686
- **Version:** 0.9.17 (SVN)
- **Fixed in version:** 0.9.17 (SVN)
- **Fixed in revision:** 9574 (#41947d6c28b0016c92f5b6d05807c94d9f9197ca)
- **Target version:** 0.9.18",200
90952137,2006-02-26 12:11:28,Lazarus freezes on new item,"
<h3><details><summary>Original Reporter info from Mantis: <small>darius</small></summary><small>

- **Reporter name:** Darius Blaszijk
</small></details></h3>

## Description:

Selecting File->New->whatever (unit / form / new ...)  makes Lazarus freeze and the CPU load goes to 100%. 

## Steps to reproduce:

Select file->new (whatever)

## Additional information:

I have tried to make a trace but without success. Lazarus does not cash but goes to 100% CPU.<br/>
Perhaps some information how to pinpoint the problem better would be helpful.

## Mantis conversion info:

- **Mantis ID:** 1782
- **OS:** winxp
- **Platform:** i386
- **Version:** 0.9.13 (SVN)
- **Fixed in version:** 0.9.13 (SVN)
- **Fixed in revision:** 8334 (#6a7d9c6f455a0e5dc33553ec6ac2d6579640080e)
- **Target version:** 0.9.14",200
90951015,2005-10-09 16:02:35,Problem with setting breakpoints in the source code editor,"
<h3><details><summary>Original Reporter info from Mantis: <small>marcgeldon</small></summary><small>

- **Reporter name:** Marc Geldon
</small></details></h3>

## Description:

you can set/unset breakpoints with both mousekeys (left and right). Setting and unsetting should only work with the LEFT mousekey. Because if I click the RIGHT mousekey, I want to call the popup menu. Please fix this.

## Additional information:

In Delphi you can only set breakpoints with LEFT mousekey.

## Mantis conversion info:

- **Mantis ID:** 1313
- **OS:** Windows XP SP2
- **OS Build:** 5.1
- **Platform:** Intel
- **Fixed in version:** 0.9.11 (SVN)
- **Fixed in revision:** 7981 (#4a42afcb2ff6b5bc63b508841822c87e77f8c99a)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",100
90951014,2005-10-09 16:00:05,Problem with popup menu in source code editor,"
<h3><details><summary>Original Reporter info from Mantis: <small>marcgeldon</small></summary><small>

- **Reporter name:** Marc Geldon
</small></details></h3>

## Description:

sometimes the error message ""List index (25) out of bounds."".

## Steps to reproduce:

I could not really find a way to reproduce it. But if you set and unset bookmarks often enought. Left click and right click on the gray area in the source code editor where the bookmark numbers and breakpoints are shown, the error will occur for sure after one minute or so (doing this set/unset/left-click/right-click thing).

## Mantis conversion info:

- **Mantis ID:** 1312
- **OS:** Windows XP SP2
- **OS Build:** 5.1
- **Build:** 09.10.2005
- **Platform:** Intel
- **Version:** 0.9.11 (SVN)
- **Target version:** 1.0.0
- **LazTarget:** 1.0",100
90950868,2005-09-27 22:19:48,Source editor eats first typed character,"
<h3><details><summary>Original Reporter info from Mantis: <small>Jesus @jramx</small></summary><small>

- **Reporter name:** Jesus Reyes
</small></details></h3>

## Description:

The source editor sometimes eats the first character typed<br/>
after some operations.

I think it's a known problem, but I found a way to reproduce it.

the problem doesn't occur if one uses the 

## Steps to reproduce:

1. Drop a TEdit in form editor<br/>
2. Double click the TEdit. Source editor is bring to front an is ready to accept source code<br/>
3. type anything, The first

the same happens when doubleclicking the Event in object inspector, it doesn't happen however when clicking the '...' button to add or edit the event in the object inspector.

## Additional information:

Still to test in linux

## Mantis conversion info:

- **Mantis ID:** 1227
- **OS:** Windows
- **OS Build:** 98
- **Build:** 0.9.9 24-SEP-2005
- **Platform:** i386
- **Version:** 0.9.9 (SVN)
- **Fixed in version:** 0.9.11 (SVN)
- **Fixed in revision:** 8004 (#88a48665d5c6a00a704c9e9b2ba62799a280642e)
- **Target version:** 0.9.12",100
90950556,2005-07-25 11:51:50,Doesn't use native look for buttons in MessageDlg,"
<h3><details><summary>Original Reporter info from Mantis: <small>Phil Hess</small></summary><small>

- **Reporter name:** Phil Hess
</small></details></h3>

## Description:

The old-style Delphi green check and red X button glyphs in MessageDlg buttons look bad when the rest of the app's forms use normal looking buttons for OK and Cancel.

Note that this applies to GTK too - looks particularly bad on Mac!


## Mantis conversion info:

- **Mantis ID:** 1062
- **OS:** Windows
- **OS Build:** XP, SP2
- **Build:** 20050722
- **Platform:** Win32
- **Version:** 0.9.9 (SVN)
- **Fixed in version:** 0.9.27 (SVN)
- **Monitored by:** » marcgeldon (Marc Geldon), » luizamerico (Luiz Americo), » emaijala (Ere Maijala)
- **Target version:** 1.4",100
90949814,2005-04-01 00:21:52,AutoComplete (Ctrl-Space) problems,"
<h3><details><summary>Original Reporter info from Mantis: <small>>8<</small></summary><small>

- **Reporter name:** Bug Import
</small></details></h3>

## Description:

Invoking Autocomplete (Ctrl-Space) a unrequest Space_Char is added in the Line editor<br/>
So if you type<br/>
'Showme'<br/>
and then invoke Ctrl-Space, the caret is shifted one place right. Accepting the autocomplete this is the result:<br/>
'Showme ShowMessage();'<br/>
recent Lazarus CVS 

## Additional information:

Imported information<br/>
\--------------------<br/>
Name: Salvatore Coppola<br/>
Mail: coppolastudio (at) virgilio.it

## Mantis conversion info:

- **Mantis ID:** 830
- **Fixed in version:** 0.9.7 (CVS)",100
