issuekey,created,title,description,storypoints
117037182,2022-10-17 14:07:10.856,FE: use React 18,"update packages to use react 18:
- react
- react-dom
- react-test-renderer
- @testing-library/react"": ""^12.1.2"", -> 13
- @testing-library/react-hooks"": ""^7.0.2"", -> uninstall and import renderHook from above package
- @types/react
- @types/react-dom

Make sure this branch is uptodate with master.

If possible this ticket should be splitted into smaller ones. Fix upcoming react changes separately (if possible)

TODO:

- [x] wmjsmap doesn't currently work with React 18 in Strict mode, this has to be fixed. The map view gets mounted, unmounted and not remounted. We could temporarily disable strict mode for the app until it's fixed. More info: https://reactjs.org/blog/2022/03/08/react-18-upgrade-guide.html#updates-to-strict-mode. Fix in separate ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/2957
- [x] typing in a TAF field breaks the app, try to update react-hook-form to V7 first? https://gitlab.com/opengeoweb/opengeoweb/-/issues/2926 Not sure if this would fix it, maybe needs a bit more investigation.
- [x] fix tests (problems with `act` warnings in tests: https://github.com/testing-library/react-testing-library/issues/1051)
- [x] screenmanager issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3093
- [x] login issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3094
- [x] drag and drop issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3095
- [x] map presets issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3100
- [x] spaceweather graphs issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3101
- [x] spaceweather notification populate issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3102
- [x] sigmet level values issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3103
- [x] TAF autosave issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3180
- [x] Sigmet Volcanic Ash Cloud issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3181
- [x] Airmet Cloud levels issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/3182",8
117021690,2022-10-17 12:25:48.579,FE: sigmet/airmet fix readonly styling of inputs,Make sure that the form is looking correct in view mode. The inputs should have disabled (to prevent focus) and readonly props to work. Styling should be minimal as form-fields should take care of it,2
116995301,2022-10-17 07:44:15.151,FE: add theming to form-fields,"Add theming to form-fields. Add light and dark, and rename current ones to OldTheme (or something). When we are done with spaceweather, the only thing left to do is remove these old stories",3
116984700,2022-10-17 05:01:33.520,FE: sigmet/airmet add container queries to dialog,"Add container queries to make the dialog also work for smaller sizes of sigmet airmet
https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1928#note_1136151475",3
116892439,2022-10-14 12:12:30.749,FE: Activate openapi check,"After updating the openapi specifications in the aviation and SW BE, the check should be turned on in the FE by adjusting the content-type",5
116892401,2022-10-14 12:11:34.401,BE: Fix SW types in OpenAPI specs for aviation backend,"Following updating specification for TAF, SIGMET & AIRMET, also update for SW as checking will be conducted in the near future",3
116871163,2022-10-14 06:32:42.622,FE: sigmet/airmet extract field layout,"All fields have same inline layout, but all are defined in the components. Extract this, to make fixing form fields later easier",2
116829654,2022-10-13 12:54:04.714,FE: make ContentDialog responsive,"DEsigns can be found https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5f4e0b5cef6167b007682172

- (long) title should look correct on small screens
- action buttons should get optionlist menu 
- don't use javascript to get it completely like design in viewport of the dialog. We should wait for container queries 
- make sure the form elements look correct

![Screenshot_2022-10-13_at_14.53.30](/uploads/3bab33bd95e63df9172bea2fd060c75c/Screenshot_2022-10-13_at_14.53.30.png)",2
116828754,2022-10-13 12:41:47.460,FE: fix storybook warnings,"Some stories generate warnings, we need to change to the new syntax. Also update the readme (for the zeplin links) where needed.

![Screenshot_2022-10-13_at_14.42.06](/uploads/621c86c2551b32ab01d329c87ba53ff0/Screenshot_2022-10-13_at_14.42.06.png)


In 5.x CSF, you would annotate a story like this:
```
export const Basic = () => <Button />
Basic.story = {
  name: 'foo',
  parameters: { ... },
  decorators: [ ... ],
};
```
In 6.0 CSF this becomes:
```
export const Basic = () => <Button />
Basic.storyName = 'foo';
Basic.parameters = { ... };
Basic.decorators = [ ... ];
```

Try to run this codemod: `npx @storybook/cli@next migrate csf-hoist-story-annotations --glob=""**/*.stories.js""`


see https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations
expected result: no more warnings in any story or snapshot test",2
116805677,2022-10-13 07:22:39.981,FE: sigmet-airmet remove tooltip after clicking on list element,"As pointed out in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1920#note_1134117242, when you hover on a tooltip, and open a sigmet/airmet it will briefly show the tooltip in the dialog. It was already there, but it's more visible now we have a bigger tooltip. 

When opening a sigmet/airmet it should close the tooltip so it won't be visible inside the dialog. Maybe easy fix on zIndex? Should be an easy fix, otherwise we have to check other options

Maybe it will be fixed automaticely in https://gitlab.com/opengeoweb/opengeoweb/-/issues/2790 by the pointer-events, do that ticket first to check",3
116739013,2022-10-12 09:27:57.437,FE: Update shared status tags with latest design,"Update status tags with latest design
Updated: https://zpl.io/VDyzyYg + https://zpl.io/2pqdRMy



make sure spaceweather is still looking correct",2
116672133,2022-10-11 13:16:23.962,FE: remove TAF type field,,2
116671306,2022-10-11 13:08:07.455,Sigmet/airmet move TAC tooltip from i icon to issue time,"Current situation is Tooltip of TAC is on the `i` icon, but in design it has it on issue date. If we do this, we save a column, but that is impacting the [responsive ticket.](https://gitlab.com/opengeoweb/opengeoweb/-/issues/2753) 

- question for design, any reason not to use the default tooltip color?

![Screenshot_2022-10-11_at_15.06.22](/uploads/72765a01785120a8730b0262b9f6987d/Screenshot_2022-10-11_at_15.06.22.png)",2
116670515,2022-10-11 13:00:03.407,FE: add responsive design to sigmet/airmet List,"Add responsive design as defined here to the List component https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60422ba167ef1d7fae99c305

base styling is there, only needs some padding/margin",2
116669689,2022-10-11 12:58:38.831,BE: investigate AWS SAM to run BE locally,"Investigate and document on whether we can use SAM to run the lambdas locally for easier testing.

Add documentation on how to use and set up

Findings:
- SAM templates are a superset of CloudFormation templates
- SAM templates can include ""transforms"" that could make the definition of serverless apps more breve
- The SAM CLI has a `sam local` command that make it possible to run your stack locally, but the number of supported services is very limited (i.e. no S3 support)
- Because of SAM's limited support I had to include LocalStack for S3 emulation
- This makes it impossible to just re-use existing CloudFormation templates, so I ended up creating new CloudFormation templates just for development, combined with Bash scripts
- LocalStack has emulation for some services as well, so I tried that too, without using SAM. CloudFormation support is very limited, so again I found myself creating a new CloudFormation template just for development, combined with Bash scripts
- It is a painful process and I didn't get a full stack working within one day - I'll stop my investigation on this now and first discuss with the backend people of the team",5
116668126,2022-10-11 12:54:51.549,BE: Sigmet cleanup of tests,"Structure and clean up tests, split file if necessary. Add more tests if pieces are not covered still.
- Make sure the inline documentation gives a proper description of what is being tested
- Group tests with similar functionality",3
116667259,2022-10-11 12:46:34.446,BE: Investigate CI/CD replacement with sed,"CI/CD replacement with sed (potentially fixes multi-line imports)

Read lambda documentation. 

Ideas:
- Move utils folder inside of the separate module folders. Can it be split or not?
- Move the zipping up a level?
- Lambda layers?

Timeboxed to a day",5
116666959,2022-10-11 12:41:36.524,BE: airmet make object oriented,"Ensure functionality doesn't change on the outside.

Apply TDD (test driven development) to ensure no changes are applied to the interface or logic within. Ensure all tests pass beforehand and after applying the changes.

Add inline documentation for functions etc",5
116666872,2022-10-11 12:40:31.596,BE: sigmet make object oriented,"Ensure functionality doesn't change on the outside.

Apply TDD (test driven development) to ensure no changes are applied to the interface or logic within. Ensure all tests pass beforehand and after applying the changes.

Add inline documentation for functions etc",5
116666689,2022-10-11 12:37:03.148,BE: Use of python formatter Yapf SIGMET/AIRMET,Only apply for sigmet/airmet,2
116666560,2022-10-11 12:35:47.141,BE: SIGMET/AIRMET typechecking and typing constants,"* Add typechecking
* Typed constants

Closing this issue because it's already covered by #2748 and #2749",3
116664344,2022-10-11 11:59:09.439,BE meeting: spaceweather knowledge share,,3
116636388,2022-10-11 07:54:51.434,FE: make layer select responsive,"With the dimension icons added, the layer row needs to get more height in the minimum size to display everything. 

- update service chip height to match design
- make sure layer row is responsive

see design
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/62c695a1ed42f01adee34e63

![image](/uploads/9a8f5b945a6793c02ecf0903107a8aa7/image.png)",3
116628857,2022-10-11 06:26:36.856,Prepare tech Thursday meeting,Prepare some slides to discuss for the meeting https://docs.google.com/presentation/d/1yq-nWL_4u8h8NzoO9kXzCtWZ6EbENh7F/edit#slide=id.p1,1
116575665,2022-10-10 11:54:42.862,Release presets BE to TST,,1
116560493,2022-10-10 08:21:51.238,FE: Dimensionselect button shows up for disabled layers,See us for description,2
116560336,2022-10-10 08:18:37.086,FE: theming sigmet/airmet part 3: Form,"Fix the last part; the Form. All OldThemeWrapper references should be removed from the sigmet/airmet lib. Change it as well in the geoweb application.

See how big this ticket is, still things to fix in this ticket or as follow up:
- remove white background of form
- enable commented out test
- remove all `oldTheme` props",3
116560097,2022-10-10 08:15:27.423,FE: theming sigmet/airmet part 2: ContentDialog,"Add styling for the ContentDialog. This is the outer dialog, so wrap the form with OldThemeProvider so that will looks the same. 

- also add links to design

Style everything outside the red line:
![Screenshot_2022-10-10_at_10.16.40](/uploads/3ef650ecb3a0114a655347fe065d7700/Screenshot_2022-10-10_at_10.16.40.png)",2
116559834,2022-10-10 08:11:08.479,FE: theming sigmet/airmet part 1: List component,"Add StoryWrapperOldTheme wrapper to the contentDialog so that will still show the old theme. Fix the theming of the List component so it will have dark/light theme.

- also add links to design
- check responsiveness if it's not too much, otherwise create a separate ticket for it

![Screenshot_2022-10-10_at_10.13.08](/uploads/8a4efc4f6e0e5eec33455a8820d80e26/Screenshot_2022-10-10_at_10.13.08.png)",5
116558681,2022-10-10 07:54:00.772,FE: Presets with 1:1 layer managers not working anymore,"see description here https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2077

add test",3
116558435,2022-10-10 07:49:39.694,FE: Switching presets does not clear the layers store,- if a map gets removed from the mapstore all the layers from the map should be removed from the layers store as well,3
116558231,2022-10-10 07:46:19.307,FE: investigate to make sigmet/airmet configurable for other countries,Investigate what is needed to make sigmet/airmet work for multiple countries and write a user story -> put in PO review,3
116558086,2022-10-10 07:43:33.184,Fix duplicate name issue MapPresets smoketest,"Sometimes the smoketest-preset is not deleted - since duplicate names are not allowed, this will make following smoketests fail. A solution could be to use unique names.",2
116557928,2022-10-10 07:41:48.359,Release to acceptance,"end of the sprint

1 FE 1 BE together


----
Release notes: https://confluence.knmi.nl/display/GW/GeoWeb+2.3.0",2
116557519,2022-10-10 07:35:44.755,FE: update MUI to latest version,- breaking changes in datepickers https://mui.com/blog/lab-date-pickers-to-mui-x/,5
116556900,2022-10-10 07:29:06.732,FE: show 'other dimension' icon in layer select row,"- There should be a hover function showing
  * the name of the dimension
  * the value

we can re-use `getDimensionsList` to display all dimension icons in layer row in same order as in info dialog",2
116556707,2022-10-10 07:26:42.318,FE: show dimension icons in layer select rows,"- show elevation, time and reference time icons in layer select rows when the layer has the dimension
- There should be a hoover function showing
  * the name of the dimension
  * the value
- 'other dimensions' are for the next ticket

![image](/uploads/746f35dccdca3f3ea8e316bf3e57aee9/image.png)",2
116459762,2022-10-07 11:15:57.093,FE: move FE publish to npm jobs to the tag pipeline so they can run automatically,"The ""publish package to npm"" jobs have to be started manually now on the master branch when a new release was created. This is some leftover debt from when we started the project and didn't have tags or docker images.

We should move them to the tag pipeline so they can run automatically.


(all of these except the `docker-images` job)

![image](/uploads/ad5fa16e96b54e11237483375d106494/image.png)",2
116459632,2022-10-07 11:12:06.766,FE: update outdated browsers list,"Tests and storybook show this console.log, we should update it:

```
Browserslist: caniuse-lite is outdated. Please run:
  npx browserslist@latest --update-db
  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating",1
116398767,2022-10-06 11:25:07.045,Typing `t` in abstract field will hide/show time slider,,1
116398314,2022-10-06 11:15:58.249,FE: Fix flaky tests,"- some tests that fail on a millisecond difference can be fixed by mocking the date
- investigate other tests and fix




- list of tests that are currently flaky:
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3135758738
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3149521049
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3250367760
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3393741234
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3480513688
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3500579718
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3502784054
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3513811196
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3542313295
  - https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3546948022
  -",3
116392509,2022-10-06 09:42:50.478,Show 'Other dimensions' in LayerInfoDialog,"a layer can have multiple other dimensions. For example 'ensemble_member', 'modellevel', 'member'. Should each 'other dimension' get an icon? or altogether displayed under 'other dimensions'? Sorted alphabetically or not?

-> each 'other dimension' gets the same icon
-> show all values, even if its big
-> instead of text 'Other dimensions' show the name of the dimension
-> show to Didier how it looks

![image](/uploads/ed127297e41268ba0918a33ff450fa86/image.png)",3
116300486,2022-10-05 07:08:33.513,Missing title in layer select infobox,"The layerselect info box is missing a title as the first point in the infobox.
Should display the same name as the title in the header.",2
116244785,2022-10-04 10:22:10.781,Save dimensions and bounding box for ServiceLayer in redux,"In the redux services store, we store the layer information that comes from the service. But the service returns more information than we are currently storing, also bounding box and dimension information for the layers is returned. Make sure this is also stored, so we can use it in the Layer Select.

hint: function `recursivelyFindLayer` in `opengeoweb/libs/webmap/src/lib/components/WMJSService.ts`

example service response:
```
<Layer queryable=""1"" opaque=""1"" cascaded=""0"">
<Name>RAD_NL25_PCP_CM</Name>
<Title>Precipitation Radar NL</Title>
<EX_GeographicBoundingBox>
  <westBoundLongitude>0.000000</westBoundLongitude>
  <eastBoundLongitude>10.856452</eastBoundLongitude>
  <southBoundLatitude>48.895303</southBoundLatitude>
  <northBoundLatitude>55.973600</northBoundLatitude>
</EX_GeographicBoundingBox>
<Dimension name=""time"" units=""ISO8601"" default=""2022-10-04T10:20:00Z"" multipleValues=""1"" nearestValue=""0"" current=""1"">2021-03-31T09:25:00Z/2022-10-04T10:20:00Z/PT5M</Dimension>
   <Style>    <Name>radar/nearest</Name>    <Title>radar/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=radar/nearest""/>    </LegendURL>  </Style>   <Style>    <Name>precip-rainbow/nearest</Name>    <Title>precip-rainbow/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=precip-rainbow/nearest""/>    </LegendURL>  </Style>   <Style>    <Name>precip-gray/nearest</Name>    <Title>precip-gray/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=precip-gray/nearest""/>    </LegendURL>  </Style>   <Style>    <Name>precip-blue/nearest</Name>    <Title>precip-blue/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=precip-blue/nearest""/>    </LegendURL>  </Style>   <Style>    <Name>precip-blue-transparent/nearest</Name>    <Title>precip-blue-transparent/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=precip-blue-transparent/nearest""/>    </LegendURL>  </Style>   <Style>    <Name>precip-with-range/nearest</Name>    <Title>precip-with-range/nearest</Title>    <LegendURL width=""300"" height=""400"">       <Format>image/png</Format>       <OnlineResource xlink:type=""simple"" xlink:href=""https://geoservices.knmi.nl/adaguc-server?DATASET=RADAR&amp;SERVICE=WMS&amp;&amp;version=1.1.1&amp;service=WMS&amp;request=GetLegendGraphic&amp;layer=RAD_NL25_PCP_CM&amp;format=image/png&amp;STYLE=precip-with-range/nearest""/>    </LegendURL>  </Style></Layer>
```

example of layer with multiple dimensions:
```
<Dimension name=""time"" units=""ISO8601"" default=""2022-10-02T00:00:00Z"" multipleValues=""1"" nearestValue=""0"" current=""1"">2022-10-02T00:00:00Z/2022-10-06T06:00:00Z/PT1H</Dimension>
<Dimension name=""elevation"" units=""hPa"" default=""1000"" multipleValues=""1"" nearestValue=""0"" >200,300,400,500,600,700,800,850,900,925,950,1000</Dimension>
<Dimension name=""reference_time"" units=""ISO8601"" default=""2022-10-04T06:00:00Z"" multipleValues=""1"" nearestValue=""0"" current=""1"">2022-10-02T00:00:00Z,2022-10-02T03:00:00Z,2022-10-02T06:00:00Z,2022-10-02T09:00:00Z,2022-10-02T12:00:00Z,2022-10-02T15:00:00Z,2022-10-02T18:00:00Z,2022-10-02T21:00:00Z,2022-10-03T00:00:00Z,2022-10-03T03:00:00Z,2022-10-03T06:00:00Z,2022-10-03T09:00:00Z,2022-10-03T12:00:00Z,2022-10-03T15:00:00Z,2022-10-03T18:00:00Z,2022-10-03T21:00:00Z,2022-10-04T00:00:00Z,2022-10-04T03:00:00Z,2022-10-04T06:00:00Z</Dimension>
   ```",2
116241875,2022-10-04 09:53:21.030,Show Dimensions and Bounding Box in LayerInfoDialog,"in the previous ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/2711 the dimensions and geographic bounding box information is saved in the ServiceLayer object. Now we can use this in the LayerInfoDialog to show the information.

![image](/uploads/70b8dacc94dec474d57f6c7bb7f7ee91/image.png)",2
116169347,2022-10-03 08:33:32.772,Make Tab work on Service DIalog,"If you open the service dialog and press Tab, it closes it. Should not close it but tab through the fields.",2
116164928,2022-10-03 07:26:18.805,unable to remove added wms service,"see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1926

if you remove a service then the layers from that service should also be removed from the layer manager",2
116164371,2022-10-03 07:19:11.304,FE: Clicking twice to make layer select buttons work if another dialog is ordered on top,"see thread here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1874#note_1121826230

fix for the info buttons, the add/remove layer buttons and the clear search button

it currently works for the layer manager buttons and layer select filter chips

Please make sure it is a nice at the source of the problem, discuss if solution is too big or too weird",3
116078018,2022-09-30 13:49:16.621,Show Service in LayerInfoDialog,Make sure the correct values are shown for Service in LayerInfoDialog,3
116069420,2022-09-30 12:03:11.749,Fix LayerManager issue with loaded layers,"If you open the layermanager, the layers should be visible in text and more info like opacity. Currently nothing is showing, should show all info.",3
116067417,2022-09-30 11:19:15.522,Convert DialogType strings to enum DialogTypes,"in `opengeoweb/libs/core/src/lib/store/ui/types.ts` there is a type DialogType with string values. Convert this to enum, like is done for 'layerInfo'. Then you can replace the string values, for example `'layerInfo'` with `DialogTypes.LayerInfo` when firing actions and in tests.

```
export enum DialogTypes {
  LayerInfo = 'layerInfo',
}

export type DialogType =
  | 'layerManager'
  | 'layerSelect'
  | DialogTypes.LayerInfo
  | 'dimensionSelect-elevation'
  | 'dimensionSelect-ensemble_member'
  | 'keywordFilter'
  | 'timeSeriesManager'
  | 'timeSeriesSelect'
  | 'syncGroups'
  | LegendDialogType;",3
116065690,2022-09-30 10:42:25.543,use useSetupDialog hook in all dialogs,"All dialogs use the same way to set up. This causes a lot of duplicate code. Instead we can use the same hook in all these dialogs. The hook already exists but is only used in the timeseries lib: https://gitlab.com/opengeoweb/opengeoweb/-/blob/9c4546ee9a2f57f0e142daf3ca62a811fba01774/libs/timeseries/src/lib/hooks/useSetupDialog/useSetupDialog.ts#L26

To Do:
- Move useSetupDialog to core folder. It can't be moved to shared folder because it will cause circular dependencies
- use useSetupDialog in all dialogs
- useSetupDialog is unit tested. For all the dialogs that start using useSetupDialog remove the tests related to what useSetupDialog does.",3
116062041,2022-09-30 09:39:15.598,Handle automatic closing of layer info dialog,"Handle automatic closing of layer info dialog:
 
* If you close the Layer Select window, also the layer info dialog should close.
* When the user has opened the info dialog for layer X, and then the user does a new search or filter and layer X is now no longer in the list, the info dialog should get closed automatically since the info is no longer relevant

Add tests",2
116049142,2022-09-30 05:49:18.272,FE: Update form-fields TextField with isReadOnly prop and use it in LayeSelect,"Add a isReadOnly prop to all inputs of form-fields. If it's used, it will show the correct styling. 

- add prop isReadOnly for all inputs. Make sure it will also work with disabled also as prop
- when prop is there, add styling
- above the styling add a comment that it will be fixed in v6 https://github.com/mui/material-ui/pull/32822 
- update LayerSelect, if too big split it in separate ticket 


extra info
```
<TextField
InputProps={{
              readOnly: true,
            }}`
```

![Screenshot_2022-09-30_at_07.49.34](/uploads/30563806cdb91e68df1dc60bd9da35a1/Screenshot_2022-09-30_at_07.49.34.png)

The styling should be updated with latest design. https://zpl.io/29xdAPW


- in theme add a new TextField in the story with readonly prop, and style it like design
- after this, also add a TextField with readonly + disabled, so we can't focus. See if we can make it work together, but make sure this won't break the normal disabled styling, this should be unaffected. So if both props are present, it should still look like readonly, but without focus. 
- update the links to design in theme storybook for textField (link to correct version, light and dark theme)

This should fix the styling in the ServicePopup, so that snapshot should get an update. No code changes should be needed there, perhaps only removal of `disableUnderline: isShowPopup,` that might not be needed anymore",3
115990638,2022-09-29 09:33:16.377,Create redux state for layer info dialog,"* show the info dialog when clicking one of the info buttons in the layer select
* make sure the info dialog is not contained inside the layer select, user should be able to drag it around. Add to the redux ui store so the order of the dialogs is controlled as well.
* Only one info window open at one time. If you click next info button, content updates.",3
115988579,2022-09-29 09:00:56.085,Follow up info service: add dark/light theme snapshots for service dialog,"Follow up ticket for https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1856 snapshots as discussed in MR here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1856#note_1116199475

Can you add dark and light stories with snapshots and link to [design](https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/62c695a1ed42f01adee34e63/version/6332a6d892034711d79d6233) for the System service dialog? And then you can easily see that is does not match the design, so styling for readonly fields needs to be updated as well.",2
115928354,2022-09-28 12:55:49.701,FormFields TextField should support multiline style,The FormFields TextField does not look correctly when using multiline. Make sure it will look correctly with multiline so it will look correct in LayerSelect,2
115904626,2022-09-28 07:23:42.948,Investigate momentjs alternative,"Create a POC for a new library replacement for momentjs. See https://momentjs.com/docs/#/-project-status/ for alternatives. Make sure the lib is compatible with MUI. In the lib `form-fields` we are using [an adapter](https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/libs/form-fields/src/lib/components/ReactHookFormProvider.tsx#L20) for the DatePickers, that should still work. In the POC, just compare how some basic date utils work like
- utc
- compare time between dates
- make sure the datepickers are still working",3
115849353,2022-09-27 12:20:52.770,Layer Select simplify ServicePopup logic,"Simplify logic, so it's easier to extend and maintain. 
- use react-hook-form for validation
- make sure the system error are displayed on same place, and won't block saving",2
115846389,2022-09-27 11:45:36.497,"Add new ""icon"" variant for buttons","The info button in the layer manager does not have space for a big mouseover background.

Make a new ""icon"" variant for the CustomToggleButton that can handle active state, the background on mouseover is hidden and the colors match design.

Design will be updated

![image](/uploads/f1e1ab8a3a6bdca7a58254cfd8745ee1/image.png)",2
115828392,2022-09-27 07:46:04.291,strictNullCheck in theme library,"- Disable eslint check that checks for no use of exclamation marks
- Add `""strictNullCheck"": true` in the theme tsconfig.json
- run `nx typecheck theme` and fix all errors
  - where possible use `!` mark to solve error",3
115826062,2022-09-27 07:21:55.407,Update filter chip filter logic,Update filter chip logic as described in the design https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/62c695a1ed42f01adee34e63,3
115791969,2022-09-26 15:19:05.834,Update edit icon,"Edit icon already exists but it needs to be updated.
Discussed with Didier as this icon is already used in multiple other libs, it should be updated everywhere.

TODO:
- update new edit icon path:
```
<path
        d=""m12.718 3.807-5.214 9.426-1.3 2.325.325 5.58 4.905-2.683 6.494-11.711-5.21-2.937zM11.514 5.98l-.616 1.111 5.23 2.9.616-1.11-5.23-2.901zm-4.69 8.462-.612 1.113 5.225 2.898.616-1.11-5.23-2.901z""
        fillRule=""evenodd""
      />
```
- update snapshots",2
115785192,2022-09-26 13:54:01.666,BE: Fix TAF types in OpenAPI specs for aviation backend,,5
115785143,2022-09-26 13:53:49.450,BE: Fix Aitmet types in OpenAPI specs for aviation backend,,5
115784773,2022-09-26 13:52:07.225,BE: Fix Sigmet types in OpenAPI specs for aviation backend,,3
115782059,2022-09-26 13:14:55.607,BE: POC: Use FastAPI for presets-backend,"See user story for description.

Findings:
- FastAPI and Flask have many similarities, so it isn't to hard to switch form Flask to FastAPI
- FastAPI supports asynchronous calls, which makes it potentially faster (in our case we probably would have to use a DB driver that supports async calls to benefit from this)
- FastAPI requires you to define the structure of incoming/outgoing data and automatically applies validation
- FastAPI automatically generates OpenAPI specs and Swagger dashboard from code
- I spent 2,5 days on presets-backend and it's almost done (probably one more day for the last details)",5
115779278,2022-09-26 12:32:45.629,Clean-up Sesar,"Sesar is no longer used, so we can clean it up.

To do:
- [x] Archive repositories (I cannot find any old repositories anymore)
- [x] Remove Logstash filters
- [x] Drop CFN stacks
  - [x] Userpool dev: https://eu-west-1.console.aws.amazon.com/cognito/v2/idp/user-pools/eu-west-1_kqPqg3g7p/users?region=eu-west-1
  - [x] Userpool acc: https://eu-west-1.console.aws.amazon.com/cognito/v2/idp/user-pools/eu-west-1_94RP6yZBi/users?region=eu-west-1
  - [x] Sesar dev s3 bucket: https://s3.console.aws.amazon.com/s3/buckets/knmi-sesar-data-sp10-test-memory?region=eu-west-1
  - PRD:
  - [x] Sesar cloudformation shh gateway: https://eu-west-1.console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/stackinfo?filteringStatus=active&filteringText=sesar&viewNested=true&hideStacks=false&stackId=arn%3Aaws%3Acloudformation%3Aeu-west-1%3A076350057214%3Astack%2Fknmi-sesar-SshGateway-IJI8OBWJ7DHY%2Fce087290-2d5d-11ea-9723-0aac2484be2a
  - [x] Sesar cloudformation backend 100day archive: https://eu-west-1.console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/stackinfo?filteringStatus=active&filteringText=sesar&viewNested=true&hideStacks=false&stackId=arn%3Aaws%3Acloudformation%3Aeu-west-1%3A076350057214%3Astack%2Fknmi-sesar-SesarBackend100DayArchive-4HPBWGU9ULWD%2Fce112520-2d5d-11ea-8bc7-02bbe9b74d60
  - [x] Sesar cloudformation product 100day archive: https://eu-west-1.console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/stackinfo?filteringStatus=active&filteringText=sesar&viewNested=true&hideStacks=false&stackId=arn%3Aaws%3Acloudformation%3Aeu-west-1%3A076350057214%3Astack%2Fknmi-sesar-SesarProduct100DayArchive-5BPWKABOTIBA%2Fcdb79370-2d5d-11ea-af61-063a4310b160
  - [x] Sesar cloudformation app:https://eu-west-1.console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/stackinfo?filteringStatus=active&filteringText=sesar&viewNested=true&hideStacks=false&stackId=arn%3Aaws%3Acloudformation%3Aeu-west-1%3A076350057214%3Astack%2Fknmi-sesar%2Faf4dc760-2d5d-11ea-990f-0ae0d664c880",3
115779042,2022-09-26 12:29:18.541,BE: Understanding TAF,Thursday morning Sep 29 @m_vanderven @maartenplieger @ernestopace @barthuttinga,3
115773185,2022-09-26 11:04:49.393,Layer Select: Enable and save Abstract part 0,"- [ ] swap service Url and serviceName field
- [ ] update style to latest design",2
115770002,2022-09-26 10:03:55.514,BE: Understanding geoweb-serverless-backend sigmet and airmet,"Goal:
- Understand BE
- Understand what SIGMET/AIRMET is
- Generate a list of improvements to be done/documentation to be written",3
115769915,2022-09-26 10:02:48.373,User should see how many layers a keyword or group contains.,"Tasks:
- Create selectors for finding how many layers are in a group/keyword
- Display this information in the filter window.",2
115769408,2022-09-26 09:54:31.592,LayerSelect - info about service,"![image](/uploads/c64bd26a30e31ac3409761fffaee083a/image.png)

Form is disabled if it's a system service. Zeplin design is coming later for disabled service.

See user story for more information",3
115769097,2022-09-26 09:49:25.994,Layer Select: Enable and save Abstract part 3,"Tasks:
- Both name and abstract are editable, so the user can change them if wanted
- show snackbar if saved",2
115768683,2022-09-26 09:43:03.688,LayerSelect Layers sorting orders,"Tasks:
- Verify with PO if we need to sort also by subgroups
- See user story for more information",3
115768355,2022-09-26 09:38:25.728,LayerSelect - Services sorting orders,See description,2
115768010,2022-09-26 09:33:47.933,LayerSelect - Keywords and groups sorting order,See description in user story,2
115767495,2022-09-26 09:26:50.348,BE: Meeting on logstash filtering,"We need to get an overview of what currently is in logstash and how the filters work, what ends up where.

- See if we can improve/clean up the filtering and write user story to improve
- Can we add tests to ensure generic filtering doesn't impact our filters?",3
115767402,2022-09-26 09:25:29.333,Layer listing is displaying last selected layer instead of service name,"### Steps to reproduce

* open new layer select
* select to display only one service
* add one layer to map using Add button
* see how service name is now added layer name in all the rows


### What is the expected *correct* behavior?

Service name in the listing should not be affected

### NEXT STEPS
Check if this bug is still happening after this fix: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2223
If bug is still happening create a new ticket to solve that bug",2
115764134,2022-09-26 08:57:26.279,"Layer Select show abstract, groups and keywords for layer","

example service that uses groups and subgroups: https://maps.dwd.de/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities",2
115764067,2022-09-26 08:56:52.452,BE: testing - show config.json in deployment output,"Add the config.json to the end of the deployment output for easy testing from a local FE.

- In the pipeline at the end, call /assets/config.json to retrieve the config.json and show in the output of the pipeline]",2
115763948,2022-09-26 08:55:44.845,Layer Select change title of dialog,"Please check the design here (not the US screenshot): https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/62c695a1ed42f01adee34e63

The title should be changed to ""Groups & Keywords"".",2
115763113,2022-09-26 08:47:52.903,BE: Include the system wide whitelist from CPT,"Include the system wide whitelist from CPT: https://gitlab.com/KNMI/cloud-platform/cicd/knmi-ecr-vulnerabilities-whitelist

See README for instructions on how to include",2
115762964,2022-09-26 08:45:42.949,BE: security check less strict in all pipelines,"Make the security check less strict in all pipelines (DEV, TST, ACC and PRD). It means that a vulnerability presence (Critical or high) will not block the pipeline but a message will be sent per mail or slack (tbd) with the vulnerability warning description.

- Less strict security check
- Send message per mail/slack in case of vulnerability warning


Documentation for build-image / ecr.sh: https://gitlab.com/KNMI/shs/knmi-build-image",3
115762767,2022-09-26 08:43:13.027,BE: CPT discussion on Vulnerability vs Deployment strategical implementation,"Have a discussion with CPT on the vulnerability handling

To discuss:
1. ask CPT to decrease the vulnerability report to 7 days (instead of 21 as currently)
2. ask if possible to do a scan every day (or some other frequency that is appropriate) instead of on push only
3. Discuss our plans regarding vulnerability handling following https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2036


------
**Conclusions so far:**
1. It is **not possible the decrease the vulnerability report to 7 days**
- For the vulnerability report, the last image in each ECR repository is scanned
  - If in this image a vulnerability is detected, it is assumed that this vulnerability will be present in the older images in the ECR repository as well.
  - This assumption is also valid for active containers
 
2. In between vulnerability reports (every 21 days), the last uploaded ECR images are **scanned once a day** (but a lambda collects the information every hour, see below). The results of these scans are visualized in Grafana
  - DTA dashboard: https://grafana.dta.logs.knmi.cloud/
  - PRD dashboard: https://grafana.prd.logs.knmi.cloud/
  - Attached to these dashboards are alerts set for detecting critical vulnerabilities. This provides alerts in between 21 days of the report

3. After a discussion of our plans, it is discouraged to make security less strict in all pipelines. CPT prefers to have high and/or critical vulnerabilities failing the pipeline (or the thresholds)- this sends a stronger message than letting the pipeline pass & sending an alert - as it motivates developers to immediately fix the vulnerability.
  - Regarding vulnerabilities emerging during deployment to production: if vulnerabilities are found in images in development/acc, one can assume that this vulnerability will occur in all images and should be patched before going to PRD as well. 
  - Regarding sending out an alert after a vulnerability has been found during the pipeline: an alert should be sent out within 24 hours when detected via the Grafana dashboard. Therefore, setting the pipeline less strict could be an option, but it might be some additional work to send out an alert via the pipeline if it will also be detected by the Grafana dasbhoard with a short delay.


------
Follow up: make a ticket to discuss how to monitor vulnerabilities in PRD / active containers in the cluster",3
115762575,2022-09-26 08:41:17.528,Service Abstract information usage,"On hover show the abstract of a service. Use the default Tooltip we're using. If it's too small, we will see afterwards for follow up ticket",2
115762358,2022-09-26 08:37:08.776,Layer select info layer part 3 - Legend,"Make the legend work inside the layer info. See if we can reuse logic of the Legend. If not, make it reusable",3
115762312,2022-09-26 08:36:17.353,Layer Select info layer part 2,"Create the content of the dialog. Thumbnail, legend and share link can be ignored. Make sure the layer icons are in as well. 

If there is not enough data, just create a story with fake data and focus first on styling. Create a new ticket for hooking up with real data. 


Light (https://zpl.io/JEzogXJ + https://zpl.io/5E6PoMQ) Dark (https://zpl.io/qyAZdJJ + https://zpl.io/GE6k8JE)",3
115762246,2022-09-26 08:34:31.292,Layer Select info layer part 1,"- Add the i Icon to the list 
- implement ToolContainer Dialog 
- content should be a string of ""Hello World""
- Only one info window open at one time. If you click next info button, content updates. If you close Layer Select window also info window closes.

Light (https://zpl.io/JEzogXJ + https://zpl.io/5E6PoMQ) Dark (https://zpl.io/qyAZdJJ + https://zpl.io/GE6k8JE)",2
115762217,2022-09-26 08:34:10.737,Add new Icons for layer dimensions,All icons can be found here https://knmi-nl.slack.com/archives/C042GJ9T5P1/p1664179415806189,1
115761813,2022-09-26 08:28:04.437,Layer Select responsive chips,"Remove the chevron logic, and let all chips show. After this is done, https://gitlab.com/opengeoweb/opengeoweb/-/issues/2115 can be closed",2
115761368,2022-09-26 08:21:12.937,Layer Select Layer Select enables services on its own,Selection should work as expected when slow services are loading.,3
115761328,2022-09-26 08:20:49.003,BE: Use TST userpool for master and dev stacks,"At this moment there is a DEV userpool for dev stacks and a TST userpool for master stack. The DEV userpool can be removed and only the TST userpool can be used for both dev and master stacks

- Rename current DEV userpool in https://gitlab.com/KNMI/geoweb/backend-services/dev-cognito-userpool/-/blob/master/cloudformation.cfn.yaml and remove the TST userpool from serverless BE. 
- Rename the above repository to ""cognito-userpool""
- TST userpool is updated on a merge to master

### Test criteria

* DEV userpool is removed
* TST userpool is used for both dev and master stacks
* ACC and PRD are left as is and won't be affected",3
115761175,2022-09-26 08:18:50.308,Layer Select Enter key does not work when entering new service address,"When pressing enter after typing a url, the popup should open",2
115758449,2022-09-26 07:41:04.410,Layer Select: Enable and save Abstract part 2,"When saving or editing a service, we should update the information to redux and localstorage also.
If browser is refreshed, the services are fetched from localStorage and added back to redux

ToDo

- Save abstract into redux
- edit saga and save abstract into localstorage also
- If browser is refreshed, the services are fetched from localStorage and added back to redux",3
115476747,2022-09-21 06:49:29.095,FE: remove withStyles and @mui/styles,"All the `makeStyles` are gone, but we still have some `withStyles` left. Those can be converted to sx props. After that @mui/styles can be removed",2
115333236,2022-09-19 13:35:28.720,FE: push image with latest tag to gitlab registry,"* on every commit to master we push a new image to the gitlab container registry here https://gitlab.com/opengeoweb/opengeoweb/container_registry/3075858
* there is also a `latest` tag, which has not been updated since 3 months
* make sure the image is also pushed with the `latest` tag",1
115320950,2022-09-19 11:16:13.424,FE: see if we can enable embedding via https in storybook,"If you check the console, the following error appears:

![Screenshot_2022-09-19_at_13.15.32](/uploads/128521f259eb0e3c4e9a2bb4d94e80f9/Screenshot_2022-09-19_at_13.15.32.png)

Probably the problem is caused by the zeplin link is one with `https` and the story preview is not. See https://support.zeplin.io/en/articles/5671951-troubleshooting-tips-for-storybook-integration for more information. Probably we need a `ssl certificate` to run storybook with https. (try `nx storybook theme --https`). More info in nx: https://nx.dev/packages/angular/executors/webpack-server#ssl 

If this solves the problem, see if we can use the zeplin URI links. Might be that this is related, and if it works create a new ticket to update the zeplin links (not needed per se but might as well do it since the total is not that big) and readme.",2
115304445,2022-09-19 07:23:47.484,FE: storybook set default orientation to right,"Currently when starting a storybook, the addon panel is always default orientated to the bottom. 
- We can change that to right for default with `panelPosition`. 
- Also default the panel to hidden

Create a new manager.js file in storybook and change this to right https://storybook.js.org/docs/react/configure/features-and-behavior",2
115118808,2022-09-15 10:22:28.327,FE: investigate token as env for story design,See if we can store the token as ENV var described here: https://storybook.js.org/addons/storybook-zeplin,1
112296174,2022-07-27 11:21:11.110,FE: Replace missing satellite layers in presets,"Layers in preset are not available anymore, since cinesat is stopped. Preset can be removed.

After stopping cinesat the following presets have some layers that are not working anymore:

* Satellite
* Radar and Satellite
* SIGMET/AIRMET
The none working satellite layers in these presets can be replaced:

**Satellite** (add updated single map preset only to map preset menu in layermanager and remove from hamburger menu) missing `HRV RGB` replace by Satcom HRV comb RGB

**Radar and Satellite**

??? (currently saying `no service available`) replace by Satcomp RSS HRV comb RGB

**SIGMET/AIRMET** (add updated single map preset only to map preset menu in layermanager and remove from hamburger menu)

missing `HRV RGB` replace by Satcomp HRV comb RGB

missing `vulkaanas` replace by Satcomp Ash RGB 



Actions in FE:
- update **Radar and Satellite**
- Remove **Satellite** and **SIGMET/AIRMET** from `screenpreset.json` in `knmi-geoweb` and `knmi.screenpreset.json` in `geoweb`",2
112293963,2022-07-27 10:52:17.303,FE: use new icon lib for theme lib,,2
112293955,2022-07-27 10:52:09.152,FE: use new icon lib for geoweb and knmi geoweb applications,,2
112288081,2022-07-27 09:07:00.803,"FE: fix rest of MapPreset props part 3 animation payload, settimestep, toggleTimeStepAuto","These give a lot of issues. Mainly because duration coming from animation payload can also be set by setTimeStep. First thing should be to get the preset a bit cleaner. Afterwards make it work with saving. 
```
 animationPayload?: AnimationPayloadType;
  setTimestep?: number;
  toggleTimestepAuto?: boolean;
```

Check if these still need to be defined inside MapPreset type:
```
  displayMapPin?: boolean;  
```

- shouldShowZoomControls https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1681


See https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1646 for reference

Make sure to do this after [part 2](https://gitlab.com/opengeoweb/opengeoweb/-/issues/2335), because some props are very intertwined with each other",5
112237066,2022-07-26 14:23:31.202,FE: dimensions not loaded correctly from preset,"Create a preset with an elevation dimension for example and set the pressure level to 700.

- Load the preset. 
- You will see it selects the minimum elevation (200) instead of the 700 from the preset. The values are stored correctly in the BE but the FE overrides as it hasn't yet loaded the dimension values upon loading the layer.
- in layer update information should update the current (stored) dimensions",5
112235674,2022-07-26 14:06:57.140,FE: fix rest of MapPreset props part 2,"Fix the remaining props of MapPreset:
```
  shouldShowZoomControls?: boolean;
  showTimeSlider?: boolean;
  displayMapPin?: boolean;  
```",3
112214599,2022-07-26 09:05:51.244,FE: publish icons lib to npm,"Since all packages now depend on the icons lib, the icons also needs to be published to npm. Add a job for this in the `.gitlab-ci.yml` file (see the other publish jobs for an example).

Make sure to also publish the icons:docs",1
112143551,2022-07-25 10:51:59.867,FE: app crashes when selecting some presets with out of sync dimensions,"To test:

* `nx serve knmi-geoweb`
* from service Harmonie N25, add layer `Geopotential height (PL)`
* save as custom preset
* now reload the app by refreshing your browser
* open the preset immediately
* browser is crashing



![Screenshot_2022-07-25_at_12.57.08](/uploads/c4ccd02bb832c0881b475e4010683ddd/Screenshot_2022-07-25_at_12.57.08.png)


If we don't store the dimensions with name time or reference_time, it won't give any issues. Filter those dimensions out in the selector `getMapPreset`. This tryout worked:
```
export const getMapPreset = createSelector(
  getMapLayers,
  getMapBaseLayers,
  getMapOverLayers,
  getBbox,
  getSrs,
  getActiveLayerId,
  (
    layers: Layer[],
    baseLayers: Layer[],
    overLayers: Layer[],
    bbox: Bbox,
    srs: string,
    activeLayerId: string,
  ): MapPreset => {
    const allLayers = [...baseLayers, ...overLayers, ...layers].map((layer) => {
      const dimensions = layer.dimensions.filter(
        (dimension) =>
          dimension.name !== 'time' && dimension.name !== 'reference_time',
      );

      return {
        ...layer,
        dimensions,
      };
    });
    return {
      layers: allLayers,     
    };
  },
  selectorMemoizationOptions,
);
```",3
112140850,2022-07-25 09:57:26.797,FE: remove toggleLoop action from core,"in `libs/core/src/lib/store/mapStore/map/reducer.ts` you can find the `toggleLoop` action. This can be removed, also with the `shouldLoop` prop.",2
112037226,2022-07-22 10:59:59.072,"BE: fix CORS issue when reading header value ""Location""","In the frontend, we want to read the ID of a newly created mapPreset. The data is already there, we can use the 
`Location` key from the response headers. Only when trying to access it, this error appears:

```
Refused to get unsafe header ""Location""
```

A suggestion to fix it can be found here https://stackoverflow.com/questions/7700151/refused-to-get-unsafe-header-location. If you want to try it out in the front-end, see the code described in https://gitlab.com/opengeoweb/opengeoweb/-/issues/2329",2
112036971,2022-07-22 10:51:12.860,FE: fix save preset as flow,"If you press `save As` in the preset option menu, the flow should be (fix mentioned in bold):
- **close the menu with preset list**
- open the dialog (already present)
- choose a title and press save (already present)
- **now get the newly created Id from the header response, and activate this preset as activePreset**

We can get the new id from the header response `Location` of the saveAs post request:

![Screenshot_2022-07-22_at_12.56.23](/uploads/579ee65bb894532b8633b016f27337a6/Screenshot_2022-07-22_at_12.56.23.png)


Inside `utils/api`, do to try out if we can read the value:
```
 saveViewPresetAs: (data: ViewPreset): Promise<void> => {
      return axiosInstance.post(`/viewpreset/`, data).then((response) => {
        return response.request.getResponseHeader('Location');
      });
    },
```

After this we can hook it up inside `MapPresetsDialogConnect` to handle the correct new active id",3
112023230,2022-07-22 07:10:47.105,FE: detect layermanager changes part 4: bbox and vertical dim select,Make bbox visible as change,2
111970954,2022-07-21 10:40:13.497,FE: detect layermanager changes part 3: layer actions,"Make the layeractions (like enable, opacity, changeDimension etc) visible as change",3
111956870,2022-07-21 06:58:40.592,FE: rename `activePresetId` of map reducer to `activeMapPresetId`,Rename the activePresetId to activeMapPresetId of the map reducer. This makes it more consistent with coming other prop (hasMapPresetChanges and isMapPresetLoading),2
111956543,2022-07-21 06:52:15.472,"FE: detect layermanager changes part 2: add, move delete","Previous ticket made the new actions, and set the baseLayers. Now the rest of the layermanager actions. Split if needed.

after ticket:
- layer actions
- Dont't forget about the bbox!",3
111901514,2022-07-20 08:08:12.727,FE: fix broken pipeline,Overlayers got lost in merging in the selector of getMapPresets. Should be added to the layers,1
111860256,2022-07-19 14:19:38.457,FE: update satComp layers to overLayers,"Some layers defined in satComp presets are overLayers, but we defined them as mapLayer. Find the one with `OVL` in the service, and make them overLayer instead of mapLayer

https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1630#note_1031013599",2
111856919,2022-07-19 13:30:03.745,BE: write migration to remove Empty Map,,3
111784720,2022-07-18 12:37:31.289,FE: fix MapPresetsForm onEnter test,"This test was working before, but due to hidden input not anymore. 

Maybe an error is happening an we don't see it. Are all formValues well defined?",3
111769445,2022-07-18 08:35:59.041,BE: remove empty map from system preset list,,2
111769324,2022-07-18 08:34:15.296,FE: show error when saving fails,"~~For both save as save as~~
- Only for SAVE
- SAVE AS already shows an error on the dialog when it fails

![image](/uploads/2f3c775e442dd2f15c98de88a45ee4f4/image.png)",3
111766934,2022-07-18 07:56:17.218,FE: add the WOW WMS service to the knmi list of available services in knmi-geoweb and geoweb,"
add the WOW WMS service to the list of available services in knmi-geoweb and in the knmi.initialPresets in geoweb:
(in both places because we are not yet using unified geoweb for deployments)

https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=WOWDATA

See https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1735",2
111766839,2022-07-18 07:54:16.417,BE: GeoWeb (GST) will configure Adaguc-server (use Adrians styling) and create a WOW WMS service for GeoWeb,"- configure incoming data from provided S3 bucket
- use Adrians configuration for the layer and the styling",3
111766260,2022-07-18 07:44:37.221,FE: upgrade puppeteer to latest version,"we go from puppeteer v10 to v15, this includes breaking changes:

- Node 12 is no longer supported, switch to Node 14
- Switch to Chromium 102",2
111765126,2022-07-18 07:31:56.645,BE: make presets work on dev-branches,We want to be able to test the presets backend on dev-branches. Currently this doesn't work because the cognito implementations doesn't match.,5
111764956,2022-07-18 07:29:26.871,FE: Rewrite presets reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/presets/src/lib/store/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",2
111764951,2022-07-18 07:29:22.814,BE: advertise the version tag in presets api,For the presets-backend it is sometimes not clear if we are working with a new version. Possible solution would be to advertise the version tag or build date of presets-backend in its API.,2
111764882,2022-07-18 07:28:12.504,FE: move overlayers to layers,"Mover overlayers to the layers of presets. Make sure the fix this in the fmi-aws-config repo

Instead of sending overlayers we use layers with layerType overlayer.",3
111764874,2022-07-18 07:27:56.670,FE: Rewrite screenmanager reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/screenmanager/src/lib/store/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",3
111764869,2022-07-18 07:27:52.789,FE: detect layermanager and bbox changes part 1,"Detect changes in the layermanager and bbox, and let it show in the preset menu with italic bold.

This ticket does the setup of our new actions, and has setBaseLayers action covered",3
111764810,2022-07-18 07:26:41.809,Make space weather doc for Met Office,Met Office: The spaceweather API for notifications is being updated and Met Office would like to know our wishes and which fields we use as they can be a bit flexible. We agreed to create a short document with our needs/wishes so they can take them into consideration. More info here: https://docs.google.com/document/d/1853HaJTTzABt8F1qk8CNpmvQmycBIGHIvS4gLVtfs5o/edit,3
111764784,2022-07-18 07:25:55.203,FE: fix rest of MapPreset props,"In https://gitlab.com/opengeoweb/opengeoweb/-/issues/2259 some basic props are working when changing the mapPreset (bbox, layers, overlayers). fix the rest of the props, check the MapPreset props to see, and add the missing selectors to the getMapPreset selector

- see changes
- make possible to save
- bundel props that belong to eachother 


IN:
```
  shouldAnimate?: boolean;
  shouldAutoUpdate?: boolean;
```

Rest of props (https://gitlab.com/opengeoweb/opengeoweb/-/issues/2335):
```
  shouldShowZoomControls?: boolean;
  showTimeSlider?: boolean;
  displayMapPin?: boolean;  
```

Problem props, all related:
```
  animationPayload?: AnimationPayloadType;
  setTimestep?: number;
  toggleTimestepAuto?: boolean;
```",3
111764665,2022-07-18 07:23:50.338,Test out KNMI Harmonie in Timeseries,"- change the url and see if it works
- make follow up tasks if needed

There is an ADAGUC based OGCAPI Features server on HARMONIE and preciptation radar data on: https://geoservices.knmi.nl/ogcapi",2
111764584,2022-07-18 07:22:06.057,FE: when you use the shortcut to move the time slider the map also moves,"when you use the shortcut to move the time slider the map also moves, should be fixed

add tests",2
111764371,2022-07-18 07:18:58.171,FE: layermanager crashes after selecting preset and reopening,"- fix the styling of the error, make a screenshot to have proof that it works
- fix the error",2
111764261,2022-07-18 07:16:37.332,FE: Add WMS services to available services,add them to the list in Knmi application,2
111763863,2022-07-18 07:08:56.854,FE: remove ID for saveAs route,Remove the static ID we give for the saveAs route in the frontend.,1
111763042,2022-07-18 06:54:00.232,BE: saveAs fails when not passing Id,"When the frontend does not supply an id, saveAs will fail. This is no problem for system presets, but can be for new presets.

Current FE solution: always pass an (static) id (the BE will generate one)

The BE should never need an id for the SaveAs call",2
111701482,2022-07-15 15:16:37.226,FE: Rewrite timeseries reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/layerSelect/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",2
111678258,2022-07-15 07:27:50.400,BE: Investigate why in the presets backend request.get_json returns None,"Via nginx and gunicorn, the function `request.get_json` is returning `None`. We had to use `json.loads(request.data.decode('utf8'))` as a fallback.

We suspect some required headers are not correctly forwarded from nginx to gunicorn. Worthwhile investigating as this get_json function is indeed better.",3
111677663,2022-07-15 07:13:39.169,BE: Preset BE should return informative message on error,"When the Preset BE ""Save As"" and ""Save"" functionality fails with a 400 code, it is unclear for users what the reason is. It can be because of a malformed JSON, it can be that the preset name already exists. 

Users should be presented with more informative messages in the case of errors.

Example use case:
- ""Save As"" with duplicate title",3
111647037,2022-07-14 14:57:30.266,FE: release,,1
111644637,2022-07-14 14:13:42.050,FE: more icons for sigmet-airmet,"Unfortunately some icons were missed in the https://gitlab.com/opengeoweb/opengeoweb/-/issues/2279.

```
import {
  Create as CreateIcon,
  CheckCircle as CheckCircleIcon,
  Schedule as ScheduleIcon,
  InfoOutlined as InfoOutlinedIcon,
} from '@mui/icons-material';
```
should also be in the Icons lib and imported from there.
Check also if there are other icons in sigmet-airmet library",2
111625095,2022-07-14 08:21:42.532,FE: presets change scope to user,The FE is currently sending the whole preset from the BE how we receive it. The scope needs to be changed to `user`. Change this in `libs/presets/src/lib/components/MapPresetsDialog/MapPresetsFormDialog.tsx`,1
111573000,2022-07-13 10:48:41.481,FE: Icon lib documentation and storybook port,"1. Change the storybook port for the Icon lib. At this moment is 4400, but it is already used for Sigmet-Airmet
2. Add in README the Icons library docs.",1
111570863,2022-07-13 10:11:21.591,FE: cleanup stories in presets,"- The default story was `http://localhost:4300/?path=/story/components-mappresetsdialog--map-presets-dialog-dark-theme`, not sure it was the best one, but would be nice to put that back, as it gives a nice overview of all currently implemented options.  Otherwise `http://localhost:4300/?path=/story/components-mappresetsdialog-mappresetsdialogconnect--map-presets-dialog-on-map-dark-theme` is also nice on the map, but then with default layerManager open so it saves a click
- The stories are hard to read in a list, better to categorize some stories to for example state stories. 

![Screenshot_2022-07-13_at_12.10.55](/uploads/79d43c7e19f1b54a4247fe44cab85c81/Screenshot_2022-07-13_at_12.10.55.png)",1
111560178,2022-07-13 07:42:32.280,BE: fix preset save as api url,"The FE is giving cross domain issues, probably because has a `/` in it and should not have. 

In backend:
- Scope **should work** when passing it. 
- Should work with and without /",2
111512738,2022-07-12 13:14:14.237,BE: change value/use of preset_type field in presets database,"The preset_type field in the view_presets table currently has values of global or user.
This is not used anywhere and seems to serve no purpose.
This information is already covered by the scope field (""system"" or ""user"")

The preset_type field should actually contain a value ""map"" for map view presets.
This should be the default value.
This should also be changed in the values already in the database.",2
111442003,2022-07-11 08:53:00.036,FE: use new icon lib for core (remaining components),,3
111441986,2022-07-11 08:52:32.597,FE: use new icon lib for core (TimeSlider),,2
111440240,2022-07-11 08:26:50.392,FE: use new icon lib for timeseries,"
Move icons in timseries into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",1
111440034,2022-07-11 08:23:53.534,FE: use new icon lib for taf,"Move icons in taf lib into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",2
111440023,2022-07-11 08:23:33.540,FE: Rewrite layerSelect reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/layerSelect/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",3
111440004,2022-07-11 08:23:14.717,FE: Rewrite ui store reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/ui/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",3
111439971,2022-07-11 08:22:41.004,FE: use new icon lib for sigmet-airmet,"Move icons in sigmet-airmet into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",2
111439881,2022-07-11 08:20:32.745,FE: use new icon lib for shared,"Move icons in shared into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",3
111439695,2022-07-11 08:17:08.621,FE: use new icon lib for core (LayerManager),"Move icons in core (LayerManager) into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",2
111439453,2022-07-11 08:13:17.438,FE: show error for preset detail,"Show the error in layermanager when fetching of a preset goes bad. For now show a error, with a close icon to remove it. Later we might remove the error state to redux after we can see changes in an active preset. 

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61eff734e45296a2b037345f

![image](/uploads/e6e54c900db00faca65f40453f60a9cd/image.png)",3
111439368,2022-07-11 08:11:46.841,FE: show error for preset list,"Show error in the list of presets 

![Screenshot_2022-07-11_at_10.12.01](/uploads/ecd2a0e9193aa58ff73efef9a7a3b091/Screenshot_2022-07-11_at_10.12.01.png)",3
111439128,2022-07-11 08:07:58.275,FE: loading state load preset detail,"Show loading state when clicking on a preset. Use progress bar inside the layermanager. https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926f2711dd29d9dca7b3

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61eff734e45296a2b037345f",2
111438886,2022-07-11 08:02:56.235,FE: loading state load presets list,"Show loader when fetching the preset list. Make two versions (POC) and show to team/Didier and pick one. After that create the unit tests.

--> Didier choose the spinner and design can be found here: https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61eff734e45296a2b037345f",3
111437632,2022-07-11 07:42:58.265,BE: Save a user preset,"- Save a user preset. 
- This will overwrite an existing user preset in the backend. 
- API definition is discussed in https://docs.google.com/presentation/d/19EZolb7x2DDhQg3tkEs8ejlKaKCq7Qni6XQ7XWKAJ9Q/edit#slide=id.p",2
111435873,2022-07-11 07:19:44.689,FE: Rewrite service store reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/mapStore/service/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.
- Use reselect and redux from redux-toolkit and delete dependencies from package.json",3
111435797,2022-07-11 07:18:02.610,BE: Delete a user preset,"It should be possible to delete a user preset. Implement this according to the discussed API. 

- Discuss how the API can be called to delete a preset (DELETE rest command)
- Implement in presets backend

Discussion with BE devs. Write down the spec in the document. (https://docs.google.com/presentation/d/19EZolb7x2DDhQg3tkEs8ejlKaKCq7Qni6XQ7XWKAJ9Q/edit#slide=id.p)

Update the Readme.md as well",3
111435775,2022-07-11 07:17:27.179,FE: Rewrite generic store reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/mapStore/generic/synchronizationGroups/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",5
111435641,2022-07-11 07:15:42.446,FE: Rewrite layer store reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/mapStore/layers/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.
- ~~- Use reselect and redux from redux-toolkit and delete dependencies from package.json~~ Moved to https://gitlab.com/opengeoweb/opengeoweb/-/issues/2271 because it will be a smaller MR",5
111365600,2022-07-08 12:38:51.506,Delete unused ResizeHandle component from screenmanager,"The `ResizeHandle` component has been replaced by `DraggableResizable/Resizable` in `shared`, so the unused component in `screenmanager` can be deleted.

Delete this component:
https://gitlab.com/opengeoweb/opengeoweb/-/tree/master/libs/screenmanager/src/lib/components/ResizeHandle",1
111362033,2022-07-08 11:14:19.890,FE: add keyboard control for confirmation dialog,"The confirmation dialog currently has no keyboard support. Would be nice to have the following support:
- esc -> close dialog: add eventlistener and remove on unmount
- enter -> submit dialog: autofocus on submit button when opening the dialog

If the focus is on the cancel button and you press enter, it should still cancel. Tab and shift-tab should still work. The focus should be visible.",3
111360840,2022-07-08 10:47:29.381,FE: cleanup jsonFilter file,"In https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1593 we added a new filter method for filtering baseLayers and mapLayers from a list. `filterBaseLayers` and `filterMapLayers` can be replaced by this, to save some loops.",2
111352180,2022-07-08 08:11:37.574,Fix GOES irregular product time issues,"The NOOA GOES-16 data has a slightly varying observation time: the times can deviate one or more seconds from a regularly repeating sequence.
This has to be fixed in ADAGUC (by means of implementing quantizemethod and quantizeperiod also for observation times).
Then the fixed ADAGUC version has to be used in GeoWeb-Adaguc-Server (by updating the used nested stack version) and configured in the SAT.xml configuration of GOES-16 data",3
111314718,2022-07-07 12:55:23.025,FE: use new icon lib for screenmanager lib,"Move icons in screenmanager lib into icons lib (or use ones which exist there already).

Add snapshots and tests for new icons.",2
111301601,2022-07-07 09:21:48.384,FE: presets add more validation to dialog form,- prevent spaces at start,2
111301417,2022-07-07 09:18:20.056,FE: presets make it possible save custom preset as,"Current its only possible to save existing ones, but we should be able to save every preset as.",3
111299495,2022-07-07 08:49:39.307,FE: delete preset,"Delete preset in fe, connect:

* api
* fakeApi
* remove disabled prop in MapPresetsMenuItem and uncomment the unit tests
* show confirmation dialog by using current implementation (we could not use the useConfirmationDialog hook, as the form needs some extra fields, and a promise only returns a value once). use `action` prop to remove the `content` prop for this action, and toggle onSubmit method to not validate form 
* enable unit tests again",3
111299395,2022-07-07 08:48:37.659,FE: save map preset,"Save preset in fe, connect:
- api
- fakeApi
- enable menu item again in  MapPresetsMenuItem and uncomment the unit tests
- add id to save request
- add more tests",3
111264045,2022-07-06 15:19:38.495,FE: Generate service_id in WMJSService instead of reducer,"# FE: Generate service_id in WMJSService instead of reducer

### Note:  This is for the layerselect component.

The layerselect store needs the same id's as the service store. Therefore the id needs to be generated in  WMSJSService. This will make the same id available for all stores. It also allows for finding the id of a service by looking it up via its url using the `WMGetServiceFromStore` function from `webmap`.",1
111167650,2022-07-05 07:19:45.613,BE: Presets backend: Configure new database SQLAlchemy url,"When using sqlalchemy, a different database connection string is needed.

We need to change it at https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/blob/master/cloudformation.cfn.yaml#L190

For docker-compose the change was from :
```
      - ""PRESETS_BACKEND_DB=host=presets-backend-db port=5432 user=geoweb password=geoweb dbname=presetsbackenddb""
```
to
```
      - ""PRESETS_BACKEND_DB=postgresql://geoweb:geoweb@presets-backend-db:5432/presetsbackenddb""
```

Something similar needs to be done in cloudformation.",1
111119403,2022-07-04 11:26:26.994,BE: Fix unclear/incorrect snapshotting for presets-backend,"The rationale behind the creation of snapshots for the presets-backend is unclear or even incorrect. Currently there are unused or undefined SnapshotIdentifier parameters to the cloudformation script. For dev branches and probably also for tst and acc it is not necessary to make snapshots on stack/DB removal.

Testcriteria: Correct and useful behaviour of snapshotting on DB delete",2
111116388,2022-07-04 10:25:06.490,Deploy 1.2.5 to PRD on 12 July 2022,,1
111113639,2022-07-04 09:40:40.039,BE: Create initial migration script,- run `flask db migrate` to add initial migration script,2
111112873,2022-07-04 09:35:36.176,BE: Add and configure Alembic,See: https://gitlab.com/opengeoweb/backend-services/presets-backend/-/tree/experiment-db-migrations-with-alembic,2
111112579,2022-07-04 09:31:07.632,BE: Include DB migration in deployment process,Exact mechanism to be discussed. Probably something with an ECS container in Gitlab stages.,5
111111257,2022-07-04 09:14:00.602,FE: show title dialog new preset,"If you click 'save as' on a system preset, a dialog should appear where you can put the title. Show the title of the selected preset as a default name, which the user can adjust. A (fake api) call should be called and closes the window again. When BE is ready, we only change the api endpoint from fake to real.",3
111110945,2022-07-04 09:08:50.943,FE: change move baseLayer to layers,"Move baseLayers to layers, and do this as well on the fmi-config repo

fmi-aws-config repo MR: https://gitlab.com/opengeoweb/fmi/fmi-aws-config/-/merge_requests/46",3
111110927,2022-07-04 09:08:33.833,BE: change move baseLayer to layers,Move baseLayers to layers,2
111108636,2022-07-04 08:43:50.662,BE: Add ORM via SQLAlchemy lib to preset BE,"- create data class defining the table structure of `viewpresets`
- `dbactions` module should be replaced by SQLAlchemy 
- Branch with experimental work is here: https://gitlab.com/opengeoweb/backend-services/presets-backend/-/tree/experiment-db-migrations-with-alembic",3
111107555,2022-07-04 08:30:24.028,BE: List user presets," - Add user presets to the result of the list (API won't change). 
 - Retrieve user presets depending on who is calling.",3
111106922,2022-07-04 08:21:56.941,BE: Implement Save as functionality,"- Please note that this depends on the Alchemy implementation. 
- Should conform to the API call documented in https://gitlab.com/opengeoweb/opengeoweb/-/issues/2238",3
111106462,2022-07-04 08:18:01.547,BE/FE: Design new API call for Save as functionality,"- Document new call in the README of the Preset BE.
- Hold a short meeting with both BE and FE people.",2
111104656,2022-07-04 07:46:31.750,FE: use new icon lib for presets lib,"Now we have an icon lib, we can use it in the `presets` lib. Put the (missing) icons inside the icons lib, and use them inside presets. For the rest of the libs, create tickets after this ticket is done. Don't forget to add snapshots for the icons

Follow the guide of readme https://gitlab.com/opengeoweb/opengeoweb/-/tree/master#adding-a-new-library-to-this-workspace",2
111104299,2022-07-04 07:41:11.608,FE: create new nx icon lib,"Create a new NX icon library. Make 1 icon example. Should be in the end 1 page with a lot of icons. 
- 1 story for all (future) icons. Every icons should be exported seperately 
- with a switch dark/light theme 
- should export the icons
- should have snapshots",3
111103472,2022-07-04 07:31:13.987,FE: Remove advancedLayerStore,- remove everything in folder /home/runarf/dev/opengeoweb/libs/core/src/lib/store/advancedLayerStore,2
111103097,2022-07-04 07:27:02.535,FE: Rewrite map store reducer with redux-toolkit,"Acceptance criteria:
- Replace reducer in libs/core/src/lib/store/mapStore/map/reducer.ts with createSlice reducer from react-toolkit
- Use actions from createSlice reducer in all affected code. Remove actions.ts and constants.ts file.",5
110878744,2022-06-29 08:01:17.935,FE: Update presets with new satcomp layers,"- output_1km_hrv_comb layer should be renamed to satview_1km_hrv_comb 

Check that all satcomp presets work.",1
110676151,2022-06-24 13:54:10.811,BE: update README for future database alterations,,1
110672624,2022-06-24 13:02:56.304,BE: Configure Presets BE with Cognito part 2,"- The presets-backend endpoint `viewpresets` should work with authenticated and anonymous users. If you are not signed in, you will get the public presets. If you are correctly signed in, the system will return your presets and you are able to save/update your presets. If you try to access the presets-backend with invalid credentials, it should return a 401, unauthorized.",3
110456022,2022-06-21 07:44:21.605,Deploy to PRD on 28th,,1
110455933,2022-06-21 07:43:25.558,BE: Rename the Satcomp satellite images and remove some overlapping images,Solved in https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/merge_requests/39,3
110391575,2022-06-20 07:13:04.180,Internal meeting discussing which are the topic in which we need real help from CPT team,,3
110391550,2022-06-20 07:12:20.647,Meeting with CPT about how to deal with database,"The issue this time is with database: A new version of the presets BE introduces an extra column. The Postgres deployment is somehow saved (I believe a snapshot is saved every time a redeploy takes place). When the updated code tries to access the DB, the new column is not found and thus the ECR is kept hanging and everything times out on deployment.",3
100754121,2022-01-17 08:30:17.495,TAF: validation Weather and Cloud (VV),"Weather and Clouds (VV)
Currently, VV (vertical visibility) is allowed until VV010 (including VV010). There is however an additional rule (Dutch National deviation from international rules), allowing for a different range when using FG as a weather code.

For FG the VV can be between VV001 and VV005 (including VV005). 
This not validated correctly in GeoWeb now.

### Wished behavior:
For FG VV000 until VV005 (ncluding VV005) are allowed.


This issue describes these rules, based on the document  TAF-bulletin FTNL31 in EBNF Jantine Bokhorst 01-09-2021 v.1.0 ""Deze maxima zijn officile Nederlandse afwijkingen van de WMO/ICAO regelgeving."", see http://confluence.knmi.nl/download/attachments/48039377/TAF%20in%20EBNF%20v1.0%2020210901_intern.pdf?api=v2

- Add a * to the notification, to indicate that this is a national exception (*). 
- Add a comment in the code to indicate that this is a national rule


~~NB: Should this be the case also for FZFG, MIFG, BCFG and PRFG. This is not described anywhere. Now FZFG, MIFG, BCFG and PRFG are treated differently for VIS in GeoWeb (FG <1000 m, the combinations with FG), for now it is logical to treat them the same for VV.~~",3
100754043,2022-01-17 08:29:19.078,TAF: Wind: VRB only with 3 kt or less or gusts with showers,"In the validation for wind VRB is at the moment always allowed. This is not correct.

For the winddirection DDD the use of VRB is only allowed when:

* The windspeed is 03kt or less or
* There are gusts with showers, so there should be FF_MAX (gusts) mentioned in wind and in weather SH, TS or SQ should be mentioned.

If none of these situations is the case, VRB should be disapproved by the validation.

This issue describes these rules, based on the document TAF-bulletin FTNL31 in EBNF Jantine Bokhorst 01-09-2021 v.1.0 (NB)http://confluence.knmi.nl/download/attachments/48039377/TAF%20in%20EBNF%20v1.0%2020210901_intern.pdf?api=v2)",3
100753846,2022-01-17 08:26:41.840,Elevation slider and legend dialog missing in SIGMET and AIRMET form,"When selecting a layer with elevation as a dimension, the elevation slider is not shown. E.g. select Harmonie Wind flags (PL) --> elevation slider is not shown.

Also the legend dialog is missing.",3
100753751,2022-01-17 08:25:34.892,FE: MUI5: fix knmi-geoweb unit tests,,3
100753028,2022-01-17 08:15:02.091,Tech Thursday meeting (SIGMET/AIRMET),"GW will lead the meeting at Tech Thursday. Two slides are already there, re-use these.

20th of Januari 13:00 till 14:00

https://docs.google.com/presentation/d/12ciBYPEm0c4FWGny25mWT99A2WYHqrdN/edit?usp=sharing&ouid=108664741257531327255&rtpof=true&sd=true

**Goal:**

GW backend uses AWS native solutions which are difficult to share with our partners. Present the GW view to KNMI and lets have a discussion. We would like to discuss the current architecture and make a more open source minded solution.
- GW is planning to share the GW lambda backend code with our partners
- Is current AWS native solution the right direction?
- How can we share our backend code? How can we benefit from improvements made by our partners?",3
100753000,2022-01-17 08:14:21.572,Presets Meeting - 21 Jan @ 13,,3
100752942,2022-01-17 08:13:13.839,DevOn Meeting 18th Jan,,3
100752788,2022-01-17 08:10:20.085,Update release notes for 1.0.35 on Confluence,Update release notes for 1.0.35 on Confluence (as Confluence was undergoing a migration at the time of release and was in read-only mode),2
100752756,2022-01-17 08:10:06.286,MUI5: snapshots meeting,,3
100752715,2022-01-17 08:09:27.790,FE: MUI5: fix slider unit tests,,3
100752704,2022-01-17 08:09:14.791,FE: MUI5: fix spaceweather stories,,1
100637436,2022-01-14 10:37:19.302,FE: prepare MUI5: wrap taf tests with theme,Add wrappers so unit tests won't fail,2
100600481,2022-01-13 16:35:14.024,FE:WMLayer optimize parselayer function for multimap performance,"With the google chrome performance optimizer a profile was made of the application when the slowniness is experienced. This was done with a multimap view with 24 maps. It seemed that the GetCapabilities file was 48 times parsed for the same type of layer. (Same service and layername).

The issue seems to be in the parsing of the WMS GetCapabilities document. When line WMLayer, 1030 is commented out, the application remains fast.

It starts with ReactMapview, 399, function wmLayer.parseLayer  and WMJSMap, 1498, function layer.parseLayer. The callback will call the __parseGetCapForLayer function, which in turn will call the layerDoneCallback function. It will return a layer object with properties set based on the getcapabilities. It seems that many seconds are spend in the __parseGetCapForLayer of WMLayer. This parses the jsonified GetCapabilities file and puts certain layer properties.

**Solution**: Re-use the layer object properties for other layers, bypassing the parsing of the getcapabilities file.

- Add a story to core with many maps demonstrating that it works smoothly.",5
100594041,2022-01-13 15:37:56.802,FE: cleanup snapshots: remove white space shared snapshots,"Some snapshots have a lot of whitespace, if removed it's easier to see the difference.

In the **shared** library, change the width of these components snapshots so we don't have so much empty space in the snapshot:

* cheat sheet
* toolcontainer",2
100593662,2022-01-13 15:33:22.899,FE: Cleanup snapshots: remove white space theme snapshots,"Some snapshots have a lot of whitespace, if removed it's easier to see the difference.

In the **theme** library, change the width of these components so we don't have so much empty space on the right in the snapshot:

- card
- form elements
- typography",3
100593303,2022-01-13 15:27:00.201,FE: Cleanup snapshots: remove white space spaceweather notification list snapshot,"Some snapshots have a lot of whitespace, if removed it's easier to see the difference.

Make sure the spaceweather NotificationsListSnapshot doesn't contain so much whitespace.

Probably the component styling needs to be updated to make it work",2
100581201,2022-01-13 12:47:59.038,FE: release new package 2.1.2,,2
100571294,2022-01-13 11:39:16.244,FE: Cleanup snapshots: remove white space sigmet-airmet form snapshots,"Some snapshots have a lot of whitespace, if removed it's easier to see the difference. 

![storyshots-spec-ts-storyshots-components-airmet-form-cancel-airmet-take-snapshot-1-diff](/uploads/22aa00a473028cc8f2206199e98c1188/storyshots-spec-ts-storyshots-components-airmet-form-cancel-airmet-take-snapshot-1-diff.png)

Make sure the sigmet-airmet form snapshots don't contain so much whitespace.

The white space shows because we hide the map for snapshots, so the component might need some additional styling changes to make it work.",5
100568306,2022-01-13 10:55:12.129,BE: smoketest sometimes failing on login,"The smoketest sometimes fails when it tries to login, rerunning the smoketest job solved the issues. But these tests should be stable.

Example issues:

1. one of the logins gave an error:
- https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/1970657754
- https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/2000172408

2. 'Error: Timed out retrying after 30000ms: Different value of typed password':
https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/1967114011",5
100564931,2022-01-13 10:15:24.495,FE: simplify TimeSliderScaleSlider logic,"Simplify TimeSliderScaleSlider in order to make steps possible, this makes it easier for MUI5 upgrade.",3
100513811,2022-01-12 13:03:19.414,Check and unify hover styling for circular buttons in LayerSelect,"Once the layout of the LayerSelect in complete, check that the circular buttons have consistent hover style, i.e. the shadow/overlay around/over the button when hovering. This is because the layout has multiple circular buttons, such as the search/clear button, close-buttons in windows and arrow buttons in Service List, where the hover shadow is not precisely defined, meaning that they could all end up different if not checked. The hover styles may also be different if there's a good reason for that.

Ask @AWih for more information

Acceptance criteria:
- Font size shuld be fixed which caused snapshot are changed
- Reviews are done",1
100513790,2022-01-12 13:02:36.894,Demo of screenmanager POC in DE-meeting (13 January 2022),,1
100499631,2022-01-12 09:20:21.827,FE: add test wrapper to DraggableDialog,Add a wrapper so the unit test will not fail in MUI5 branch,1
100438951,2022-01-11 15:19:41.153,FE: prepare MUI5 with correct theme type,"These files need correct providers or theme Type

libs/core/src/lib/components/CustomSwitch/CustomSwitch.stories.tsx
libs/core/src/lib/components/LayerManager/LayerSelect/KeywordFilterResults/KeywordFilterResults.tsx
libs/core/src/lib/components/LayerManager/LayerSelect/KeywordFilterResults/KeywordFilterResultsListItem.tsx
libs/core/src/lib/components/LayerManager/LayerSelect/SearchField/SearchField.tsx",2
100426371,2022-01-11 13:03:51.305,FE: wrap customswitch with CoreThemeProvider,Wrap the component with the CoreThemeProvider,1
100348133,2022-01-10 10:45:45.998,FE: check snapshots and enable animations where possible,"Follow up of https://gitlab.com/opengeoweb/opengeoweb/-/issues/1599

There is a waiting time now before a snapshot gets taken, which allows loading animations to finish such as fields getting focus or fields getting populated. We've disabled some of those previously for taking snapshots. 

Check all snapshots and enable any disabled animations where possible.

These components have the fixes that should be removed (searched on prop shoudDisableTransition and disableTransition, there could be more components)
- ServicePopup (core)
- Backdrop (theme)
- ToolTip (theme)",3
100335498,2022-01-10 07:59:49.885,"FE: Follow-up from ""TAF: add extra line in between lines""","This seems to happen if you have a changegroup with errors (for example the first changegroup) and below that one empty changegroup. Then press the plus button on the base forecast. Then the errors go away until you click around in the form



The following discussion from !1147 should be addressed:

- [ ] @btorrente started a [discussion](https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1147#note_800998593):  (+2 comments)

    > I see some weird behaviour with the validation when adding new lines but I do not think it is related to this MR, so I have approved. 
    > 
    > The weird behaviour I found is that, when adding a new line, the validation errors disappear until the user clicks somewhere in the form.",2
100262369,2022-01-07 15:48:26.827,FE: add missing theme type,Add missing Theme type for upcoming MUI5 issues,2
100139808,2022-01-05 10:51:25.364,BE: Get mail for vulnerability notification,"As suggested by CPT (https://knmi-nl.slack.com/archives/CCWQG7J9Y/p1641304705455300) we could get the notification of the backend vulnerabilities adding settings to the ecr.sh configuration in the build pipeline

/build-utils/ecr.sh -n $NAMESPACE -r $IMAGE_NAME -a $ACCOUNT_ID **-m $REPOSITORY_MAINTAINER**

where $REPOSITORY_MAINTAINER is the email adress that should receive the notifications (geoweb-scrumteam@knmi.nl).",2
100139544,2022-01-05 10:46:58.061,BE: Fix vunerabilities in ECS container for geoweb-backend,"Following the list of vulnerabilities for geoweb-backend got from CPT:
```
Repository	     Image Tag	Vulnerability	Severity Package Name Version	More Info
knmi/geoweb-backend	1.0.34	CVE-2021-33574	HIGH	glibc	2.28-10	        more info

knmi/geoweb-backend	1.0.34	CVE-2019-25013	HIGH	glibc	2.28-10	        more info

knmi/geoweb-backend	1.0.34	CVE-2020-36329	HIGH	libwebp	0.6.1-2	        more info

knmi/geoweb-backend	1.0.34	CVE-2018-25014	HIGH	libwebp	0.6.1-2	        more info

knmi/geoweb-backend	1.0.34	CVE-2018-25011	HIGH	libwebp	0.6.1-2	        more info

knmi/geoweb-backend	1.0.34	CVE-2020-36328	HIGH	libwebp	0.6.1-2	        more info

knmi/geoweb-backend	1.0.34	CVE-2021-31535	HIGH	libx11	2:1.6.7-1+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3517	HIGH	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3520	HIGH	lz4	1.8.3-1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-22924	MEDIUM	curl	7.64.0-4+deb10u2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-22946	MEDIUM	curl	7.64.0-4+deb10u2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-22947	MEDIUM	curl	7.64.0-4+deb10u2	more info

knmi/geoweb-backend	1.0.34	CVE-2018-12886	MEDIUM	gcc-8	8.3.0-6	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3326	MEDIUM	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2021-35942	MEDIUM	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2020-1751	MEDIUM	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2021-43618	MEDIUM	gmp	2:6.1.2+dfsg-4	more info

knmi/geoweb-backend	1.0.34	CVE-2020-21913	MEDIUM	icu	63.1-6+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-37750	MEDIUM	krb5	1.17-3+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2019-12904	MEDIUM	libgcrypt20	1.8.4-5	more info

knmi/geoweb-backend	1.0.34	CVE-2021-33560	MEDIUM	libgcrypt20	1.8.4-5	more info

knmi/geoweb-backend	1.0.34	CVE-2021-40812	MEDIUM	libgd2	2.2.5-5.2	more info

knmi/geoweb-backend	1.0.34	CVE-2017-6363	MEDIUM	libgd2	2.2.5-5.2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-38115	MEDIUM	libgd2	2.2.5-5.2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-40145	MEDIUM	libgd2	2.2.5-5.2	more info

knmi/geoweb-backend	1.0.34	CVE-2019-12290	MEDIUM	libidn2	2.0.5-1+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2019-13115	MEDIUM	libssh2	1.8.0-2.1	more info

knmi/geoweb-backend	1.0.34	CVE-2018-25013	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2018-25010	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2018-25012	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2020-36332	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2018-25009	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2020-36331	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2020-36330	MEDIUM	libwebp	0.6.1-2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3537	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3516	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3518	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2016-9318	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3541	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2017-16932	MEDIUM	libxml2	2.9.4+dfsg1-7+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3580	MEDIUM	nettle	3.4.1-1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-20305	MEDIUM	nettle	3.4.1-1	more info

knmi/geoweb-backend	1.0.34	CVE-2020-11080	MEDIUM	nghttp2	1.36.0-2+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2020-36309	MEDIUM	nginx	1.19.10-1~buster	more info

knmi/geoweb-backend	1.0.34	CVE-2021-3712	MEDIUM	openssl	1.1.1d-0+deb10u6	more info

knmi/geoweb-backend	1.0.34	CVE-2020-14155	MEDIUM	pcre3	2:8.39-12	more info

knmi/geoweb-backend	1.0.34	CVE-2019-3843	MEDIUM	systemd	241-7~deb10u7	more info

knmi/geoweb-backend	1.0.34	CVE-2019-3844	MEDIUM	systemd	241-7~deb10u7	more info

knmi/geoweb-backend	1.0.34	CVE-2021-33910	MEDIUM	systemd	241-7~deb10u7	more info

knmi/geoweb-backend	1.0.34	CVE-2016-2781	LOW	coreutils	8.30-3	more info

knmi/geoweb-backend	1.0.34	CVE-2021-22898	LOW	curl	7.64.0-4+deb10u2	more info

knmi/geoweb-backend	1.0.34	CVE-2019-15847	LOW	gcc-8	8.3.0-6	more info

knmi/geoweb-backend	1.0.34	CVE-2016-10228	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2020-27618	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2019-19126	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2020-6096	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2020-10029	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2020-1752	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2021-27645	LOW	glibc	2.28-10	more info

knmi/geoweb-backend	1.0.34	CVE-2019-14855	LOW	gnupg2	2.2.12-1+deb10u1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-40528	LOW	libgcrypt20	1.8.4-5	more info

knmi/geoweb-backend	1.0.34	CVE-2019-13627	LOW	libgcrypt20	1.8.4-5	more info

knmi/geoweb-backend	1.0.34	CVE-2018-14553	LOW	libgd2	2.2.5-5.2	more info

knmi/geoweb-backend	1.0.34	CVE-2021-36085	LOW	libsepol	2.8-1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-36086	LOW	libsepol	2.8-1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-36084	LOW	libsepol	2.8-1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-36087	LOW	libsepol	2.8-1	more info

knmi/geoweb-backend	1.0.34	CVE-2019-17498	LOW	libssh2	1.8.0-2.1	more info

knmi/geoweb-backend	1.0.34	CVE-2019-17543	LOW	lz4	1.8.3-1	more info

knmi/geoweb-backend	1.0.34	CVE-2013-0337	LOW	nginx	1.19.10-1~buster	more info

knmi/geoweb-backend	1.0.34	CVE-2018-7169	LOW	shadow	1:4.5-1.1	more info

knmi/geoweb-backend	1.0.34	CVE-2021-37600	LOW	util-linux	2.33.1-0.1	more info
```

**Suggestion from CPT:**

In general we should try to keep the images free of ""high"" warnings. but we can accept a few medium/low warnings. 
As a general rule it works best to keep the image as small as possible by removing not used packages. (like if there are kernel headers also to remove them as that was if I recall also once the issue.) But in some cases there is no fix and then we have to hope for a future fix.",5
100139277,2022-01-05 10:42:28.424,BE: Fix vulnerabilities in ECS container for geoweb-backend-avi-messageconverter,"Following the list of vulnerabilities for geoweb-backend-avi-messageconverter got from CPT:
```
Repository	                           Image Tag	Vulnerability	Severity Package Name Version	More Info
knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-33574	HIGH	glibc	2.31-13+deb11u2	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-29921	HIGH	python3.9	3.9.2-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-22924	MEDIUM	curl	7.74.0-1.3	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-22946	MEDIUM	curl	7.74.0-1.3	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-22947	MEDIUM	curl	7.74.0-1.3	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-43618	MEDIUM	gmp	2:6.2.1+dfsg-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2019-12904	MEDIUM	libgcrypt20	1.8.7-6	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-41617	MEDIUM	openssh	1:8.4p1-5	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-31879	MEDIUM	wget	1.21-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2016-2781	LOW	coreutils	8.32-4	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-22898	LOW	curl	7.74.0-1.3	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-40528	LOW	libgcrypt20	1.8.7-6	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-36084	LOW	libsepol	3.1-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-36087	LOW	libsepol	3.1-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-36086	LOW	libsepol	3.1-1	more info

knmi/geoweb-backend-avi-messageconverter	0.0.21	CVE-2021-36085	LOW	libsepol	3.1-1	more info
```

**Suggestion from CPT:**

In general we should try to keep the images free of ""high"" warnings. but we can accept a few medium/low warnings. 
As a general rule it works best to keep the image as small as possible by removing not used packages. (like if there are kernel headers also to remove them as that was if I recall also once the issue.) But in some cases there is no fix and then we have to hope for a future fix.",5
100073806,2022-01-04 11:52:46.824,Add KeywordFilter- and ServiceOptionsButtons to LayerSelect,"Now that these buttons are created, they also need to be added to LayerSelect.",1
100014305,2022-01-03 09:03:24.192,BE: Configure new authentication in knmi-geoweb application,"Configure new authentication in knmi-geoweb application: it already works on localhost, but should be enabled on DEV, TST, ACC and PRD as well. 

Probably the AUTH_LOGIN_URL needs to be updated in cloudformation to contain the state and code_challenge parameters.",3
100014220,2022-01-03 09:02:00.560,Schedule day for Preset meeting and ask FMI to chair it.,"Discuss how to go forward with presets: 
1) When to start with backend and how (write user story) 
2) Define types for presets. First we can start with the mappresets. 

Ask Ville if it is possible for FMI to chair this meeting.",1
100014030,2022-01-03 08:58:52.760,BE: Ask CPT which vulnerabilities are in ECS Container and how to get the mail for vulnerability notifications,If necessary make new tickets to fix the vulnerabilities,1
100013727,2022-01-03 08:53:21.276,FE: investigate performance multimaps,"- If you have 20 maps, you get 20 wms calls.
- The page is not responsive while loading.
- If you then switch presets, those calls should be cancelled.
- So next to performance, the goal is getting more control about the loading state of multimaps. 

Timeboxed to 2 days.
Make a new ticket if more needed.

**Update:**
User story in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1718",5
100013455,2022-01-03 08:47:52.704,BE: Also show local time in space weather notifications,"always use Amsterdam time

see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1682",3
100013393,2022-01-03 08:45:59.592,BE: Indicate scale of space weather event in notification title,,3
100013345,2022-01-03 08:44:33.559,FE: TAF: add extra line in between lines,,5
100013271,2022-01-03 08:42:59.495,FE: TAF: ammend or correct without change,,3
100013220,2022-01-03 08:41:47.958,FE: TAF: ammended; valid times groups not immediately checked.,,3
100013119,2022-01-03 08:39:38.874,FE: TAF: safetyquestion removing line,,3
100013087,2022-01-03 08:38:47.186,BE: TAF: header Time hr in 00,,3
100013021,2022-01-03 08:36:52.443,FE: TAF: gusts only allowed when 25 kt or more,,3
100012929,2022-01-03 08:35:34.064,FE: TAF: winddirection 000 only allowed with 00 kt,see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1663,3
100012829,2022-01-03 08:32:14.150,FE: Mouse pointer map-coordinates not visible anymore.,see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1686,2
100012678,2022-01-03 08:29:13.970,ACC to PRD (11 January 2022),,3
100012669,2022-01-03 08:28:53.726,Meeting about ExtraNet (11 January 2022),,3
100012642,2022-01-03 08:28:35.092,Meeting for DevOn (13 January 2022),,3
99823219,2021-12-28 07:07:30.133,FE: layer dimension select -use more finegrained selectors,,3
99723829,2021-12-24 09:25:31.221,FE: layer style select - use more finegrained selectors,,3
99444997,2021-12-20 08:35:07.718,FE: form-fields configure snapshots,"Configure snapshot testing for the formfields lib

Look at shared for inspiration on how to implement this.
As an example, implement a snapshot test for the **textfield**",3
99444398,2021-12-20 08:29:10.909,BE: Get integration tests to run in dev-branches,"Currently the integration test only work on tst once merging to master. It would be nice to also be able to run the tests for dev branches so any fixes needed to the smoketest can immediately be applied and tested. 

We need the smoketest user to be available in the user pool without having to reset the password on the first login.",8
99444091,2021-12-20 08:26:09.013,FE: Valid time different for multiple datalayers,"When using the HARM preset in the reference version and after making some changes in the layermanager, the valid-times for the layers in the map view will be different. It looks like this is not directly the case, when making changes to the layers in the layer-manager. After a while, the valid times become different, as shown in the metadata of the individual layers in the legend.

A demonstration can be found in the related user story linked below.",5
99442099,2021-12-20 08:10:07.020,POC screenmanager: improve react-grid-layout,"Improve the current screenmanager implementation of react-grid-layout.
Do directly in the currently used code and deploy to TST/ACC.

Improvements to be made:
- [x]  Allow resize from both bottom corners (currently you can only resize from the right corner) (https://react-grid-layout.github.io/react-grid-layout/examples/17-resizable-handles.html)
- [x] Try and see if you can make it resizable from the top corners as well (https://react-grid-layout.github.io/react-grid-layout/examples/17-resizable-handles.html)
- [x] Test out panels with min-width/min-height
- [x] Add a shadow indicating where the window goes to when dragging/resizing 
- [x] When adding a map - automatically scroll to the new panel

**NOTES**
- there is an open issue with the north and west resize handles not working intuitively, see https://github.com/react-grid-layout/react-grid-layout/issues/1519",5
99441485,2021-12-20 08:04:58.173,POC screenmanager: react-mosaic,"Create a POC of the react-mosaic library and use this in a story to demonstrate to the PO's/DE's.

In order for them to be able to test this we need to bundle the screenmanager storybook and deploy it in an S3 bucket that is publicly accessible. 

POC:
- [x] Have map panels with timeslider, multimap panel with timeslider, a (fake) timeseries
- [x] Ensure you can add a map
- [x] Each panel should be splittable and removable and resizable
- [x] Use 100% of screenwidth and height and do not allow to go over and start scrolling
- [ ] Test out panels with min-width/min-height --> not really supported (yet, there is an [open feature request](https://github.com/nomcopter/react-mosaic/issues/134)), current option is to provide a minimumPaneSizePercentage in the preset, but that is a generic property that is used for all panels in the screen.",5
99224315,2021-12-17 07:29:51.437,FE: prepare MUI5 simplify TimeStepButton logic,"The slider will have a different event, where the keycode are not working anymore. With a little bit of refactor, we can bypass this problem completely",2
99222652,2021-12-17 06:47:21.778,FE: snapshots form-fields: select,Add snapshots for form-fields: select,2
99222647,2021-12-17 06:47:10.912,FE: snapshots form-fields: radio,Add snapshots for form-fields: radio,2
99222645,2021-12-17 06:46:58.516,FE: snapshots form-fields: number,Add snapshots for form-fields: number,2
99222637,2021-12-17 06:46:45.388,FE: snapshots form-fields: date picker,Add snapshots for form-fields: date picker,2
99222612,2021-12-17 06:46:11.625,FE: snapshots taf: taf forms,add snapshots for taf forms,3
99222609,2021-12-17 06:45:54.950,FE: snapshots taf: configure and add snapshot taf list,"- configure snapshots for taf
- add snapshots for taf list",3
99222476,2021-12-17 06:42:55.055,FE: snapshots spaceweather: bulletin,,3
99222451,2021-12-17 06:42:26.744,FE: snapshots spaceweather: graph,"Create snapshots for graph, if too difficult skip it

Make sure the timeline has a fixed time",3
99168513,2021-12-16 14:42:58.205,FE: add snapshots spaceweather lifecycle,"add snapshots for lifecycle

- view UKMO notification
- view KNMI notification
- edit notification
etc.",3
99168493,2021-12-16 14:42:44.791,FE: configure and add snapshots spaceweather notifications list,"- configure snapshots for spaceweather
- add snapshots for notifications list section

http://localhost:4700/?path=/story/components-notification-section--notifications-demo-dummy-actions",3
99168344,2021-12-16 14:40:27.072,FE: add snapshots airmet/sigmet form,"Only the right part of the form (not the map)

After merge: update the list in https://gitlab.com/opengeoweb/opengeoweb/-/issues/1506",3
99168300,2021-12-16 14:39:47.854,FE: add snapshots airmet/sigmet list + configure snapshots,"Configure snapshots for the sigmet-airmet library, you can follow the readme on how to do it.

List can have some snapshots, provide static data",3
99156108,2021-12-16 11:34:07.565,Manage keyword filters in redux store part2,"Done after keyword filter issues: opengeoweb#1475 and opengeoweb#1476
Also opengeoweb#1470 needs to be done before this.

Filter available keywords in keyword filter popup component with Services selected in Service List.",3
99137920,2021-12-16 07:52:09.127,FE: MUi5 upgrade cleanup form-fields test wrappers,"Bundle the MuiPickersUtilsProvider wrappers in the tests, so the new wrapper takes less impact",2
99093627,2021-12-15 15:09:14.439,FE: MUI5 prepare CustomSlider component,"The Slider component has breaking changes, the less ThumbComponent we use the better. Removed it as far as possible, and simplify logic a bit",2
99068182,2021-12-15 09:24:00.583,FE: MUI5 prepare add wrapper for tests,LanguageSelect and Legend need CoreThemeProvider in tests as well.,2
99015852,2021-12-14 13:39:23.085,FE: Application crashes when logging in,The same error is shown on https://staging.opengeoweb.com/ and http://localhost:4300/ after login with a gitlab account. The map loads and then the error is shown.,3
98992610,2021-12-14 08:42:13.634,FE: Application crashes when duplicating layer in preset,"In the preset Temperature and Precipitation (run compare) 1:all, duplicating a layer will result in a crash, see demo.",3
98918185,2021-12-13 07:32:22.226,FE: Add possibility of setting animation speed in presets,,2
98917608,2021-12-13 07:18:51.922,FE: animation actions and selectors use moment object instead of date string,"For actions/selectors we tend to pass date strings to be set in the store.

However, for all actions to do with animation start/end time we pass the entire moment object in the action and convert it to a string in the reducer. THen when extracting from the store using a selector the string is again converted to a moment object.

Would be better to keep it in line with the other actions/selectors and simply pass/retrieve the date string and convert it to a moment object only if necessary (as that is not needed in about half the places I believe).",3
98615206,2021-12-07 16:06:29.345,BE: define logstash filter for logging avi-messageservice,"Once the ticket #1492 is complete is necessary to make a new logstash filter in the repository https://gitlab.com/KNMI/cloud-platform/monitoring/logstash-config/-/tree/master/pipelines/knmi-geoweb.

Currently the logging is showing up in the apache logs, which is the incorrect place. To filter out the logs we can take as example what is in:
https://gitlab.com/KNMI/cloud-platform/monitoring/logstash-config/-/blob/master/pipelines/default_pipeline/2001-filter-apachelog.conf (this already include the geoweb-backend)

Moreover in this logstash filter will be necessary to extrapolate the info needed from the logs (message), such as the timestamp, log_level, ect.",5
98511729,2021-12-06 10:06:08.095,BE: HLD for geoweb-adaguc-server,"Make diagram and put in confluence. Possibly re-use of diagram in review presentation sprint 55 can be used.

**Result**

![image](/uploads/b62e967e790a96f439f2b146530e964c/image.png)",3
98510681,2021-12-06 09:54:59.882,FE: Zoom-home button not working as expected in tiled presets,For details see: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1646,3
98509694,2021-12-06 09:39:08.970,BE: Update of space weather messages templates,Check https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1660,5
98509621,2021-12-06 09:37:49.690,FE: fix flaky test in core,"see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1852361181

**timeSliderCenterTime** is sometimes off by 1 ms

```
FAIL src/lib/store/mapStore/map/reducer.spec.ts (45.778 s)
500   store/mapStore/map/reducer  registerMap  should register a map if no state is passed
501    expect(received).toEqual(expected) // deep equality
502    - Expected  - 1
503    + Received  + 1
504    @@ -19,11 +19,11 @@
505        ""isTimeSliderHoverOn"": false,
506        ""isTimestepAuto"": true,
507        ""mapLayers"": Array [],
508        ""overLayers"": Array [],
509        ""srs"": ""EPSG:3857"",
510    -   ""timeSliderCenterTime"": 1638776829,
511    +   ""timeSliderCenterTime"": 1638776828,
```",1
98509460,2021-12-06 09:35:07.971,Change default visibility and order of layers in HARM vs SFC Obs preset on reference version,"Check https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1587

Those services should be uodated in:

* GeoWeb reference app code in opengeoweb
* in https://gitlab.com/opengeoweb/fmi/fmi-aws-config (ask Kristian in which folder in this repo)",3
98508985,2021-12-06 09:25:16.465,Add additional KNMI WMS services to reference version,"Check https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1586

Those services should be added in:
- GeoWeb reference app code in opengeoweb
- in https://gitlab.com/opengeoweb/fmi/fmi-aws-config (ask Kristian in which folder in this repo)",3
98508831,2021-12-06 09:22:46.838,Deployment to PRD,From ACC to PRD scheduled on 14 December.,3
98508736,2021-12-06 09:20:42.734,FE: Add wrappers to stories core,"Some stories need a CoreThemProviderWrapper, as they use either `theming` or `common` props of theming. This will cause issues in MUI5",2
98508242,2021-12-06 09:14:39.004,Meeting with PO about TAF issues,"Scheduled for 16 December 2021

https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1583

https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1585",3
98508061,2021-12-06 09:12:50.308,Meeting: presets tech meeting,"Discuss types and BE needed for presets.

Meeting with FMI and MetNO",3
98506866,2021-12-06 08:54:52.553,"FE: Add the possibility to set animation duration, step, speed in the presets","For screenmanager presets, add the possibility to set animation duration, step, speed in the presets

Apply in MPV Radar and Satellite preset as in US https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1649",5
98506577,2021-12-06 08:50:20.987,FE: Add the possibility to set autoanimate  in the presets,"For screenmanager presets, add the possibility to set autoanimate.

Apply in MPV Radar and Satellite preset as in US https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1649",3
98506315,2021-12-06 08:48:56.402,"FE: Preset with SatComp products, that animates by default and updates.","Stereographic projection

Layer: HRV Comp (15 min, 4x speed, duration = 3 hours from latest)
```
srs=""EPSG:32661""
            bbox={{
              left: -2776118.977564746,
              bottom: -6499490.259201691,
              right: 9187990.785775745,
              top: 971675.53185069,
            }}
```",3
98505407,2021-12-06 08:43:49.236,ConfigurableConnectedMap tests,"Add tests to ConfigurableConnectedMap

All the actions fired in UseDefaultMapSettings should be tested.",3
98504910,2021-12-06 08:36:58.112,BE: Fix master deployment for GW Adaguc nested stack,"It is necessary to:
- ask CPT to remove the bucket before redeployment
- warn Processbevaker, PO and weerkamer about the map service interruption.
Then:
- press redeploy to master.",3
98503529,2021-12-06 08:15:13.931,Screenmanager Library (research/investigation),"Research to find suitable library for screenmanager (check also the previous layout manager comparison at Agora https://agora.fmi.fi/display/GEOWEB/Screen+Manager+UI+Libs+PoCs) that fulfill at least the requirements defined in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1624

No implementation in this ticket.

Time box: 3h

Creates new ticket depending on the research results.


=============================================

**Results:**

Someone made an overview of 10 layout libraries:
- https://morioh.com/p/6ba976ac10f6

Here is a summary for alternatives of golden layout:
- https://react.libhunt.com/golden-layout-alternatives

**Selected candidates for further research:**

1) **react-mosaic-component**: From this list react-mosaic comes very close to required behavior. The library is available on NPM (https://www.npmjs.com/package/react-mosaic-component and a demo can be found at https://nomcopter.github.io/react-mosaic/ (demo).
React-mosaic has similar functionality as iterm, which was demonstrated by Mikko. The functionality of react-mosaic comes close to what the domain experts requested. It provides full usage of the screen and it allows for resizing panels by shrinking one and automatically enlarging the other. It fully supports react and it does not require jQuery which is a plus. The only drawback is that it uses react-dnd under the hood. This candidate is added to the list on https://agora.fmi.fi/display/GEOWEB/Screen+Manager+UI+Libs+PoCs

Follow up ticket in https://gitlab.com/opengeoweb/opengeoweb/-/issues/1588 and https://gitlab.com/opengeoweb/opengeoweb/-/issues/1589",3
98338373,2021-12-02 14:06:12.268,FE: create snapshots for multi dimension select,"The buttons we already have, but not the content. Add snapshots for ensemble member, and vertical level. 

![Screenshot_2021-12-02_at_15.08.36](/uploads/0b09eaf729856a1a9e0a409df56edce2/Screenshot_2021-12-02_at_15.08.36.png)

(don't mind the big slider, it's different from master but it's the same screen)",3
98338348,2021-12-02 14:05:50.440,FE: create snapshot for layermanager,"Currently there are unconnected stories of the layermanager, but without any layers. Add some layers (3 is fine) so we have good example how it looks (also saves debugging time). Then add the snapshot.

The LayerManager is a bit of mix of connected and unconnected components, which increases the difficulty",3
98299102,2021-12-02 08:06:15.603,Load and store service layers,Load and store WMS service layers for the search function in the new layer select.,5
98298045,2021-12-02 07:44:37.325,FE: multi dimension select shows NaN when options are not numbers,"Found when using layer `Cloud base Alt.` from Service `Harmonie EPS`

service url: https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=HARMONEPS


![image](/uploads/cacf0154979fe2369c546f2bda6548ca/image.png)",3
98183951,2021-11-30 15:17:38.825,FE: remove id from ToggleIconButton,"Id is now used to create a data-testid, this is not needed since the button can take spread props. After this, the button can be reused for the map controls",2
98165203,2021-11-30 10:30:02.200,FE: remove useDefaultMapSettings from ConfigurableConnectedMap,"
Remove useDefaultMapSettings from ConfigurableConnectedMap and keep it untouched from the rest.",3
104754939,2022-03-14 09:30:41.774,Get data from RDSA bucket into Adaguc,"Specify the name of the RDSA input bucket in the Cloudformation for the geoweb-adaguc-server project.
(Check with SatComp input to see how it should work).",4
104753629,2022-03-14 09:22:16.597,Add extra input buckets to ADAGUC nested stack,"ADAGUC nested stack needs to have an extra input bucket for receiving data from BES data production.

Should result in a new Nested Stack version

Add extra (optional) bucket to CloudFormation, that can be specified in CI/CD. In the same way as a bucket was added for Satcomp.
If possible and easy, add several optional buckets, to be prepared for the future.",8
104753185,2022-03-14 09:15:39.938,Deploying to ACC with 60 minute fix,"Deploy to acceptance, incorporating the fix for #1888",1
104752649,2022-03-14 09:06:22.785,Max value of lat/lon in minutes must be 59,"Fix the rounding of lat/lon to 2 decimals, so that coordinates never end up with values of 60 for the minute part.

Has to be fixed in fmi-avi-messageconverter-tac library.
Ends up in a new version or geoweb-knmi-avi-messageconverter
Has priority for deployment in acc.",4
104751937,2022-03-14 08:56:57.664,Meeting about #1856,"We need some more information about #1856 ""Issue title and message text is not populated correctly for warning and alerts extension/update""
Questions:
* alerts don't get updates/extensions
* split update/extension button because this information is needed in the end product.

Invite Eelco/Kasper

Finish meeting by (re)-estimating ticker #1856",4
104751273,2022-03-14 08:48:50.343,Store IWXXM TAF to output bucket,Store the generated IWXXM TAF in the S3 output bucket after a TAF is published.,4
104603674,2022-03-11 09:54:08.825,FE: Remove TsMapPreset type in core and rename to ViewPreset,"After all typescript presets are done, only the TsMapPreset needs to be removed. This was giving some issues, so better in own ticket to come with a good solution. Remove TsMapPreset and replace by MapPreset and prepare for issues.  Then rename as ViewPreset. 

- enabled prop should be boolean in json files and tests
- fmi-aws-config should be updated as well",8
104554634,2022-03-10 14:23:58.160,Remove id property from activeServices objects in layerSelect store,"Refactor of services store part of the user story.

* activeService object in layerSelect store
  * unique id as its identifier instead of URL
  * id property deleted",8
104533048,2022-03-10 09:06:35.563,FE: Update preset to use new OBS gust style,,2
104266958,2022-03-07 08:24:13.268,FE: SIGMET/AIRMET toggle buttons styling broken,"Styling of the toggle buttons in the SIGMET/AIRMET module is broken probably as a result of all the changes we did there

![image](/uploads/02b52942d16c2c103157939125c174fb/image.png)",3
104271142,2022-02-28 09:39:06.575,BE: TAF to IWXXM conversion,"In the FMI library there is code to generate the TAF IWXXM but we are not using it at the moment. 
We need to generate IWXXM.

Code for generation of IWXXM is finished, but tests have to implemented with available geoweb TAF json objects.

Fixed by: https://gitlab.com/opengeoweb/avi-msgconverter/geoweb-knmi-avi-messageservices/-/merge_requests/46",4
104271268,2022-02-28 09:31:54.995,BE: Investigate if CI/CD really deploys to production what was tested in acc,"Investigate if CI/CD really deploys to production what was tested in acc (without rebuilding with possibly newer components like Docker containers, Python packages etc).",5
104271403,2022-02-28 09:28:02.691,FE: Fix warning @babel/polyfill is deprecated when running tests or building application,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1755,3
104271129,2022-02-28 08:29:32.351,BE: Add styling for wind gust observations,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1738,2
104271801,2022-02-28 08:26:39.663,BE: Change styling for wind gusts in Harmonie data layer,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1737,2
104271256,2022-02-28 08:22:50.248,BE: Issue title and message text is not populated correctly for warning and alerts extension/update,"Update templates

See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1694

About the event discussed during the meeting (one GEOMAGNETIC_STORM that later got an extension), it is correctly managed in my opinion (it cannot be viewed in the interface because it's an old event). The Json event looks like this:


```
{
 ""eventid"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
 ""originator"": ""UKMO"",
 ""notacknowledged"": true,
 ""category"": ""GEOMAGNETIC"",
 ""categorydetail"": ""GEOMAGNETIC_STORM"",
 ""lifecycles"": {
  ""internalprovider"": {
   ""notifications"": []
  },
  ""externalprovider"": {
   ""owner"": ""UKMO"",
   ""eventid"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
   ""eventend"": ""2021-11-05T01:00:00Z"",
   ""draft"": false,
   ""label"": ""WARNING"",
   ""firstissuetime"": ""2021-11-04T08:26:11Z"",
   ""lastissuetime"": ""2021-11-04T08:26:11Z"",
   ""state"": ""issued"",
   ""eventstart"": ""2021-11-03T18:00:00Z"",
   ""notifications"": [
    {
     ""neweventend"": ""2021-11-05T01:00:00Z"",
     ""eventid"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
     ""changestateto"": ""issued"",
     ""label"": ""WARNING"",
     ""message"": ""An Earth directed CME was launched early on 2nd November following a Moderate class flare from 2891 and arrived around 03/1930 UTC. G1-G3 storming has been observed and further G3 intervals are expected with a chance of an isolated G4 interval. CME effects are likely to persist into the early hours of the 5th. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
     ""neweventstart"": ""2021-11-03T18:00:00Z"",
     ""notification"": {
      ""potential_impacts"": ""An Earth directed CME was launched early on 2nd November following a Moderate class flare from 2891 and arrived around 03/1930 UTC. G1-G3 storming has been observed and further G3 intervals are expected with a chance of an isolated G4 interval. CME effects are likely to persist into the early hours of the 5th. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
      ""valid_to_dt"": ""2021-11-05T01:00:00Z"",
      ""history"": [
       {
        ""potential_impacts"": ""An Earth directed CME was launched early on 2nd November following an Moderate class flare from 2891, and is modelled to arrive around 04/0000UTC. CME effects may persist into the early hours of the 5th. G1-G2 storming is considered most likely, with a chance of isolated G3 intervals, particularly on arrival and later during the passage of the magnetic cloud. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
        ""initial_g_scale_estimate"": null,
        ""enlil_model_reference"": null,
        ""valid_to_dt"": ""2021-11-05T07:00:00Z"",
        ""valid_from_dt"": null,
        ""enlil_model_run_available"": null,
        ""timestamp"": ""2021-11-02T17:01:16""
       }
      ],
      ""detail"": {
       ""initial_g_scale_estimate"": ""G3-G4"",
       ""enlil_model_reference"": null,
       ""enlil_model_run_available"": false
      },
      ""notification_id"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
      ""type"": ""GEOMAGNETIC_STORM_WATCH"",
      ""data_source"": null,
      ""valid_from_dt"": ""2021-11-03T18:00:00Z"",
      ""status"": ""SENT"",
      ""timestamp"": ""2021-11-04T08:26:11""
     },
     ""categorydetail"": ""GEOMAGNETIC_STORM"",
     ""initialgscale"": ""G3-G4"",
     ""datasource"": null,
     ""issuetime"": ""2021-11-04T08:26:11Z"",
     ""draft"": false,
     ""notificationid"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8""
    }
   ]
  }
 },
 ""start_dt"": ""2021-11-04T08:26:11""
}
```

For reference, the two incoming events were:

```
{
 ""fetchid"": ""61816ee8b58c954d2630126c"",
 ""time"": 1635872491,
 ""message"": {
  ""potential_impacts"": ""An Earth directed CME was launched early on 2nd November following an Moderate class flare from 2891, and is modelled to arrive around 04/0000UTC. CME effects may persist into the early hours of the 5th. G1-G2 storming is considered most likely, with a chance of isolated G3 intervals, particularly on arrival and later during the passage of the magnetic cloud. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
  ""valid_to_dt"": ""2021-11-05T07:00:00Z"",
  ""history"": [],
  ""detail"": {
   ""initial_g_scale_estimate"": ""G1-G3"",
   ""enlil_model_reference"": null,
   ""enlil_model_run_available"": false
  },
  ""notification_id"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
  ""type"": ""GEOMAGNETIC_STORM_WATCH"",
  ""data_source"": null,
  ""valid_from_dt"": ""2021-11-03T18:00:00Z"",
  ""status"": ""SENT"",
  ""timestamp"": ""2021-11-02T17:01:16""
 },
 ""type"": ""GEOMAGNETIC_STORM_WATCH""
}

{
 ""fetchid"": ""618399290652348809055860"",
 ""time"": 1636014380,
 ""message"": {
  ""potential_impacts"": ""An Earth directed CME was launched early on 2nd November following a Moderate class flare from 2891 and arrived around 03/1930 UTC. G1-G3 storming has been observed and further G3 intervals are expected with a chance of an isolated G4 interval. CME effects are likely to persist into the early hours of the 5th. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
  ""valid_to_dt"": ""2021-11-05T01:00:00Z"",
  ""history"": [
   {
    ""potential_impacts"": ""An Earth directed CME was launched early on 2nd November following an Moderate class flare from 2891, and is modelled to arrive around 04/0000UTC. CME effects may persist into the early hours of the 5th. G1-G2 storming is considered most likely, with a chance of isolated G3 intervals, particularly on arrival and later during the passage of the magnetic cloud. This Geomagnetic Storm Watch may be superseded by Kp Alerts and Warnings where necessary as the CME arrives."",
    ""initial_g_scale_estimate"": null,
    ""enlil_model_reference"": null,
    ""valid_to_dt"": ""2021-11-05T07:00:00Z"",
    ""valid_from_dt"": null,
    ""enlil_model_run_available"": null,
    ""timestamp"": ""2021-11-02T17:01:16""
   }
  ],
  ""detail"": {
   ""initial_g_scale_estimate"": ""G3-G4"",
   ""enlil_model_reference"": null,
   ""enlil_model_run_available"": false
  },
  ""notification_id"": ""7e4a8e30-3bfe-11ec-91ce-cd6725cbcde8"",
  ""type"": ""GEOMAGNETIC_STORM_WATCH"",
  ""data_source"": null,
  ""valid_from_dt"": ""2021-11-03T18:00:00Z"",
  ""status"": ""SENT"",
  ""timestamp"": ""2021-11-04T08:26:11""
 },
 ""type"": ""GEOMAGNETIC_STORM_WATCH""
}
```",4
104271411,2022-02-28 08:16:13.844,TAF: ammend or correct without change,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1664,2
104271491,2022-02-28 08:14:21.163,Meeting for Afstemmingsdag preparation,Rocco and Marcel mandatory + who else wants to join,3
102983459,2022-02-24 10:40:49.346,Deploy to ACC,,3
102929887,2022-02-23 13:45:39.955,FE: Create solution for reusable buttons part 3,"- IconButton component also needs some styling, so we don't have to define those styling as well all the time.
- Layermanager has some custom styling in buttons, see if we can reuse some from our defined styling",4
102854259,2022-02-22 10:58:47.058,FE: Time step showing 15m while animation runs for 5 min in multimap presets,"- choose for example the first Satcomp preset: Satcomp general 3h
- the animation runs with a 5 min timestep
- but the left map timeslider shows a time step of 15mins instead of 5

![image](/uploads/ad99ddbac9b26f3e0912c49ec5fc96f0/image.png)",5
102693047,2022-02-18 15:04:12.651,FE: Create solution for reusable buttons part 2,"Part 1 was the defining part, part 2 is implementing the buttons and verify it all works correctly.
- Reuse the colors in ToggleIconButton component in core and make sure we can variants there 
- Remove deprecated colors in light/dark theme of colors
- Scan core and remove custom button definitions if necessary",3
102591095,2022-02-17 07:41:55.036,FE: BUG: Animation does not immediately start when using a preset,"# Description:

Currently the SatComp preset does not immediately start the animation loop. The animation starts after 1 minute. It seems it has to wait for an service update. These updates are done every minute.

# Solution:
Make sure the Preset system where an animation is defined immediately starts the animation

# To Test:

Check with SatComp preset, it should directly start animating",3
102591080,2022-02-17 07:41:29.257,FE: syncing of maps from presets doesn't work,"When having a preset with two maps each with their own timeslider (such as Radar and Satellite) syncing these maps via the preset settings doesn't work.

You can assign `syncGroupsIds: ['Area_satcompDust6h', 'Time_satcompDust6h'],` to both maps but this gets ignored and not set in the store.

I think the problem is caused by the following:
- the sync groups does a `SYNCGROUPS_ADD_TARGET` to add the maps to the defined syncGroupsIds as mentioned above. 
- then in the reducer it checks if the groupids are already set, they are not so nothing happens

Somehow the groupids mentioned in the preset need to be set as a group `SYNCGROUPS_ADD_GROUP` so the target maps can get set.

Proposed solution: `SYNCGROUPS_ADD_TARGET` with a non-existing group should add a group (can be done in the reducer, where there is a check for a non-existing group).",3
102459668,2022-02-15 08:39:58.870,FE: change satcomp layer name,In the satcomp dataset the layer names have been changed. There is one place in GW where this needs to be fixed for the satcomp preset.,1
102392185,2022-02-14 09:21:23.885,BE sharing of sigmet/airmet code,"Finish document on sharing code with sigmet/airmet. https://docs.google.com/document/d/1_6G3A8givADPeDbXVPmY2zlwbIjib8z5urJbxFX-EOE/edit?usp=sharing

Share code with FMI/MetNo.",3
102391588,2022-02-14 09:15:21.259,FE: Create solution for reusable buttons part 1,"Find a good reusable solution for the reusable buttons as designed by Didier.

Try to maximise use of the theme and reusibility
- Place in theme or shared

Seach on ""ToggleButtons""

Outcome:
- 2 buttons, ""Button"" and ""ToggleButton"" that can be used throughout the code without defining styling per button use.
- Some good examples on how to use it (and snapshots)

See: https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf85c60f301e47ca4eee55 & https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6093e68ceb304607400f6d5e",5
102389380,2022-02-14 08:55:05.454,Clean up of backlog and write user stories,Clean up of Dev-Backlog creating User Story/Bug and leaving in the dev-backlog only the tech debts.,8
102388475,2022-02-14 08:46:49.915,Meeting: Write user story on additional features for react-mosaic in joint sprint,"We need to prepare some user stories that can be refined on Friday 18th during the joint-sprint refinement.

Ideas for joint sprint to go further with Mosaic:
- add empty map view as a preset (top one in the preset menu, to help users that closed all views unintentionally)
- use both light and dark themes
- other buttons to be added in the menu-bar -> Design
- customise the buttons -> Design
- show a menu when all views deleted -> Design

Other ideas:
- sync groups
- limiting the amount of screens
- limiting the width
- add map presets
- add option to auto arrange views

**Meeting: Wed 16 February 2022 at 14:00**",3
102388358,2022-02-14 08:45:33.692,FE: Prepare basic version react-mosaic,"Based upon the feedback of the users, the decision was made to continue with the react-mosaic software library.

Implement a basic version of react-mosaic into geoweb.

Requirements:
* access to the current modules on Spaceweather, TAF, SIGMET, AIRMET in the KNMI GeoWeb version need to be secured (as is)
* the current presets need to be secured as well
* the add map functionality in the hamburger menu can be removed (will be replaced by the new button in a tile header bar)
* use default buttons on the menu-bar (similar as in POC)",8
102387801,2022-02-14 08:41:29.453,ADAGUC: Add extra SatComp products to geoweb for comparison,"Additional products are being written to the S3 bucket but not included in the dataset. We need to add these layers so they become available in GeoWeb

* Ensure the title of the layers is descriptive so you know whether you are looking at 1km or 3km airmass for example. Also review names of layers currently already in there
* The products are already sent to the SatComp bucket and are being picked up by GeoWeb.
* We need to add the layers to the SatComp dataset.

These are the products:
* output/geoweb/png/hrv-comb/MSG_adaguc-satview-1km_hrv-comb_.png
* output/geoweb/png/airmass/MSG_adaguc-satview-1km_airmass_.png
* output/geoweb/png/airmass/MSG_adaguc-satview-3km_airmass_.png
* output/geoweb/png/day-hl-clouds/MSG_adaguc-satview-1km_day-hl-clouds_.png
* output/geoweb/png/day-hl-clouds/MSG_adaguc-satview-3km_day-hl-clouds_.png

Check if there are extra ones in SatComp which are not configured in the geoweb adaguc-server dataset.",3
102387629,2022-02-14 08:38:27.608,FE: Suppress flickering on missing images,"When satellite images are missing for a time step, nothing is shown and the underlaying map is shown. When having a dedicated screen in the weather office this creates an annoying continuous flickering of the screen, because a missing image will continue to be in a looping view for at least an hour (depending on the length of the loop).

Agreed upon solution:
* reload missing images after each animation-sequence
* only solves images that could not be loaded BUT are present on the server
* really missing images will cause the animation still to flicker",3
102386712,2022-02-14 08:26:41.632,FE: Presets Cinesat Replacement,"Add the following presets to the menu

Try out if you can place all 10 presets under a new drawer inside the presets menu called ""Satcomp"". 

**Satcomp general**

Standard domain West-Europe left window:
* HHRV Comb (not RSS)
* FIR boundaries
* Country borders
* Rivers

right window:
* Airmass RGB
* FIR boundaries
* Country borders
* Rivers

**Satcomp aviation**

left window Standard domain West-Europe:
* HRV Comb (not RSS) (domain West-Europe)
* FIR boundaries
* Country borders
* Rivers

right window:
* HRV Comb RSS (domain Netherlands)
* FIR boundaries
* Country borders
* Rivers

**Satcomp Fog ST**

left window:
* HRV Comb RSS (domain Netherlands)
* FIR boundaries
* Country borders
* Rivers (Europe)

Middle window:
* Fog
* FIR boundaries
* Country borders
* Rivers (Europe)

right window:
* HRV Comb (not RSS)
* FIR boundaries
* Country borders
* Rivers (Europe)

**Satcomp Volcanic Ash**

left window:
* Volcanic Ash
* FIR boundaries
* Country borders
* Rivers (Europe)

right window:
* HRV Comb (not RSS)
* FIR boundaries
* Country borders
* Rivers (Europe)

**Satcomp Dust**

left window:
* Dust
* FIR boundaries
* Country borders
* Rivers (Europe)

right window:
* HRV Comb (not RSS)
* FIR boundaries
* Country borders
* Rivers (Europe)

**All presets should be available in default in preset. Speed on 4. Views are synced**
- 3hr animation
- 6hr animation  (This will result in 10 presets being added - add in name ""3h"" or ""6h"")",5
102385990,2022-02-14 08:15:43.095,ADAGUC: Geographical Overlays,"To make the switch from CineSat to GeoWeb, the following geographical overlays should be available in GeoWeb. These are now also available in CineSat/RAdIS/Kambeelbak. These are the ones also described in issue https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1685.

Wished geographical overlays:
- Dutch FIR
- FIR delegated
- Runways EHAM AM RWY
- TMA
- NavAids
- Veiligheidsregio's NL
- AIP
- LAT/LON every 5 deg
- LAT/LON every 10 deg
- AIRPORT world
- TNCB and TNCS
- Rivers

All overlays can be added to one overlay service, the existing `Overlays`
All overlays should be in our own system, not dependent of others.


### Extra information
* all these Geographical features are available in Kambeelbak.
- RWYs EHAM: http://kambeelbak.wlm.knmi.cloud/json/geolyr/NL_EHAM_RWY.json
- Veiligheidsregio's: http://kambeelbak.wlm.knmi.cloud/json/geolyr/NL_veiligheidsregios.json
- NAVaids currently available in RADIS",5
102385877,2022-02-14 08:13:31.759,FE: Change over sigmet-airmet overlays in Sigmet/Airmet preset,After removing the `SigmetAirmetOverlays` service we need to use the correct overlayers from the `Overlays` service including the correct styles so there are no visual changes apparent for the user.,1
102385633,2022-02-14 08:08:41.090,ADAGUC: Combine all overlays in one overlay datalayer,"### User

Meteorologist

### Short description

Currently, we're using to different services for overlays `Overlays` and `SigmetAirmetOverlays`. Pending final decisions on how to get overlays in the map, these services need to be combined.

In both services, the layer `Stations North Sea` and a the layer `Airports` exist. The different stylings in these services must be merged in one layer with multiple styling, so one `Airports` layer with two stylings; Icon and Circle. The default for each layer must be the circle (actually a circle with a centerpoint).

### Test criteria

* Open overlay service
* user can select different styles for overlay-layers (e.g. either circle or icon)
* default styling is circle

Do:
- In geoweb-adaguc, remove the sigmetairmetOverlays dataset and move the layers inside to the Overlays dataset. Ensure that the duplicate names get merged together and all styles currently available are still available but now under one and the same layer and service.",3
102050365,2022-02-08 10:45:53.658,BE: fix vulnerability,"A new high vulnerability popped up:

https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/2066541792

add to whitelist",1
101986626,2022-02-07 10:38:27.324,"Keywords should use redux, not local state","KeywordFilterResults currently only fetches the keywords from redux, but it manages the statuses of those keywords only in local store. There should not be any local state in KeywordFilterResults, everything should be managed in redux store.
* When clicking on checkbox/only/selectall, it should fire redux actions which modify the keyword objects checked value",2
101886154,2022-02-04 12:50:18.922,Add ServiceOptionsDialog contents to LayerSelect,"Currently ServiceOptionsDialog is showing as empty in LayerSelect, its contents can only be seen in its own separated storybook. Fix so it works inside LayerSelect aswell.",1
101885128,2022-02-04 12:29:31.568,Change serviceId from URL to id in redux,"Refactor of services store part of the user story.

Changes included:

* service object in services store should have
  * unique id as its identifier instead of URL
  * id property deleted
  * service property could be renamed to url or serviceUrl
* Refactor all code that uses the ""id"" of services array for anything related to it being an URL to use the ""service"" variable inside the service object instead (atleast getting info from getCapabilities)



Next steps are:
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1883
- https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1864",8
101875645,2022-02-04 09:47:16.217,Groups are saved to services store instead of Layers inside them,"Currently in LayerSelect, if service has its layers separated to different groups, only the group is added as a layer to the redux store and shown, instead of the actual layers that are inside that group.

* In getCapabilities groups are Layer objects, probably why this is happening. 
* In the old WMSLoader, when adding service to a store through adding a layer to the map, it does work properly and serviceSetLayers action is able to add the real layers to the store.
* When layers in groups are added correctly, the groups are actually stored inside the layers ""path"" variable, but very badly, groups and subgroups are just put together to one string, without any sign of how many subgroups there are, in this example, there are 3 groups/subgroups for the layer: Fachlayer, Wetter and Warnungen 

![image](/uploads/cffd5e7af18420e89535d3b7bf7fb58b/image.png)

To fix the issue, we need to do couple things:
* Investigate why serviceSetLayers works differently in LayerSelect compared to WMSLoader and fix it in LayerSelect
* Refactor layers path variable to have better format, from which different groups can be identified clearly, I suggest renaming it to ""groups"" and having it as a array of strings
* Either Block groups from appearing in services layers array, or handle them differently by using the leaf variable, which is false for groups and true for layers",5
101826208,2022-02-03 15:08:18.215,"FE: fix npm vulnerabilities 2: update typedoc, license, msw, postcss, browserslist","These packages are causing vulnerabilities and have new versions available. Install latest versions for:

- [x] typedoc
- [x] license-check-and-add
- [x] msw
- [x] postcss
- [x] npx browserslist@latest --update-db
- [x] axios
- [x] check for breaking changes

Do NOT update:

1. cypress + @types/testing-library__cypress --> wait with upgrading until issue resolved https://github.com/cypress-io/cypress/issues/18464
1. @babel/cli + @babel/core --> breaks all snapshot jobs and ServiceList test, see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2067700947",3
101812004,2022-02-03 12:47:01.216,Refactor activeServices array to byId/allIds format,activeServices array should be refactored to use byId/allIds format similar to many other redux stores. Lots of refactoring needed in multiple LayerSelect components/tests. There shouldn't be any noticeable changes in GeoWeb.,2
101797104,2022-02-03 09:59:29.514,FE: react 17,,2
101738890,2022-02-02 13:34:12.202,FE: Enable strictmode again,"Now MUI5 is merged, we can enable strictmode again. We have to look what a good entry is, because it can lead to performance issues (for devs)",2
101724200,2022-02-02 10:57:23.334,Edit Service popup functionality,"* Get textfield values from service
* Save button updates service in service redux store AND layerSelect store (Only need to edit service store)
* Validate texts

NOTE: Service list store already initialized and in use before this",3
101719237,2022-02-02 10:14:53.211,BE: Bulletin header issue,"For description see: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1734

In the python code we need to adapt the time in the header to be 1 hour before the base time.",2
101574247,2022-01-31 08:49:45.336,Check if the GeoWeb SMP needs an update,,1
101573871,2022-01-31 08:45:31.904,BE: SW local time missing in end interval,"The lokale time is missing for the end time. Check if it is present for other spaceweather notification types as well. 

![image](/uploads/12884fe29ebd00862549fdb4293b5028/image.png)",2
101573629,2022-01-31 08:40:58.218,"BE: AMD - changes start valid time in form, not in product (TAC)","When amending a TAF, the starting time of the (amended) TAF-period is changed in the TAC in the form but not in the TAC product.

For a amendment we need to ignore the previousValidStart and use the one sent by the FE. Leave as it is for COR",3
101572456,2022-01-31 08:28:40.216,FE: Fix npm vulnerabilities 1: update @storybook + @nrwl,"Investigate which packages can be updated and if there are dependencies on other packages that need updates first.
Split into multiple tickets if necessary


Packages that need updating:
1. @storybook + @nrwl + @svgr/webpack (dependent so need to update together)

To be updated in other [ticket](https://gitlab.com/opengeoweb/opengeoweb/-/issues/1770):
1. @babel/cli + @babel/core
1. typedoc
1. license-check-and-add
1. msw
1. postcss

No update:
1. cypress + @types/testing-library__cypress --> wait with upgrading until issue resolved https://github.com/cypress-io/cypress/issues/18464",3
101572057,2022-01-31 08:24:30.168,FE: investigate Improve selector memoization to reduce unneccesary renders,"Suggestion from Maarten:
- Create a story with two maps
- Change the opacity of one of the layers on one map, the other map should NOT rerender

Investigation for the following:
-----------------------------------------------------------------
**Improve selector memoization to reduce unneccesary renders**

**Description**: Consider mapA and mapB each having a different set of layers. The issue is that changes for a layer in mapA will trigger unneeded renders of mapB. For example when you set opacity for a layer in mapA, mapB (and all other maps) is also re-rendered.

**Problem**: It seems that the getMapLayers selector causes unneeded re-rendering of components. This probably is because the layers are in one redux state object. It is probably difficult for the selector to detect which changes affect what maps.

**Solution**: Make sure that when the result of the selector is unchanged, the component does not re-render. This has to do with memoization and shallow comparison of objects.

**Hint**: From file libs/core/src/lib/store/mapStore/map/selectors.ts, 122: the selector getMapLayers is used in libs/core/src/lib/components/MapView/MapViewConnect.tsx, 86 . It seems that changes in the layers for mapA, will trigger unneeded re-renders for mapB. This becomes an issue when there are many maps in view, like with the multimap component with 18 maps.",3
101570237,2022-01-31 08:10:20.139,Meeting on sharing BE sigmet-airmet code,"We need to figure out how we are going to share the BE code with FMI and MetNo
- Lambdas
- API Gateway/OpenAPI

Can we have a shared repository in which all of us can make bugfixes/additions to the code to ensure we do not diverge too much between different institutes.",3
101569906,2022-01-31 08:07:17.340,BE: go through code and check where documentation needed,"We need to go through the BE code and determine where additional documentation is needed.
Create a list of which libs documentation is needed and specifically where it is required.

Timeboxed to 3h",3
101569703,2022-01-31 08:04:56.658,MUI5 meeting for spreading knowledge,https://docs.google.com/presentation/d/1OMkKH3dgokoL8UCiEr3fvxM5pcCwvWKKdO1T0C4okOc/edit#slide=id.p,3
101402923,2022-01-27 16:31:49.482,FE: MUI5 TAF field labels don't fit when form is open in modal,![image](/uploads/21645d63917cab226a6bdf8562dc2cbb/image.png),2
101394484,2022-01-27 15:15:08.747,MUI5 fix core snapshots,,1
101359970,2022-01-27 08:51:42.741,FE MUI5 spaceweather,,2
101359777,2022-01-27 08:48:40.299,FE: mui5 sigmet-airmet,,2
101359728,2022-01-27 08:47:30.609,FE: MUI5 shared,,1
101359701,2022-01-27 08:46:51.923,FE: MUI5 form-fields,,2
101359663,2022-01-27 08:45:48.088,FE: MUI5 core,fix failing snapshots,3
101359478,2022-01-27 08:42:31.711,FE: MUI5 remove readme part about tree shaking,https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1015#note_819077427,1
101285800,2022-01-26 13:21:56.996,MUI5: Fix snapshot for gwTheme formfields,,3
101285643,2022-01-26 13:20:50.313,FE: Make storyshot for gwTheme formfields,,2
101284701,2022-01-26 13:11:59.062,add gust styling to geoservices,,2
101277344,2022-01-26 10:49:50.307,FE: Performance: Improve selector memoization to reduce unneccesary renders.,"**Improve selector memoization to reduce unneccesary renders**

**Description**: Consider mapA and mapB each having a different set of layers. The issue is that changes for a layer in mapA will trigger unneeded renders of mapB. For example when you set opacity for a layer in mapA, mapB (and all other maps) is also re-rendered.

**Problem**: It seems that the getMapLayers selector causes unneeded re-rendering of components. This probably is because the layers are in one redux state object. It is probably difficult for the selector to detect which changes affect what maps. 

**Solution**: Make sure that when the result of the selector is unchanged, the component does not re-render. This has to do with memoization and shallow comparison of objects.

**Hint**: From file libs/core/src/lib/store/mapStore/map/selectors.ts, 122: the selector getMapLayers is used in libs/core/src/lib/components/MapView/MapViewConnect.tsx, 86 . It seems that changes in the layers for mapA, will trigger unneeded re-renders for mapB. This becomes an issue when there are many maps in view, like with the multimap component with 18 maps.",3
101212508,2022-01-25 12:10:46.109,FE: Performance: layerSetStyles info should belong to service metadata,"**layerSetStyles info should belong to service metadata**

In function setServiceMetadata, in ReactMapView, 355, layerSetStyles are currently set for each individual layer instance. It would make more sense to have a service metadatastore with layer information, storing all possible styles and dimensions for the layer. The layermanager can use these for filling the dropdowns. 

Proposal is to move this layer information to the service store. This needs to be set only once and during refresh. The information can be re-used for same layers in other maps.

Please discuss with FMI on the impact of this change to their new components.",5
101212014,2022-01-25 11:58:26.311,FE: Performance: Combine layer setServiceMetadata actions,"**Combine multiple actions to set metadata for layers into one**

The function setServiceMetadata in ReactMapView, 355 should be rewritten to trigger one action updating the redux state at once. This will result in less re-rendering of components. Currently this triggers 5 actions for each layer. This causes 5 re-renders of the map component (each containing multiple layers). In https://gitlab.com/opengeoweb/opengeoweb/-/issues/1670 it was found that with multiple maps, over 10000 renders take place before the final display.

Combining multiple actions into one will result in significantly less re-renders.",5
101151954,2022-01-24 14:09:17.647,FE:  error when logging in,,5
101142215,2022-01-24 11:42:13.311,MUI5: fix theme taf icon list,"Fix orange icon in taf list knmi-geoweb:
https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1015#note_819388848",2
101141117,2022-01-24 11:20:19.428,FE: fix ToolHeader test file,"Fix test in core based on discussion here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1015#note_819360978

Fix it in core, pull it in MUI5 branch",1
101030490,2022-01-21 09:43:27.586,MUI5: core toggle buttons,probably the story has too many wrappers,3
101030141,2022-01-21 09:38:58.203,MUI5: core layermanager,"Fix the issues, and also make sure the e2e will pass!",3
101030093,2022-01-21 09:38:01.523,MUI5: taf fix form-field styling,,3
101029689,2022-01-21 09:30:53.346,MUI5: shared cheatsheat,we can update the snapshot with new changes,3
101029659,2022-01-21 09:30:12.494,MUI5: shared statustag,,3
101029614,2022-01-21 09:29:18.212,MUI5: shared slider,"Keep the new distance between slider and number, for the rest implement current design. Use the new slightly bigger size of the rail + button.",3
101029601,2022-01-21 09:29:03.229,MUI5: shared: confirmation dialog,,3
101027676,2022-01-21 09:22:32.199,MUI5: fix date picker functional + unit test,"- Fix unit test: instead of click on OK, use the pickers to choose a date and time like the user would do. (unit test is commented out)
- Make sure it behaves exactly like currently spaceweather, if you hover hour / minutes it should update the TextField. --> not able to fix this, it also happens on the mui docs: https://mui.com/components/date-time-picker/. I've only seen it work with the static time picker https://mui.com/components/time-picker/#static-mode

Styling should be fixed by the form-fields, as the DatePicker is using a TextField",5
101026644,2022-01-21 09:21:39.873,MUI5: fix theme form-fields styling,"Make sure that with this fixes, the form-field snapshots will be fixed.",5
101024532,2022-01-21 09:07:53.100,MUI5: review current state (functional),"Review current state of branch https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1015/diffs

- if the imports are working now (no tree shake), then we need to update the Readme as well
- Slider en DatePicker have commented out (test) code, that can be ignored 
- check out the project.json files with external files (no old material-ui)",2
100914013,2022-01-19 13:47:05.622,Implement keyword filtering in LayerSelect,"Filter LayerSelect LayerList when changing keyword status in KeywordFilterResults
* Add search string filtering based on keywords + subgroups (+ servicename if easily possible)
* Treat whitespace separated strings as separate strings, where all strings need to match something on a layer",2
100913808,2022-01-19 13:46:00.179,Impement service filtering in LayerSelect,,1
100901540,2022-01-19 10:55:34.975,PO Roadmap review,"In the Intl. review and KNMI retro (14 Jan 2022) PO(s) explicitly ask developers to review the RoadMap in which they are working. During the retro we took this as task to be done in Sprint 59.
You can write a comment if you think something is missed or you want to ask something.

The roadmap is here:
https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1695

Every one of us should at least look at it because this is what PO(s) are thinking to do in the coming year(s).
I will assigne this task to everyone. Once you reviewed the document, please remove also your name from the assignees list so we know who is still missed. Thanks!",1
100836232,2022-01-18 12:14:50.494,FE: MUI5 prepare: minimise test-ids for datepickers in spaceweather,,2
100786624,2022-01-17 16:13:41.431,FE: MUI5 spaceweather fix Tabs icon,Don't return false when icon is not present,1
100785222,2022-01-17 15:51:23.880,FE: MUI5 fix spaceweather unit tests,,3
100782663,2022-01-17 15:18:00.101,MUI5: fix TAF story,,1
100765090,2022-01-17 11:07:07.974,FE: clouds not validated correctly if space present,"If you enter a space in one of the cloud fields, the other cloud fields are not validated correctly anymore:

For example - below it has ""NSC "" (so with a space) in the first cloud group. Now it evaluates the third cloudgroup as ok while it is actually wrong. 
![image](/uploads/0f96ffccf24d2a0dfbfaa5af20927448/image.png)

Also the order of validation is wrong. In the below example, it is more important to say that the field should be empty after NSC than complain about the format being wrong cause after you fix the format you'll then still be notified it is not allowed after NSC
![image](/uploads/31b53f30d2703ac168aad19454da4209/image.png)",3
100758445,2022-01-17 09:33:57.587,Clean up backlog,"Remove tickets no longer needed as they are for (soon to be) deprecated components (Check list of Tickets already done)

- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1488
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1335
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1198
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1588
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1589
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/623
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/957",3
100756718,2022-01-17 09:08:35.492,Add the check of every 21 days for the vulnerabilities in Definition of Done,Documentation update. Check for vulnerabilities in backend code.,1
100755512,2022-01-17 08:51:37.927,FE: Meeting MUI5 snapshots,"- Have a meeting about how to tackle snapshots
- Also refine the issues prepared by Tineke/Sander for the big SIGMET snapshots",3
100755231,2022-01-17 08:48:17.810,FE: Layer ids sometimes undefined,Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1706,3
100755090,2022-01-17 08:46:25.522,WMS: Add styling for wind gusts in Harmonie data layer,"Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1679

Put the same configuration changes in to the geoservices configuration. So they don't differ too much and that our partners see the same improvements.",3
100755008,2022-01-17 08:44:54.409,FE: TAF: TEMPO and FM valid times may not overlap.,Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1690,5
100754938,2022-01-17 08:43:51.816,"FE: TAF: when using NSC FEWxxx is validated differently from SCTxxx, BKNxxx and OVCxxx",Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1657,3
100754832,2022-01-17 08:42:32.391,"FE: TAF: CB, TCU in optional 4th change-group is only allowed when not mentioned in previous change-groups",Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1569,3
100754549,2022-01-17 08:37:44.751,FE: TAF: Cloudcoverage in groups when CB or TCU present.,":drum: A group with CB or TCU is allowed at the end or between changegroups. This group with CB or TCU can have any cloud coverage type (ov, sct, bkn, few).

Details in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1635",5
100754400,2022-01-17 08:35:13.287,BE: TAC not updated when TAF is CORrected or AMenDed,"Problem: when correcting or amending a TAF, the TAC is not updated with COR or AMD.

Solution: When correcting or amending a TAF, the TAC code must be updated accordingly.

Message type COR/AMD is send to the backend, so it is a backend issue.",3
121665419,2023-01-12 14:00:02.796,FE: TAF changegroup not removed when switching forms,"There is a bug where the changegroups for tafs with empty changegroups are not correctly cleared out when switching TAFs from one with filled in changegroups.

You can see in the movie that the EHLE TAF has no data in the changegroup. When moving to the EHAM TAF which does have data and then back to the EHLE TAF the EHAM changegroup data remains visible instead of being cleared out. [movie](/uploads/c333231c3977cde9ffc38acb178a5e5d/TAF2.mkv)

NOTE: This only is the case for TAFs that have NO empty changegroup (so drafts and completely new TAFs are not affected)",3
121635141,2023-01-12 06:36:16.336,FE: CAVOK bug,,2
121564637,2023-01-11 06:48:20.572,FE: update react-hook-form,Use valueAsNumber in numberfield and see if it solves issues,3
121529093,2023-01-10 15:46:24.161,BE: fix adaguc acc deployment,"Latest merges into master have failed: https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/pipelines

Fix issue",2
121527604,2023-01-10 15:27:03.778,BE: SpaceWeather streams table init incorrect,"The script cfn-init-streams.py incorrectly initializes the streams table: it should store 1970-01-01 in the end time and 2050-01-01 in the start-time, but does it the other way around.
The front-end uses the end-time field for automatic updating of the timeseries, which never happens because the end-time never gets updated when new data comes in (reqSW/reqX, etc).

To avoid future mistakes like this I've renamed the constants for MAX_TIME and MIN_TIME.",2
121516862,2023-01-10 12:57:07.694,FE: fix form dirty sigmet/airmet,FormDirty does not work well in sigmet/airmet. Right at the start it will trigger dirty=true. Probably some missing (hidden?) values in the form.,2
121506640,2023-01-10 10:07:05.180,FE: sigmet loader is showing when closing sigmet dialog,"If you open a sigmet dialog, and go back it's refetching the list call and showing the loader. The list call should load initially, but not after opening a sigmet and going back to the list overview without taking any action such as save/discard/publish/cancel

![Screenshot_2023-01-10_at_10.58.39](/uploads/bdce69e95be2e1c60479015c75d56832/Screenshot_2023-01-10_at_10.58.39.png)",2
121447958,2023-01-09 11:57:18.268,FE: valdation for sigmet/airmet config file,"We need to add validation for the two config files.

- If they are invalid - show a decent error on screen. Ensure the system doesn't crash and tell there is an invalid config (maybe also display what is wrong/missing/invalid).
- Also add unit tests to test the keys in the config file and check that the error above is displayed correctly
- Have a look and see if we can reuse (or use as inspiration) how this is dealt with in the app

Should be independent of institute and be placed inside of the sigmet/airmet lib",3
121444285,2023-01-09 10:54:19.405,FE: add e2e tests for sigmet/airmet,"After the config has been moved, ensure we test all the settings in the sigmet/airmet config.

Add a mock config (copied over from KNMI) containing all keys and test them all.",3
121443278,2023-01-09 10:38:38.153,FE: sigmet/airmet - Use FIRs from config to draw on map,"On opening of the form all of the FIRs geojsons should be shown. Go through the config and extract all FIR geojsons to show. Add them to one new maplayer in the map.

- Add this new maplayer in MapViewGeoJson.tsx as `MapViewLayer` or add each FIR as a separate `MapViewLayer` (see which is easiest)
- Ensure that the functionality regarding the currently selected FIR remains UNCHANGED",3
121440119,2023-01-09 09:48:47.439,FE: Edit form of Service popup not working anymore,"The LayerSelect -  SerivcePOpup edit mode doesn't work anymore. The save button is permanently disabled.

I did some digging and the fields in the react-hook-form remain undefined even though there is data set using the reset().

Typing also doesn't trigger any rerenders or changes within the form-fields

For more explanation see: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2108#note_1218499201",3
121279519,2023-01-05 10:41:07.069,BE: authorizerlambda add typehints,,3
121171019,2023-01-03 15:14:03.453,FE: update satcomp presets with new wms,"Instead of satcomp wms, satellite wms should be used",1
121170974,2023-01-03 15:12:55.917,BE: adaguc server release Tue 17/1,Make a release so that all satellite images are found under the satellite wms,1
121170906,2023-01-03 15:11:27.323,BE: copy satcomp data to satellite server,"- Create a lambda function in aux-lambdas that copies satcomp data to SAT
- Make sure that satcomp data is still sent to the satcomp server as well to prevent breaking the FE",3
121164090,2023-01-03 13:31:28.293,FE: fix ReactMapView error on Sigmet when map has multiple layers,"- go to homepage
- add a minimum of 2 layers to the map or open a preset that has at least 2 layers on the map
- now open the Sigmet module
- click Create a new SIGMET
- this gives `RangeError: Maximum call stack size exceeded`
- if you have 1 or zero layers on the map, all works fine
- it also works fine on tst, so something broke since the last release

![image](/uploads/77d3a1f71b9ad98a048943ea5dddbb60/image.png)",2
120862266,2022-12-23 14:57:46.286,FE: investigate if we can clear store on navigating stories,"The presets stories don't work correctly after navigating, as presets are fetched initially and stored globablly. A story works if if you refresh, so nothing is broken.

Find out if we can clear the store on navigating stories. To test, try out navigating between these two stories, should work correct (presets):
- http://localhost:4300/?path=/story/application-demo--presets-demo-with-error-on-fetch-list
- http://localhost:4300/?path=/story/application-demo--presets-demo-on-map-dark-theme

the solution should be used for presets, but maybe handy for other libs as well?",2
120850894,2022-12-23 10:45:33.555,FE: React 18 sigmet level values that are saved are not displayed in the form,"When opening a sigmet from the list that has a valid levels value saved, in React 18 strict mode the levels value shows empty and is autofocused. Instead it should show the saved value.

See if the same fix works for https://gitlab.com/opengeoweb/opengeoweb/-/issues/3102",3
120850225,2022-12-23 10:38:30.136,FE: React 18 spaceweather/notification/populate second request fails with invalid request body,"When opening a notification from UKMO that can generate a KNMI notification (for example a Geomagnetic impulse alert or summary), the application does a spaceweather/notification/populate request to autofill the KNMI notification fields. In React 18 with strict mode this request is done twice, and one fails because it's missing a lot of the parameters (BE will send error `Invalid request body`). Some fields are displayed empty while they should be filled. Seems like at first render they are filled, but after unmount and mount they are not anymore.

Maybe same solution will work as used for https://gitlab.com/opengeoweb/opengeoweb/-/issues/3103?",3
120849634,2022-12-23 10:21:32.584,FE: fix React 18 spaceweather graphs keep showing loading state,"Probably caused by React 18 being faster. Inside `Timeseries.tsx` there is a UseEffect that runs on `newChart`, which is updated everytime a graph is loaded successfully. But if multiple graphs succeed at the same time, the newChart is probably updated before the previous effect has completed. This should be fixed in a better way.",3
120848868,2022-12-23 10:00:58.755,FE: fix React 18 map presets not loading,"In React 18, when clicking a preset from the list, the preset cannot be loaded. Seems like the api is unregistered.",3
120846136,2022-12-23 08:58:40.788,FE: drag and drop in layermanager and taf change groups is broken in React 18,"we use react-sortablejs for drag and dropping layer rows in layermanager and changegroups in taf form, this doesn't work anymore in React 18. There is no new version yet, there was an issue logged 2 weeks ago but no replies yet.

https://github.com/SortableJS/react-sortablejs/issues/263

This might be the MR with the fix: https://github.com/SortableJS/react-sortablejs/pull/265/files

Works fine if strict mode is disabled.",5
120845910,2022-12-23 08:52:57.514,FE: fix React 18 login issue - token call cannot be done twice,"In Code.tsx (authentication lib) there is a UseEffect with empty dependency array that does the token call on first render. With React 18 strict mode this will be fired twice. The second token call fails and breaks the login. This call should only be done once. Can be solved in different ways, see other api code (use a ref, use an abortcontroller, etc.). 

Preferred solution is using abortcontroller. First request should get cancelled.

The React 18 MR already contains a fix to be able to test other things, but there might be a better way. See https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2034/diffs#ca1564fb2e5360b04153a34b7703ff4445f55b75",3
120845812,2022-12-23 08:49:11.880,FE: fix React 18 screenmanager issue Error: Cannot have two MultiBackends at the same time.,"Move the screenmanagerprovider to App tsx. There can only be 1, so not one for with and one for without authentication.

To reproduce the issue:
- on react 18 branch
- use a config.json with `""GW_FEATURE_FORCE_AUTHENTICATION"": false` (you can use the example config)
- go to homepage
- split the mapview
- login to gitlab
- when back on the homepage, split the mapview again
- logout
- when back on the homepage, split the mapview again
- do this a few times

at one of the split map views, the error will show `Error: Cannot have two MultiBackends at the same time.`

![image](/uploads/8f2e12e3019c60a3bc96ac480494c7f6/image.png)",2
120750984,2022-12-21 14:49:13.592,FE: fix Radar preset in preset storybook,"The data layer in de Radar preset in the presets storybook no longer contains Radar data.
After running `nx storybook presets` one of two things can happen:
1. If you are not on VPN you will see ""Data unavailable""
2. If you are on VPN, Harmonie (?) data will be shown

Suggestions to do:
1. Add a real radar preset
2. Create a preset (or keep the current one called Radar and rename it) where the layer has dimensions 
   - _(This layer was probably used in a MR to fix dimensions, it would be good to keep/add a preset to the demo that has layers with dimensions)_


It would be nice to keep the following things in mind while working on this ticket:
* Make the name of the preset reflect the data layer(s)
* Make sure that all data layers used in the presets demo are available externally (so not only accessible via VPN)


Replace `""service"": ""https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=HARM_N25"",` with a public radar service in `libs/presets/src/lib/utils/fakeApi/viewpresets/Radar.json`

make sure this will work without any vpn connection",1
120746088,2022-12-21 13:11:36.714,FE: presets move onSelectPreset to saga,"Move onSelectPreset to sagas, and fire the stop animation only if the map is animating",2
120732930,2022-12-21 09:12:45.388,BE: remove unused authorizer-lambda code from infrastructure,"The code in https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/tree/master/infrastructure/authorizer-lambda is no longer used. To keep the repository clean, it should be removed. 

Verify that this can be done.

Once this is removed, the section about this part of the repository can be removed from the infrastructure readme (https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/404#note_1217138637)",2
120728030,2022-12-21 07:23:08.228,FE: presets rename reducer keys,in the mapreducer; rename: `isFetchingMapPresets` to `isFetching` and `errorMapPresets` to `error`,2
120727976,2022-12-21 07:20:48.853,FE: presets move onSavePreset to sagas,Move `onSavePreset` to sagas.,3
120699084,2022-12-20 14:36:29.964,BE: Fix XRAY_RADIO_BLACKOUT category detail issue,"The category detail for xray_radio_blackout_alert is set wrong in the new version. For xray_radio_blackout_alert it should be """" and not XRAY_RADIO_BLACKOUT. This causes issues when posting one from the FE.

After this is fixed make sure to test if https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2439 is also solved, as it might be related.",2
120630070,2022-12-19 12:54:49.972,FE: sigmet/airmet - import configuration from the BE in the app instead of sigmet module,"The config for the sigmet/airmet is currently stored in the sigmet module. This will have to be moved so it can be imported from the app and retrieved from the BE like we do for the global config.

- Add a knmi.sigmetConfig and knmi.airmetConfig
- Add two keys in the global config to set the name of the sigmet/airmet config files similar as done for the presets
- Pass along the config to the sigmet/airmet modules via property
- Ensure the config can be used in the storybook
- Do a call to `/aviation/sigmet-config` and `/aviation/airmet-config` to retrieve the config",3
120629962,2022-12-19 12:52:07.967,FE: sigmet/airmet - hardcoded baselayers,"The baselayers in SIGMET/AIRMET are currently hardcoded (for example the helicopter platforms or the airport locations).

*  Make the baselayers and overlayers configurable so the correct ones are shown when opening the SIGMET/AIRMET module.
* Use the mappreset definition in the configuration (with type over/base layer) on what you want to see and to load on opening the form
* call key: `mapPreset`
* Add the config outside of the FIRs on the same level as `location_indicator_mwo`
* Also ensure the bbox and srs are set in the preset


Ensure that the current set-up for KNMI remains unchanged",3
120629817,2022-12-19 12:50:00.733,FE: sigmet/airmet - Allow FIR selection via dropdown,"The FIR used to sent to the BE and for intersections needs to be configurable

- Use this in the getFir function.
- This same getFir function needs to be used in SelectFir.tsx to ensure the correct coordinates of the FIR get sent to the BE and used in the creation of the intersection
- Move the amsterdam FIR from AMSTERDAM_FIR.json inside the `EHAA` prop in sigmetConfig and airmetConfig
- The `MapViewLayer` for the currently selected FIR should be highlighted by using a different color/thickness

Ensure the option for KNMI remains only the Amsterdam FIR as it is now.",3
120629515,2022-12-19 12:45:07.471,FE: sigmet/airmet configurable validation rounding Levels,"To allow SIGMET/AIRMET to be used by the partners some validation needs to be made configurable.

- Validation for levels is hardcoded. Rounding to nearest ...m/..FL/..ft/...degrees needs to be configurable
- FIR setting and not globally per institute

Apply the current settings to the config for KNMI so the current behaviour doesn't change.",3
120629415,2022-12-19 12:42:53.651,FE: sigmet/airmet max levels configurable,"To make SIGMET/AIRMET useable for our partners the following has to be made configurable via the sigmet/airmet config file:

- Min/max levels values are hardcoded
- FIR based setting

This will have to be adjusted in the validation. Ensure the current values are added to the KNMI config so the current behaviour doesn't change.",3
120629249,2022-12-19 12:40:05.795,FE: sigmet/airmet - configurable VALID_FROM_TIME_DELAY_IN_MINUTES,"Goal is to make SIGMET/AIRMET configurable:.

One of the things we need is:

* To determine the prepopulated validity start time when the SIGMET/AIRMET is opened, a constant (VALID_FROM_TIME_DELAY_IN_MINUTES) has been defined (set to 30 mins for KNMI). This needs to be made configurable via the config so institutes can set their own delay time.

Make both settings configurable and add to the config file for KNMI so the current settings remain unchanged for us.",2
120621239,2022-12-19 10:18:56.161,BE: Update Readme of serverless backend with config.json for tst environment,,1
120621085,2022-12-19 10:16:05.859,FE: BUG: SIGMET/AIRMET changes in start geometry are not saved if it is the only change,"The changes are saved successfully, but if you re-open the same sigmet before loading the list is completed, you will still see the old data. The user currently doesn't see that the list is being loaded.

Solution:
- show a loading bar (like taf) to indicate that new data is being fetched after saving",2
120620890,2022-12-19 10:12:18.635,FE: TAC editor validation red in box unclear,,2
120620396,2022-12-19 10:02:34.210,BE: KNMI open spaceweather API: Add smoketest,"Check if the spaceweather API works: 
- Query for start/end, retrieve notification list. 
- Use fixed dates",2
120620037,2022-12-19 09:55:45.989,BE: KNMI open spaceweather API: Throttle requests,"- Find out if API GateWay can handle this.
- Allow 2 requests per second, check if dynamodb works well with this.
- Test the API",5
120619892,2022-12-19 09:53:00.701,BE: Make KNMI open spaceweather API queryable via start and end date,- Currently the query is done from 60 days ago until now. Make these API parameters.,3
120619247,2022-12-19 09:42:49.848,BE: Make spaceweather API available without authentication,"- Make a lambda which makes the spaceweather API available. Read only, no authentication needed.
- Data should be the MetOffice notifications, queryable via start and end time.
- This api can be made available via the GeoWeb API gateway (but a different endpoint name).
- Update documentation and make it available at confluence.",5
120618256,2022-12-19 09:26:44.345,FE: update chromium to latest version,"- Update chromium, to at least 106
- Fix snapshots",5
120618097,2022-12-19 09:24:19.306,FE: update npm vulnerabilities,- Should be splitted per library.,5
120538224,2022-12-16 15:04:47.971,FE: investigate form dirty after rhf7 for TAF,"Using `formState.dirty` is returning true, while no changes have been made to the form. It's not a big of an issue since we can use `formState.dirtyFields` and check there the number of keys, but the error is telling us something is wrong.

Check if following helps:
- do all (hidden) values have an initial value set?
- do the `reset` have the correct params
- is `reset` the correct handle or should we use `setValue` to reset a form with dirty in mind?

This is happening in taf and sigmet/airmet, might be related. Timebox it, as we can continue otherwise",3
120468080,2022-12-15 11:50:10.730,FE: bug spaceweather saving new notification is broken,,2
120416069,2022-12-14 14:29:13.901,BE: cleanup after switching to new MetOffice notification,"Wrap up ticket after finishing this US: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2209

The old SNS notification dependencies can be removed as these are no longer used",2
120382525,2022-12-14 08:04:40.120,FE: Taf move IS_DRAFT to prepareTafValues,"IS_DRAFT should be set in prepareTafValues, so we have the initial values in one place and less issues in react-hook-form-7",2
120333938,2022-12-13 13:21:02.131,FE: taflayout tests should not need the extra blur,"fix TODOs in taflayout.spec that reference this ticket

there are 2 tests that contain an extra `fireEvent.blur` that is not needed in the browser, check if test works without it in React 18",2
120318209,2022-12-13 09:35:22.393,BE: saving sigmet or airmet with empty start geometry should be allowed,"- nx serve
- open sigmet
- click create a new sigmet 
- only choose a phenomenon
- click SAVE
- FE will send empty startgeometry, this should be allowed
``` startGeometry: """" startGeometryIntersect: """"```


currently: you will get an error `invalid request body`


expected: sigmet should be saved without problems


same issue for AIRMET",3
120246331,2022-12-12 08:56:24.902,BE: deploy presets-backend fixes to ACC,,2
120245481,2022-12-12 08:43:46.875,FE: BUG featureInfoDialog does not display info when clicking on map after selecting a map preset,"- nx serve with knmi config (or example config with gitlab login)
- log in
- you have an empty map now
- click the getFeatureInfo I icon, it will say 'No layers added to the map.'
- choose a mappreset in the layermanager
- now the getFeatureInfo dialog says 'Click on the map for info.'
- click on the map

Expected:
Mappin and layerinfo is displayed

Actual: 
nothing happens

If you first select a preset and then open the getFeatureInfo dialog it does work. Or if you first open the dialog and then manually add a layer (so not via the presets).

Maybe caused by https://gitlab.com/opengeoweb/opengeoweb/-/issues/3039 ?",2
120241975,2022-12-12 07:59:35.294,BE BUG fix: update openAPI specs of AIRMET for surface visiblity phenomenon,"While testing https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2081, I got an ""Invalid request body"" trying to save a draft of an Airmet with phenomenon surface visibility. This issue only occurred for this phenomenon. See if anything has changed and update the openapi specification.



AIRMET that caused the issue:
```
{
  ""changeStatusTo"": ""DRAFT"",
  ""airmet"": {
    ""phenomenon"": ""SFC_VIS"",
    ""isObservationOrForecast"": ""OBS"",
    ""validDateStart"": ""2022-12-12T08:19:34Z"",
    ""validDateEnd"": ""2022-12-12T09:19:34Z"",
    ""locationIndicatorATSR"": ""EHAA"",
    ""locationIndicatorATSU"": ""EHAA"",
    ""locationIndicatorMWO"": ""EHDB"",
    ""firName"": ""AMSTERDAM FIR"",
    ""firGeometry"": {
      ""type"": ""FeatureCollection"",
      ""features"": [
        {
          ""type"": ""Feature"",
          ""geometry"": {
            ""type"": ""Polygon"",
            ""coordinates"": [
              [
                [
                  5,
                  55
                ],
                [
                  4.331914,
                  55.332644
                ],
                [
                  3.368817,
                  55.764314
                ],
                [
                  2.761908,
                  54.379261
                ],
                [
                  3.15576,
                  52.913554
                ],
                [
                  2.000002,
                  51.500002
                ],
                [
                  3.370001,
                  51.369722
                ],
                [
                  3.370527,
                  51.36867
                ],
                [
                  3.362223,
                  51.320002
                ],
                [
                  3.36389,
                  51.313608
                ],
                [
                  3.373613,
                  51.309999
                ],
                [
                  3.952501,
                  51.214441
                ],
                [
                  4.397501,
                  51.452776
                ],
                [
                  5.078611,
                  51.391665
                ],
                [
                  5.848333,
                  51.139444
                ],
                [
                  5.651667,
                  50.824717
                ],
                [
                  6.011797,
                  50.757273
                ],
                [
                  5.934168,
                  51.036386
                ],
                [
                  6.222223,
                  51.361666
                ],
                [
                  5.94639,
                  51.811663
                ],
                [
                  6.405001,
                  51.830828
                ],
                [
                  7.053095,
                  52.237764
                ],
                [
                  7.031389,
                  52.268885
                ],
                [
                  7.063612,
                  52.346109
                ],
                [
                  7.065557,
                  52.385828
                ],
                [
                  7.133055,
                  52.888887
                ],
                [
                  7.14218,
                  52.898244
                ],
                [
                  7.191667,
                  53.3
                ],
                [
                  6.5,
                  53.666667
                ],
                [
                  6.500002,
                  55.000002
                ],
                [
                  5,
                  55
                ]
              ]
            ]
          },
          ""properties"": {
            ""centlong"": 4.98042633,
            ""centlat"": 52.8618788,
            ""selectionType"": ""fir"",
            ""FIRname"": ""AMSTERDAM FIR"",
            ""StateName"": ""Netherlands"",
            ""StateCode"": ""NLD"",
            ""ICAOCODE"": ""EHAA"",
            ""REGION"": ""EUR""
          }
        }
      ]
    },
    ""startGeometry"": {
      ""type"": ""FeatureCollection"",
      ""features"": [
        {
          ""type"": ""Feature"",
          ""properties"": {
            ""selectionType"": ""box"",
            ""stroke-opacity"": 1,
            ""_adaguctype"": ""box"",
            ""stroke-width"": 1.5,
            ""fill"": ""#f24a00"",
            ""stroke"": ""#f24a00"",
            ""fill-opacity"": 0.25
          },
          ""geometry"": {
            ""type"": ""Polygon"",
            ""coordinates"": [
              [
                [
                  4.500970704201855,
                  49.495232525867735
                ],
                [
                  7.525278137937589,
                  49.495232525867735
                ],
                [
                  7.525278137937589,
                  51.78280277916369
                ],
                [
                  4.500970704201855,
                  51.78280277916369
                ],
                [
                  4.500970704201855,
                  49.495232525867735
                ]
              ]
            ]
          }
        }
      ]
    },
    ""startGeometryIntersect"": {
      ""type"": ""FeatureCollection"",
      ""features"": [
        {
          ""type"": ""Feature"",
          ""properties"": {
            ""stroke-opacity"": 1,
            ""stroke-width"": 1.5,
            ""fill"": ""#f24a00"",
            ""stroke"": ""#f24a00"",
            ""fill-opacity"": 0.5
          },
          ""geometry"": {
            ""type"": ""Polygon"",
            ""coordinates"": [
              [
                [
                  4.500971,
                  51.443492396514515
                ],
                [
                  5.078611,
                  51.391665
                ],
                [
                  5.848333,
                  51.139444
                ],
                [
                  5.651667,
                  50.824717
                ],
                [
                  6.011797,
                  50.757273
                ],
                [
                  5.934168,
                  51.036386
                ],
                [
                  6.222223,
                  51.361666
                ],
                [
                  5.964080207668052,
                  51.782803
                ],
                [
                  4.500971,
                  51.782803
                ],
                [
                  4.500971,
                  51.443492396514515
                ]
              ]
            ]
          }
        }
      ]
    },
    ""movementType"": """",
    ""change"": """",
    ""sequence"": ""-1"",
    ""type"": ""NORMAL"",
    ""visibilityCause"": """",
    ""uuid"": ""8f6f5b14-79f1-11ed-899a-2ec4e9e487a3""
  }
}
```",2
120159393,2022-12-09 14:37:50.802,FE: taf make sure prepareTafValues returns complete form with empty data,"Taf export tests are failing, because it does not sets all form values. Make sure `prepareTafValues` returns all keys from a changegroup. Test this as well with the baseForecast props. 

For example, if wind has not been set, return the key with empty string.",2
120158961,2022-12-09 14:28:18.057,FE: fix for TAF valid change interfield validation,"to reproduce issue:
- open empty taf
- in change group row: leave change field empty
- in change group row valid field, enter '091800' (or another six number value)
- tab or click next field

Expected:
- There should be no validation triggered

Current:
- error shows for valid field:  Changegroups 1: Invalid validity period, expected DDHH/DDHH for BECMG and TEMPO or DDHHmm for FM",2
120154743,2022-12-09 13:07:29.190,"FE: Fix WMJSMAP React18Strictmode, part 2: Init and destroy of WMJSMap","This MR is towards React18 icm StrictMode.

React18 with StrictMode will mount, unmount and remount components. 

Therefore WMJSMap should be able to be initialized and destroyed multiple times with the same mapid.",3
120138280,2022-12-09 07:37:58.581,FE remove fetchPresets on mount and use initialiseApp action,"~~Remove the fetchPresets on mount in presets, and use the `initialiseApp` action inside a mapPreset saga to fire the action to load the initial presets.~~

Initialise app does not work using inside the app, as the presets api is not ready then. Also not sure if this was the best solution; in future you don;t want to load presets if you're not on a map page. For now create a new fetchInitialPreset action, and only fire it once",2
120137830,2022-12-09 07:28:45.031,FE presets move fetchMapPreset to saga,"With the docked layermanager we need to have load/error a state per map. Move the fetchViewPreset (detail) logic to sagas, and see if we can limit the ammount of actions needed to update the store. Make sure the ui loading state is a side effect of a loading preset.",3
120137800,2022-12-09 07:28:03.269,FE create app store with initialiseApp action,"Some components do a fetch on mount. This is not a problem when there's no screenmanager, but with multiple screens come multiple fetches. This is a problem for presets, but might be for layermanager as well. See snackbar for example of mounting the storeprovider. 

- create a new (connected) app wrapper file in core which can render children
- create a app reducer with (for now) only 1 property: isInitialised. 
- on mount it will trigger `initialiseApp` action, and sets the `isInitialised` on true
- use this wrapper in geoweb

In next tickets, we can remove the onMount fetch call (for example for presets). Inside the preset saga we will catch the `initialiseApp` app action, and trigger the fetch from there.",3
120002683,2022-12-07 12:19:40.229,FE: cleanup resets in tafform,"Cleanup resets in tafform, point them to one method so we can form-fields is easier to update.",2
119943142,2022-12-06 13:23:03.059,FE: presets fix storybook issue with animation preset,"Check for a easy solution. If too big, discuss as this is a storybook only issue; and navigating between presets does work so there's a work around. Fix might be too impactfull for something small, but investigate. 

Fix issue with animation described in 
https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2078#note_1198067809",3
119931630,2022-12-06 10:19:55.381,FE: GetFeatureInfoDialog breaks Timeseries preset,"the Timeseries preset is broken, probably caused by the GetFeatureInfoDialog? You can see it in staging when selecting Timeseries from the hamburger menu. I'll add a ticket in the sprint

![image](/uploads/c276063ecad8bbde1dc39f822deb9b65/image.png)",2
119882491,2022-12-05 15:17:34.398,BE: Preset Backend: Older existing user presets do not work anymore,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2416 for details.,3
119875239,2022-12-05 14:20:18.418,BE: presets issue with loading old? presets,"Marcel is having an error when loading his own presets in ACC since the last deployment.

![image](/uploads/5ad5cfd189adf58c4d9dcdfab6c167ec/image.png)

Following error message is observed:

```
Traceback (most recent call last): File ""/usr/local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py"", line 407, in run_asgi result = await app( # type: ignore[func-returns-value] File ""/usr/local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py"", line 78, in __call__ return await self.app(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/uvicorn/middleware/message_logger.py"", line 86, in __call__ raise exc from None File ""/usr/local/lib/python3.10/site-packages/uvicorn/middleware/message_logger.py"", line 82, in __call__ await self.app(scope, inner_receive, inner_send) File ""/usr/local/lib/python3.10/site-packages/fastapi/applications.py"", line 270, in __call__ await super().__call__(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/applications.py"", line 124, in __call__ await self.middleware_stack(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py"", line 184, in __call__ raise exc File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py"", line 162, in __call__ await self.app(scope, receive, _send) File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/cors.py"", line 92, in __call__ await self.simple_response(scope, receive, send, request_headers=headers) File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/cors.py"", line 147, in simple_response await self.app(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/exceptions.py"", line 79, in __call__ raise exc File ""/usr/local/lib/python3.10/site-packages/starlette/middleware/exceptions.py"", line 68, in __call__ await self.app(scope, receive, sender) File ""/usr/local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py"", line 21, in __call__ raise e File ""/usr/local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py"", line 18, in __call__ await self.app(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/routing.py"", line 706, in __call__ await route.handle(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/routing.py"", line 276, in handle await self.app(scope, receive, send) File ""/usr/local/lib/python3.10/site-packages/starlette/routing.py"", line 66, in app response = await func(request) File ""/usr/local/lib/python3.10/site-packages/fastapi/routing.py"", line 235, in app raw_response = await run_endpoint_function( File ""/usr/local/lib/python3.10/site-packages/fastapi/routing.py"", line 161, in run_endpoint_function return await dependant.call(**values) File ""/app/./app/routers/view_preset.py"", line 76, in get_view_preset return ViewPresetDetail(**preset.presetjson) File ""pydantic/main.py"", line 342, in pydantic.main.BaseModel.__init__ pydantic.error_wrappers.ValidationError: 1 validation error for ViewPresetDetail id none is not an allowed value (type=type_error.none.not_allowed)
```

Potentially an issue with no id (or null id) being present in the json: 
- `1 validation error for ViewPresetDetail id none is not an allowed value (type=type_error.none.not_allowed)`
- `1 validationerrorforViewPresetDetailidfieldrequired(type=value_error.missing)`

Potential solution to use the id from the id field instead of from the json if that is non-existent or null",3
119872154,2022-12-05 13:39:55.539,FE: prepare mosaic screenmanager for React 18,"to make Mosaic work with React 18 in Strict mode, the drag and drop provider needs to be extracted to a separate `<ScreenManagerProvider>` (as mentioned here https://github.com/nomcopter/react-mosaic/issues/162)",2
119852829,2022-12-05 09:46:08.323,BE: remove letsencrypt from presetsBE,"- causes increased CPU
- reduces dependencies
- remove from code, not used anymore",3
119852594,2022-12-05 09:43:24.366,Deploy to ACC on15th of December at 10:00,,1
119852500,2022-12-05 09:42:25.642,BE: Issues on DynamoDB,,3
119851806,2022-12-05 09:32:21.799,BE: Improve BE documentation where needed - main readme,"Keep general stuff here, relocate specific module related information to the individual modules

- Linting & formatting
- General testing
- Deployment
- Routes
- Link to other readme's of the modules

* Some sections seem to be outdated or irrelevant at this point (for example, Testing sigmet backend lambda, taking into consideration we have a smoke test). Another outdated section is Testing TAC exporter lambda (there is no equivalent mention of IWXXM).
* It would be nice to have an overview of what modules are included in the BE (at the moment, Aviation and Spaceweather), and link to their individual README.md documents.",3
119851800,2022-12-05 09:32:11.393,BE: Improve BE documentation where needed - spaceweather,"* It has its own README.md file. It's outdated or contains very little information.
* Improve documentation SW IncomingDataStream lambdas
* Add documentation voor v1 / v2 folders",3
119851643,2022-12-05 09:29:36.933,BE: Improve BE documentation where needed - infrastructure,"Same as in the case of the aviation module, it would be nice to have an overview of what we can find in this folder, and which API calls are implemented: 
* The OpenAPI spec points to the FE types file. The only official API documentation that we have now (and that would be visible to anyone using the repo) is the auto-generated Swagger page (https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/blob/master/aviation/aviation-openapi-spec.yml). Everything is typed and even the examples have the right structure. We only need to add more precise descriptions to the fields, as well as generic descriptions for the different API calls, so that someone could use the API effectively by just looking at the spec.
* There could be a README.md with a short overview of what each lambda does (we did something like that when we started working on Spaceweather, but sadly it's outdated). Also useful to point out if a lambda implements and API call, and which one.",3
119851630,2022-12-05 09:29:21.435,BE: Improve BE documentation where needed - /docs,"Describe current database situation, should update in the future after potentially switching to new db system. Also see if it can be integrated into main readme",3
119851612,2022-12-05 09:29:02.032,BE: Improve BE documentation where needed - aviation,"* The OpenAPI spec points to the FE types file. The only official API documentation that we have now (and that would be visible to anyone using the repo) is the auto-generated Swagger page (https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/blob/master/aviation/aviation-openapi-spec.yml). Everything is typed and even the examples have the right structure. We only need to add more precise descriptions to the fields, as well as generic descriptions for the different API calls, so that someone could use the API effectively by just looking at the spec.
* There could be a README.md with a short overview of what each lambda does (we did something like that when we started working on Spaceweather, but sadly it's outdated). Also useful to point out if a lambda implements and API call, and which one.",3
119850812,2022-12-05 09:18:12.774,Discuss with PO: Time set outside of the layer time still results in a display of that layer.,"In previous versions, this behaviour was different.
Nearest time of an image should be displayed, but should behave in a civilized way.


Discuss with Marcel asap to set requirements of US",3
119848999,2022-12-05 08:52:04.482,FE: Add MSG/GOES-East CPP satellite images to system WMS services,"* add WMS to available WMS services in layer select in the existing `Satellite` WMS ; for now, final goal is to have `all` internal processed satellite images in one WMS).
* no system presets needed

* Change can only be checked after new release of ADAGUC!
* No need to change anything in the code, make sure WMS services can be found",1
119848959,2022-12-05 08:51:12.553,BE: Add MSG/GOES-East CPP satellite images to system WMS services,"The processing of the data is done by RDSW; details on S3 buckets and SNS topics with Robert van Versendaal and/or Jan Fokke Meirink.

* layer(name)s:

1. cloud top height
1. cloud top temperature
1. precipitation rate
1. surface downwelling shortwave radiation
1. cloud condensed water path

* process the data in Adaguc (styling is available with RDSW)
* Use the groups for easy finding in FE. Groups & sub-groups: CPP > MSG & GOES

Info for finding data in AWS:
```
In widi-prd hebben we nu inderdaad de topics:
arn:aws:sns:eu-west-1:467137488806:msg-cpp-copy-msg-to-adaguc-prd
arn:aws:sns:eu-west-1:467137488806:msg-cpp-copy-goes16-to-adaguc-prd
voor bestanden die in
s3://knmi-msg-cpp-cache-prd-eu-west-1/nwc_saf_cpp/full/SEVIR_AODC/
s3://knmi-msg-cpp-cache-prd-eu-west-1/nwc_saf_cpp/full/ABI___EAST/
beschikbaar komen.
```",3
119848390,2022-12-05 08:42:33.254,FE: Update docked layermanager to use same logic as feature info dialog,"Use dialog hooks and UI store, should work the same as other dialogs, including the stacked background & box shadow",3
119848083,2022-12-05 08:38:46.016,BE TBD: Reduce logging of scantask containers - implement solution,"- Dependent on outcome of previous ticket
- After solution, check if and how implementation can be splitted",3
119847764,2022-12-05 08:35:34.546,BE: Reduce logging of scantask containers - investigate solution,"- Fix in adaguc nested stack
- Try to use a json logging format
- Check that max logging size is not exceeded, otherwise log will be thrown away: logstash removes messages larger than 65536 (https://gitlab.com/KNMI/cloud-platform/monitoring/logstash-config/-/blob/master/pipelines/default_pipeline/1010-drop-large-messages.conf)
- If possible, reduce number of loglines
- Separate log channel for failures/errors, if succeeds: do not show logging",3
119847457,2022-12-05 08:32:04.589,BE/avi-message-converter: warnings for TAF TAC creation still some left,"- Since the TAC is not made on each onblur, this issue might be resolved.
- Try to save a draft TAF with empty fields/lines or invalid cloud groups. 
- The TAC warning should be findable in Grafana, but should not be forwarded to the Slack channel and mail.
- When publishing TAF with a problematic TAC, the publishing should still fail.",3
119847310,2022-12-05 08:30:26.511,BE: schedule continuation meeting for deployment of microservices,"Notes: https://docs.google.com/document/d/1DtNrS_eBU4-BIAV_YDobO2xNDOwT7vIzPYyv6u4VbK0/edit

Resulted in US: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2425",3
119846656,2022-12-05 08:21:03.497,FMI-aws-config: Clean-up GW_FEATURE_LAYER_SELECT,"* https://gitlab.com/search?search=GW_FEATURE_LAYER_SELECT&nav_source=navbar&project_id=24089222&group_id=10103083&search_code=true&repository_ref=master
* If you open a merge request in geoweb international channel, also notify METNO about this change. Contact Bjrn, if he does not respond, try to contact someone else",2
119846641,2022-12-05 08:20:39.994,BE: Clean-up GW_FEATURE_LAYER_SELECT from serverless BE,https://gitlab.com/search?search=GW_FEATURE_LAYER_SELECT&nav_source=navbar&project_id=23910244&group_id=2734904&search_code=true&repository_ref=master,2
119846594,2022-12-05 08:19:13.519,FE: Clean-up GW_FEATURE_LAYER_SELECT,https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/apps/geoweb/src/app/utils/loadConfig.ts,2
119846186,2022-12-05 08:11:57.836,FE: BUG Changing cloudgroup works inconvenient,"Related to our capitalization. If you type with shift key pressed, there seems to be no bug. Text should be displayed capitalized. This is default behavor, best way is to not do this, and do the transform to uppercase elsewhere https://github.com/react-hook-form/react-hook-form/discussions/7867#discussioncomment-2212314

We need to:
- remove the `toUpperCase()` in TafFormTextField
- add `textTransform: 'uppercase'` to the styling
- ~~- transform all values to uppercase on submit~~ probably can prevent this by doing this on blur
- transform all values to uppercase on blur
- let all validations handle lowercase 

To split this
- we use a lot of `trim` methods before we proceed validating. We can put this in a method that does this and do the uppercase transform. Create this method, and use this on a simple validation method so other tickets can proceed:
- test driven development, first pick a validation, and update all tests so it handles lowercase. After this fix the now failing validation methods
- after all validations are in, we can do the uppercase transforming as last and remove the uppercase in the textfield

Tip: 
- when developing remove the `toUpperCase()` in TafFormTextField, to see if the input now accepts lowercase. Later we use css to not show the lowercase

CheckList:
- [x] change
- [x] clouds
- [x] probability
- [x] validField
- [x] visibility
- [x] weather
- [x] wind",3
119845927,2022-12-05 08:06:23.597,FE: Clean up TAF code: remove custom isFormDirty,"Remove isFormDirty from `useTafModuleContext`, and use formstate.isFormDIrty from react-hook-form inside TafLayout. Be sure to watch the performance issues, should be smooth typing",3
119845891,2022-12-05 08:05:43.703,"FE: TAC code above edit field not necessary, can be removed",,3
119844072,2022-12-05 07:33:58.680,FE: Taf convert empty null values to empty string,"Convert null values to empty strings in taf of:
- empty change group
- hidden values (form-fields)",3
119754121,2022-12-02 13:39:03.786,FE: Add PASCAL data to system WMS services,"Goal of this issue is to provide PASCAL postprocessing data. The processing of the data is done by EWC development team, see https://confluence.knmi.nl/x/VgkZBQ for more details.

* process the data in Adaguc (styling will be added by EWC team)(done)
* add WMS to available WMS services in layer select (proposed WMS-name: `PASCAL`)
* WMS url: https://adaguc-server-geoweb.geoweb.knmi.cloud/adaguc-server?DATASET=PASCAL&",2
119740146,2022-12-02 09:14:52.506,"FE: Fix WMJSMAP React18Strictmode, part 1: No ref for zoombuttons","This MR is towards solving React18 StrictMode for WebMapJS. Callback functions from components will cause issues with React18. Therefore the onRegisterAdaguc callback should not be used.

MR: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2081

To test: Make sure nothing is broken.



This is part of https://gitlab.com/opengeoweb/opengeoweb/-/issues/2957",2
119700929,2022-12-01 14:37:05.816,FE: move preset logic from core to presets,"Move logic related to presets from the core lib to presets, so it's easier to follow up other tickets moving to sagas.",3
119693972,2022-12-01 13:02:31.069,FE: presets move fetchViewPresets to saga,Move call to sagas so we have some more control of it.,3
119624683,2022-11-30 12:44:22.536,FE: move getMapPresetLoading and getMapPresetError to ui,Make layermanager independent from presets; move the preset code to ui,2
119614526,2022-11-30 09:49:54.515,Deploy new presets version to TST,,1
119559649,2022-11-29 13:15:49.729,FE: Taf remove ref.name part 2,"There is one ref.name used I forgot to remove, remove it",2
119545233,2022-11-29 09:44:16.668,FE: Taf prevent using of ref.name for error lookup in IssuesPane,"Issuespane is looking ref.name in `getCustomError` to see if the error is coming from changegroup and row number. This won't work anymore in react-hook-form7, so we should find another way to generate the errorlist for the IssuesPane.",2
119543511,2022-11-29 09:19:53.721,FE: add internal baselayers to wms loader,,2
119470540,2022-11-28 09:19:27.521,FE: remove drawFunction from redux,"* make a dictionary to register the drawFunctions with an id (example dictionary wmjsservicestore)
* when a feature gets selected, the feature gets a different drawFunction id in redux
* enable serializableCheck in `store.ts` (whole part `defaultMiddlewareOptions` can be removed now)
* there should be no console logs anymore when opening the Timeseries preset: `A non-serializable value was detected in the state` for `drawFunction`",5
119470189,2022-11-28 09:13:04.480,"FE: move selectedFeatureIndex from mapstore to layerstore, is part of a layer","- selectedFeatureIndex is stored inside the mapstore, but it belongs to a specific layer. Should be moved to the layerstore
- make sure drawing in sigmet-airmet keeps working
- make sure selecting a feature in timeseries preset keeps working",5
85941764,2021-04-26 09:19:20.753,FE: make presets with the Waarschuwingssystematiek radar/polygonen,"See the issue https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1270

_Update from Loes:_

Layers have been added to adaguc. They can be found using the following WMS url: https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=cell-tracking

These are the available layer names: 
![image](/uploads/8cef284adca9d483e9d8e041a6aa829e/image.png)

You can test it out first by putting the above url in the WMS loader

**Note that the Warnings from KNMI (inner parts) has two styles available: grey and colored.**",3
85941469,2021-04-26 09:15:53.140,Adaguc: Add configuration for celltracking,Add configuration file sent by Bram.,2
85940920,2021-04-26 09:08:41.187,FE: Remove random element from wms requests for getCapabilties,"Both getMap and getCapabilties has random0.504337860264962= type of parameter.

This random elements should be removed from wms requests. They disable caching and causes unnecessary load for server.

To be considered, if there is badly behaving wms service, maybe this can be configurable per service.",3
85940803,2021-04-26 09:07:03.358,FE: Remove random element from wms requests for GetLegendGraphic,"Both getMap and GetLegendGraphic have 0.504337860264962= type of parameter in url

This random elements should be removed from wms requests. They disable caching and causes unnecessary load for server.

To be considered, if there is badly behaving wms service, maybe this can be configurable per service.

_It seems there is a randomizer option for images, check if setting this to false by default will fix this. This would enable us to turn it on in certain cases?_",2
85940272,2021-04-26 09:01:10.132,FE: Add over-layers for North Sea Platforms and Airports,"Layers to add for AIRMET and SIGMET:

* **Location of North Sea Platforms**
* **Locations of Airports EHAM/EHBK/EHLE/EHGG/EHRD**

Add them as overlayers and add them as a standard in the airmet/sigmet maps

Use the following service https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=OVL-sigmetairmet",2
85940130,2021-04-26 08:58:24.965,Adaguc: Add layers North Sea Platforms and Airports,"These 2 layers need to be added to Adaguc configuration
* **Location of North Sea Platforms**
* **Locations of Airports EHAM/EHBK/EHLE/EHGG/EHRD**

Add icons for those layers: @didier.dezanet will provide icons.",3
85939761,2021-04-26 08:54:02.389,FE: Forecast time of phenomenon cannot be outside valid period,"For Sigmet and Airmet:
Forecast time should be in the valid period.",2
85939415,2021-04-26 08:50:41.736,BE: You can cancel an expired SIGMET and AIRMET,"- Check if for an expired sigmet/airmet the cancel button is enabled (FE)
- After investigation, if is not working, in BE is necessary to change the CanBe.",2
85936905,2021-04-26 08:29:26.152,Add url to feedback-form,"Click on avatar; information menu opens. Select Feedback menu-option.
Link to confluence page with the link to google survey. (try if it is possible an immediate redirect)",2
85936437,2021-04-26 08:22:23.394,BE: Accept FIR geometry to each Sigmet sent by FE,"Add to openAPI spect to accept new field passed from FE that contains the FIR.

Store the FIR and send over to message converter I assume?

_Discuss with FE people on what to name the field and where it should be in the structure_",3
85936141,2021-04-26 08:17:35.167,FE: Add FIR geometry to each Sigmet sent to BE,"The BE needs to make an intersection of the geometry with the FIR itself too so we need to send over the used FIR to the BE when pasting a sigmet/airmet.

We need to add a field to the form in which we store the FIR coordinates used in the FE. This needs to be sent to the BE with each post we do.

_Discuss with BE people on name of field and where exactly to place it._",2
85935798,2021-04-26 08:13:55.408,BE: geoweb-message-converter: deriving TAC geometry from polygon input (FE),"Part of this:
- Use selectionType from startgeometry, use FIR type to endicate entire FIR
- Use FIR and intersection from FE to simplify region for TAC message. Re-use previous algorithms for simplification from SESAR.
- Use intersection poly instead of drawn poly from Frontend for IWXXM polygons",8
85935723,2021-04-26 08:12:40.565,BE: geoweb-message-converter: handle Cancel,"A Cancel SIGMET made in GeoWeb has to be converted into a SIGMET object in the fmi-avi-messageconverter data model.
The necessary information for the Cancel needs to be copied into the SIGMET object",3
85935576,2021-04-26 08:11:09.768,BE: geoweb-message-converter: handle Volcanic Ash,"A VA SIGMET made in GeoWeb has to be converted into a SIGMET object in the fmi-avi-messageconverter data model.
The necessary information for the Volcanic Ash SIGMET needs to be copied into the SIGMET object.
This includes info like the volcano name and position etc.",3
85935267,2021-04-26 08:07:36.735,BE:  Volcanic Ash parse and create TAC elements,"Volcanic Ash SIGMET's should be parsed by the fmi-avi-messageconverter-tac library and stored in the fmi-avi-messageconverter SIGMET object.

The Reconstructor code for the Volcanic Ash elements shall be built to enable generating the TAC elements needed for describing VA SIGMET's from the fmi-avi-messageconverter SIGMET object",3
85935125,2021-04-26 08:05:02.640,BE: Parse Sigmet geometry with width along a line,"In a SIGMET/AIRMET the geomery of a phenomenon can be described as an area with a width (in km or miles) along a line:
for example: **APRX 50KM WID LINE BTN N64 W017  N60 W010  N57 E010**

This type of geometry description should be parsed by the fmi-avi-messageconverter-tac library and converted into a polygon for inclusion in the GeoGeometry field of the fmi-avi-messageconverter SIGMET/AIRMET object (together with the original TAC clause in the TacGeometry field)",3
85935053,2021-04-26 08:03:44.182,BE: Parse Sigmet geometry relative to one or two lines,"In a SIGMET/AIRMET the geometry of a phenomenon can be described as an area relative to one line or an area between two lines.

For example:

**N OF LINE S2520 W11510  S2520 W12010**

**SW OF LINE N50 W005  N60 W020**

**SW OF LINE N50 W020  N45 E010 AND NE OF LINEN45 W020  N40 E010**

This type of geometry description should be parsed by the fmi-avi-messageconverter-tac library and converted into a polygon for inclusion in the GeoGeometry field of the fmi-avi-messageconverter SIGMET/AIRMET object (together with the original TAC clause in the TacGeometry field).",3
85934975,2021-04-26 08:03:01.951,BE: Parse Sigmet geometry relative to two lat or lon,"In a SIGMET/AIRMET the geometry of a phenomenon can be described as a sector or a quadrant: an area relative to a latitude and/or longitude.

For example:

**N OF N52** (North half of Dutch FIR)

**N OF 5230 AND E OF 00520** (North Eastern quadrant of the Dutch FIR)

This type of geometry description should be parsed by the fmi-avi-messageconverter-tac library and converted into a polygon for inclusion in the GeoGeometry field of the fmi-avi-messageconverter SIGMET/AIRMET object (together with the original TAC clause in the TacGeometry field).

This issue is for the quadrant situation, with a latitude/longitude combination",3
85934931,2021-04-26 08:01:53.500,BE: Parse Sigmet geometry relative to lat or lon,"In a SIGMET/AIRMET the geometry of a phenomenon can be described as a sector or a quadrant: an area relative to a latitude and/or longitude.

For example:

**N OF N52** (North half of Dutch FIR)

**N OF 5230 AND E OF 00520** (North Eastern quadrant of the Dutch FIR)

This type of geometry description should be parsed by the fmi-avi-messageconverter-tac library and converted into a polygon for inclusion in the GeoGeometry field of the fmi-avi-messageconverter SIGMET/AIRMET object (together with the original TAC clause in the TacGeometry field).

This issue is for the sector situation, with one latitude or longitude",3
85934221,2021-04-26 07:51:07.903,Prepare NX migration in sprint 41,"What is necessary to be ready for this migration?
- [x] Fix all linting in geoweb-core.
- [x] Theme is moved (https://gitlab.com/opengeoweb/opengeoweb/-/issues/630).
- [x] Prepare empty library for core. (https://gitlab.com/opengeoweb/opengeoweb/-/issues/657)
- [x] Rename the test files. (https://gitlab.com/opengeoweb/opengeoweb/-/issues/510)
- [x] Close the MergeRequests in geoweb-core (FMI and MetNo)
- [x] Set a date for the code-freeze: propose 11th of May

After moving of core:
- [x] Rename local-theme to theme (https://gitlab.com/opengeoweb/opengeoweb/-/issues/656)
- [x] Discusse publish Theme to NPM",1
85933947,2021-04-26 07:46:58.367,Move theme library to Nx,"- [x] Move Theme library from Geoweb to openGeoWeb.
- [ ] Increase the version number.
- [ ] Make sure to publish to NPM  (probably it is necessary to enable the pipeline for it).
- [ ] Clean up (archive) the old repo.",3
85933793,2021-04-26 07:44:30.885,Update geoservices url in KNMI-FE,"Search for `geoservices` in the Nx repo and replace the two urls/layer config for the country borders by:

```
{
        ""service"": ""https://geoservices.knmi.nl/wms?DATASET=baselayers&"",
        ""name"": ""countryborders"",
        ""format"": ""image/png"",
        ""enabled"": ""true"",
        ""layerType"": ""overLayer""
},
```",1
85797494,2021-04-23 08:17:21.634,Fix flaky TAF test,"There is one TAF test that is failing sometimes

FAIL src/lib/components/TafWrapper/TafWrapper.spec.tsx (13.778 s)

components/TafWrapper/TafWrapper  show error message when post to BE for cancelling fails  should show the error message when cancelling a taf from the list and disappear after 10 secs

expect(received).toBeFalsy()",2
88673623,2021-04-22 14:51:06.452,FE: Find way to use typing without causing circular dependency,"See here https://gitlab.com/opengeoweb/geoweb-core/-/merge_requests/635/diffs#79fa4e56152180c00641489b58942664e7048857_38_39


ANd see here for a fix, import with type https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/650#note_598795381",3
85751515,2021-04-22 14:33:10.513,FE: linting rule @typescript-eslint/explicit-module-boundary-types: WebPin,,1
85630125,2021-04-21 09:46:09.643,"FE: fix lint rule @typescript-eslint/explicit-module-boundary-types ReactMapViewParseLayer, TimeSliderUtils, WMAnimate, sagas","follow-up of https://gitlab.com/opengeoweb/geoweb-core/-/issues/281

when running npm run lint, there are a lot of warnings now that should be fixed

this ticket is for rule: @typescript-eslint/explicit-module-boundary-types

When all warnings for this rule are fixed, remove the rule from `.eslintrc` (this will make linting throw an error for it again)

```

geoweb-core/src/components/ReactMapView/ReactMapViewParseLayer.tsx
  34:3  warning  Argument 'wmjsLayer' should be typed with a non-any type  @typescript-eslint/explicit-module-boundary-types

geoweb-core/src/components/TimeSlider/TimeSliderUtils.ts
  154:41  warning  Argument 'layers' should be typed  @typescript-eslint/explicit-module-boundary-types

geoweb-core/src/geoweb-webmap/WMAnimate.ts
   62:15  warning  Argument '_map' should be typed with a non-any type  @typescript-eslint/explicit-module-boundary-types
  102:20  warning  Argument 'element' should be typed                   @typescript-eslint/explicit-module-boundary-types

geoweb-core/src/store/mapStore/map/sagas.ts
  58:46  warning  Argument 'draw' should be typed  @typescript-eslint/explicit-module-boundary-types  
```",2
85041123,2021-04-12 12:22:20.855,Better tools for troubleshooting: a lambda which tests the different MetOffice end-points,"Better tools for troubleshooting: create a manual setp which tests the different MetOffice end-points (from the correct VPC) to quickly identify problems, without going through an EC2 instance with manual commands.

This should be triggered manually.",5
85040934,2021-04-12 12:19:06.534,Better monitoring: spaceweather incoming datastream threshold alert,"In Grafana we monitor the incoming streams of:
KP-> should come in every 10 min
XRAY-> should come in every 1 min
RTSW Wind-> should come in every 1 min
RTSW Mag-> should come in every 1 min

We can make these checks:
- KP-> check that in the period now-30min the lambda is called at least 1 time
- XRAY,RTSW Wind,RTSW Mag-> check that in the period now-5min the lambda is called at least 1 time",5
85020447,2021-04-12 07:36:39.229,Convert GeoWeb Airmet Model to FMI Airmet Model,"Convert the contents in the GeoWeb Airmet Model to the FMI Airmet Model (mapping) Include unit test.

\*\* Later we can also do the mapping from the FMI Model to the GeoWeb Model",5
85019838,2021-04-12 07:30:09.786,Convert lexeme to FMI object for cancel sigmet,"A TAC for Cancel SIGMET shall be parsed.
Include the ""moving volcanic ash to neighbor FIR"".",3
85019550,2021-04-12 07:27:48.275,Convert lexeme to FMI object for SIGMET with forecast element,Now add a forecast element,2
85019319,2021-04-12 07:24:59.274,Convert lexeme to FMI object for SIGMET without forecast element,Be able to convert smallest possible sigmet from the lexeme to the FMI object,3
85018350,2021-04-12 07:08:39.016,Meeting on splitting cloudformation,"- deployment of BE modules should be independent, how can we achieve this?
- invite Mark/Roy",3
81818967,2021-03-29 07:20:54.076,Convert GeoWeb SIgmet Model to FMI Sigmet Model,"Convert the contents in the GeoWeb Sigmet Model to the FMI Sigmet Model (mapping)
Include unit test.

** Later we can also do the mapping from the FMI Model to the GeoWeb Model",3
80996851,2021-03-16 09:11:12.444,Rename all geoweb-core test files from .test. to .spec.,"Since NX using .spec., it's better to rename all test files in geoweb-core from .test. to .spec.

This probably also needs a change in the jest/linting/typechecking configurations",2
80735459,2021-03-11 15:54:34.327,FE: geoweb-core check/add tests geoweb-webmap/WMLegend.ts,"src/geoweb-webmap/WMLegend.ts
- check what can be removed
- add tests",3
79864205,2021-02-26 10:39:57.774,Update React to v17 opengeoweb,"note: check for breaking changes https://reactjs.org/blog/2020/10/20/react-v17.html

It might be necessary to update material-ui to v5 at the same time? Because v4 doesn't officially support react 17.

make sure to update `react-test-renderer` to match the same version as react",5
78409511,2021-02-04 08:45:15.608,BE: Build a timed lambda to provide UUID's in order to keep UUID consistent for taflist.,"When refreshing the /taflist, the uuid gets regenerated everytime. For front-end, we need to keep track of 1 entity, so would be nice this list does not change.

Proposed solution:
- Keep placeholders with UUID's in the database, and use these in the taflist
- Make sure that only one lambda invocation does this, develop a timed lambda which arranges the persistent UUID's
- For each new timeslot and location a new UUID will be made
- Let this lambda run every minute to check if all UUID's are given.

We need a timed lambda to ensure that only one instance is doing this.

Workflow for making a new TAF:
1) The backend provides a taflist, with persistent UUID's
2) The frontend picks one item of the taflist to edit.
3) User saves a TAF as draft with the given UUID
4) User published TAF with the given UUID
5) User cancels TAF, using the UUID. (In this case the lambda is allowed to make a new UUID?? https://gitlab.com/opengeoweb/opengeoweb/-/issues/993)
6) Backend makes a new entry in the TAF list with a persistent UUID for a possible new TAF
7) User can now make a new TAF, with the new UUID",5
78355609,2021-02-03 12:16:56.741,FE: refreshing list in background closes modal,"When the taf list refreshes, the modal should not be closed.",2
77210322,2021-01-14 09:10:27.026,Create a type for formData,in TafFormRow/utils `convertTafValuesToObject` the prop formData needs to be typed,3
94538980,2021-01-04 11:47:48.107,Fix typing for parseFormValues,"TafForm - utils:

![image](/uploads/e617db0862729d9ecc0aff549e803310/image.png)

**ISSUES:** Because the type description of the validation field is in two different properties in the TAF object (cavOK and visibility) - the parsing for the form deviates from the way it is done for wind. I also had to adjust `parseFormValues` to be able to remove the visibility property from the object in case CAVOK has been entered. Basically because of the signature of `reduceRowValues` -> `export function reduceRowValues<T>(row: T): T` you can't remove properties from the row you passed in as the type has to be the same coming in as going out. At the same time, I could not have `parseFormValues` accept a TafFormRow type with strings only and return BaseForecast or ChangeGroup type as ""*the types don't sufficiently overlap*"". Keep in mind that if we have cavOK set to true, there should be NO visibility property in the baseforecast/changegroup that is sent to the BE and if we do have a numeric visibility - there should be NO cavOK property sent to the BE.",5
81658666,2020-11-25 11:02:38.062,Drawing multiple objects should not be possible,"It should only be possible to draw one start or end position.


For description see: [976](https://gitlab.com/opengeoweb/geoweb-assets/-/issues/976)",5
92022761,2021-08-16 08:34:58.219,FE: Put active layer in screenmanager preset,Specify active layer in preset of screenmanager.,3
92021106,2021-08-16 08:07:46.548,FE: extract screenmanager to own lib,,8
92021080,2021-08-16 08:07:27.405,FE: screenmanager remove provider from connected component,"Remove the wrappers (store + theme) of ConfigurableMapWithSliderConnect, and put it back in to the rendering of this component. Add the wrappers back in test.

![Screenshot_2021-08-16_at_10.13.17](/uploads/41e0567d891ecb516b187cf99aca28a2/Screenshot_2021-08-16_at_10.13.17.png)",2
92020934,2021-08-16 08:05:19.226,FE: fix warning of core storybook of screenmanager,"When running storybook core, check the console of the browser

```
./libs/core/src/lib/components/ScreenManager/utils.ts 21:0-190""export 'ConfigurableConnectedMapProps' was not found in './storyUtils/ConfigurableMapWithSliderConnect'
```",2
92020504,2021-08-16 07:59:09.989,FE: fix elevation/zIndex of active map draggable,"When clicking a draggable element, it should get the 'active' elevation/zIndex so it will be on top of the other screens. This is a duplicate of https://gitlab.com/opengeoweb/opengeoweb/-/issues/1044, which has been referenced in the code. 

1. in ToolContainerDraggable there is some inline styling, remove this and make use a makeStyles
2. use something like `const classes = useStyles({startPosition, zIndex})` to pass the needed params
3. make sure the elevation is set correctly, higher zIndex is higher elevation but elevation should only be a +1
4. ToolContainerDraggable should have a new prop: zIndex. 
5. Make a new component for UI, and put all the buttons + draggable in. This component will handle the active zIndex.

For inspiration, check https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/apps/knmi-geoweb/src/app/pages/Home.tsx#L33.",3
92020483,2021-08-16 07:58:40.710,FE:remove old sortable of layermanager,"The layermanager currently uses a sortable lib which is giving errors on React.Strictmode. In theme/Table there is an example with the new sortable lib, replace the old with the new, and remove the old.

Make sure it is working correctly, check this comment for current bug: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/812#note_652700780",5
92020250,2021-08-16 07:55:27.671,BE: contact BES team,(PRIO 4): Bes dashboard - continue support if necessary: Contact BES(t) team,3
92020025,2021-08-16 07:53:39.285,Ask Mikko,https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1263,3
92019963,2021-08-16 07:51:46.331,FE: PROB is only allowed with TEMPO,PROB30/PROB40 with FM and BECMG is not allowed. Can we add a validation rule to state this (quote from validation document from Marcel `BECMG can not be combined with PROB40 or PROB30)`,3
92019753,2021-08-16 07:47:51.818,"FE: FE: Timeperiod BECMG, TEMPO, FM group is not valided in GeoWeb now",,3
92019389,2021-08-16 07:41:44.155,FE: Taf reorder changegroups by drag and drop,"1. react hook forms has some order functionality  (use swap, see fieldArray documentation) https://react-hook-form.com/api/usefieldarray. Use swap for switching the order (index)
2. use `@dnd-kit` for sorting, see the Table example in Theme for reference

https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1458",5
92018710,2021-08-16 07:29:00.290,FE: set correct baselayers for preset,"In the new knmi application preset made for this user story: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1462 we still need to set the correct baselayers.

Now that this is possible, set these",3
92018630,2021-08-16 07:27:52.041,FE: Allow to set baselayers for screenmanager,ADding baselayers should work for each tile in a multi map view,5
92018448,2021-08-16 07:23:53.735,FE:  Have a Legend for each map within the ScreenManager,"* Make a redux action where you can trigger to show the legend with a given mapid. The legend component itself can then be placed in the main application. This makes everything consistent and the legend will float over all the maps.
* Add the (+) open legend button to each tile of the multimapview, maybe using a redux action as mentioned above.

https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1461",5
92018249,2021-08-16 07:21:09.722,FE: Have a LayerManager for each map within the ScreenManager,"* Make a redux action where you can trigger to show the layermanager with a given mapid. The layermanager component itself can then be placed in the main application. This makes everything consistent and the layermanager will float over all the maps.
* Add the (+) open layermanager button to each tile of the multimapview, maybe using a redux action as mentioned above.

https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1461",3
92018070,2021-08-16 07:17:16.949,Meeting: discuss timeseries,,3
92017770,2021-08-16 07:12:54.643,BE: Fix failing smoke test,Because of new title field and population it will fail,5
92017196,2021-08-16 07:07:00.489,BE: Smoke test tst,"Should be mandatory, should be not allowed to fail. ACC should be untouched. Add line in dod",2
91881853,2021-08-12 14:58:57.023,FE: finish LayerManager theme styling part 2,"There are some details missing, see pics


- background color

![Screenshot_2021-08-12_at_16.57.11](/uploads/992a9d493462ca47a0e862c82b762ac1/Screenshot_2021-08-12_at_16.57.11.png)

- background color, size, color

![Screenshot_2021-08-12_at_16.57.22](/uploads/bfc67d048cafdf8214977e629c3184f7/Screenshot_2021-08-12_at_16.57.22.png)

- Almost non-noticeable shadow that appears when hovering draghandle/enablelayer/addlayers/menu icons is added, for some reason enablelayer has a blue shadow and the others have grey ones? And same as previous comment, the whole Layer Manager draghandle doesn't have this shadow at all.

![Screenshot_2021-08-20_at_14.27.05](/uploads/21c0ab7a6aee2c5715cb3e618c7b7e7c/Screenshot_2021-08-20_at_14.27.05.png)",5
91810102,2021-08-11 12:28:22.843,FE: Styling/Theming on Layermanager part 3,"Remove inline style, and add it via theming",3
91795569,2021-08-11 08:19:22.286,FE:Use Moveable in LayerManager part 2,"Use The ToolContainer in LayerManager, and remove the Moveable",3
91793402,2021-08-11 07:42:21.304,FE: SW replace hardcoded dates with todays date,,3
91728396,2021-08-10 07:39:37.426,BE: Treat cancellations as amendments for TAF,"Information from Marcel:
 
_I tried to find some information on how to re-cancel a TAF and what to do with the starttime of the validity of the TAF (either wallclock-hours or original).
Could not find any information on this use case. Cancelling is often used when there are no observations (e.g. during the nighttime-closure of the field) being made to review the active TAF, This is not the case in the Netherlands (at least not the civilian airports).
When these airports will open in the morning and observations are being made again,  the forecaster will start with a new TAF.
O yes, we also have a minimum duration of the TAF (should be more than 6 hours).  So de-cancelling is perhaps a non-existing use case.
That said, since a cancelled TAF must be coded as an amendment to the previous TAF, a cancelled TAF is no more than an AMD. And for AMD we do have rules, allowing to amend it again (and again, and again). So, I would allow for amending a cancelled TAF, also to avoid deadlocks if a user cancels a TAF by accident.
Than, the question on what start-time of the the TAF validity needs to have; for this, we can rely on the AMD rules, being that the end-time will stay the same as the original, but the starting time is the intended starttime of the new forecast._",5
91665767,2021-08-09 09:02:06.427,BE: add /populate call to populate templates,"Add a call (/populate) to the BE to fill the template for the FE based on the sent notification info.

- type from FE passed is notification as used /store 
- return type is an object with ""title"" and ""message"", both strings
- Templates can be found here (https://surfdrive.surf.nl/files/index.php/s/hLZSzmJYGsQKYkx?path=%2F) if no template available or empty return text ""No template found, please type your own message"". There are 3 types of templates: 1. message texts, 2. titles and 3. NOAA scale impact texts
- Store template texts in S3 (or DynamoDB) to allow the lambda to read the templates from there. On start up it will read the entire set and keep that in memory. (This would mean re-deployment to renew the set).
- In the template, replace $xxxxxx strings with the values passed from the FE. The $impact_text should be replaced with the NOAA scale impact text template (in which again you need to substitute $xxxxxx values with what is passed from FE)
- In CI/CD we will have to push the templates to S3 (they would be part of the source code) to a new bucket (enable versioning if needed)",8
91664355,2021-08-09 08:47:20.276,FE: Add repopulate button to SW notification form,"Add a button ""repopulate"" to the SW notification form.

Add button to retrieve the original template text called ""repopulate"". This button triggers a call to the BE (/populate) sending the current form information. The received title and template text is then filled in their respecting fields (title and message). When first opening a new form, we need to trigger a call to the BE to auto-populate the message and title field

![image](/uploads/d5551f9d414ade23442a1bcb47c76b8e/image.png)",5
91663996,2021-08-09 08:41:58.215,FE: Add title field to SW notification form,"Add new field called ""title"" to SW notification form. This is NOT autofilled from any data coming in from METOffice and in `constructBaseNotification` it can be set to empty (''). 

Validation rules: 
- Allow empty string",3
91663793,2021-08-09 08:38:31.263,BE: modify SW API definition to include title in notification,"Add optional ""title"" field (type string)",2
91663710,2021-08-09 08:36:15.613,FE: add SW title to notification type,"We need to add a new field ""title"" (string) to the notification type.

Make it optional, if it is not in the structure, leave it empty.",2
91660324,2021-08-09 07:41:49.865,Implement preset in ScreenManager,"<!---
Always remember:
* Titel: summary of issue, line of text upto apx. 10 words
* One bug/wish per issue
* Check on duplicates
* Always use a friendly pen
--->

For details on preset see userstory

### Short description

There are certain presets that are extremely useful to forecasters in combination with the ScreenManager, to show the relevant information. 

### Why 

These presets will make it easier for forecasters to work with GeoWeb and it will save them time. 

### Test criteria

* The requested presets should be available in the ScreenManager",3
91567219,2021-08-06 13:32:51.565,FE: add missing tests of DraggableResizable in shared lib,"Not all tests are implemented, especially with interactions and dragging. ToolContainerDraggable also uses this logic",5
91556413,2021-08-06 09:59:11.351,BE: Modify taf2tac so it's allowed to fail,"It's not possible to perform a validation from the TAF list, so we cannot predict whether we can or cannot make a TAC call. Instead, let's do it in the BE so that taf2tac only returns warnings instead of errors when the converstion fails.
The publishing code is inside the tafapi lambda, so it won't be affected by this change",2
91547311,2021-08-06 07:47:10.792,FE: Fix styling issue when there are two notification fields next to each other,"This is what it looks like right now:
![image](/uploads/d4e7ad77567c60c0b0878bd2d4dcd8b2/image.png)",3
91546710,2021-08-06 07:33:11.485,BE: prevent notifications on eventingest being added if they're already in the incoming notifications list,"Currently, when retrying the event ingest, the notification simply gets added to the end of the incoming list in the events table. It doesn't check whether the notification is already there which can lead to duplicates as we see in acceptance now.

Before adding a new notification to the list, we need to check if the notification id is already in and if so, don't do anything",5
91546530,2021-08-06 07:29:36.162,BE: logging fix + grafana fix,"- We need to ensure all json.dumps have `cls=DecimalEncoder` to ensure they don't fail on decimals
- in the notifications panel in grafana we see null a lot. To stop this, we need to set lifecycle_action to false in the grafana dashboard code for that section
![image](/uploads/18d78ede9375087e7d85ecbd05c66423/image.png)",3
91493351,2021-08-05 11:04:35.624,FE: replace ALERT with AlertBanner in last places,There are 3 places left where we use the Alert instead of the reusable AlertBanner from the shared lib. Also replace these to ensure it all looks the same and changes are applied everywhere.,2
91422236,2021-08-04 09:02:32.873,FE: Retrieve TAF TAC only when we have enough data,"New TAFs are generating calls to the TAC BE that will inevitably return errors. In particular, the TAC BE is called as soon as we open a blank TAF.

In SIGMET/AIRMET, we have a function called `shouldRetrieveTAC`. 

In TAF, we have a function called `useTACGenerator`, that only checks whether the status is NEW. For some reason, this is not working properly, but anyway, it wouldn't be enough.",5
91249356,2021-08-02 07:57:44.329,BE: Meeting with CPT regarding new Dashboard deployment,,3
91248489,2021-08-02 07:46:47.202,"Define better tafActions, tafStatus, tafCanbe types","In the taf lib, the three types tafActions, tafStatus, tafCanbe are a bit mixed up. It is necessary to define and use properly those types or find an alternative solution.

- First of all, come up with a definition of types and discuss it with the rest",5
91248310,2021-08-02 07:44:33.760,FE: use new AlertBanner in TAF instead of custom Alerts,"- a shared AlertBanner component was created here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/738
- it should be used instead of defining a custom <Alert /> inside the TafFormDialog and the TafList",3
91247938,2021-08-02 07:40:20.494,BE: enable test_post_publish_cancel_amend_taf again,"This test was faulty because of the way we are using timestamps and the time it took for the test itself to run as part of the pipeline. 

Possible fix: 
Something like:
```
@mock_dynamodb2
@mock_s3
#@freeze_time(""2020-12-17T10:00:00Z"")
def test_post_publish_cancel_amend_taf(requests_mock):
    requests_mock.post('http://tac-converter/gettaftac', text=""ernst made a test for taf"")
    init_mockdb()
    init_s3()
    from lambda_function import set_config, get_latest, post_taf
    .
    .
```
and
```
@mock_s3
def init_s3():
    s3_resource=boto3.resource('s3', region_name=os.environ['AWS_REGION'])
    bucket = s3_resource.create_bucket(Bucket=os.environ['S3_EXPORT_BUCKET_NAME'],
               CreateBucketConfiguration={'LocationConstraint': os.environ['AWS_REGION']})
```",3
91247508,2021-08-02 07:34:12.683,FE: Use of double click on map to exit drawing not working (SIGMET/AIRMET),"### Summary

When drawing a shape (polygon, square), the message `Double-click on the map or press ESC to exit draw mode` is shown. ESC works fine, however Double click not.

### Steps to reproduce

Draw a square on the map and try to double click on the Map to exit the drawing mode. 


### What is the current *bug* behavior?

Different for different types of shapes. Not working at all for squares, for polygones it will only be possible when clicking on one of the points in the polygon.

### Possible fixes

Limit the ways of exiting drawing mode to using `ESC`",1
91247293,2021-08-02 07:31:05.625,Meeting to discuss enabling templates in the event description when following up MET Office notifications,"Scheduled for Monday 9

Original ticket: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1252",3
91246620,2021-08-02 07:21:54.683,FE: TAF wrong text color in Safari,"The read-only fields in the TAF form have the wrong text color in Safari

### Steps to reproduce

* Use Safari
* Open the TAF module
* Open one of the TAFs

### What is the current *bug* behavior?

Text color is blue, see screenshot

### What is the expected *correct* behavior?

Text color should be black, like in Chrome and Firefox

![image](/uploads/baa29dc64eedec922229b6d1c736a53f/image.png)

Original ticket: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1423",2
91246354,2021-08-02 07:17:57.142,FE: Sigmet - Airmet form header buttons not aligned in Safari,"The buttons discard - save - publish are not aligned correctly in Safari

### Steps to reproduce

* Use Safari
* Open the Sigmet or Airmet module
* Click button to Create a new Sigmet or Airmet
* look at the buttons at the top of the form

### What is the current *bug* behavior?

buttons are using 2 rows

### What is the expected *correct* behavior?

all 3 buttons should be next to each other, like in Chrome or Firefox

![image](/uploads/a7e925c10f06b866fea785113552157b/image.png)",2
91246074,2021-08-02 07:12:56.301,Timeseries: meeting with Marcel before we present results to others (Tue 10/08),,3
91245797,2021-08-02 07:09:12.092,BE/FE: Go to acceptance with a new version,"- New FE version
- BE version using latest FE",2
91153422,2021-07-30 13:12:32.206,FE: [BUG] Legend container does not show full GetLegendGraphic anymore,"In geoweb only a part of the GetLegendGraphic image is displayed (the image is clipped at the bottom):

![image](/uploads/c0a202f12d1c3a616cedc8983046e2f3/image.png)

The image from the server looks like this (it includes the units on the bottom):

![image](/uploads/5c1ab7759d2f4227d8ac436f048f1218/image.png)",3
91138846,2021-07-30 08:36:01.528,"FE: [BUG] When going to the screenmanager and then back to the main application, the timeslider does not work anymore.","When going to the screenmanager and then back to the main application, the timeslider does not work anymore. This is because there is still a synchronization group state from the screenmanager; and the main map and main timeslider are not linked by default. We should use initsyncgroups to either clear the syncgroup state, or link the components as intended. Or use less different map components. (The map component in the screenmanager is linked by default)",1
91077352,2021-07-29 09:12:49.576,BE: Persist NEW TAF after TAF cancellation,,3
91016472,2021-07-28 11:30:58.159,FE: fix warning message SIGMET/AIRMET when drawing point,"warning message is wrong:

![image](/uploads/4b20773af3083a7ce2bff34d49922eee/image.png)",3
91009962,2021-07-28 09:59:27.755,Add route in KNMI GeoWeb application for screenmanager,"Goal is to access the screenmanager from the KNMI GeoWeb application with a route, for example /screenmanager. It should have the same header as the reference application.

- Use the header from the shared components
- Use the same Layout
- Add a menu item screenmanager in the hamburger menu of the main application
- Add a link to get back to the main application
- Add the preset selection in the header
- Add a route called screenmanager in the KNMI GeoWeb application

Like http://localhost:4200/screenmanager",5
90998772,2021-07-28 07:26:13.618,FE: change brand color and add surface browser page,"- change bar brand color of dark theme (404040)
- add colour for the surface browser page (light theme: #CFCFCF and dark theme: #181818
Both colour pages (2 row) have been updated https://zpl.io/Vxx41kx and https://zpl.io/a8QBorX. This will be the page background (when loading application)
- add tiny toolbar toolbox without title https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60f9318c3e123f13c72bbe96",3
90907370,2021-07-27 09:50:18.414,FE: Fix theme in Legend part 2,implement the created ToolContainer created in https://gitlab.com/opengeoweb/opengeoweb/-/issues/997,3
90721837,2021-07-23 10:02:30.390,FE: implement elevation levels as design,"Instead of using box-shadows, we can use the elevation levels by MUI and Didier.

light https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/609bb6a5287bd1abe0de39a7

dark https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6093e694124ecf3886de76d4


- Implement the defined elevation, name them (elevation-01 etc), so we can use them `<Paper elevation={1} />` or `background: theme.shadows[1]`. MUI expects a list of 25, but we can fill the rest with 'none'. 
- Create story with elevation examples
- Use in AppHeader (elevation-01)


![Screenshot_2021-07-23_at_12.18.58](/uploads/69569f9f822b6735e33f1e1641424d26/Screenshot_2021-07-23_at_12.18.58.png)

https://material-ui.com/customization/default-theme/",3
90664295,2021-07-22 07:49:40.825,FE: Use Moveable in MultidimensionSelect (+ theming would be nice),,3
90664198,2021-07-22 07:48:22.235,FE: Use Moveable in LayerMananger part 1,"In this ticket, the Table component will be created in theme, which should be used later in LayerManager. For now, we use this demo purely as reference for colors when switching theme, but in future we should use the Table component and recreate the Layermanager with that",3
90663869,2021-07-22 07:41:53.927,FE: Fix theme in Legend part 1,"(so we have a good base with the header and footer + typography). 
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60f9318c3e123f13c72bbe96
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60f9319044360a123ca42552 (dark)

Elevations:
- Dialog: 6
- Header,Footer: 1",3
90631841,2021-07-21 15:27:50.048,FE: Theming remove knmi-geoweb footer,"Also the applayout props can be removed now, and rendered as children",3
90492561,2021-07-19 12:12:52.278,BE: TAF: Allow saving DRAF TAF with empty fields,,2
90492098,2021-07-19 12:09:30.757,FE: TAF: All required fields should be optional when saving as DRAFT,All required fields should be optional when saving as DRAFT.,3
90482707,2021-07-19 09:17:25.591,Fix smoke test for Spaceweather,"Currently the smoketest tries to make a spaceweather notification. 

The form fields have changed and Cypress cannot find the right field to submit a notification. The new fields need to be filled out as well.",5
90482392,2021-07-19 09:13:49.799,Meeting: Discuss left over TAF tasks (orphan tasks),"Discuss: 
Dev tasks: https://gitlab.com/groups/opengeoweb/-/issues?scope=all&state=opened&label_name[]=Backlog%3A%3AAviationTAF&label_name[]=DEV%20TASK

User stories in dev refinement: https://gitlab.com/opengeoweb/geoweb-assets/-/issues?scope=all&state=opened&label_name[]=KNMI&label_name[]=Workflow%3A%3A%20DEV-Refinement",3
90482256,2021-07-19 09:12:41.504,Meeting with BES EWC team on how to proceed,,3
90481579,2021-07-19 09:05:23.792,Meeting: Share visualization services stack: Repo and infra,,3
90480250,2021-07-19 08:51:30.057,FE: Use Moveable layermanager,"Use the same library for making the layermanager and legend moveable. The legend already uses the right library.
- Is it better to wait for first do the styling of the Legend with theme?

![Screenshot_2021-07-21_at_16.16.07](/uploads/5e1a14da3a24d2fd6a4551fd86504ea0/Screenshot_2021-07-21_at_16.16.07.png)

We need:
- Fix theme in Legend first (so we have a good base with the header and footer + typography). Which design to use, the layerManager?
- Use Moveable in MultidimensionSelect (+ theming would be nice)
- Use Moveable in LayerMananger (+ theming would be nice), there's a demo for this already

Kept this ticket as reference, can be closed after related tickets have been done",3
90480193,2021-07-19 08:51:02.836,FE: Theming p3:  Fix header,"Use the same header in all apps (reference and KNMI).

- Colour of the header should follow the theme. (Done in previous ticket)
- It should become a component in the shared component folder.

Note: this relates only to the newly designed small header.

- Don't forget to fix the drop-shadow",3
90480153,2021-07-19 08:50:39.311,FE: Theming p4: use Applayout in ref app,Use the same app layout in the reference application as well. First check if Header is correct,2
90479878,2021-07-19 08:46:13.294,Screenmanager: discuss on the presets,"Which presets and how to implement

- demo landing pag (+ presets) https://www.sketch.com/s/7cdb3639-060e-4e6a-8aea-a1b36b45bee0/a/bgrAb7z/play",3
90478271,2021-07-19 08:21:57.168,FE: Implement multimap component,"Currently it is implemented here: https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/libs/core/src/lib/components/POC_ScreenManager/ConfigurableMultiMapWithSliderConnect.tsx . And currently it can only display 2x2 tiles with one slider.

- Maybe pass a multidim array (Rows/Cols) to display in the multimap component. 
- Demonstrate diffenent layouts in storybook
- Maps should autosync time and area
- This code needs to be independent of the screenmanager
- Have three presets: 4x4 2x2 and 3x2",5
90476970,2021-07-19 08:03:25.918,SpaceWeather: Make a plan on how to keep the KNMI notifications during updates of the backend database,"Have a meeting and make a plan:
- After re-ingesting Space Weather UKMO data, KNMI notifications are lost. 
- Should we save these separately for re-ingesting (coupled by UKMO notification or uncoupled ""KNMI-only"")?
- There is still a notifications database lingering around.

UKMO Notification comes in and is stored in the Incoming notification table. At KNMI this Notification is stored in the Event table and presented as an Event in the application. KNMI can add information and forward the KNMI Notification (stored in Event table) to DCC. KNMI can also make events on its own.

Note: 
- The incoming notification table is never affected by changes from KNMI, but the Event table is affected.
- The Event table contains the notification and extracted information from the notification

**Problem**: The event table should become persistent. The format of the events changes during development. How to we get the old events in the newer format? Currently we just throw away the database to prevent errors happening in the backend or frontend due to missing fields.

**Solution A**: Migrate the Event table database by using a backup/restore operation. Make a backup of the Event table and clear it. Run a restore script to add the existing events in the correct format from the backup to the table. Add a manual pipeline in the CI/CD to trigger the execution of the script. The python script is changed according to the changes to the data model. 
- Problem is that the Python code does not have strict typing of the objects, difficult to check if it will write the right format to the table. The other problem is that the Python code does not make use of a shared spaceweather library, and duplicated code might become an issue. 
- Problem is that deployment times can grow out control

**Solution B**: Make our code backwards compatible.

Suggestion: Research ticket to learn about AWS migration. Check how dynamodb tables can be backed up.

Example: For the category we needed to extract extra information from the notification. It is possible to find the right notification by the UUID.",3
90476453,2021-07-19 07:54:02.544,Update Harmonie colours for layers also used in observations,"Use the same colours as used in https://gitlab.com/KNMI/pub/rdwd/geoservices/-/blob/master/adaguc-config/includes/observation-styles.include.xml

Do this for:
- Temperature
- Pressure
- Precipitation

Make the WOW palette the default and keep the old as second one.

Change these files:
- https://gitlab.com/KNMI/pub/rdwd/geoservices/-/blob/master/adaguc-config/includes/StandardStyles_HARM_N25.xml
- https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/blob/master/adaguc-config/includes/StandardStyles_HARM_N25.xml

Use the ones on the left:
![image](/uploads/7281ec54655e2a2933bc77a61a888751/image.png)",5
90474998,2021-07-19 07:33:06.864,Add Caribbean (ECMWF) preset,"Add a preset for the Caribbean
- Use the KNMI specific ECMWF service
- See the user story for the needed list of layers.",2
90474643,2021-07-19 07:27:41.991,Baselayers: harmonize selection options between reference and KNMI app,- Add openstreetmap in KNMI geoweb application,1
90474070,2021-07-19 07:19:16.061,Presets: Default map cutout missing,"When you click on the preset it is expected that the map is zoomed to the data belonging to that preset. If you use radar, it should zoom to the Netherlands. This should be fixed in the KNMI version.

Some of the presets in the KNMI GeoWeb version do not have a default map cutout:

* Radar (\*)
* Harmonie N25 wind and pressure (\*)
* Harmonie N25 temperature (\*)
* Satellite
* Observations (\*)

When using these presets, the map view the user is displaying will not be changed. This may lead to displaying data on a part of the map that is not visible to the user.

(\*) initial zoom level and center position of map can be the same as (e.g.) `current weather`",2
90279051,2021-07-14 15:12:44.700,FE:Theming p1:  Make reusable app layout,"The layout is now a combination of div and css. We use react and MUI, we can use those for that. 
1. Create a component called AppLayout, put it in shared, and give it prop slots like 'header, content, footer'
2. The styling should only do the layout + zindex, no colors
3. Use it in knmi-geoweb, and the reference application

![Screenshot_2021-07-14_at_16.57.14](/uploads/a0a35a4a00bc8477c7cb5d4d2e0023a6/Screenshot_2021-07-14_at_16.57.14.png)",5
90271623,2021-07-14 13:08:24.413,BE: Only show latest notifications on the /newNotifications call,"At the moment, we are taking into consideration every notification that ever existed. We only need to check the recent ones (same thing we do when we list events). 

In particular, we show events for the last 60 days",2
90238955,2021-07-14 07:38:09.250,BE: fix ingestion,For certain notifications that have been ingested in the past have issues with not found nodes.,3
90197416,2021-07-13 13:10:03.190,FE: Theming p5: UserMenu styling,"There are a couple of points need to be fixed:
- colors are wrong
- padding
- position dropdown
- lines/background color are wrong
- opacity should be inactive like design, and on hover as design
- dark mode

This ticket is a good try out for structure of theming. If this works correctly, then we pick up the other modules as well

| design | now |
| ------ | ------ |
| ![Screenshot_2021-07-13_at_15.02.27](/uploads/ee61c69e15ed95d54dd1f2e102e278da/Screenshot_2021-07-13_at_15.02.27.png) | ![Screenshot_2021-07-13_at_15.02.32](/uploads/a58f0a9a29c159cc892cdf6e2237547d/Screenshot_2021-07-13_at_15.02.32.png) |",3
90181059,2021-07-13 08:39:32.620,Check how SW summaries are handled,"The MetOffice notifies us of summaries in 2 ways:
1. by re-sending the original notification, with a field `""summarized"": true`
2. by sending a ..._ALERT_SUMMARY message, usually with some extra info about the event.

In the Sept. 2017 dataset and from our experience the last months one of those 2 messages may not arrive at KNMI or arrive a few days late.

This issue is about checking if this is handled correctly.
We might want to choose to ignore the first type of messages, but only if we're sure both types always arrive.",5
90109142,2021-07-12 09:57:59.316,Implement redux api (actions and reducers) for screenmanager,"Implement a similar api like syncgroups and maps, but now for screenmanager.

Suggested is to have a similar structure in the redux state using allId's and byId to identify the screens.

Suggested actions:
- screenManagerAddView
- screenManagerRemoveView
- screenManagerUpdateViewCoordinates

The current POC for the screenmanager can then be updated to use the redux state instead of the local state.",5
90101034,2021-07-12 08:06:27.014,FE: statusTag is showing wrong text for a DRAFT summary or DRAFT cancellation,"- issue a new proton flux alert
- open it and click summarise
- save as draft
- open it again and check the statusTag

expected: purple statusTag with text Summary

actual: purple statusTag with text Alert


NOTE: same issue for a DRAFT cancellation


![image](/uploads/828b8b63f72e8195410c598424dd89c2/image.png)

![image](/uploads/8a5a3302a78cdecd0f04fa9b6b36fb9e/image.png)",3
90012054,2021-07-09 08:38:41.028,BE: Geomagnetic Storm Watch should be extended/updated and cancelled,Some test notifications can be found here: https://surfdrive.surf.nl/files/index.php/s/pliDYzUpYZSHy2w.,3
90008491,2021-07-09 07:43:50.243,FE: SW publish of Geomagnetic storm draft problem,"* when retrieving a draft Geomagnetic storm watch the JSON received from the BE is correct however, when then publishing it, somehow the changestateto has changed to 'ended' instead of 'issued' which immediately cancels the issued watch. **This seems to only happen for the geomagnetic storm watch**. Other warnings seem to behave ok

Incoming draft:

```
{
  ""eventid"": ""927ddf62-e07e-11eb-b77b-b186cd097fd0"",
  ""originator"": ""KNMI"",
  ""notacknowledged"": false,
  ""category"": ""GEOMAGNETIC"",
  ""categorydetail"": ""GEOMAGNETIC_STORM"",
  ""lifecycles"": {
    ""internalprovider"": {
      ""owner"": ""KNMI"",
      ""eventid"": ""927ddf62-e07e-11eb-b77b-b186cd097fd0"",
      ""eventend"": ""2021-07-09T09:26:00Z"",
      ""canbe"": [
        ""discard"",
        ""publish""
      ],
      ""eventlevel"": null,
      ""draft"": true,
      ""firstissuetime"": null,
      ""lastissuetime"": null,
      ""state"": ""drafted"",
      ""label"": ""WARNING"",
      ""eventstart"": ""2021-07-09T06:26:00Z"",
      ""notifications"": [
        {
          ""neweventend"": ""2021-07-09T09:26:00Z"",
          ""changestateto"": ""issued"",
          ""neweventstart"": ""2021-07-09T06:26:00Z"",
          ""categorydetail"": ""GEOMAGNETIC_STORM"",
          ""draft"": true,
          ""label"": ""WARNING"",
          ""message"": ""dfgdfgdfg"",
          ""initialgscale"": ""600"",
          ""issuetime"": ""2021-07-09T06:26:19Z"",
          ""notificationid"": ""927ddf62-e07e-11eb-b77b-b186cd097fd0"",
          ""category"": ""GEOMAGNETIC""
        }
      ]
    },
    ""externalprovider"": null
  },
  ""start_dt"": ""2021-07-09T06:26:19Z""
}
```

Then when publishing, this is published:

```
{
  ""category"": ""GEOMAGNETIC"",
  ""categorydetail"": ""GEOMAGNETIC_STORM"",
  ""label"": ""WARNING"",
  ""initialgscale"": ""600"",
  ""neweventstart"": ""2021-07-09T06:26:00Z"",
  ""neweventend"": ""2021-07-09T09:26:00Z"",
  ""message"": ""dfgdfgdfg"",
  ""changestateto"": ""ended"",
  ""draft"": false,
  ""notificationid"": ""927ddf62-e07e-11eb-b77b-b186cd097fd0"",
  ""eventid"": ""927ddf62-e07e-11eb-b77b-b186cd097fd0"",
  ""issuetime"": ""2021-07-09T06:26:19Z""
}
```

you can see the changestateto has changed from `""changestateto"": ""issued"",` to `""changestateto"": ""ended"",`

*",5
90008390,2021-07-09 07:42:14.336,FE: SW title of dialog is lagging behind,"* Probably not so important so can be left for a separate ticket. The title tends to lag behind sometimes. So let's say you've got an KNMI issued alert which you save as a draft. Then when reopening the dialog, the title says draft correctly. Then issue the draft, and re-open the same event. You see that now the title says draft! Go back and reopen, still draft. Go back, open a different event, close and re-open the first one, you see that only now it's updated to be correct!",3
90008288,2021-07-09 07:39:43.643,FE: SW bug Peak Flux Time isn't formatted when displayed in read-mode on screen:,"* Peak Flux Time isn't formatted when displayed in read-mode on screen:

![image](https://gitlab.com/opengeoweb/opengeoweb/uploads/e7f235f88ce26c0c0a37e25da088b818/image.png)",1
90003893,2021-07-09 06:27:42.052,FE: spaceweather height of inputs,"- The height of textbox vs datepicker is not equal and that is obvious when shown together:

![image](/uploads/ddfed9f7a677cee4253ce1981f258d76/image.png)

- ! be sure to not break everything",3
89908957,2021-07-07 13:31:37.489,FE: Show spaceweather BE error messages in FE,"If a message is sent from the BE we should show in the FE in the same manner we do as for aviation.

Currently the error messaging is also different - we show it in small red font above the publish buttons. Should we also make this similar to aviation by displaying a banner at the top of the dialog? 

We can use the banner at the top we use at sigmet/airmet",3
89842838,2021-07-06 14:21:26.323,FE: remove srcEventId from SWNotification spec,"`srcEventId` is not used, so should be removed from SWNotification and testdata",2
89778088,2021-07-05 13:43:26.062,BE: spaceweather notifications table can be removed,"The spaceweather table `SpaceWeatherNotificationsTable` can be removed as it's never actually used.

Need to remove any calls writing into it and remove it everywhere in the code/cloudformation",5
89774508,2021-07-05 12:51:16.648,FE: prepopulating new fields when summarising,"Some of the new fields are only present when summarising, for example for a radio blackout the peak class/flux/time and end time fields. Currently they are empty by default. It would be good to prepopulate those with the values from the last external notification summary, if present.

From Eelco:
- When opening the form for editing (so after pressing the buttons) we should populate the fields with whatever has come from MetOffice and ignore what KNMI has changed (excepting of course the message field which should NEVER be copied over)",3
89766636,2021-07-05 10:24:31.662,Create dummy data for testing chart libraries,"Create a folder under core with POC in the name, create static dummy data in JSON.

See: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1382 for graph examples.",5
89764656,2021-07-05 09:55:57.060,Improve Monitoring SpaceWeather Dashboard,"Monitoring SpaceWeather Dashboard should be improved as Aviation Dashboard in Grafana.
API Gateway - Spaceweather API
API Gateway - Logs
Lambda Metrics
Application - Info
Application - Errors & Warnings",5
89764452,2021-07-05 09:52:50.624,Clean up Lambda's Metrics Logs for Spaceweather Lambdas,"Clean up Lambda's Metrics Logs for Timeseries API, Notification API, Event Ingest, ReqX, ReqSW, ReqKP, ReqM, Bulletin, Notifications, Upstreams, Authorizer.. It should go there the following:

* START, END, Username, REPORT for every time Lambdas are called;
* Unmanaged Errors.

After the #941 and #942 everything should be already clean, so this ticket is pure cross-check!",2
89764268,2021-07-05 09:49:32.294,"In Spaceweather BackEnd add the logs with INFO, WARNING and DEBUG log_level for SpaceWeather Lambdas.","In Spaceweather BackEnd add the logs with INFO, WARNING and DEBUG log_level for Timeseries API, Notification API, Event Ingest, ReqX, ReqSW, ReqKP, ReqM, Bulletin, Notifications, Upstreams, Authorizer.

Note: use WARNING and DEBUG only if there is something to be reported in those categories, otherwise leave it out.",3
89764052,2021-07-05 09:45:48.072,In Spaceweather BackEnd add the logs with ERROR log_level for Spaceweather Lambdas.,"In Spaceweather BackEnd add the logs with ERROR log_level for Timeseries API, Notification API, Event Ingest, ReqX, ReqSW, ReqKP, ReqM, Bulletin, Notifications, Upstreams, Authorizer.

It is necessary to make the 'error try-catch' to all database and S3 operations (as it is done for Aviation).",5
89761661,2021-07-05 09:14:09.397,"In Aviation BackEnd add the logs with INFO, WARNING and DEBUG log_level for Aviation Lambdas.","In Aviation BackEnd add the logs with INFO, WARNING and DEBUG log_level for Sigmet, Sigmet-TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Authorizer.

Note: use WARNING and DEBUG only if there is something to be reported in those categories, otherwise leave it out.",5
89761395,2021-07-05 09:10:43.695,In Aviation BackEnd add the logs with ERROR log_level for Aviation Lambdas.,"In Aviation BackEnd add the logs with ERROR log_level for Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Authorizer.

(Sigmet should be already done).",5
89761243,2021-07-05 09:08:17.181,Clean up Lambda's Metrics Logs for Aviation Lambdas,"Clean up Lambda's Metrics Logs for Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Authorizer.
It should go there the following:
- START, END, Username, REPORT for every time Lambdas are called; 
- Unmanaged Errors.

After the #939 and #940 everything should be already clean, so this ticket is pure cross-check!",3
89758716,2021-07-05 08:38:18.087,BE: Send SIGMET/AIRMET error messages to FE,"Errors in the SIGMET/AIRMET BE lead to an Internal Server Error message in the front-end, without further information.
The BE does generate specific error messages and should send these messages to the FE.
Could be that the API Gateway is not handling the Lambda's error output correctly.",5
89757633,2021-07-05 08:21:11.320,SIGMET and AIRMET: cancel button more clear (to avoid canceling by accident),"The Cancel button's function is not clear to everyone.
The `Cancel` button will be changed to secondary button (blue with white text) to distinguish the buttons a little better.

In the confirmation dialog the ""save and close"" button should get the text ""Cancel""",2
94355299,2021-09-27 10:03:25.318,FE: fix timeslider theme issue for all screenmanager options,,3
94351419,2021-09-27 09:08:31.240,FE: Create mastermultiDimensionSelect for multimap setup,"This should only be used for multimaps where each map has the same layers (for example, for different model runs).

There should be one multiDimensionSelect button that controls every map

Do the same as in: https://gitlab.com/opengeoweb/opengeoweb/-/issues/1234",5
94350400,2021-09-27 08:57:59.833,Meeting: Create master layerManager for multimap setup,"Organise a meeting to discuss code structure/ideas.

This should only be used for multimaps where each map has the same layers (for example, for different model runs).

There should be one layerManager button that controls every map

This is required to complete https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1531

Copy the Precipitation, pressure and wind preset and make a similar one but with one master layer manager, so its easy to compare both types of preset. Names can be `Harmonie precipitation, pressure and wind 1:1` and `Harmonie precipitation, pressure and wind 1:all` respectively 
- The master layer manager button can be in the first map for now",5
94349820,2021-09-27 08:52:11.508,FE: Add preset with different validtimes for a model,"We will do it as part of the geoweb-knmi implementation.

In the componentsLookup, you have to add a new case, which will be similar to the HarmonyTempAndPrecip preset (that one also uses different reference times). 

Later on, we will create a master layer manager and master legend for this kind of setup.",5
94349336,2021-09-27 08:46:44.184,FE: Change basemap layer in preset of screenmanager,"See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1530

Add the current basemap layer as an option",2
94347520,2021-09-27 08:23:23.421,FE: Make the issues panel draggable,Use the shared draggable component,5
94345820,2021-09-27 08:00:48.670,BE: Find out which IWXXM version we need,"WMO is putting the IWXXM standards development in a GitHub repository: https://github.com/wmo-im/IWXXM

There is also a reasonably recent presentation about IWXXM versions at:
https://www.icao.int/MID/Documents/2021/IWXXM%20Implementation%20Webinar/IWXXM%20-%20PPT03%20-%20AI2%20-%20WMO%20What_is_IWXXM-final.pdf",3
94344157,2021-09-27 07:38:53.743,BE: Make AIRMET IWXXM work for 2.1 version,"More or less the same as SIGMET, so calling the converter will be much faster",3
94344092,2021-09-27 07:38:06.914,BE: Make SIGMET IWXXM work for 2.1 version,"We are currently making TAC using the FMI library, we could generate IWXXM in a similar way.",5
94342641,2021-09-27 07:15:40.629,BE: Open pull request for avimessageconverter libraries,"We need to prepare the code in our branch to open a pull request so that FMI can review it. This will involve pulling the latest changes from FMI into our branch. 

We are also using GitLab and need to put the code into a branch of GitHub.",8
94342478,2021-09-27 07:11:59.337,BE: Deploy new version to acceptance,,2
94342464,2021-09-27 07:11:29.560,FE: Deploy new version,,2
94245954,2021-09-24 10:01:09.585,FE: fix flaky taf test,"This job gave issues https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1619645193, restarting it worked",3
94178299,2021-09-23 09:53:31.711,Monitoring: Exporting common functions for monitoring in utils (infra),"In Infrastructure BE folder are defined the same functions in each single lambdas file. Could be nice to export those functions in utils and make them available to be used when necessary:

The functions are:

* DecimalEncoder
* audit_log
* app_log
* err_log
* info_log
* warning_log
* debug_log
* get_lineno
* get_md5

NOTE: this development will be the same like the one for aviation https://gitlab.com/opengeoweb/opengeoweb/-/issues/1189",3
94178012,2021-09-23 09:49:04.134,Monitoring: Exporting common functions for monitoring in utils (spaceweather),"In Spaceweather folder are defined the same functions in each single lambdas file. Could be nice to export those functions in utils and make them available to be used when necessary:

The functions are:

* DecimalEncoder
* audit_log
* app_log
* err_log
* info_log
* warning_log
* debug_log
* get_lineno
* get_md5

NOTE: this development will be the same like the one for aviation https://gitlab.com/opengeoweb/opengeoweb/-/issues/1189",3
94172850,2021-09-23 08:50:08.167,FE: add basic preset to screenmanager in reference application,"follow-up of https://gitlab.com/opengeoweb/opengeoweb/-/issues/1197

make a preset with layers that will work outside of knmi",2
94028652,2021-09-21 10:34:23.624,"FE: TAF if error panel is open and sorting happens, a quick glitch is happening",Mentioned here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/887#note_682230730,3
93959234,2021-09-20 09:54:03.995,BE: Fix the use of unspecified encoding (pylint is failing),"For spaceweather, pylint is complaining due to the use of unspecified encoding.

Look for '# pylint: disable=W1514' and try to solve it.",3
93953255,2021-09-20 08:34:46.579,FE: use react-sortablejs in layermanager,"See https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/887 for inspiration
Add unit tests (see TAF for inspiration)

Also fix the drag issue with the hover of tooltips, as described here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/942#note_706243747. This is happening on ALL tooltips",3
93950596,2021-09-20 07:54:39.619,BE: Some emails not arriving in Slack channel,"When issuing a ""radio blackout alert summary"", the result is not shown in the Spaceweather Slack channel. Alerts do, however.

Not sure if this is a GeoWeb related issue, or a downstream challenge (Vivid, Slack).",3
93950499,2021-09-20 07:52:01.175,FE: Change labelname in Geomagnetic Sudden Impulse Warning,"In the ""geomagnetic sudden impulse warning"", the form label for ""observed solar wind"" must be changed into ""observed solar wind speed"".",1
93950294,2021-09-20 07:49:10.731,FE: Error retrieving Met Office notification for which KNMI notification was discarded,"Reproduce what is explained in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1524 and if needed solve the FE side.

In case the problem is involving the BE, add a new task in the sprint.",5
93950028,2021-09-20 07:44:58.507,BE: Special characters not showing in email message,"Description in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1521

Investigate what is the issue and how to solve it.",5
93771894,2021-09-16 07:56:16.887,FE: ScreenManager implement screenmanager geoweb-reference app,"- Use screenmanager route
- Add screenmanager to hamburger menu
- Copy pages from KNMI-geoweb
- Update presets (should not point to KNMI internal services), provide a minimal base set",5
93771670,2021-09-16 07:52:30.340,Add storybook snapshot tests for shared lib,"configure snapshots for shared and add one snapshot for toolcontainer

if there is a problem with transitions in the snapshots, see theme lib for solution",3
93770419,2021-09-16 07:34:12.848,Add storybook snapshot tests for the theme library,"Done before with geoweb core.
- Make stories for dark and light theme. Snapshot these stories to check that colors are unchanged.
- Separate stories for snapshots, make extra stories.
- Update readme",5
93647578,2021-09-14 14:21:54.306,BE: Monitoring: Fix the Infrasctructure Dashboard,"An investigation is needed to understand the meaning and the working way of the following panels:
* API Gateway - Infrastructure API (This panel seems to be always empty)
* Token Lambda - Logs (This panel seems to be always empty)


**Fix the logstash filter to ensure the output from the token lambda and the api gateway end up in elastic search (and therefore the dashboard)**

Ensure that we can see the logging in the dashboard (needs an adjustment to ensure it uses the correct index). 


If necessary, create a follow-up ticket to edit the log messages",3
93647240,2021-09-14 14:16:56.591,Monitoring:  WARNING and INFO log_level for Aviation lambdas,"Implement in Spaceweather BackEnd the logs with WARNING log_level for **reqX**, **reqSw**, **reqKP**, **Update Stream**, **Authorizer**.

Implement in Spaceweather BackEnd the logs with INFO log_level for **reqX**, **reqSw**, **reqKP**

Wait till common functions can be re-used from utils folder.",1
93646789,2021-09-14 14:10:52.060,Monitoring:  Exporting common functions for monitoring in utils (aviation),"In Aviation BE folder are defined the same functions in each single lambdas file.
Could be nice to export those functions in utils and make them available to be used when necessary:

The functions are:
- DecimalEncoder
- audit_log
- app_log
- err_log
- info_log
- warning_log
- debug_log
- get_lineno
- get_md5",5
93640367,2021-09-14 12:58:12.879,"Monitoring: ERROR, WARNING, INFO log_level for Taf_placeholder lambda","Implement in Grafana dashboard the logs with ERROR, WARNING and INFO log_level for **Taf-Placeholder** lambda.",3
93549181,2021-09-13 08:51:29.511,BE: Fix the use of global variable (pylint is failing),"For aviation and spaceweather, pylint is complaining due to the use of global variable.

Look for '# pylint: disable=W0603' and try to solve it.",3
93548289,2021-09-13 08:41:16.193,BE: Fix linting of Exception type,In BE code look for '# pylint: disable=W0702' and fix it.,2
93547933,2021-09-13 08:38:08.256,BE: Fix linting SpaceWeather Test folder,"Fix linting of spaceweather test folder.

Locally it is working but it is not working in the gitlab pipeline.
If it turns to be difficult to fix, just leave out the linting of Test folder.

In gitlab-ci.yml the relative linting line should be uncommented.",3
93547586,2021-09-13 08:34:02.669,BE: Fix linting of Aviation Test folder,"Fix linting of aviation test folder.

Locally it is working but it is not working in the gitlab pipeline. 
Probably the issue is caused by the way the files are packaged.
If it turns to be difficult to fix, just leave out the linting of Test folder.

In gitlab-ci.yml the relative linting line should be uncommented.",3
93545421,2021-09-13 08:05:48.258,BE: SpaceWeather monitoring misses monitoring of error for Kp,"In Spaceweather Dashboard (errors panel) is missed the triggering of alert for the errors of reqKp.

The monitoring of 'F' (logGroupName: ""/aws/lambda/geoweb-spaceweather-reqkp"" AND log_level: ""ERROR"") is missing.
It is necessary to add 

```OR sum () OF query (F, 5m, now) IS ABOVE 0```",2
93542058,2021-09-13 07:30:48.616,FE: [BUG] ScreenManager/synchronization groups: Zooming erases the timevalue of the timeslider (set back to 1970),"In the screenmanager application of knmi-geoweb: Zooming erases the timevalue of the timeslider (set back to 1970):

MapComponent fires both Area and Time actions, and only one of these is stored in redux state. These actions are overwriting each others state.

Solution: Update actions and selectors to make it possible to store the value for each action type (area and time) in the redux state",5
93541412,2021-09-13 07:21:14.606,"Meeting with Alvar, preparing thesis research","- Discuss possible performance improvements in geoweb

Alvar wants to study web workers

14:00, Monday 13th September

Feel welcome [Sander, Ernst, Maarten]",3
93540952,2021-09-13 07:17:04.966,Prepare documention for going in production,"- Update confluence page, fill in questionnaire

Ask Marcel",3
93540709,2021-09-13 07:14:05.168,Clean Sigmet/Airmet list (dynamodb) Monday 20 Sept,"Use AWS console and remove records from DB
- First on ACC, to check if it does not break
- Second on PRD",1
93540459,2021-09-13 07:10:43.491,Prepare afstemmingdag 30th september,,3
93406533,2021-09-09 15:17:22.565,FE: unit test taf fails sometimes,"See for example https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1571779993 
and https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1571489878
https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1609192798
https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1607820958

Test should be stable

```
components/TafWrapper/TafWrapper  showing spinner when doing a post request to the backend  should show the spinner when publishing a taf from the dialog
310 |         expect(
311 |           container.parentElement.querySelector('[data-testid=contentDialog]'),
312 |         ).toBeFalsy();
```",5
93406326,2021-09-09 15:12:43.433,FE: unit test sigmet-airmet fails sometimes,"See for example


https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1575582151 
and
https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1575330370

Test should be stable

```
components/MetInfoWrapper/MetInfoWrapper  should open the dialog for a new airmet when creating a new airmet, save it and open a new empty airmet
144 |       expect(queryByTestId('productform-dialog')).toBeFalsy(),
```",5
93335816,2021-09-08 14:24:00.312,Fix issue monitoring Bulletin API failure.,"On 7/09/2021 we got (continuously from 14 to 21) a strange alert from grafana related to an Error in one of our spaceweather lambdas (BulletinAPI) in PRD environment. 
It started at 14 when a new bulletin (containing 'error' in the message content) arrived and it ended around 21 when Ernst closed the SpaceWeather PRD application. 

After an investigation with CPT, the issue have been found in [logstash](https://gitlab.com/KNMI/cloud-platform/monitoring/logstash-config/-/blob/master/pipelines/knmi-geoweb/3002-filter-geoweb-backend.conf) 

The pattern `""%{GREEDYDATA:log_level} - %{GREEDYDATA:msg}""`  will make log_level match as much data as possible, in regular expression this is .*, until it finds the last  - . Instead it should only match 1 word: DEBUG, so it should be set to `%{WORD:log_level}`

Suggestions from CPT:
1. You can try it out for yourself at https://grokdebug.herokuapp.com/ and using `DEBUG - Successful: {""message"": {""overview"": {""type"": ""ISSUED"", ""simplified_content"": ""- example with dashes - test` as input. Then you see log_level will match much more, while if you use `^%{WORD:log_level} - %{GREEDYDATA:msg}$`  as pattern it doesn't. 
2. [not needed] better to use `^%{WORD:log_level} - %{GREEDYDATA:msg}$`. By adding ^ and $ to the beginning and end the pattern matching will be much easier to process for Logstash, because it knows this expression should not match something halfway the text

**In few words: the continuously alerting was caused by the word 'error' in the content of the message that triggered the error in grafana due to the use of `GREEDYDATA:log_level`.**",2
93266520,2021-09-07 13:55:48.540,Improve spaceweather bulletin-api logging - don't log entire bulletin text and history list,"- Annoying to have the large messages in the logging
- not necessary to log the entire bulletin and entire historylist, this makes the logging hard to read

also see this [thread](https://knmi-nl.slack.com/archives/C01Q53A7U3U/p1631027510015700?thread_ts=1631019620.002400&cid=C01Q53A7U3U)

Solution:
- Only log some properties of the message, lambda should not output complete message. 
- Bulletin API, is triggered by a GET request
- Notification lambda, triggered two times per day",3
93236407,2021-09-07 07:23:09.167,BE: python formatting in VS code for spaceweather,,3
93183617,2021-09-06 11:01:24.106,FE: Fix alignment issues of timeslider in knmi,"The Time step and Speed popovers are not aligned in knmi-geoweb

![image](/uploads/d09bca6adaa929bbd6bfab81d302de1c/image.png)",3
93182565,2021-09-06 10:56:46.103,FE: fix story not responding to dark theme,"story should show the dark theme but its not working

http://localhost:5000/?path=/story/components-multidimensionselect--elevation-dimension-demo-with-dark-theme

check the other stories as well",3
93006402,2021-09-02 12:58:59.430,Add cypress test for drag and drop in TAF,"In geoweb-serverless-backend:

* add smoketest for drag and drop in TAF (do once sortable is finished)

Timeboxed to a day (because there is a lot of uncertainty about how this could be done)",5
93006288,2021-09-02 12:57:55.684,Add cypress test for drag and drop in layer manager,"In FE

* In the end to end tests; for drag and drop in layer manager (do once sortable is finished) -> take inspiration from the cypress tests for TAF drag/drop",3
93006163,2021-09-02 12:56:02.161,FE: Add unit tests screenmanager in knmi-geoweb,"In knmi-geoweb FE:
- all screen manager files need unit tests: 
![image](/uploads/85d6a7f52b67e7491ecf95c02227939f/image.png)",3
93006095,2021-09-02 12:55:18.313,FE: add unit tests for homepage in knmi-geoweb,"In knmi-geoweb FE:
- homepage needs some more unit tests:
![image](/uploads/f14327e96e4c6fd5bffe1fb083c68cf4/image.png)",2
93005927,2021-09-02 12:52:08.540,Add cypress test for adding a preset,"In geoweb-serverless-backend:


**add smoketest for adding a preset**

open the menu -> click one of the presets -> open the layer manager -> check that the correct layers are loaded",2
93005701,2021-09-02 12:48:20.033,Add cypress test for using the layer manager,"In geoweb-serverless-backend:


**add smoketest for using the layer manager:**

login -> open layer manager -> check there is one layer row -> add another layer -> check there is 2 layer rows + 2 legends -> duplicate one layer -> check there is three layer rows + 3 legends -> remove one layer -> check there is 2 layer rows + 2 legends -> close the layer manager -> check that its closed",3
93005607,2021-09-02 12:46:57.417,BE: update packages for cypress,"In geoweb-serverless-backend:

* update all packages listed in package.json to latest available versions",2
92985111,2021-09-02 08:30:01.806,FE: Use same CoreThemeProvider and CoreThemeStoreProvider instead of testutils,"- Get rid of TestWrapper and TestWrapperWithStore in ./opengeoweb/libs/core/src/lib/utils/testUtils.tsx
- Use Providers from libs/core/src/lib/components/Providers/Providers.tsx
- Add DynamicModuleLoader to these providers and make test work (mock it: `store.addModules = jest.fn(); // mocking the dynamic module loader`)",3
92942168,2021-09-01 14:56:44.362,FE: update storybook packages to 6.3.7,"update storybook packages to the latest version

note: all of them need the exact same version:
- @storybook/react@6.3.7 
- @storybook/addon-storyshots@6.3.7 
- @storybook/addon-storyshots-puppeteer@6.3.7

make sure that all storybooks and the story shot tests still work",3
92941618,2021-09-01 14:49:41.842,FE: update browsers list in package-lock,"- run `npx browserslist@latest --update-db`

this will update the browsers in the package-lock file (used in the unit tests)

this will fix these comments popping up when running the tests locally

```
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
```",3
92941414,2021-09-01 14:46:12.523,FE: update all NX packages to @12.8.0,"To update all Nx packages (@nrwl):

1. run `npm run update`
1. follow the instructions!
1. commit and merge the changes",3
92918774,2021-09-01 09:04:20.869,Fix auto-update not refreshing after changing active layer,,8
92917580,2021-09-01 08:48:02.400,FE: Legend select button missing,"Add the button of Legend in reference-geoweb application.
Add unit test for it.

Fix same issue in storybook http://localhost:5000/?path=/story/application-demo--geo-web-demo",2
92914915,2021-09-01 08:14:29.436,FE: theme and shared storybooks give console warnings for duplicate title + consistency naming,"- nx storybook theme
- check the console:

5 warnings for Duplicate title: 'demo'

- nx storybook shared
- check the console:

![image](/uploads/858c8477ce449824ff7be88fd01db6ab/image.png)

- Also while you're at the titles, give the stories a consistent name. Some have `story` suffix, some `demo`",2
92913922,2021-09-01 07:59:20.020,Investigation of Cypress test improvement,"Idea is: how we can be more confident that Geoweb doesn't break.

Result of this ticket is a list of cypress tests to be added, made by @tvanrijn. 
The entire team will review this list, give the priority and then we go forward with the development.

In geoweb-serverless-backend:
- update packages to latest available versions https://gitlab.com/opengeoweb/opengeoweb/-/issues/1146
- add smoketest for using the layer manager
   - login -> open layer manager -> check there is one layer row -> add another layer -> check there is 2 layer rows + 2 legends -> duplicate one layer -> check there is three layer rows + 3 legends -> remove one layer -> check there is 2 layer rows + 2 legends https://gitlab.com/opengeoweb/opengeoweb/-/issues/1147
- add smoketest for using the timeslider (low priority, still under development)
   - login -> open layer manager -> check there is one layer row -> click the timeslider rail -> check that a BE request is made https://gitlab.com/opengeoweb/opengeoweb/-/issues/1148
- add smoketest for selecting a preset https://gitlab.com/opengeoweb/opengeoweb/-/issues/1149
- add smoketest for drag and drop in layer manager (low priority, do once sortable finished) https://gitlab.com/opengeoweb/opengeoweb/-/issues/1152
- add smoketest for drag and drop in TAF (low priority, when implemented again) https://gitlab.com/opengeoweb/opengeoweb/-/issues/1153

In knmi-geoweb FE:
- homepage needs some more unit tests: https://gitlab.com/opengeoweb/opengeoweb/-/issues/1150
![image](/uploads/f14327e96e4c6fd5bffe1fb083c68cf4/image.png)
- all screen manager files need unit tests: https://gitlab.com/opengeoweb/opengeoweb/-/issues/1151
![image](/uploads/85d6a7f52b67e7491ecf95c02227939f/image.png)",3
92909354,2021-09-01 06:41:35.188,BE: Smoke test bug,There is a typo for the SpaceWeather smoke test.,2
92908648,2021-09-01 06:25:01.943,FE: Use Final Sortable in Shared and Taf,"It has to:
- no errors in strict mode
- it should handle auto overflow
- it should handle auto scroll in list
- use it in sortable first, then in taf. Later in LayerManager
- make sure it works on production build
- should be able to validate fields after (and not lose track of it) with a decent solution (no hacks)


First attempt: dnd-kit. I still in beta works fine, but can't minify it in production. [This is the remove commit](https://gitlab.com/opengeoweb/opengeoweb/-/commit/3aa9d286b6558c795515d75624e3a6bf538a808b)

Seconds attempt: react-beautiful-dnd, worked very simple, only causing issues with validation  
- https://github.com/atlassian/react-beautiful-dnd demo: https://react-beautiful-dnd.netlify.app/?path=/story/super-simple--vertical-list-with-scroll-overflow-scroll
- code sandbox: https://codesandbox.io/s/k260nyxq9v?file=/index.js

![Screen_Recording_2021-09-01_at_14.20.04](/uploads/613a5f5582fb84b2601db7971793c0d2/Screen_Recording_2021-09-01_at_14.20.04.mov)

New attempt:
Look for a suiting alternative with given points in mind",8
92843854,2021-08-31 07:19:59.377,Create Gitlab TypeDoc for ScreenManager library.,Create Gitlab TypeDoc for ScreenManager library and update README,3
92785143,2021-08-30 09:25:03.793,Apply correct GeoWeb application favicon.ico,"Description in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1295

Apply the correct icon for knmi-geoweb and reference-geoweb applications.",2
92784752,2021-08-30 09:18:12.627,Access to information on keyboard shortcuts from within the GeoWeb application.,"MVP mockup by @didier.dezanet: https://www.sketch.com/s/a9c3ae9c-a97e-433c-b8dd-e69d71863abc/a/eKM9Dea/play

The list of keyboard shortcut [here](https://agora.fmi.fi/pages/viewpage.action?spaceKey=GEOWEB&title=User+Guide)

Develop applying the design.

Report the keyboard shortcut in README.

Theming
- make sure to create a component in shared, as it will be used in ref app as well
- make sure it will use correct colors from theme
- use toolcontainer draggable for outer. We should also have a look at the backdrop. Might need a new story for that as well. How does the toolcontainer behave when centering and resize? Check the shared story of the big dialog
- if needed create for Tab component a Theme story first to make sure the correct design is followed color wise. Same for modal behavior",5
92781842,2021-08-30 08:40:01.635,BE: python formatting in VS code for aviation and infrastructure,"This ticket is to improve BE code quality.

Result of this task is:
- branch with a configuration file (for VS-Code) for PEP8.
- Apply the formatting to all files for aviation and infrastructure.",8
92781370,2021-08-30 08:31:19.768,BE: Improve documentation SW IncomingDataStream lambdas,"In BE is necessary to improve the documentation:
- for SpaceWeather data incoming data stream lambdas (reqKp, reqM, reqSW, reqX): user relevant variable name, add in-line comments that explain what the code is doing, probably unused ""main"" code that can be removed.",4
92781134,2021-08-30 08:28:08.203,Give focus to first field after user selects option in form with linked fields,"Task valid for SIGMET and AIRMET.

There are some group fields with select and input fields. When changing the select the corresponding input field should get focused.

Check the User Story for better description.",3
92780811,2021-08-30 08:22:58.834,Layermanager - Application crashes when a non working WMS layer is added,"Investigate the issue and eventually write new dev tasks (if the development is too big to be in this current task)
https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1406",3
92780594,2021-08-30 08:19:35.354,Check Draggable dialogs stuck beyond viewport,"Check https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1485

Resize issue with draggables. The draggables keep there position when resizing the screen, and this could cause issues with aligned elements.",1
92780308,2021-08-30 08:15:51.850,Issue removing user in cognito-manager.py,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1435,2
92779971,2021-08-30 08:11:30.436,Int. Presentation for Theming,"Presentation: ""how to add colors/styling, follow the design and how to go forward""
This is a presentation for international Meeting.

@rturtolo will schedule this meeting for the 2 week of September.
@sanderdesnaijer will lead this meeting.",3
92777877,2021-08-30 08:01:46.550,Investigation how to solve the Screen Manager issue,"Meeting to understand the issue of using Layer Manager and Legend in all maps in ScreenManager and review of the Store.

The output of the meeting is the creation of Dev Task to solve this issue in Sprint 49.

Evaluate if to put the following task in the sprint (with a good description) or delete completely:
- #1111 
- #1099 
- #1089 

Sander will lead this meeting.",3
92776475,2021-08-30 07:39:37.701,Release to PRD,Release to PRD after consulting PO.,3
92776390,2021-08-30 07:37:38.610,Sprint End: Release to ACC,"Release to ACC what is done in Sprint 49.

Move the related User Stories to PO-validation",2
92775787,2021-08-30 07:26:47.594,Sprint begin: Release to ACC,"Release to ACC the changes made in Sprint48, to give the opportunity to the PO to review and validate the related User Stories.

Move the related User Stories to PO-validation",2
92629287,2021-08-26 09:44:26.083,FE: Add back LayerManager to ScreenManager and investigate performance issues,"The ConnectedLayerManager gave heavy performance problems in [this commit](https://gitlab.com/opengeoweb/opengeoweb/-/commit/9cc70b3d283e15f98624150ac894da6e41e58d6d) and will be reverted in [this MR](https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/842). 

We need time to investigate how to fix this issues.

- No props for config should be given
- Outcome: layerManager working like legend currently in ScreenManager",8
92615249,2021-08-26 06:24:09.711,FE: theme readme,ADd readme with instruction how to use the theming library,2
92614628,2021-08-26 06:11:12.316,FE: Remove ScreenManager from Core lib.,"Once the ScreenManager has own library and this is used everywhere in the applications, it is necessary to remove all ScreenManager code from Core library.",3
92614506,2021-08-26 06:09:02.186,FE: Use the ScreenManager lib in the application (knmi-geoweb),"ScreenManager is now a lib.
In the application (knmi-application) page should be used this library.

Test it manually in depth.",3
92560098,2021-08-25 10:21:20.332,FE: CPU% increases when opening the Screen Manager,"CPU use goes up quite a lot when opening and manipulating the ScreenManager, making it difficult to scroll the Layer Manager or zoom in and out in the map. 

To reproduce, run `nx serve knmi-geoweb` and open  http://localhost:4200/screenmanager",3
92544095,2021-08-25 07:00:57.053,FE: remove named exports of screenmanager,"in ScreenManager/index.ts some components and utils are imported and exported. When exported, the names are changed which makes it very unclear how this works. It's fine to name selectors and actions, but for the rest of the component I suggest stick with the names of the components. If the name is not clear, rename the component.

![Screenshot_2021-08-25_at_09.00.27](/uploads/f02827713365fb1b82faa377108d6690/Screenshot_2021-08-25_at_09.00.27.png)

also auto import fix of VsCode does not work with this way with using:
`<ScreenManager.Renderer componentsLookUp={componentsLookUp} />`",3
92543760,2021-08-25 06:52:19.938,FE: theme folder cleanup,"Since this lib does not import libs (only MUI and the sortable for table demo), and it will get lots of stories, maybe its' a good idea to make for this an exception; a story folder. Also split the helper functions a bit more, and put themes in a seperate folder. Also start with ReadMe instructions

![Screenshot_2021-08-25_at_08.54.22](/uploads/04a1b3567a7e18b153d98a89f84060bc/Screenshot_2021-08-25_at_08.54.22.png)",5
92492421,2021-08-24 10:08:53.181,FE: fix drag order bug,"A fix for the drag order has been fixed here in the reducer (4 files in store/map), it fixes when dragging element 0 to 2 for example mentioned [here](https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/812#note_652700780).  Seperate it from this MR https://gitlab.com/opengeoweb/opengeoweb/-/issues/1100",2
92330588,2021-08-20 12:13:41.991,FE: Move dynamic module loading outside of the components,"Find out if we want 1 dynamic module loader, and if current MapViewConnect is wrong. 


We should load the required modules only once so that there are no duplicates and they don't get reloaded all the time.

- Remove if from Legend
- Only wrap the dynamic module loader on Provider level of store (so on the demo, knmi-geoweb, screenmananger).",3
92326671,2021-08-20 11:04:18.765,FE: add timeslider theming colors,,3
92313881,2021-08-20 07:29:18.652,FE: Allow baselayer selection to work with multiple maps,,5
92270979,2021-08-19 13:22:05.864,FE: TAF background filled field in the row,"In TAF dialog some filled fields in the row have a different background color and some no.
![image](/uploads/eff4af3e4c6c1a2b74aff9a1446999ea/image.png)
This behavior is quite random.",3
92252186,2021-08-19 08:44:43.753,Monitoring: SW IncomingDataStreams per specific deployed branch,"At this moment in the SW IncomingDataStreams (for DTA) dashboard are plotted all results from branches in DTA.
This is incorrect. Should be plotted only the one related to the specific branch.",3
92246685,2021-08-19 07:23:56.914,FE: Replace new Application LayerManager in all stories/applications,,5
92205394,2021-08-18 14:06:13.893,FE: TAF fix state update in unmount error,"When switching stories in TAF, you can see the following error:
```

react-dom.development.js:88 Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.
    in TafForm (created by TafFormWrapper)
    in FormProvider (created by ReactHookFormProvider)
    in ReactHookFormProvider (created by TafFormWrapper)
    in TafFormWrapper (created by unboundStoryFn)
    in div (created by ForwardRef(Paper))
    in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))
    in WithStyles(ForwardRef(Paper)) (created by Wrapper)
    in ConfirmationServiceProvider (created by Wrapper)
    in ApiProvider (created by StoryWrapper)
    in ThemeProvider (created by StoryWrapper)
    in StoryWrapper (created by Wrapper)
    in ThemeProvider (created by Wrapper)
    in Wrapper (created by unboundStoryFn)
    in unboundStoryFn
    in ErrorBoundary
```",3
92196063,2021-08-18 13:04:02.065,FE: new legend - remove local state,"LegendConnect.tsx now uses a combination of local state and store state to determine if the legend dialog is open or not.

This is due to the fact that if the legendDialog is open and the relevant map is removed, we want to close the dialog so an additional check has been added to determine the final state (stored in the local state).

This local state ensures that the dialog is only opend if:
- We have a valid map
AND
- the store state is also set to opened

To see issue when local state is removed and only relying on global state:
- in screenmanager, open a preset and open the legend
- switch to a different preset. You will see that the legend has now become empty and in the title it shows a non-exitent mapid 

or
- in screenmanager, open a preset with multiple panes and open the legend
- remove the pane from which you just opened the legend
- same problem",3
92195844,2021-08-18 12:59:58.320,BE: empty spaceweather data should result in Grafana alerts,"Better monitoring: receiving empty spaceweather data should result in alerts being sent by Grafana to procesbewaker and Slack monitoring channel.

It is necessary to log errors in BE when the data for the incoming streams are empty.
In Grafana the errors alerts are already managed (so nothing is necessary in Grafana at this stage).

In unit test, check if the error log is created!",3
92183155,2021-08-18 10:37:02.548,FE: new theme in reference application,"- Use the ThemeProvider wrapper
- Remove css styling from app layout 
- Move info modal to menu item
- Find in code this ticket number, and fix the now unneeded styling",3
92182440,2021-08-18 10:23:37.247,FE: Fix theming issue,"Caused by latest change to theme for layermanager fix.  (Theme.tsx)
```
MuiPaper: {
      root: {
        backgroundColor: geowebColors.background.surfaceApp,
      },
    },
```",2
92177528,2021-08-18 09:05:37.505,FE: Apply new ApplicationLegend in all stories/applications,replace legend with new splitted connected legends.,5
92174466,2021-08-18 08:21:39.510,FE: TAF field names helper,Create a small helper which returns the names of the field rows per index and changeGroup,2
92164234,2021-08-18 05:33:12.551,BE: Kp incoming data monitoring in loop,"![image](/uploads/8d70dfde2e192c521983ef82f7f40f55/image.png)

In Grafana (but also in Kibana) the monitoring of KP incoming data (log_type: ""datastream"" AND product: ""kp"" for geoweb-lambdas) is in a loop and as shown in the graphs there are multiple counts in less then 1 sec.

It should be only 1 count.",3
98113029,2021-11-29 16:20:44.597,Test/merge fix for SIGMET/AIRMET type in IWXXM30,"In issue https://gitlab.com/opengeoweb/opengeoweb/-/issues/1509 the code fixes were done for correct handling of the SIGMET/AIRMET type in IWXXM30.
These changes are in geoweb-knmi-avi-messageservices library version 0.0.21 and this should be tested by deploying a version of the geoweb-serverless-backend with that version.

To check: make different types of SIGMET's and AIRMET's (TEST/OPERATIONAL/EXERCISE) and check if the IWXXM30 output has the correct entries to reflect that status.",3
98012126,2021-11-26 15:46:04.814,FE: create snapshot for shared ConfirmationDialog,,2
98009872,2021-11-26 14:56:41.678,FE: remove Ids from static public layers in core,We could update `useDefaultMapSettings` to always generate ids for layers given. Then only you need to hardcode them for the demo presets. Make reusable solution. SetLayers should generate ids for example,5
98005195,2021-11-26 13:31:34.162,Refactor redux-store to support new Layer Select Part2,"- remove dimensions property from redux store (services/byId/<service_url>/layer/<layer_id>/dimensions) since layer objects inside layers store already have all the same dimension data
- rewrite selectors/component functions to use dimension data from layers store instead",5
98003594,2021-11-26 12:59:50.318,"FE: create snapshots for shared UserMenu, StatusTag and AlertBanner",,2
98000657,2021-11-26 12:42:08.536,FE: Fix Tabs styling and prepare List component,,2
97944597,2021-11-25 13:36:05.107,FE: prepare theme for MUI5 part 2,Add snapshots for components using Slider and Tabs,2
97941101,2021-11-25 12:49:05.447,FE: prepare theme stories for MUI5 part 1,"Wrappers from stories need to be removed to minimise upgrade issues

* Slider
* Tabs
* Typography",2
97927243,2021-11-25 09:18:22.943,FE: rename component Mapcontrols to MapControls,Capital C needs to be included in the name (pascalCase),2
97898498,2021-11-24 17:52:09.070,Refactor redux-store to support new Layer Select Part3,"- remove layer property from under services (layers will stay)
- add style property data to layers store
- rewrite selectors/component functions to use style data from layers store instead",3
97892996,2021-11-24 16:13:04.624,Refactor redux-store to support new Layer Select Part1,"- rename mapServices store to services
  - change services to byId
  - create allIds

- rewrite selectors while making changes so that everything keeps working",3
97861987,2021-11-24 09:15:38.657,FE: update theme Backdrop story,Remove the button so the story only shows the Backdrop,2
97861813,2021-11-24 09:13:01.295,FE: make a coreComponentsLookUp that is shared and can be extended,"We currently have a ComponentsLookUp in 3 places: knmi-geoweb, geoweb-reference-application and screenmanager storyUtils. That is a lot of duplicate code that could be avoided.

- 1) We should make a core componentsLookup that contains the lookup table for the core components. In the apps it should be possible to extend it with custom components.
- 2) There should be a timeseries componentsLookup in thetimeseries lib.

These can be bundled in the componentsLookup of the geoweb-reference-application.

Keep in mind that we want to have both screenmanager and core libs independent of each other.

Make sure the tests take place in the according library (core components in core).",5
97859262,2021-11-24 08:39:27.694,FE: Multimap layer manager make change baselayer work,,3
97811984,2021-11-23 13:52:37.265,FE: move iconbuttons to own main folder,"We will reuse the buttons later in mapcontrols, so it's good to move them",2
97751523,2021-11-22 16:04:08.569,FE: using @opengeoweb/core package in another project doesn't work anymore,"- these imports need to be changed (should be imported from @material-ui/core instead of @material-ui/core/styles etc)
![image](/uploads/c51a47556aa6bce40b5de18bec0ef03c/image.png)
- shared and webmap need to be published to npm (theme is already done in https://gitlab.com/opengeoweb/opengeoweb/-/issues/683)


![image](/uploads/2ecdd48e02e5516a1478f847a85c412f/image.png)",3
97749984,2021-11-22 15:39:49.028,Small fix for IWXXM 3.0 output filename for AIRMET/SIGMET,"The filename of the IWXXM 3.0 output for SIGMET/AIRMET contains 2 date/time groups.
Both should contain the start of validity time, according to Jan Koerts.

Uit ICAO Eur doc 33:
```
A Data Switch will route IWXXM data according to the TTAAiiCCCC part of the filename of the File Transfer Body Part. The filename including the current WMO bulletin header will be structured as follows (WMO naming convention A):
A_TTAAiiCCCCYYGGggBBB_C_CCCC_YYYYMMddhhmmss.xml
Where the elements in black and bold are fixed elements and: TTAAiiCCCCYYGGgg is the current WMO header with the date time group BBB is optional (as usual), CCCC is the repeated CCCC part from TTAAiiCCCC, YYYYMMddhhmmss is the date/time group
```
Both date/time groups should contain the validity start of the SIGMET/AIRMET.

Currently the second group contains the publishing date/time, which is incorrect.",2
97729003,2021-11-22 10:46:16.126,FE: Fix breakpoints/cols combinations for different widths,"Fix breakpoints/cols combinations for different widths

Setup a test branch for Didier to verify

Follow designs: https://zpl.io/VQ3kP55",3
97728119,2021-11-22 10:32:51.157,FE: Make 1 map preset full screen for ScreenManager,It is hardcoded right now. Should be full screen instead.,3
97727827,2021-11-22 10:28:27.753,"FE: Use theming for map panels legend, multidimselect toggle buttons",,3
97724068,2021-11-22 09:49:34.944,FE: Ensure that layer ids are unique in core,"If possible, do it in the reducer when adding a layer. (or saga, since it's a side effect, and no state change is needed)

Check for duplicates within the map (reducer already does it). Show a console error if there is a duplicate.

ReactMapView without Redux might give problems (a check still needed there).",5
97723709,2021-11-22 09:43:50.332,FE: Remove ids from static KNMI layer definitions,"Remove the id generation from the static layers.  


Presets should keep working (id is used when adding a layer from a preset). Generate an id if active layer id is needed.",3
97723007,2021-11-22 09:36:24.830,BE: Add SatComp dataset to a new experimental ADAGUC,"Make a separate nested stack. 
Check performance, possibly make new issues to fix it.",5
97722320,2021-11-22 09:26:31.129,BE: Differentiate between errors coming from avi-messageconverter,"Differentiate between different error codes coming back from the avi-message services (502 has different meaning from 400/500 etc).

In some cases a retry might be the best option, other times an error or a warning.",3
97722041,2021-11-22 09:22:29.982,BE: Fix SIGMET/AIRMET type in IWXXM 3,"Fix SIGMET/AIRMET type in IWXXM 3 (test, exercise etc -> it now always sends TEST)",3
97719948,2021-11-22 08:54:19.351,"BE/FE: Check that authentication mechanism in reference app works with Cognito, and implement if positive",This change adds state and PKCE,5
97719702,2021-11-22 08:49:39.749,Define 3 separate DoDs,"Define DoD for task (we have already, low DoD), user story (high DoD) and the DoD related to deployment (Definition of Ready)  to Confluence",3
97719388,2021-11-22 08:44:43.571,FE: FE: MultiMap LayerManager: Make WEBMAP_SET_ACTIVELAYERID work as well,Support the following actions for the multimap layermanager: WEBMAP_SET_ACTIVELAYERID,3
97718705,2021-11-22 08:33:15.156,FE: Show error messages instead of white screen,"Make error boundary work

Fix this when parsing getCapabilities (throw an error there for testing purposes)

Use error boundary component to show the error, explaining to the user what steps to follow.

Steps to follow:
- Report error to us
- Reload page",5
97718401,2021-11-22 08:27:55.713,BE: Setup alerting channels for tst and acc errors,"We will get help from CPT (they will make the channels for us)

Change the channel number in the property files.",3
97718104,2021-11-22 08:23:13.058,FE: TAC generation Frontend timeout: should be equals or longer than the BE timeout,"Change in timeout also needed for AIRMET, TAF. 

Set timeout to 15 seconds, could be set as default.",2
97717573,2021-11-22 08:14:41.334,BE: SIGMET TAC issue: investigate factors causing errors,"- We are not sure if CPU/memory is the solution. Investigate if it makes any difference.
- Connections closing could be another factor",5
97717376,2021-11-22 08:11:08.845,BE: Add new tags to CloudFormation,"Add tags to the LogGroup resources in your cloudformation. The necessary tags are Name, ApplicationName, Department, InternalOrderNumber.",3
97617140,2021-11-19 12:23:38.327,Add LayerSelect to LayerManager as a config option,"Add the ability to add LayerSelect to LayerManager from configuration.

This allows us to have LayerSelect showing on staging, but not in demo or other GeoWeb applications.

Helps for PO/DE testing and getting user feedback earlier.",2
97564804,2021-11-18 15:18:17.828,FE: apply new draggable/resizable container to new multi dimension select,"The multi dimension select currently looks different from the dialog we use for the legend and layer manager.

Apply the same one for consistency",3
97559503,2021-11-18 13:59:13.247,FE: Use theming for mapbuttons,Also apply changes currently in the design. https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5f9bd12a1125e0ba527cfe42,3
97556611,2021-11-18 13:21:35.709,FE: Apply new multimap dimension select,"The new multi map dimension select should be applied in:
- storybooks
- knmi application
- reference application

Remove the old multi dimension select once it's no longer used anywhere",3
97530223,2021-11-18 08:36:28.231,BE: logging avi-messageservices customized format,"In the geoweb-knmi-avi-messageservices (and related libraries) is used the Slf4j logging method.

Investigation is needed to figure out if it is possible to customize this logger to obtain logs in the following format (that is similar to the format used in geoweb-serverless-backend):

`appType - time - level - class - message`

E.g. AviMessageConverter - 12/DEC/2021:13:14:15 Z - INFO - n.k.g.b.c.S.GeoWebSigmetToFMISigmet - GeoWebSigmetToFMISigmet convert. Error code: xxx. Line: xxx

Specification:
- **appType**: [AviMessageConverter, ...otherLibs]
- **time**: in ISO Time Format
- **level**: [INFO, ERROR, WARNING, DEBUG]
- **class**: the Java class in which the log is triggered
- **message**: the log message should contain a description and the line in code in which it happens.

Part of this ticket is to apply this new format to all logs defined in geoweb-knmi-avi-messageservices (at this moment they are defined as 'log.error','log.info','log.debug','log.warn').
Off course part of this ticket is also to figure out if the current specified logs are useful or not and if are needed more logs.

NOTE: at this moment the current apache logs are in Kibana at this link
https://kibana.dta.logs.knmi.cloud/_plugin/kibana/app/discover#/?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-7d,to:now))&_a=(columns:!(message),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'ecs-apachelog-*',key:docker.container.labels.com_amazonaws_ecs_task-definition-family,negate:!f,params:(query:geoweb-backend-avi-acc),type:phrase),query:(match_phrase:(docker.container.labels.com_amazonaws_ecs_task-definition-family:geoweb-backend-avi-acc)))),index:'ecs-apachelog-*',interval:auto,query:(language:kuery,query:avi),sort:!())

Still open questions:
1. Currently 'trace' logs are specified also (as 'log.trace'). What should we do with those?
2. Can we apply this log format also to other libraries used inside of geoweb-knmi-avi-messageservices, such as fmi-avi-messageconverter, that are slightly out of our control?",5
97529224,2021-11-18 08:14:10.025,FE: move legend button,Move the button back to the right,2
97528481,2021-11-18 07:54:44.803,FE: fix sigmet-airmet test failing sometimes,"see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1791267839


issue is not fixed, see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1845843863

issue still not fixed, see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1858470088",2
97467678,2021-11-17 09:07:37.649,FE: screenmanager add some demo stories for componentslookup components,"Add some stories for each of the different types we use. Would be nice to have for each type a story, easy for debugging and developing

Each option separate story",3
97420465,2021-11-16 12:37:20.922,Get keywords from getCapabilities to layers,"Pre-requisite for doing anything with keyword filters

* When getting layers from the service, find keywords and add those to the layer object",5
97420431,2021-11-16 12:36:25.746,Add logic to layer search,"Basic search is implemented before this one

* Add more logic to search, so it behaves more like normal searches
* Some examples:
  * ""1 2 3""
    * should be exact match
  * Met*ute
    * should match ""Meteorological Institute""",8
97420352,2021-11-16 12:35:20.502,Highlight search results in LayerRows,"Search should already be implemented and working before doing this

* Highlight matching part to search in LayerRow",5
97417493,2021-11-16 11:38:37.112,FE: backdrop changes color when opening one of the aviation modules,"- go to knmi-geoweb
- app background color is grey
- open one of the modules, for example taf
- see the backdrop color changes to white, shouldn't change

in dark mode it's even more visible

probably changing z-index will fix it",2
97412789,2021-11-16 10:21:56.325,FE: show legend default open and move button location,"- open legend in single view map

- in multi maps open it for the first map

- ~~move button back to the right~~ move will be done in https://gitlab.com/opengeoweb/opengeoweb/-/issues/1491

close https://gitlab.com/opengeoweb/opengeoweb/-/issues/1089",2
97407822,2021-11-16 09:13:39.225,FE: dragging the multiDimensionSelect box is dragging the Map window,"- go to knmi-geoweb
- add a layer with elevation, for example Harmonie Temperature PL
- open the dimension select
- try to drag it by clicking the header

expected: dragging only moves the dimension select

actual: dragging moves the entire map window, see video


![DimensionDragging](/uploads/dedfc6a0b3b420b86c7a8adedabb0272/DimensionDragging.gif)",5
97352316,2021-11-15 13:32:23.134,Prepare meeting about shared solution for Presets,"PO will plan the meeting, we should be prepared and think about our preferred solution

Also discuss about the Layer json format",3
97343861,2021-11-15 12:01:39.620,Manage keyword filters in redux store part1,"Done after opengeoweb#1475

Add listed keywords to redux store, possible format, where
* isSelected is the state of the checkbox
* keyword as itself works as id

Get all of the keywords from all of the layers from all of the services in redux store.

If select all is enabled, also layers that don't contain any keywords should be shown, way how it could be implemented isn't clear yet. One possible solution is to add a special keyword with id of ""All"" or something similar, which can be toggled true or false, or detect that none of the keywords have isSelected as false.

```
keywords: [
      {
        ""id"": ""keyword"",
        ""isSelected"": true,
      },
      {
        ""id"": ""keyword""
        ""isSelected"": true,
      },
      {
        ""id"": ""keyword"",
        ""isSelected"": false,
      },
    ],
```",5
97343819,2021-11-15 12:00:51.146,Create Keyword Filter popup that reads keywords from Services,"* Keyword filter popup contains list of keywords from services
* Get keywords from layers from active services (If opengeoweb#1470 has not been completed, show all of the keywords from all of the layers from all services)
* Can close dialog from X",2
97343689,2021-11-15 11:58:12.344,Create Keyword Filter button,"* Button follows design
* Update layout to fit Service list properly
* Button opens keyword filter dialog",1
97343544,2021-11-15 11:54:56.253,Create Delete Service Button,"Can use branch 1594-Manage-keyword-filters-in-redux-store-part2 as a base, if not yet merged to master:

* Add functionality to delete button in Service Options dialog, shown in picture
  1. Create action/reducer in service store to delete a service
  2. Delete action triggers saga
  3. Saga runs delete service action in LayerSelect store, which is already done by @PauliSairanen",2
97343514,2021-11-15 11:54:16.946,Create Service Options Button,"* Follows design
* Opens Service options dialog",1
97343482,2021-11-15 11:53:56.584,Create Service Options Dialog,"* List all services from service list
* All services should have edit button, opens edit service dialog
* Contains Add service button, opens add service dialog

NOTE: No delete button",2
97343224,2021-11-15 11:46:55.832,Toggle Services on/off from Service List,"* Add service filter to redux store
* Pressing service button turns filter on/off
* Toggle all switch implemented",5
97343150,2021-11-15 11:45:39.477,Add/Remove button for LayerRows,"* Button should add or remove layer from the map
* Read layer status from redux store, show correct button
* Button looks like design",2
97343111,2021-11-15 11:44:27.286,Add Filters to LayerContainer,"* Get filters from redux store
* Filter list of layers with filters
* Query doesn't need to be complex, only use ""string.includes()"" or similar

NOTE: Not included: highlight matching text from query filter and complex search logic",3
97343104,2021-11-15 11:44:10.352,Connect LayerContainer to redux stored service list,"* Update LayerContainer to use service list from redux store, instead of parameter",1
97342984,2021-11-15 11:42:26.274,Save Service functionality to Search bar,"* When typing URL or choosing to type Service to Search bar, show Save Service button
* URL in search bar automatically fills Save Service popup URL textfield when Save pressed
* Design interaction with Search functionality in redux store",5
97342400,2021-11-15 11:32:06.389,Connect Add/Save Service popups to redux store,"* Get textfield values from service, when saving from Search bar, empty if Adding new from ServiceOptions
* Save button adds new service to service list
* Validate texts

NOTE: Service list store already initialized and in use before this",3
97342375,2021-11-15 11:31:36.611,Initialize Add/Edit/Save Service popups,"* Single component for all 3 versions, component can used for all 3 popups
* Create own separate storybook for popups
* All 3 popups look like design
* Text fields initialize as empty, can be written into
* No functionality required

NOTE: No connection to LayerSelect",2
97342317,2021-11-15 11:30:50.182,"Create Search bar component, which updates query filter in redux store","* Only search functionality, no add service
* Focus on search bar when LayerSelect opens
* Query filter is saved to redux store
* Search bar looks same as design
* Redux store only updates after user has stopped typing

NOTE: Filter doesn't need to update LayerContainer contents, just update redux store",3
97342268,2021-11-15 11:29:29.183,Create Service List component that reads services from redux store,"* Reads service list from redux store
* All buttons should be staticly in active state
* Implement a way to scroll/show all services

NOTE: No functionality, just read list",5
97342220,2021-11-15 11:28:12.610,Create LayerContainer without filters,"* Gets list of services from service redux-store
* Show all layers from all services in the store
* Show layer info as shown in design (Ask Didier for what data the fields should include, probably Title, Name and Abstract)
* Show total amount of layers

NOTE: No Add/Remove button not yet implemented",5
97230242,2021-11-12 10:17:38.078,BE: Published TAF not properly superseded - disappears from TAF list,"In some cases, a published element is superseded without any new TAF being created. As a result, the TAF for that particular airport and timeslot is no longer available on the TAF list. 

The DB item looks like this:

```
{
 ""uuid"": ""cfcec2db-437d-11ec-983e-67f3fd1e9ec8"",
 ""creationDate"": ""2021-11-12T12:00:00Z"",
 ""taf"": {
  ""messageType"": ""ORG"",
  ""location"": ""EHAM"",
  ""validDateStart"": ""2021-11-12T12:00:00Z"",
  ""type"": null,
  ""issueDate"": ""2021-11-12T09:28:28Z"",
  ""superseded"": true,
  ""baseTime"": ""2021-11-12T12:00:00Z"",
  ""uuid"": ""cfcec2db-437d-11ec-983e-67f3fd1e9ec8"",
  ""validDateEnd"": ""2021-11-13T18:00:00Z"",
  ""baseForecast"": {
   ""valid"": {
    ""start"": ""2021-11-12T12:00:00Z"",
    ""end"": ""2021-11-13T18:00:00Z""
   },
   ""cavOK"": true,
   ""wind"": {
    ""speed"": 10,
    ""unit"": ""KT"",
    ""direction"": 120
   }
  },
  ""status"": ""PUBLISHED""
 },
 ""canbe"": [
  ""CANCELLED"",
  ""AMENDED"",
  ""CORRECTED""
 ]
}
```

![image](/uploads/3f53a53fc486f945d8e24daa3f9844af/image.png)

Looking at the logs, the BE got to this situation when saving a TAF amendment after a failed /taflist call:
![image](/uploads/b291401af28c8402dfc931269415ec31/image.png)",5
97220219,2021-11-12 08:49:32.592,FE: Fix updating dimensions in map on layer change/delete/add,"To reproduce:

- Select Harmonie preset in menu, then change one of the layers to a layer with pressure levels. The multi dimension select button for elevation should appear now but it doesn't

Step 1 is to make the redux state map dimensions reflect the current state of the map and not be used as a ""memory"".

Next step is to try and remember the dimensions but that will be done in a different ticket",5
97148590,2021-11-11 07:55:15.745,FE: auto update not working when having two maps with the same layer active,"When having two maps with the same active layer and auto update on for both, only one gets updated regularly with new data, the other doesn't receive any updates (see image)

![image](/uploads/c17a11654e34dbd60157b238db85404a/image.png)",5
97148391,2021-11-11 07:51:08.766,FE: Taf has unmounted state error after saving as draft and story,"Probably a TAF issue. Easy way for testing is start with the storybook and navigate and observe the errors. 

If you save TAF as draft, this happens:

![Screenshot_2021-11-11_at_08.49.54](/uploads/6e53b1502360849ee6f36e47dfef2525/Screenshot_2021-11-11_at_08.49.54.png)

Als happens when switching stories in http://localhost:4500/?path=/story/components-taf-form--edit-taf-form",3
97103784,2021-11-10 14:07:53.739,FE: Add zoomcontrols to screenmanager maps,"If you have 1 single map with timeslider or a multimap with timeslider it is currently not possible to configure zoomcontrols.

We should make it possible to hide/show these based on the screenPreset definition.

Apply the zoomcontrols in the presets in the hamburger menu",3
97096045,2021-11-10 13:01:58.253,FE: Make MultiDimensionSelect also work with 1 dialog and no mapId like we have for legend/layermanager,"We need the multidimensionselect to work the same as the legend and layer manager do:
- possible multiple buttons
- all calling the same dialog 

This allows us to use the multidimension select in the screenmanager

Once this has been done - apply to the main page of knmi-geoweb so the multi dimension select is added back in

Should also still work in core without screenmanager",5
97085745,2021-11-10 11:22:00.992,FE: apply theme to screenmanager,"Apply correct theme colors so it follows the design (currently the header of the panels for example are always black while they should be a lot lighter for the light theme
- do the theming inside the screenmanager lib so it will look good everywhere. 
- you can probably use the same colors as used in ToolContainer component in the shared lib

Light theme:

![image](/uploads/c80a0412edd1903f9ebb3e9d35363420/image.png)


Dark theme:

![image](/uploads/a9f2f18a49a675fdc5827a86af5a952c/image.png)",3
97074543,2021-11-10 09:22:25.234,BE: Fix smoketest,"Smoketest failed after updating to latest FE package.

See: https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/pipelines/404198542",2
97022101,2021-11-09 15:30:14.168,FE: update TAC after deleting row,,2
97001150,2021-11-09 11:12:38.939,FE: TAF cleanup TAFform,"Now we don't have to manually add fieldgroups anymore, all custom logic surrounding that can be removed",2
96945862,2021-11-08 15:01:05.998,FE: allow set auto update and setting dimensions in screenmanager preset,In order to properly copy over the hamburger menu presets we need to be able to toggle the auto update on/off as well as set layer dimensions from within the screenmanager preset definition,5
96912601,2021-11-08 10:04:29.973,FE: make generic solution for snapshot tests,"we have snapshot for core and theme, both with their own configuration

make generic so we can use it easily for other libs

update main readme",5
96911205,2021-11-08 09:47:02.944,Create Functional design for SMP on Confluence,"Added to: http://confluence.knmi.nl/display/GS/High+Level+Design

And saved in google drive: https://drive.google.com/drive/u/0/folders/1ip9k1BaJAOoSIHxUumhOo0nfi-qXACMB",3
96911178,2021-11-08 09:46:22.315,Update spaceweather datastream drawing,,3
96910691,2021-11-08 09:40:06.367,Create HLD for Frontend,"Add to opengeoweb readme:
- Nx generated dependency graph
- which libs are published to npm

Add on Confluence:
- which tools do we use
- where does the FE link to the BE

Added here: http://confluence.knmi.nl/display/GW/Frontend+HLD

and linked from SMP",3
96910531,2021-11-08 09:37:39.285,Update HLD for spaceweather,,3
96910464,2021-11-08 09:36:39.075,Create HLD for aviation modules,,3
96910437,2021-11-08 09:36:27.184,Create HLD for KNMI application,- on Confluence,3
96910289,2021-11-08 09:34:18.884,Validate designs for the Presets and Workspace,,3
96909585,2021-11-08 09:23:47.457,FE: Focus to first field after adding a new change group,"Focus input on first field after adding. Make sure it behaves unlike the video. 
Some issues found while working on it. 


![Screen_Recording_2021-11-08_at_12.15.04](/uploads/cf7d27cbffdf450a93c4ccbaec94f445/Screen_Recording_2021-11-08_at_12.15.04.mov)",3
96909035,2021-11-08 09:18:02.148,FE: add the add map button to the hamburger menu,,2
96908882,2021-11-08 09:15:03.142,FE: removing the screenmanager route in knmi-geoweb,,2
96908370,2021-11-08 09:07:06.066,FE: copy screenmanager to homepage in knmi-geoweb,"- homepage should open with the screenmanager with the radar preset in view
- hamburger menu should contain the screenmanager preset list
- make sure sigmet+airmet modules still work, use first mapid found in the store
- removing the screenmanager route is another ticket",8
96907948,2021-11-08 09:01:10.965,FE: convert presets to screenmanager presets,All the presets from the hamburger menu (see list https://docs.google.com/spreadsheets/d/1xrvkl66oCFj2PU6dprEUiPeLSv8r4qmgYEuO7rfKokk/edit?usp=sharing) need to be added to the screenmanager presets list,5
96907578,2021-11-08 08:55:14.894,FE: replace icons in presets knmi-geoweb,"* Replace icons of presets with icons indicating the type of preset (See dev-po channel for some examples from Marcel):

> What could be useful however are icons. Now, we have some icons with the presets in the hamburger menu and its obvious that with every preset added, finding the right icon will be increasingly difficult. So, perhaps its better to skip the icons from now? That said, a functional icon representing the configuration of the preset (single view, multiple view, single tiled view, multiple tiled views or a kliko) might be very handy indeed!

- Also, make sure to loop the presets, instead of hardcoding every thing. ScreenPresets already have a title, add a viewType prop (singleView,multiview,singleTileview, multipleTileView) and render the prop to an icon.",2
96907262,2021-11-08 08:51:17.991,FE: remove/cleanup presets list in knmi-geoweb,"Remove the presets according to this list:
https://docs.google.com/spreadsheets/d/1xrvkl66oCFj2PU6dprEUiPeLSv8r4qmgYEuO7rfKokk/edit?usp=sharing

keep the 2 menu's for now",2
96906842,2021-11-08 08:45:05.140,FE:Getting date at time step fails when adding a layer,make sure the application doesn't crash,3
96905835,2021-11-08 08:29:14.469,FE: TAF: order of change groups is not validated,"add validation for the order of changegroups, see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1561

make sure to not show duplicate messages",8
96905736,2021-11-08 08:27:29.154,FE: TAF: updating of TAC in FE is not consistent,"- When opening a TAF form, the changegroups are not included in the TAC message
- When focussing, you can see a brief trigger of the loading. The TAC should only change when new data or missing data should show, not between loading

![Screen_Recording_2021-11-09_at_10.05.24](/uploads/abeeb48089d7ee5039195aa80cf88b6a/Screen_Recording_2021-11-09_at_10.05.24.mov)",3
96905437,2021-11-08 08:22:22.002,BE: Filename SIGMET/AIRMET IWXXM message is incorrect,for details see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1613,3
96905144,2021-11-08 08:18:49.786,"BE: Bug: Cancel VA SIGMET: volcanic ash ""MOV TO FIR"" is incorrect in IWXXM 3.0",avi-messageconverter fills in the wrong FIR name for move to FIR,3
96905120,2021-11-08 08:18:15.396,Deploy 1.0.31 to PRD 16 or 18 nov,,3
96905007,2021-11-08 08:17:17.699,Deploy new version to ACC monday 8 nov,"when ACC is ready: 
- add release notes
- move the deployed user stories to workflow: PO-validation
- send message to Marco van den Berge (geoweb_dev_po_de slack channel) so DE's can start testing",3
96904799,2021-11-08 08:12:44.985,FE: move knmi internal WMS services to knmi-geoweb app,"these files are currently in core, should be moved to knmi-geoweb app

- KNMILayers
- KNMIServices",2
96903490,2021-11-08 07:44:02.248,FE: theme prepare MUI5 remove replace wrappers with Grid,"Some stories in theme library have a div root wrapper, this can cause issues with tests in MUI5 update. If we replace them with Grid it will work easier",2
96806435,2021-11-05 15:27:40.526,FE: fix flaky sigmet-airmet test ProductListRow,"There is a flaky test in sigmet-airmet making the pipeline fail sometimes see: https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1753344884

Seems to be the following lines:
- (src/lib/components/ProductList/ProductListRow.spec.tsx:298:30)
- (src/lib/components/ProductList/ProductListRow.spec.tsx:316:30)",3
110299989,2022-06-17 13:21:15.314,FE: Make snapshots work also for Apple M1 chips,The container currently used for running snapshot tests doesn't work with Apple M1. We need to update the docker container.,5
110299639,2022-06-17 13:16:28.835,Fix breaking syncgroups when reloading preset,Syncgroups stop working for a view after reloading the current preset. This is a remaining bug of https://gitlab.com/opengeoweb/opengeoweb/-/issues/2107,5
110285427,2022-06-17 10:23:54.883,FE: rename ConfigurableMapWithSlider,"In https://gitlab.com/opengeoweb/opengeoweb/-/issues/2186 we've renamed some types and one got removed. Inside the componentsLookUp for core, we render a template based on componentType. Because 1 componentType has been removed in the previous ticket, we have a leftover component called ConfigurableConnectedMap (because now we using both for map with or without timeslider the ConfigurableMapWithSliderConnect component). We can combine these components and rename it:

 
- [x] - put the content of ConfigurableConnectedMap inside ConfigurableMapWithSliderConnect
- [x] - remove ConfigurableConnectedMap (move the tests)
- [x] - rename ConfigurableMapWithSliderConnect to ConfigurableMap 
- [x] - make sure all tests are still valid",3
110278773,2022-06-17 08:33:01.294,"BE: add scope column to Database for TST, ACC, PRD","presets deployment for TST failed because the scope column was missing. It needs to be added to the presets database for TST, ACC and PRD",2
110277904,2022-06-17 08:17:48.439,BE: deploy to ACC (with presets),Solved in https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/293,1
110245885,2022-06-16 14:49:35.056,BE: deploy to ACC (without presets),,1
110245877,2022-06-16 14:49:18.332,FE: new release,,1
110167028,2022-06-15 13:16:42.093,FE: Change PresetLayer enabled to a boolean,Change enabled to a boolean of a PresetLayer type. Don't forget to do this also in https://gitlab.com/opengeoweb/fmi/fmi-aws-config/-/merge_requests/41/diffs,3
110139447,2022-06-15 07:34:10.737,BE: Add usual presets to Preset BE,@sanderdesnaijer will provide a json per preset.,3
110077119,2022-06-14 09:16:37.058,FE: Rename component types,"ConfigurableMultiMapWithSlider should become MultiMap

ConfigurableMapWithSlider and ConfigurableMap should become Map

FE repo and FMI-AWS-config repo",3
110006379,2022-06-13 09:09:03.397,BE: Investigate new stop-dev job in deploy-presets-backend repo,"See comment here: https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/merge_requests/1#note_988455432 

Ask for help (maybe CPT?)",2
109999058,2022-06-13 07:33:51.317,FE: update PRESET_BACKEND_URL to tst environment once TST is available,"update PRESET_BACKEND_URL to the url of the presets tst environment in:

- `apps/geoweb/src/assets/knmi.config.json `
- `apps/knmi-geoweb/src/assets/config.json `

the url: `gwpresetsbe-tst-master.geoweb.dev.knmi.cloud`",1
109996787,2022-06-13 06:50:09.049,FE: Taf cleanup (story) Provider wrappers,"See if we can limit the (story)Providers we use. In presets lib we only use two: one for unconnected components and one for connected, see if we can use that for taf as well.

Check other libraries and create other tickets accordingly. -->
https://gitlab.com/opengeoweb/opengeoweb/-/issues/2212
https://gitlab.com/opengeoweb/opengeoweb/-/issues/2211",2
109898453,2022-06-10 07:50:46.844,BE: Configure Presets BE with Cognito part 1,"# Test:

- Check out https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1583 and start `nx serve knmi-geoweb`
- Make sure the frontend is started over http://localhost:4200
- Make sure you are on connect
- Go to the layermanager, check if presets are listed.

# Description

A new endpoint `viewpresetauth` was added for authenticated preset requests. The existing `viewpreset` is left unchanged. The `viewpresetauth` endpoint is useful to have, because it will give a 401 unauthorized error if no access token is provided or if something is misconfigured.

You can check https://gwpresetsbe-dev-check-auth.geoweb.dev.knmi.cloud/viewpreset and https://gwpresetsbe-dev-check-auth.geoweb.dev.knmi.cloud/viewpresetauth

By using the command `curl -k --location  https://gwpresetsbe-dev-check-auth.geoweb.dev.knmi.cloud/viewpresetauth' --header 'Authorization: Bearer ....'` you can sign in from the command line.

- Nginx https, ssl and generation of self signed certs can be switched off by setting the environment variable`PRESETS_ENABLE_SSL=FALSE`. The http port can be set with `NGINX_PORT_HTTP`. Nginx should not use https by itself when it is deployed behind an AWS elastic load balancer and should only listen to HTTP.
- Nginx communicates with cognito to get user information based on the OAuth2 Bearer token send with the `viewpresetauth` request. The userinfo endpoint of the identity provider can be set via the `OAUTH2_USERINFO` environment variable.
- For CORS, nginx needs to know the domain of the frontend. This needs to be set with the `FRONTEND_APP_URL` environment variable.
- Nginx sets the ""Geoweb-Username"" header for the flask presets backend
- An endpoint is deployed at https://gwpresetsbe-dev-check-auth.geoweb.dev.knmi.cloud (only accessible via connect). 

The cognito userinfo endpoint and the location of the frontend are configured from CI/CD via the OAUTH2_USERINFO and FRONTEND_APP_URL variables. These have been set for dev, tst, acc and prd.

# Solved Issues

- Nginx in the ECS cluster will talk via the KNMI squid proxy with gitlab or cognito. Squid has some quirks, therefore only TLSv1.2 and TLSv1.3 can be used. (Only TLSv1.3 icm gitlab). 
- The EC2 load balancer uses by default the http/2 protocol. When running http/2, it changes all HTTP headers which are forwarded to nginx to lowercase. Disabling http/2 solves this issue. Nginx expect the authorization header to be `Authorization` with strict casing (not `authorization`)
- Because of CORS, the frontend and the backend needs to match domains. Therefore FRONTEND_APP_URL must be configured, which is the location of the GeoWeb Frontend.
- In the ECS cluster, nginx needs to be accessed via HTTP. It should be started without the self signed HTTPS certificate. It is now possible to switch this off and run nginx over http. For HTTPS, the Elastic Load Balancer will do the HTTPS offloading and handle the SSL certificates. This can be switched off in nginx by setting the environment variable `PRESETS_ENABLE_SSL=FALSE` and setting the `NGINX_PORT_HTTP` environment variable.

Closes https://gitlab.com/opengeoweb/opengeoweb/-/issues/2180

# MR for presets-backend (this ticket)
- https://gitlab.com/opengeoweb/backend-services/presets-backend/-/merge_requests/16

# Related MR for testing purposes
- For presets-backend deployment: Then https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/merge_requests/17
- For knmi-geoweb: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1583",5
109897448,2022-06-10 07:36:53.979,"BE: Configure ACC, TST and PRD for presets BE","- Replicate what we have for dev at the moment, adding acc, prd, and tst. 
- Make sure that the naming makes sense.",3
109894775,2022-06-10 06:49:23.828,FE: presets create snapshot test for MapPresetsMenuItem,"Would be nice to snapshot the contents of a MapPresetsMenuItem, since this hold our custom list of actions. For this, the shared ToggleMenu needs also be able to show open on default. 

- add prop to shared ToggleMenu isOpen
- create snapshot test for shared ToggleMenu
- create a new story for MapPresetsMenuItem, and add isOpen to that story and create snapshot test",2
109827358,2022-06-09 07:55:28.113,FE: TAF add action to list error,"There is no way for the user to refresh the list once it failed, except refreshing the entire application and re-opening the TAF. Add a retry button to the alert banner when the list call fails. Text: ""Try again"", it refreshes the list and closes the banner.

Remove the close option from this banner.",2
109827164,2022-06-09 07:51:47.117,FE: add optional action to alert banner,"add optional action button to alert banner

button always same type: button variant flat

design:
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926cd694dd45fb5dcec9",2
109826633,2022-06-09 07:44:06.894,FE: TAF extend the active location to connect to the left tab,"css only solution

![Screenshot_2022-06-08_at_15.07.36](/uploads/b47f5a8e376ee7e0ca21f2d329654c57/Screenshot_2022-06-08_at_15.07.36.png)",2
109722006,2022-06-07 14:39:40.701,BE: move showTimeSlider key inside mapPreset key,"The case of MultiMap has been removed for now. 

This ticket remains pending until the API has been discussed and documented.",1
109693289,2022-06-07 08:18:45.500,BE: Add preset backend URL to serverless backend when deploying,"Set the variable PRESET_BACKEND_URL in the config.json for TST, ACC and PRD

TST: `""PRESET_BACKEND_URL"": ""https://gwpresetsbe.geoweb.dev.knmi.cloud""`

ACC: `https://gwpresetsbe.geoweb.acc.knmi.cloud`

PRD: `https://gwpresetsbe.geoweb.knmi.cloud`


Merge request: https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/292",2
109693105,2022-06-07 08:15:40.514,FE: Link to preset BE URL,Change both KNMI config files,1
109692368,2022-06-07 08:04:39.968,FE: Show save and delete buttons for user presets in the list,"No functionality yet. 

Add snapshots.",2
109692133,2022-06-07 08:00:09.422,BE: Rename 3HModelRunOverview to ModelRunInterval,- Make sure the documentation is updated as well.,1
109691963,2022-06-07 07:57:02.075,FE:  Add hourly Harmonie multi-tiled preset,Only for KNMI app,2
109691507,2022-06-07 07:49:40.900,FE:  Make HarmRefTimePreset  have configurable interval and rename,"- Name should be more generic HarmRefTimePreset could become ModelRunInterval, with a configurable interval (in hours).
- Make sure no added funcionality (everything works as before).
- Also update FMI presets that use this",3
109691266,2022-06-07 07:45:03.511,FE: List available WMS services alphabetically in WMS loader,,2
109691009,2022-06-07 07:40:31.973,Write US about Global notification for different modules of GeoWeb,"Based on design, prepare meeting to create the US.
Schedule for week of June 13th

![Screenshot_2022-06-09_at_09.11.32](/uploads/58c5992065546f0e3969e27ebecf14a7/Screenshot_2022-06-09_at_09.11.32.png)

![Screenshot_2022-06-09_at_09.15.59](/uploads/68244b56e9797ee9c84cfa263e05d0dd/Screenshot_2022-06-09_at_09.15.59.png)
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926c9c931a2a11621c31

![Screenshot_2022-06-09_at_09.25.00](/uploads/4791f7c1894789ee7ddaf4a232c6b22e/Screenshot_2022-06-09_at_09.25.00.png)
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bf652767ebb4431c32f0",3
109690183,2022-06-07 07:26:16.744,BE: Implement differenciation variable in /viewpresets,"When listing presets, add a key to differentiate whether it's a system preset or a user preset. 

For example `scope: system/user`

Make sure that the call returns this new property (that will be required), ~~and that the README is updated.~~ (README will be updated after review of current API documentation by FMI and MetNorway)

How to check:
- `ListViewPresetItem` in `src\preset_schemas.py` updated to require `scope` with values ""user"" or ""system""
- `scope` added in `staticpresets\viewpresets.json`
- column `scope` added in database setup (`src\dbactions.py`: `dbcreatetables` and `dbinsertviewpreset`)
- `scope` read from `viewpresets.json` and loaded in `src\app.py`
- test written to check contents of scope in `src\test_typing_schemas.py`)
- **Can test if everything works by setting up database in docker or locally (see [README](https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/README.md))**
- Check presence of `scope`key by making a `\viewpreset` request: [Docker](https://0.0.0.0:4443/viewpreset) or [Local/Flask](http://127.0.0.1:8080/viewpreset)",2
109689898,2022-06-07 07:19:42.813,BE: Preset API documentation,"Document what we have now.

Let FMI and MetNorway review

FE: Renaming of some basic map types https://gitlab.com/opengeoweb/opengeoweb/-/issues/2186 
BE: Validate scope: https://gitlab.com/opengeoweb/opengeoweb/-/issues/2157",2
109689778,2022-06-07 07:17:34.303,BE: Organising meeting on vulnerabilities with CPT,"- Adapt CI/CD so vulnerabilities detected don't break dev deployments, but generate warnings or get logged.
- The outcome of https://gitlab.com/opengeoweb/opengeoweb/-/issues/1857 about deploying same versions of lambdas and containers to acc and prd is that there is still some work to be done. Lambdas are re-used, but the 2 containers are not re-used or are being re-built unnecessarily. Problem however is that changing CI/CD for deployment to PRD is risky and hard to test.",1
109561380,2022-06-03 13:30:03.783,FE: TAF import from tac overview is not overwriting all values,"- make a taf with all base forecast fields filled in
- save or publish it
- now edit it again, and import a TAF from TAC overview that has some empty fields in the baseforecast

Expected: 
- the TAF is imported exactly as is, so including the empty fields

Actual:
- the old values remain for fields that were empty in the imported TAC. In your screen you now have a combination of 2 Tafs which is very confusing.

Possible solution: 
- When setting the form, also set empty values. It can probably remove some functionality when publishing the form or importing.",3
109496352,2022-06-02 09:50:10.289,FE: create a setMapPreset action for core and reuse for ConfigurableConnectedMap (part 1),"Create a new setMapPreset action in core. Fire it in ConfigurableConnectedMap, and let saga's handle all actions that are now in mount defined. All props in ConfigurableConnectedMap (but className) can be replaced with initialProps:
```
export const ConfigurableConnectedMap: React.FC<ConfigurableConnectedMapProps> =
  ({  
    className,
    ...initialProps
  }: ConfigurableConnectedMapProps) => {
```

For the initialProps type, check `MapPresetInitialProps ` in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1538/diffs#15e39b4ce825c58fc7ae1461d237abee5f6fe6eb_47_49",3
109427394,2022-06-01 07:58:55.896,FE: create a setMapPreset action for core and reuse for ConfigurableConnectedMap (part 2),Fire the new action core.setMapPreset inside the preset lib inside MapPresetDialogConnect. Don't forget to remove all files in `MapPresetsDialogConnect.utils`,2
109375003,2022-05-31 12:54:46.379,FE: Presets fix active presetname in dialog,"In the screenmanager when having the layermanager is open and switching from active layermanager, the active preset is getting reset. The active preset name does not corresponds on the chosen one. (do after https://gitlab.com/opengeoweb/opengeoweb/-/issues/2129)

Suggested solution (core can't import anything of `presets` lib):
- core: create a new action `activePresetId` for the `map` reducer in `core` lib, with param `mapId` and `presetId`
- core: create a new selector, getActivePresetId for `core` which takes a `mapId` as argument
- core: `map` reducer changes the `presetId` (or activePresetId) of the map
- presets: import this action + selector in `presets` lib and fire it with correct params, and remove the local state of presetId",3
109367182,2022-05-31 10:46:45.401,FE: Layermanager title does not fit because of Preset menu,The Layermanager title does not fit because of Preset menu. Probably we should fix it with `text-overflow:ellipsis`. Found in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1534#note_965846168,2
109294972,2022-05-30 08:01:21.819,FE: investigate if we can exclude dep graph of story utils files,See if we can exclude the dependency graphs between libs for specific folders. For example in screenmanager we want to exclude the dependencies for storybook files,3
109294657,2022-05-30 07:55:07.644,FE: setup api for preset lib,"See for example the taf componentslookup example, use the `ApiProvider` wrapper and create (fake) api files and hookup with connected MapPresetsDialogConnect",2
109294474,2022-05-30 07:52:12.443,FE: Move presets dialog to preset lib,Move PresetDialog component to presets lib,2
109294280,2022-05-30 07:49:02.327,FE: create new presets lib,"Create new empty nx project named `presets`. with storybook, snapshots, linting and one demo component",2
109032526,2022-05-24 11:32:54.263,FE: Add snapshot tests for MapPresetsDialog,"snapshots are needed, but better to do if after we have the base logic and connection running. The Menu component is a bit hard to test with open without any js errors

Make sure to enable the pipeline job `snapshot-test-presets` in `.gitlab-ci.yml` file.",2
108960251,2022-05-23 08:59:54.230,FE: Show mappreset dialog in knmi-geoweb,"Show the mappreset dialog in knmi-geoweb based on whether a preset backend is defined in `config.json`

This affects only knmi-geoweb. If the property `PRESET_BACKEND_URL` is not defined, it simply does not do anything.

If MapPresetsDialog component is not ready, just render a div with a data-testid, which we can overwrite with the component when it's ready",3
108959194,2022-05-23 08:43:09.573,Display warning properties in GeoWeb application,"Acceptance criteria / TODO:
- Dummy data is received from cap/src/lib/components/MapViewCap/geoJsonExamples.ts
- Implement functionality so that map can can be clicked to display warning properties --> example in core/src/lib/components/ReactMapView/AdagucMapDraw.stories.tst rows 182 - 211",3
108958282,2022-05-23 08:32:41.217,FE: Change map preset using dialog,"Include behaviour into the dialog so that we can change the preset. See if we trigger and action (onChangeMapPreset) or pass a property. 

Create a storybook story for this.",3
108958080,2022-05-23 08:29:28.650,FE: Create Preset Dialog,"Show the list of presets from the BE. No options for now, but we can show the icons. 

Do a separate storybook for it. Also do snapshot test with dummy layers. 

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60992c1ecde3bf10bec429d2",2
108957557,2022-05-23 08:22:52.501,FE: Use configurable header to insert preset input into Layer Manager,"Use input fields with a text (no styling for now, use default components) in the Layer Manager. The component should include the MapPresetDialog component. Show a text: _Map preset (not saved)_

This change should only affect core 

https://zpl.io/aw3Nk11",3
108957272,2022-05-23 08:18:41.895,FE: Make tool header configurable,"By default, the drag icon will be rendered. 
If something is configured, it will be added to the header. 

Look at the design: https://zpl.io/aw3Nk11 

Make a storybook example for the shared component.",2
108955719,2022-05-23 07:59:13.594,BE: Define typing of presets using OpenAPI,"Check that the matching is logical (and that it matches the FE, if it does not FE will be changed accordingly).

Ensure that the typing stays consistent over time and is robust.

Do it in the geoweb-serverless-backend repo (expand pre-existing spec).

Testing:
- Set up the presets backend in a Docker file ([readme.md](https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/README.md))
- While building the Docker, tests are being run
- In the test valid and invalid responses from a mock database are tested
- All tests should pass",3
108955437,2022-05-23 07:55:40.252,BE: Rename endpoint from mapPreset to viewPreset,We should use the word view because it can also include timeseries.,2
108955183,2022-05-23 07:51:06.220,Deploy to PRD (June 2nd),,2
108952169,2022-05-23 07:11:49.887,KNMI ECR Vulnerability report,A vulnerability appears in v.1.1.2 of _geoweb-serverless-backend_ (9th May).,3
108864710,2022-05-20 11:13:58.490,FE: Taf Discard does not clear form values after importing TAC,Press import TAC > Discard > Publish. Even with an empty form you will post the form values of the imported TAC,2
108745597,2022-05-18 13:04:40.210,Delete WMS services stored to local storage,,3
108733041,2022-05-18 09:32:39.866,Layer Select: Fix abstract max lenght on Layer Select layers on Safari (Mac),"Issue:

- Abstract texts are way too long in the UI of single layer in Layer Select when using Safari on Mac

Example:

![Screenshot_2022-05-17_at_15.50.48](/uploads/64846294839caf45d4d1b57594be84bb/Screenshot_2022-05-17_at_15.50.48.png)

Test Criteria:
- Abstract text should fit inside of the container of a single layer in the list",5
108725071,2022-05-18 07:32:14.684,Use presets in the new layer select,"Issue:  
New LayerSelect does not use configured (presets) wms services.

Correct behavior:  
List of configured (in `apps/geoweb/src/assets/initialPresets.json`) wms services are used.",5
108720402,2022-05-18 06:05:42.013,CAP: Create storybook for CAP componentsLookUp,"ToDO

- Create a storybook for CAP componentsLookUp for using dummy data more easily in the components (No need to update screenPresets to test different datasets)
- Create tests for storybook

Acceptance criteria
- Storybook should show layout where CAP map is left, and CAP list is on right (similarly to CAP-preset in geoweb staging)",1
108674586,2022-05-17 11:05:48.059,BE: presets-backend nonexisting preset results in crash,Solve by returning a not found message,8
108623908,2022-05-16 15:25:13.764,FE: Refactoring service store for FMI,"Currently, services store and layerSelect stores activeServices array use services URL address as an id, this is a problem, as in LayerSelect it should be possible to edit services in the store, including URL and id should be the one variable that is never changed in order to keep everything correctly synced.

Solve in following order:
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1772
- https://gitlab.com/opengeoweb/opengeoweb/-/issues/1883
- https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1864",8
108609480,2022-05-16 12:28:09.334,Reload view when reselecting current screenmanager preset,"When selecting a screenmanager preset (from the sidebar), the selected view always gets set to a consistent initial state.

However, when the selected preset is the same as the current selection, nothing happens.

Instead, the view should refresh anyway, as if the user selected a different preset and then switched back to the current one.",5
108593529,2022-05-16 07:58:54.073,FE release,,2
108593524,2022-05-16 07:58:44.113,Deploy to ACC,,2
108592723,2022-05-16 07:45:23.647,FE: fix test coverage not showing anymore in merge requests,"Test coverage in merge requests got removed from project settings in the latest gitlab release, to get it back we have to configure it in the yml file: https://docs.gitlab.com/ee/ci/pipelines/settings.html#add-test-coverage-results-using-coverage-keyword",1
108592634,2022-05-16 07:43:25.465,BE: Research authentication mechanism for presets backend,"Research how authentication for presets can be arranged.

Plan is is to have the checking of authentication in the load balancer or proxy in front of the preset-backend. The load balancer or proxy should detect the OAuth2 JWT token and validate it. A flag via http headers can then be set for the presets backend, like a username. This can be used in the presets backend to know if someone is signed in.

- This should work with the AWS deployment, possibly in the ELB or the API GateWay
- This should work for the nginx container used in docker compose

Have a look at https://curity.io/resources/learn/token-sharing/. Sharing the JWT to other backends might not be a good idea.",3
108238200,2022-05-09 11:34:58.345,Update the GeoWeb version in the FMI environment,"- [x] Test current FMI presets with the new GeoWeb version
  - https://gitlab.com/opengeoweb/fmi/fmi-aws-config/-/tree/master/env/fmi/presets
- [x] Create MR to update the version
  - https://gitlab.com/opengeoweb/fmi/fmi-aws-config/-/blob/master/.gitlab-ci.yml#L5 
- [x] Agree on an update schedule (FMI DE's/PO?)
  - Create a list (from release notes) of changes, bug fixes, etc. 
- [x] Notify users of the update through an internal Slack channel",3
108234894,2022-05-09 10:36:25.143,Remove loop button related code,"Acceptance criteria / TODO:
- Button is not present in the UI anymore
- Layout is adjusted if needed after removing button
- Related tests are removed
- Other related code is deleted including comments",3
108234555,2022-05-09 10:29:56.838,Warning area is highlighted when alert is clicked on a list,Not asked in CAP MVP scope so closed based on that,8
108234471,2022-05-09 10:28:47.606,Warning area is highlighted when clicked on a map,"Suggestion for solution:

1. Place original geoJson into a const, for example: `const dataNoHighlight = geoJson`
2. Create state for example const [dataInUse, setDataInUse] = React.useState()
3. use dataInUse as geojson prop, for example: `<MapViewLayer geojson={dataInUse}>`
4. Update onClickFeature function to have two cases

      1. if(selectedFeature) --> if necessary take deep clone of dataNoHighlight using lodash.cloneDeep() and edit it

for example:

const clonedGeoJson = _cloneDeep(dataNoHightlight)\
const editedGeoJson = clonedGeojson.find()...\
setDataInUse(editedGeoJson)

This should set show hightlights on map and switch hightlights between clicking polygons, while leaving dataNoHighlight untouched


      2. else --> set dataNoHightlight to dataInUse. For example :  `setDataInUse(dataNoHighlight)` 
(This should clear all highlights when clicking outside of polygon)",3
108228618,2022-05-09 08:56:39.739,Display warning properties on map when clicking polygon,"Acceptance criteria / TODO:
- Storybook to be used is: http://localhost:5000/?path=/story/components-reactmapview-adagucmapdraw--map-6
- Properties are displayed in separate section on top of map
- If no polygon is selected (by default) no info section is shown
- When warning area is selected, info section is shown
- If warning are is already selected, info section details are updated
- If user clicks map section where there is no warning area, info section is closed

Example of properties in geojson that can be passed to map component
```
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {
        stroke: '#8F8',
        'stroke-width': 4,
        'stroke-opacity': 1,
        fill: '#33ccFF',
        'fill-opacity': 0.5,
        country: 'Norway',
        warning: 'Wind',
        details: [
          {
            Event: 'Gale',
            Sent: '2022-04-06T06:42:09+00:00',
            Expires: '2022-04-06T14:00:00+00:00',
            Area: 'Andenes - Hekkingen',
            Web: 'https://www.met.no/vaer-og-klima/Ekstremvaervarsler-og-andre-farevarsler',
            Sender: 'noreply@met.no',
            Identifier: '2.49.0.1.578.0.220406064209738.1298',
          },
        ],
      },
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [16.062667, 69.332167],
            [16.458667, 69.425667],
            [17.759667, 69.687167],
            [17.799667, 69.650167],
            [18.099667, 69.516667],
            [16.8645, 69.316333],
            [16.333, 69.233],
            [16.062667, 69.332167],
          ],
        ],
      },
    },
```",5
108226521,2022-05-09 08:23:43.489,Show different color polygons on map,"Acceptance criteria / TODO:
- Geo-json is used as data format for dummy data
- Color and opacity is specified in geo-json feature collection / properties",5
107928188,2022-05-03 13:58:58.060,FE: map zoom action is not updating the mapstore when the map is not part of any sync group,"When zooming or panning a map view in screen manager, the action GENERIC_SYNC_SETBBOX is triggered. This should update the map store, but that only works if the map is part of a sync group. You can check this in the Redux devtools.

Currently zooming the map only updates the syncronizationGroupStore when the map is not part of any sync groups. This causes the map store to not be up to date with the actual bbox of the map, and then splitting a view results in a new map with an old bbox.

TODO: 
- make sure zooming the map updates the map store also when the map is not part of any sync groups.
- add test",2
107905685,2022-05-03 07:46:29.333,FE: investigate TAF missing unit tests,"See if we are missing some tests in taf, if so create tickets for the backlog.",3
107902548,2022-05-03 06:47:37.669,FE:  show confirmation dialog when closing the TAF screen in screenmanager when there are unsaved changes part 2,"After part 1 the main logic is in, now implement it for TAF",4
107901888,2022-05-03 06:29:20.230,FE: TAF add missing unit tests of buttons and form post status,"Some tests are missing regarding buttons and form post statusses. Since it's very important that this keeps working, we should add some tests for it. Found in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1481#note_932406281",2
107871053,2022-05-02 12:43:38.699,FE: TAF: extract button draft state logic,Extract the logic of the save button where we convert action to new draft action. Also we can remove some complexity,2
107528120,2022-04-29 09:46:14.835,FE: Taf reset form dirty on save draft,The state of the form isDirty is not getting reset after saving as draft,2
107395275,2022-04-28 14:34:07.454,FE: move screenmanager toolbar actions to intercept actions,"Move them to a seperate file where we can acces the redux state. After that other blocking tickets are some easier, as we can use redux",4
107394332,2022-04-28 14:18:22.498,FE: update TAC in form after importing from TAC Overview,"After importing a taf from TAC Overview into the edit form, the TAC in the form should be updated so it matches with the new form content.

It should update the TAC after every import.

Once it works, add this check to the TAF import e2e test in Geoweb and knmi-geoweb
![image](/uploads/c057c0c6108f58f129da5df17556c05c/image.png)",3
107386440,2022-04-28 12:12:07.226,FE: prepare TAF for autosave,Move some logic to prepare for autosave,4
107361738,2022-04-28 07:42:31.811,FE: move useDraftFormHelpers to taf lib,"its currently in shared lib, but it's only used in TAF so should be moved there

EDIT: closed because its also used in sigmet-airmet",1
107210268,2022-04-26 11:03:03.555,TAF: remove Providers folder,"Not needed anymore, so we can remove it",1
107205734,2022-04-26 09:50:47.349,TAF: js error on small screen,"Probably a Tab on MobileTacContainer has a wrong value 

![Screenshot_2022-04-26_at_11.49.57](/uploads/d8757895a068ebceb2125f3bb87f5d70/Screenshot_2022-04-26_at_11.49.57.png)",2
107201993,2022-04-26 09:02:32.186,FE: Taf issue time in the form is not updated after publishing,"Directly after publishing a TAF, the issue time is not updated in the form, only after switching tabs it shows correctly.



![image](/uploads/060e65c04038eeef986e2c3e6a55513a/image.png)",4
107122373,2022-04-25 09:02:07.859,Fix duplicated layers dimension values getting reset when map updates,,8
107121127,2022-04-25 08:44:46.707,Do a functional test of TAF,"- after new FE release is deployed on TST
- go through entire TAF functionality to discover any issues
- make tickets if needed
- remove your name from the Assignees list when you're done",8
107121043,2022-04-25 08:43:27.823,Make new FE release and deploy to ACC,,2
107120959,2022-04-25 08:41:51.885,Design review TAF implementation,"When all TAF implementation is finished and deployed to Knmi tst or acc environment, Didier can go through it to check if we missed anything.

Devs will provide valid TAF data for testing. --> you can find some real life example TAFs here: https://www.knmi.nl/nederland-nu/luchtvaart/vliegveldverwachtingen

url for ACC environment: https://geoweb.acc.knmi.cloud/",2
107120517,2022-04-25 08:36:12.042,FE: Extended adagucmapdraw with a clickFeatureCallback function,,2
107120381,2022-04-25 08:34:12.280,FE: speed up pipeline,,8
107120276,2022-04-25 08:32:27.641,Deploy ACC to PRD - 3 May,,1
107120243,2022-04-25 08:31:45.450,Meeting to discuss forecaster feedback with PO - 29 April 10h (instead of refinement),discuss the findings from https://docs.google.com/document/d/1IWSP0VzCKFb9rL3VPbD2XYTuonbMZDGYKYDYt__DAMM/edit with PO and add stories if needed,8
107119964,2022-04-25 08:27:36.842,Research drawing software for warnings,"- Maarten and Ernst will research drawing tools
- Timeboxed, 1 day.

Result: Document with findings about drawing tools and proposed solution.",5
107116701,2022-04-25 07:42:20.259,BE: make container for preset backend,"
- make a container in preset backend
- make a tag with a version

make sure that the solution will be reusable for the other organizations with different infrastructures.",4
107116322,2022-04-25 07:37:23.584,BE: make preset backend run in KNMI cloud,"Goal: deploy preset backend to test environment so FE can use it to fetch presets

- deploy the container with database in geoweb-serverless-backend (similar solution as we have avi-messageconverter)",8
107115124,2022-04-25 07:16:10.835,Import TAF from TAC overview into edit form (part 2),"Should only copy data to not-disabled and non-hidden fields (Actually import as if user typed in the values and then do the normal validation)

* Clicking ![image](https://gitlab.com/opengeoweb/geoweb-assets/uploads/562554c112f509342a57a8ebf112e5c5/image.png) the TAC is imported in the Edit mode.
* After importing the validation should be trigger and errors displayed in the Edit mode as usual.",4
107114748,2022-04-25 07:08:23.155,FE: Implement autosave for TAF,,8
107016019,2022-04-22 08:18:29.278,FE: Taf remove ToolContainerDraggable in storybook demos,"ToolContainerDraggable in stories can be removed since we use screenmanager now.

Keep 1 example story with ToolContainerDraggable, the other stories should be simple, without screen or container.",2
107012210,2022-04-22 07:13:07.104,FE: TAF clear form values when changing TAF,"When change from new TAF > filled in TAF > back to new TAF, and trying to publish, you would expect errors as the field is empty. But you can post it with the form's previous values.",2
106972113,2022-04-21 13:37:42.276,Release to ACC,,1
106971651,2022-04-21 13:28:42.505,create new FE version,,1
106958416,2022-04-21 09:30:04.533,FE: Move TafComponentsLookup to Taf library - investigation,"Component is now in knmi, should be part of the Taf module so other apps can use it as well

Make additional tickets if needed",3
106950403,2022-04-21 07:17:07.745,Prepare clickable objects meeting,,2
106917206,2022-04-20 14:48:02.486,FE: Taf remove onFormDirty from TafPanel and TafForm,After https://gitlab.com/opengeoweb/opengeoweb/-/issues/1998 isFormDirty can be accesed directly by `useForm` in TafLayout so no need to pass in TafForm and TafPanel anymore as props,2
106916981,2022-04-20 14:45:47.890,FE: TAF IssuesPane should stay open and update when selecting a different TAF part 2,"Now the provider is accessible, fix it to let it stay open",4
106891985,2022-04-20 08:49:03.954,FE: Taf change tooltip position,"The tooltip is blocking some buttons, would be better to place it to the right side of the location on hover

![Screenshot_2022-04-20_at_10.48.25](/uploads/024a3c62cd10dffd6eef1749b6d5f5e5/Screenshot_2022-04-20_at_10.48.25.png)",2
106694963,2022-04-15 13:37:51.558,FE: Bug with TAF headers (one timeslot ahead),"The headers showing the timeslots are one timeslot ahead (that is, 6 hours ahead). 
The following image was taken at around 13:30 UTC, yet the header states the current timeslot is 18:00 instead of 12:00. 

![image](/uploads/82903b34354ca9437cd4978adf68b505/image.png)",2
106680986,2022-04-15 07:17:11.381,FE: Taf issues button briefly shows '1 issue' when user switches taf locations,"see https://gitlab.com/opengeoweb/opengeoweb/uploads/1e3b5066e1d702773c65327571371c3e/test-2022-04-14_17.48.20.mp4

Solution as discussed with Marcel: start the form in draft mode instead of publish mode, so the required field errors are not shown when switching location",3
106642587,2022-04-14 13:03:46.278,FE: TAF confirmation dialog is still showing after changes are saved,"- edit a taf form
- do not save
- click the tab for a different location
- confirmation dialog shows -> this is correct
- click GO BACK in the confirmation dialog
- click SAVE
- now click the tab for a different location
- confirmation dialog shows **-> should not show since you just saved the changes**

also add a test for this scenario",2
106642297,2022-04-14 12:58:54.537,FE: show confirmation dialog when closing the TAF screen in screenmanager when there are unsaved changes part 1,"When user has changed a TAF and not saved yet, and then closes the TAF screen or selects a different screenpreset, currently the TAF screen will be gone and the changes are lost, without warning the user.

It would be good to show a confirmation dialog before continuing if there are unsaved changes.

Use the same message we have for switching tabs.",8
106516107,2022-04-12 10:18:29.759,Organize meeting about CAP parsing with Norway,"Acceptance criteria / TODO:
- Meeting is scheduled with Norway
- Attendees of the meeting is figured out 
- Outcome is an answer that does they have already reusable code to parse CAP XML",1
106514262,2022-04-12 09:50:24.989,Create screen preset for CAP warnings,"Acceptance criteria / TODO:
- View is created where left side contains map with polygon #2022 and right side list of warnings #2024 
- Screes is split 50% 50% for views",8
106513547,2022-04-12 09:41:07.781,Create UI component for list of CAP warnings,"Acceptance criteria / TODO:
- Display list of warning components as defined in #2023 
- Use array of CAP warning data to render child components with correct props
- User could scroll to the bottom of the warnings",5
106512355,2022-04-12 09:24:15.953,Create UI component for single warning in CAP warning list,"Acceptance criteria / TODO:
- Same or similar layout is used as Sigmet/Airmet
- By default, properties are not shown for an alert
- Picture is for reference and should not be applied as is
- Warning list item contains fields: Event, Severity, Expires
- Severity color is applied as warning background color

![CAP](/uploads/7c1276adf09c37587708c6f4fa844b4b/CAP.PNG)",5
106511944,2022-04-12 09:18:43.234,Implement CAP map view component,"Acceptance criteria / TODO:
- Placeholder is replaced with a view which has a map with polygon 
- Geo-json is given to the map and it should be drawn
- Hardcoded geo-json values are coming from the Storybook story
- One polygon is enough to be visualized in the map",8
106506743,2022-04-12 08:05:33.224,Components lookup component is created,"Acceptance criteria / TODO:
- Components lookup is created to new CAP library
- Tests are created to CAP library

Note: Need to make sure that all components are usable before adding them to the GeoWeb application",5
106506411,2022-04-12 08:00:22.203,FE: adjust confirmationDialog component to match design,"https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926a6dcae148dfbb7e7f

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6093e69605f5e03497c1132d

The confirmation dialog in shared should be updated to match design:
- button text should not be uppercased
- the space between title and text should be smaller
- there should be a max width
- the Go back button should be tertiary",2
106505134,2022-04-12 07:42:40.635,FE: Add close button to alert banner,"When an error happens in the BE and the alert banner is displayed, users cannot close the banner, they need to close the whole TAF screen first, which is not convenient. 

It would be desirable to have a close button. 
The close button should be optional. 

see design [here](https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926cd694dd45fb5dcec9)",4
106504964,2022-04-12 07:41:26.055,Adjusting column values by scrolling with mouse in Mac,"* User scrolls over a column cell and holds a keyboard button down at the same time
  * column cell values will change
* User scrolls over a column cell but **doesn't** hold the keyboard button down at the same time
  * column cell values will not change
  * layer manager rows scrolls up or down

Extra info (still missing):
In Mac Chrome:
* select in reference application Satellite preset
* open layer manager and scale it so that not all layers do not fit window
* click title of layer manager
* hover mouse over first layer name and try to scroll, most of the time it does not work
* scrolling does work between the rows 100% of time",2
106502535,2022-04-12 07:01:24.823,Read and merge saved WMS-services from local storage,,8
106502446,2022-04-12 06:59:13.568,Edit WMS services stored to local storage,"Delete is implemented separately and edit implementation is left for this task.

This task is split because edit is blocked.",2
106501435,2022-04-12 06:38:30.394,Implement saving WMS-services to local storage,"Added WMS should be remembered
- redux-persist usage is verified from KNMI & Met Norway before implementation
- Service is added to local storage
- At least service url is added to local storage
- Services are not remembered between different browsers or different local computer user
- Login or logout from GeoWeb does not affect to services available in local storage

Notes:
- redux-persist library is most potential for this task based on the investigation",3
106426928,2022-04-11 07:52:23.326,BE: Implement map presets read api,"Goal of this issue is to produce current mappresets from backend (derived from the current existing workspace presets). No saving, just listing and getting the existing presets from the database.

- have a few mappresets as json files in this repo
- these will be used to initialise the database
- api will list all the mappresets from the database and get 1 mappreset",8
106426216,2022-04-11 07:47:16.869,BE: Setup Presets backend code in local env,"- make it easy to configure external database
- development local version with flask
- production version with gunicorn
- presets backend which can be locally deployed with docker-compose
- hello world or similar",4
106425785,2022-04-11 07:40:32.673,BE: Setup Presets repository,"- create new repository in opengeoweb/backend-services/presets-backend
- add pipeline for python linting and testing
- setup reviewing process, approvals
- setup documentation",2
106425600,2022-04-11 07:37:19.008,FE: Change default area when splitting a mapview in screenmanager,"* when using the spilt window horizontally or split window vertically (![Schermafbeelding_2022-03-30_om_13.15.03](https://gitlab.com/opengeoweb/geoweb-assets/uploads/6533ed47091820817ec8b65203284d0f/Schermafbeelding_2022-03-30_om_13.15.03.png)) a new map view will appear
* the new map view will show the area similar to the one have the same bounding box as the originating one from which I clicked the icon.",4
106425297,2022-04-11 07:33:13.587,"BE: Saving a correction, draft correction or draft amendment gives an iwxxm 21 error","- add testcases for correction, draft correction and draft amendment that call the web service
- iwxxm 2.1 and 3.0",8
106425089,2022-04-11 07:29:53.738,Implement new TAF GUI in new screenmanager,"
* by default, TAF form implemented in one maximized (form) view
* user can use standard functionality from screen manager (add, remove, expand)
* there is no minimum width and height for the TAF form view yet. This will be described in another issue.
* access to TAF preset (one maximized TAF form view) from within hamburger menu",8
106424294,2022-04-11 07:18:09.194,BE: Max value of lat/lon in minutes must be 59,"At least one more place to be fixed, it fails for North of and South of

both Sigmet and Airmet",4
106424167,2022-04-11 07:14:57.663,Earthquake data should be read from the Production SNS topic,"Earthquake data should be read from the Production SNS topic arn:aws:sns:eu-west-1:368462435992:rdsa-bes-dashboard-topic-prd. Needs a change in cloudformation; TOPIC arn for cloudformation should be set from .gitlab-ci.yml (possibly in one of the properties files).

One for PRD and one for dta",4
106324443,2022-04-08 11:23:31.404,FE: fix opacity slider showing behind layer manager header/footer,"zIndex of opacity popover has to be updated

![image](/uploads/84f6b3916642840076624fb7747c8e12/image.png)",2
106267966,2022-04-07 16:46:37.778,Deploy to ACC,,1
106264864,2022-04-07 15:51:51.659,FE: show confirmation dialog when switching TAF location when form is changed and not saved yet,"When the user switches to a different TAF location while editing a TAF, the behavior should be the same as in the current application: if the editing TAF is not saved a message for the user should pop up to remember him/her to save it manually.

This still needs to be implemented in the new TAF interface.


Example in old taf module:

![image](/uploads/e5ef353d6ebd9cf8050f1d6d3583b35b/image.png)",4
106264059,2022-04-07 15:34:53.220,FE: Taf add tooltips to status icons,"Add a tooltip for the status icons, describing the status in text 

![Screenshot_2022-04-07_at_17.34.14](/uploads/c49402409b601740f9cfd3eb065e29a6/Screenshot_2022-04-07_at_17.34.14.png)",2
106257703,2022-04-07 14:04:01.680,FE: Taf follow up: scroll taccontainer,The error dialog casued the tac container to not scroll again,1
106252143,2022-04-07 12:46:53.662,FE release,,1
106250455,2022-04-07 12:27:35.626,FE: fix flaky e2e test,"One of the e2e tests fails sometimes, should be stable

https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2304427351

https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2377228485",3
106250026,2022-04-07 12:18:49.066,FE: TAF IssuesPane should stay open and update when selecting a different TAF part 1,"As stated in design: `Users can also decide to keep the issue detail container open all the time, and switch from TAF to TAF.` Content should be updated to show the TAF

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bfb7f296e5b460ed7dde

Currently when you select a different TAF the issuesPane is closed, it should stay open until the user decides to close it",8
106040453,2022-04-04 14:42:17.643,FE: TAF update TAC Overview after saving a TAF,"- open a new TAF
- notice that the TAC Overview section shows `No TAC available` for this TAF
- enter valid data and publish this TAF
- the TAC Overview section still shows `No TAC available` for this TAF
- after switching tabs in the TAC Overview the TAC is shown correctly

Would be nice to have it update automatically",4
106009583,2022-04-04 07:51:44.128,FE: Taf scrollbar container,"Move TAF scrollbar so the top timeslots are always visible: (locations and taf rows can cause scrollbar to appear)



![Screenshot_2022-04-04_at_09.52.02](/uploads/8962cdfee6fbfaae2ee72b98f86efd53/Screenshot_2022-04-04_at_09.52.02.png)",4
105859904,2022-04-01 07:27:47.961,Study/revise Common Alerting Protocol (CAP),"Preliminary study/revise what CAP is and how CAP warnings could be implemented on GeoWeb

#### Study
- Think how CAP warnings could be parsed from the CAP feed and listed on GeoWeb
- Think how to parse polygons from CAP warnings and how to display polygons on a GeoWeb map

#### References
* CAP 1.2 Standard http://docs.oasis-open.org/emergency/cap/v1.2/CAP-v1.2.html
* MetCoop CAP
  - Project: https://git.smhi.se/metcoop/metcoop-cap-profile/-/tree/master
  - Profile (defined by SMHI, FMI and MET Norway): https://git.smhi.se/metcoop/metcoop-cap-profile/-/blob/master/metcoop-cap-profile.md
* CAP feeds
  - OASIS: https://docs.oasis-open.org/emergency-adopt/cap-feeds/v1.0/cap-feeds-v1.0.html
  - MET Norway: https://api.met.no/weatherapi/metalerts/1.1?lang=en
* Google Labs Common Alerting Protocol Validator: https://cap-validator.appspot.com/
  * Copy and paste ""Input feed"" from: https://api.met.no/weatherapi/metalerts/1.1?lang=en
  * Select ""Validate""
  * Click on a warning on the map to see the details

* CAP 101 tutorial video on youtube\
https://www.youtube.com/watch?v=vKFbqZYD9Mw

#### Done
- [x] Kristian  
- [x] Esa  
- [x] Pauli  
- [x] Alvar  
- [x] Karoliina  
- [x] Viljami",2
105813162,2022-03-31 10:31:10.775,FE: Taf add correct responsive breakpoints,Add correct responsive breakpoints according to design,2
105770523,2022-03-30 15:45:49.731,FE: cleanup TAF folder,"Change structure more logical, to be discussed",2
105753041,2022-03-30 12:18:57.124,FE: TAF follow-up fix form disable after unhappy flow,"The form is getting disabled on post, and this will make sure all the correct is visible with the happy flow. With an unhappy flow, a user should be able to try again.",4
105735978,2022-03-30 09:15:42.786,FE: Remove tafAction prop from TafFormWrapper,"Update all tests/stories after this

- TafForm tafAction prop can be removed
- TafFormWrapper tafAction prop can be removed",1
105603008,2022-03-28 08:47:28.315,FE: replace old dialog with new one,"Spaceweather, Sigmet Airmet and Taf are using the old dialog which causes JS errors in the console. We should replace it with the ToolContainer and make sure it behaves like the old one.

To test, make sure when opening the dialog won't show an error. 

Include it in:
- knmi-geoweb
- geoweb
- taf
- spaceweather
- sigmet/airmet

![Screenshot_2022-03-28_at_10.45.37](/uploads/0571097fd01728de5fcfb8614c2ac00f/Screenshot_2022-03-28_at_10.45.37.png)",8
105601721,2022-03-28 08:27:47.901,FE: Satcomp Presets: yellow FIR EHAM instead of FIR Areas,Use defined overlay,1
105601713,2022-03-28 08:27:37.940,BE: Satcomp Presets: yellow FIR EHAM instead of FIR Areas,Make FIR overlay available with whole set of colours,2
105601295,2022-03-28 08:20:58.941,FE: Show satcomp color in presets,Add correct satcomp color  in preset,8
105599411,2022-03-28 07:59:07.367,BE: Satcomp Color overlay option preset,"Add new color options to overlays, so each layer has options to choose color. Make all color options available. The options should be visible in the front-end. In the preset we currently have one setting but needs multiple.

The options should follow the colors and thickness described in the design https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6241ed3c186b9713c94ce99f",4
105599008,2022-03-28 07:53:02.153,"BE: TAF Make IWXXM TAF's always with OPERATIONAL flag (no ""TEST"").","Make IWXXM TAF's always with OPERATIONAL flag (no ""TEST""). Always be operational",2
105596947,2022-03-28 07:29:44.020,FE: TAf Tac OVerview mobile,"Tac Overview should be hidden on mobile, and be accessed with a button that will trigger a dialog. Active TAF should be on top (should be srolled to like the rest). 

![Screenshot_2022-03-28_at_09.26.35](/uploads/c88fe4fc820b1c76c42fef6447065cab/Screenshot_2022-03-28_at_09.26.35.png)",8
105595630,2022-03-28 07:09:52.250,Ingestion of events from multiple catalogs.,"Visualize the earthquake from different files being in the same S3 bucket:
- output/geoweb/events_usgs.csv
- output/geoweb/events_knmi.csv
- output/geoweb/events_emsc.csv (not sure it will be there)

Make sure the files are visualized with different symbols and that legends are shown with matching symbols.",8
105595531,2022-03-28 07:08:47.163,Additional datalayers for BES Dashboard,"In https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1739/ and initial preset is described. This issue will add additional datalayers to view 1.

Default not visible. Data from ECMWF(KNMI)WMS.

1. 10 m wind gust (interval 6 hour)
1. total precipitation (interval 0 hour)
1. lightning flash density past 6 uur
1. 2m temperature",2
105595442,2022-03-28 07:07:09.628,BE: ADAGUC: GEOJSon format,ADAGUC should support the ingestion of GeoJSON in order to enable users to select and visualize interactive content on the map and for a better compatibility with USGS RS-feed,8
105500640,2022-03-25 13:44:25.513,FE: Taf add snapshot and unit tests to TafLayout,"1. Currently there are no snapshots yet for TafLayout. Add snapshots for dark and light theme.
2. Also it would be good to test the navs in relation with each other (location tabs and timeslot tabs). Add unit tests for these and check if the location tabs are updated when the selected timeslot is changed.",8
105423372,2022-03-24 12:04:51.072,Release to ACC,,1
105420190,2022-03-24 11:20:10.216,FE: Taf remove StoryWrapperWithTheme,"Remove StoryWrapperWithTheme and use StoryWrapper, they are the same",1
105415143,2022-03-24 10:13:13.451,FE: Taf fix blue background of textfield,"Sometimes some textfields (Prob & Change in screenshot) get a blue background color. Should be removed:

- Don't mess with default browser behavior
- See if we can make the blue only visible on the textfield itself 

Timeboxed: 4h


![Screenshot_2022-03-24_at_11.01.06](/uploads/ad890fc5208b5f206df68fead183ba5e/Screenshot_2022-03-24_at_11.01.06.png)",4
105413187,2022-03-24 09:50:09.401,FE: Taf create better test data,"Real data always provides data from all stations, our testdata currently not. Would be nice to get those more in line. 

- Better test data",8
105408759,2022-03-24 08:44:51.977,FE: Taf responsive layout,"Should be responsive. Mobile first! Make sure all main components scale well on small layouts (320 min). No custom code needed, MUI should needs some extra props. Only fix the main layout blocks in this ticket (main nav, loc nav etc)

- Also fix right aligned view fields

 ![Screenshot_2022-03-28_at_09.26.33](/uploads/f801016504f487f6358fb78516db68be/Screenshot_2022-03-28_at_09.26.33.png)",8
105408598,2022-03-24 08:43:11.512,FE: Taf align Taf (view) form,"On large screens always left aligned, but the content should be right aligned. Maybe a max-width on view = ""disabled"" will fix this. Only for view=disabled

![Screenshot_2022-03-24_at_09.43.43](/uploads/1526385dfcd5051fc81b74782259fb98/Screenshot_2022-03-24_at_09.43.43.png)",2
105408403,2022-03-24 08:41:10.597,FE: Taf bundle form buttons,"Taf buttons are now two components, ListButtons and TafForm buttons. Since all is in same place now, we can bundle them. Do we all the properties, or can we show all buttons based on the canBe properties so they all have the same solution?",2
105408268,2022-03-24 08:39:29.296,FE: Taf move IssuesPane outside the buttons,The form error dialog is currently included in the TafFormButtons. Should be removed and put into TafForm.,2
105408214,2022-03-24 08:37:59.700,FE: Taf render TAC,The TAC overview currently has dummy TACS. Should fetch a TAC on mount,2
105352133,2022-03-23 13:34:26.228,FE: TafLayout error dialog,"The error dialog does not show anymore, should show popup with errors if there are any",2
105352117,2022-03-23 13:34:01.502,FE: TafLayout icons,"The Icons of the taflayout don't reflect the correct status. Easy way of testing, is opening these two stories: `http://localhost:4500/?path=/story/components-taf-layout--taf-layout-dark-theme` and `http://localhost:4500/?path=/story/demo--taf-dialog-demo` and compare the status with the icons



OR the buttons are not correct: 

Old:
![Screenshot_2022-03-23_at_16.34.05](/uploads/4ba00233eb0a532b2f1accf920d00291/Screenshot_2022-03-23_at_16.34.05.png)

New:

![Screenshot_2022-03-23_at_16.22.48](/uploads/51a7f81d81815e6152d1c0f0b61931fd/Screenshot_2022-03-23_at_16.22.48.png)",2
105345513,2022-03-23 11:37:36.516,FE: BUG: Time dimension not recognized if units are not exactly ISO8601,"# Problem

For the GOES16 layer in the SAT WMS, the following WMS dimension does not work properly. This is because the units property is not set correctly:

```xml
<Dimension name=""time"" units=""NA"" default=""2022-03-23T10:55:06Z"" multipleValues=""1"" nearestValue=""0"" current=""1"">2022-03-22T09:15:06Z,2022-03-22T09:25:06Z,2022-03-22T09:35:06Z,2022-03-22T09:45:06Z,2022-03-22T09:55:06Z,2022-03-22T10:05:06Z,2022-03-22T10:15:06Z,2022-03-22T10:25:06Z,2022-03-22T10:35:06Z,2022-03-22T10:45:06Z,2022-03-22T10:55:06Z,2022-03-22T11:05:06Z,2022-03-22T11:15:06Z,2022-03-22T11:25:06Z,2022-03-22T11:35:06Z,2022-03-22T11:45:06Z,2022-03-22T11:55:06Z,2022-03-22T12:05:06Z,2022-03-22T12:15:06Z,2022-03-22T12:25:06Z,2022-03-22T12:35:06Z,2022-03-22T12:45:06Z,2022-03-22T12:55:06Z,2022-03-22T13:05:06Z,2022-03-22T13:15:06Z,2022-03-22T13:25:06Z,2022-03-22T13:35:06Z,2022-03-22T13:45:06Z,2022-03-22T13:55:06Z,2022-03-22T14:05:06Z,2022-03-22T14:15:06Z,2022-03-22T14:25:06Z,2022-03-22T14:35:06Z,2022-03-22T14:45:06Z,2022-03-22T14:55:06Z,2022-03-22T15:05:06Z,2022-03-22T15:15:06Z,2022-03-22T15:25:06Z,2022-03-22T15:35:06Z,2022-03-22T15:45:06Z,2022-03-22T15:55:06Z,2022-03-22T16:05:06Z,2022-03-22T16:15:06Z,2022-03-22T16:25:06Z,2022-03-22T16:35:06Z,2022-03-22T16:45:06Z,2022-03-22T16:55:06Z,2022-03-22T17:05:06Z,2022-03-22T17:15:06Z,2022-03-22T17:25:06Z,2022-03-22T17:35:06Z,2022-03-22T17:45:06Z,2022-03-22T17:55:06Z,2022-03-22T18:05:06Z,2022-03-22T18:15:06Z,2022-03-22T18:25:06Z,2022-03-22T18:35:06Z,2022-03-22T18:45:06Z,2022-03-22T18:55:06Z,2022-03-22T19:05:06Z,2022-03-22T19:15:06Z,2022-03-22T19:25:06Z,2022-03-22T19:35:06Z,2022-03-22T19:45:06Z,2022-03-22T19:55:06Z,2022-03-22T20:05:06Z,2022-03-22T20:15:06Z,2022-03-22T20:25:06Z,2022-03-22T20:35:06Z,2022-03-22T20:45:06Z,2022-03-22T20:55:06Z,2022-03-22T21:05:06Z,2022-03-22T21:15:06Z,2022-03-22T21:25:06Z,2022-03-22T21:35:06Z,2022-03-22T21:45:06Z,2022-03-22T21:55:06Z,2022-03-22T22:05:06Z,2022-03-22T22:15:06Z,2022-03-22T22:25:06Z,2022-03-22T22:35:06Z,2022-03-22T22:45:06Z,2022-03-22T22:55:06Z,2022-03-22T23:05:06Z,2022-03-22T23:15:06Z,2022-03-22T23:25:06Z,2022-03-22T23:35:06Z,2022-03-22T23:45:06Z,2022-03-22T23:55:06Z,2022-03-23T00:05:06Z,2022-03-23T00:15:06Z,2022-03-23T00:25:06Z,2022-03-23T00:35:06Z,2022-03-23T00:45:06Z,2022-03-23T00:55:06Z,2022-03-23T01:05:06Z,2022-03-23T01:15:06Z,2022-03-23T01:25:06Z,2022-03-23T01:35:06Z,2022-03-23T01:45:06Z,2022-03-23T01:55:06Z,2022-03-23T02:05:06Z,2022-03-23T02:15:06Z,2022-03-23T02:25:06Z,2022-03-23T02:35:06Z,2022-03-23T02:45:06Z,2022-03-23T02:55:06Z,2022-03-23T03:05:06Z,2022-03-23T03:15:06Z,2022-03-23T03:25:06Z,2022-03-23T03:35:06Z,2022-03-23T03:45:06Z,2022-03-23T03:55:06Z,2022-03-23T04:05:06Z,2022-03-23T04:15:06Z,2022-03-23T04:25:06Z,2022-03-23T04:35:06Z,2022-03-23T04:45:06Z,2022-03-23T04:55:06Z,2022-03-23T05:05:06Z,2022-03-23T05:15:06Z,2022-03-23T05:25:06Z,2022-03-23T05:35:06Z,2022-03-23T05:45:06Z,2022-03-23T05:55:06Z,2022-03-23T06:05:06Z,2022-03-23T06:15:06Z,2022-03-23T06:25:06Z,2022-03-23T06:35:06Z,2022-03-23T06:45:06Z,2022-03-23T06:55:06Z,2022-03-23T07:05:06Z,2022-03-23T07:15:06Z,2022-03-23T07:25:06Z,2022-03-23T07:35:06Z,2022-03-23T07:45:06Z,2022-03-23T07:55:06Z,2022-03-23T08:05:06Z,2022-03-23T08:15:06Z,2022-03-23T08:25:06Z,2022-03-23T08:35:06Z,2022-03-23T08:45:06Z,2022-03-23T08:55:06Z,2022-03-23T09:05:06Z,2022-03-23T09:15:06Z,2022-03-23T09:25:06Z,2022-03-23T09:35:06Z,2022-03-23T09:45:06Z,2022-03-23T09:55:06Z,2022-03-23T10:05:06Z,2022-03-23T10:15:06Z,2022-03-23T10:25:06Z,2022-03-23T10:35:06Z,2022-03-23T10:45:06Z,2022-03-23T10:55:06Z</Dimension>
```
See https://adaguc-server-geoweb.geoweb.knmi.cloud/adaguc-server?DATASET=SAT&SERVICE=WMS&request=getcapabilities for details.

# Discussion

We can fix this in the backend or in the frontend (or both). The frontend could be made less strict. The backend could add the correct unit.

# Solution:

Make the frontend less strict for detecting the time dimension.

In https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/libs/webmap/src/lib/components/WMJSDimension.ts#L246:

Change 

```
if (this.units === 'ISO8601') {
```
 to

```
if (this.units === 'ISO8601' || this.name === 'time') {
```

# How to test

The timeslider should have an effect on the GOES16 layer",1
105271844,2022-03-22 12:49:59.104,ADAGUC: Add the option to configure a fake time dimension for a layer,"The seismic data for BES does not have a timestamp, but still we want to update the geoweb client automatically. 

Add a configuration option to adaguc-server to configure a fake time dimension for a layer. The start and end time can be the current time rounded to the specified time resolution. In case of PT1M (1 minute time interval) it will become:
`2022-03-21T13:52:00Z/2022-03-21T13:52:00Z/PT1M`

The client will update the layer in the map if this is updated every minute.

To demonstrate that this works: configure this option for the BES SEISMIC earthquakes layer.",8
105267931,2022-03-22 11:39:42.248,FE: Update theme succes color and use it in StatusIcon,"Update the color with the new value, and use it in Taf StatusIcon. Create a new color key `functional` for it, succes and succesOutlined

![Screenshot_2022-03-22_at_12.34.55](/uploads/43b0091f60f8a8af054c6e2a7bbf9c56/Screenshot_2022-03-22_at_12.34.55.png)",1
105194784,2022-03-21 10:04:33.487,"FE: use shared ToggleMenu in layerManager, layerSelect and Taf form row options","Re-use the new shared ToggleMenu in:

* layermanager (duplicate layer menu)
* layer select service menu
* taf form row options button",1
105187198,2022-03-21 08:00:13.368,Fix integration tests adaguc nested stack,,2
105067888,2022-03-18 12:12:20.720,Add CI/CD step to geoweb-adaguc-server to scan OVL dataset,"It seems that new datalayers for the OVL dataset do sometimes not show up. 

Add an extra CI/CD step to send the command ```{""command"":""scandataset"",""dataset"":""OVL""}``` to the scan task SQS of the geoweb-adaguc-server.",1
105056318,2022-03-18 09:00:12.346,Update presets to use new ECMWF KNMI service url,"New ECMWF service url and KNMI token to be updated in all presets.

Change https://apps.ecmwf.int/wms/?token=KNMI with https://eccharts.ecmwf.int/wms/?token=knmi",1
105055293,2022-03-18 08:43:33.606,Make copy lambda for earthquake events,"Use Satcomp lambda as example, but earthquake data should be used.",4
104996727,2022-03-17 11:54:31.254,FE: TAF form snapshots are failing sometimes,"see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2215789446

its story `Edit Taf Form With Multiple Same Start Dates (takeSnapshot)`

probably the focus should be disabled for the snapshots, if you look at the diff its the cursor that makes the difference

https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2215789446/artifacts/file/libs/taf/src/lib/storyshots/__image_snapshots__/__diff_output__/storyshots-spec-ts-storyshots-components-taf-form-edit-taf-form-with-multiple-same-start-dates-take-snapshot-1-diff.png",1
104981537,2022-03-17 08:13:04.012,Update theme with TextField with correct styling,"Some styling is not correct. To have a clear overview, create all the (error) variants of the (outlined) TextField in a storybook example and update snapshots. 

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf92695e71d82acd448ea2",4
104931462,2022-03-16 15:02:25.109,Implement select menu warning to show that a layer is missing from service,"Implement select menu warning to show that a layer is missing from service.

Ask @AWih for more information if needed

Acceptance criteria:
- Pipeline fail is fixed
- Merge conflicts are resolved
- Reviews are done",2
104906629,2022-03-16 08:52:09.939,Make shared menu component,"extend mui menu component and make a shared component

To be re-used in (separate ticket):
- layermanager (duplicate layer menu)
- layer select service menu
- taf form row options button",4
104906505,2022-03-16 08:49:04.586,Move core CustomToggleButton to shared and re-use in TAF,,1
104863858,2022-03-15 16:40:38.766,FE: Layermanager update hover select color,In https://gitlab.com/opengeoweb/opengeoweb/-/issues/1813 we've changed the colors of the IconButtons. Now the layermanager hover colors of the select boxes are off. Fix these with the correct colors,2
104830498,2022-03-15 08:40:39.842,Add TAF form row actions: clear row and add row above,"The new TAF design includes 2 new actions for TAF form rows:
- Insert 1 row above
- Clear row

Note that the first row has different actions than the changegroup rows (first row cannot be deleted and you cannot add a row above)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bfb9270cdcb4ca52f48f

![image](/uploads/067663494713419c82b913abeecf3e6e/image.png)",2
104772420,2022-03-14 13:35:31.013,Spaceweather meeting,Meeting about accessing the backend services from the SW BackOffice.,1
104772201,2022-03-14 13:32:12.879,Cinesat meeting,"Meeting with weerkamer/IKM to decide if Satcomp is good enough to replace CineSat.

Maarten and Ernst are invited.",2
104770939,2022-03-14 13:18:10.429,Preset tech meeting,"Preparations for the tech preset meeting on Thu 17/3 + meeting itself
Subject is the preset backend, because the FE is ready for presets in JSON.
Things to discuss: saving presets, sharing presets, grouping presets, making presets in a way that they are resilient to service changes, shared backend itself (which database).",18
104770468,2022-03-14 13:11:42.781,Put new TAF into the KNMI and Unified version,"Implement new TAF in KNMI/Unified version.
Update the e2e tests if needed.

- Remove unused code from Taf (TafList, TafWrapper, TafFormDialog)",4
104770148,2022-03-14 13:05:49.817,Scrolling TAF in TAC overview,"In the new TAF GUI, the TAFs present in the TAC Overview should be sorted in the following way:
- TAFs follow the TAF location list as in the tab (top -> down) in TAF Edit mode.
- When clicking one location in TAF Edit mode, this action should trigger an anchor that scrolls the TAC Overview bringing on the top the TAFs related to that specific location. (The order stays still the same as described in the previous point). If TAFs are enough in number to be displayed all in the TAC Overview, then clicking one location in TAF Edit mode will not trigger any action in the TAC Overview
- In Current & Expired the order is: before current TAF and then expired TAF.

### Test criteria

The TAFs in TAC Overview are sorted as in the description.


### Extra information
Design: https://www.sketch.com/s/b9f3c04f-82de-4c6c-a7df-7ad79a04dda2/a/l1JYP4x/play
In this user story is not included the highlight of the text shown in the design.

Watch out for Safari!",8
104769629,2022-03-14 12:58:15.980,Import TAF from TAC overview into edit form (part 1),"Add copy buttons to the TAC overview.
Should only be active if the form is in edit mode.
Buttons don't have to work yet. 
Tooltips for the status icons should be at the top of below, not to block the buttons.",4
104768704,2022-03-14 12:46:52.701,TAC Overview component,"Create component for TAC overview in storybook.
Just the list of TAC's and the two tabs
Extend TAFConfig.json file to also contain the ""full"" names of the configured airports for TAF.",8
104763963,2022-03-14 11:26:22.533,Hookup all elements for TAF (excl. TAC overview),,8
104763569,2022-03-14 11:19:40.266,Locations tab,"The GUI elements of the locations tab
No actions yet.",4
104763356,2022-03-14 11:16:14.286,Top tab bar,"Top tabs bar GUI, without the actions. Hook up with timeslot state in https://gitlab.com/opengeoweb/opengeoweb/-/issues/1904

Use Tabs, with transparent background",2
104763116,2022-03-14 11:12:29.480,Move TAF form to new layout,Move TAF form to new layout,2
104762845,2022-03-14 11:07:36.216,Update TAF edit/view form with theming,"Form should be using the theming, not moved to new layout yet.",4
104762654,2022-03-14 11:03:59.100,Update form row buttons to new design,Change form row buttons in original form.,2
104761433,2022-03-14 10:53:15.473,Create new TAF layout in storybook,"Create top tab bar, locations navigation and edit form and empty space for the TAC overview in storybook.
Add basic theming (white/black squares).

See https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bfb7c86d02b398b51a68 for the grid structure.",2
104760923,2022-03-14 10:44:33.500,Add stations and fault lines to WMS overlays,"RDSA will deliver two datasets, one for earthquake sensor point data and one for fault line data.
These have to be converted to GeoJson for ADAGUC (probably with GDAL/ogr2ogr) copied into the right spot (adaguc-datasets/resources/Overlays or a subdirectory thereof) and configured as two overlays in the OVL.xml overlay configuration for ADAGUC.

Static files for stations and fault lines overlays:
- fault lines: https://gitlab.com/KNMI/RDSA/aws/bes-dashboard/-/blob/develop/config/adaguc/adaguc-autowms/faultlines.geojson
- stations:
    - config: https://gitlab.com/KNMI/RDSA/aws/bes-dashboard/-/blob/develop/config/adaguc/datasets/stations.xml
    - data: http://rdsa.knmi.nl/fdsnws/station/1/query?format=text&network=NA",4
104759961,2022-03-14 10:35:21.724,BES dashboard preset,"This issue is on implementing a preset in GeoWeb that enables the user to quickly see relevant information for the BES islands.

- the preset has 3 map views (see screenshot for layout), focusing on the BES islands. 
- no syncing between individual views for area 
- no timeslider for view 2- when GOES16 data is available:
- GOES16 data will be the leading layer in view 3 and view 3 has autoupdate switched on
- view 3 and view 1 will be synced in time (view 3 will be leading)
- All views needs auto-update switched on

1) wind and waves data
- user can visualize forecast data for wind and waveheight in one of the maps in the BES preset.
- data used will be EC model data currently available via the EC WMS KNMI WMS service, see detailed information in the designs uploaded.

2) seismological event data
- user can select two overlays for plotting on the map, fault lines and stations
- overlays will be available in the `overlays` WMS service in GeoWeb 
- user can see seismological events in the last 30 days plotted on a map in the BES preset   
- seismological events will be styled for age and magnitude
- data will be updated every minute

3) satellite data
- user can visualize satellite data
- total precipitation rate of EC model will be added to the satellite view, see detailed information in design uploaded.

-preset can be named `BES Dashboard` and can replace Caribbean (Ecwf)",4
104757558,2022-03-14 10:09:01.792,Add GOES-16 data to ADAGUC,"GOES-16 data should be available for ADAGUC for Geoweb.
CloudFormation geoweb-adaguc-server should define a SNS subscription to the NOAA GOES-16 public data bucket, so that a lambda gets called (through SQS) each time a new GOES-16 file arrives in the bucket.
The lambda has to select the files that GeoWeb needs (probably ) and copy those to ADAGUC's input bucket.
ADAGUC needs a layer configuration for at least one of the GOES-16 channels (analogue to IR108 for MeteoSat), with the same style as IR108 on Meteosat",8
104757018,2022-03-14 09:59:00.533,Discussion about refreshing/cleaning of earthquake data,"How to handle earthquake data without a timestamp, but refreshing every minute.

Determine if cleaning is needed for the earthquake data.

The requirements are for a layer without a time slider, showing only the latest data.
If the data is overwritten each minute, cleaning will not be necessary.

Possible outcome is that the FE needs to be adapted to handle this rapidly changing data so a ticket should be made.",6
104756491,2022-03-14 09:50:22.629,Configure earthquake layer for age and magnitude,"The earthquake layer has to be styled for age and magnitude.

For an example see the USGS site: https://earthquake.usgs.gov/earthquakes/map/?extent=3.77656,-186.15234&extent=51.39921,-13.0957",2
104755866,2022-03-14 09:42:55.501,ADAGUC: point data with circle size and color,"ADAGUC server has to be extended to be able to show point information for 2 variables/attributes at the same time, where the circle size is dependent on one variable/attribute and the circle color is dependent on a second variable or attribute of the point.",16
124351878,2023-02-27 11:54:23.803,Prepare for tech meeting 2 March,"- set up voting for eslint rule
- explain container queries, how to use, what it solves, do's and dont's.


https://docs.google.com/presentation/d/1vITZnoGcoLR85QJnJu9gIyPurlW_rdNjcuLO4VmfDWE/edit#slide=id.g1b9350364fa_0_1

local branch: techmeeting",3
124348743,2023-02-27 10:58:36.831,FE: sigmet/airmet snake_case custom geojson properties,"geojson property has inconsitent key names, see https://gitlab.com/opengeoweb/opengeoweb/-/blob/eeca681eac75458492a5e63af8c46d8c7d20e294/libs/sigmet-airmet/src/lib/utils/config/geojsonProperties.schema.json. Make them snake_case just like the rest",2
124260223,2023-02-24 14:53:17.410,FE: sigmet/airmet rename useProductSettings,"`useProductSettings` implies it's using a hook, but it's just a method that is used on some places. In https://gitlab.com/opengeoweb/opengeoweb/-/issues/3289 some properties have been removed, leaving only the `allowedUnits`. Combine with `getAllowedUnits` so you call that one with the productConfig passed in and it extracts the requested allowed units for your form-field directly. 

~~Regarding `useProductSettings` as a hook idea, it would be nice to have 1 file that has all values calculated so we don't do it too much, but doing this would make a new provider needed. All Field components now have the productConfig prop, with a provider prop drilling would not be needed. This involves a lot of file and test changes. Currently a lot of methods do a simple thing, and I think that's the way to go for now. If in the end we still want this hook idea, we could do it easier as we have all small methods ready to use in 1 go.~~",2
124236172,2023-02-24 07:32:12.331,FE: sigmet/airmet fix default value for locationIndicatorATSR,Make sure locationIndicatorATSR is retrieved from the config file,2
124205227,2023-02-23 16:29:04.869,FE: BUG: refresh token triggers rerender on all connected modules,See description in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2498,1
124199439,2023-02-23 15:08:56.047,FE: BUG: data.fmi.fi layers missing TIME parameter after v4.11.0,"When adding a Layer from a FMI server (see Bug report description https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2496), an error occurs. The layer does not show.

This happened after the React18 rewrite of WMJSMap.

It seems that at first no default value for a dimension is given, causing the WMS GetMap request to fail.",1
124183855,2023-02-23 10:54:35.544,FE: sigmet/airmet refactor,Prepare ticket for  locationIndicatorATSR is retrieved from the config file,2
124173009,2023-02-23 08:07:58.312,FE: fix flaky tests,"
Ticket to gather flaky FE tests to be fixed. If a new one occurs add it to the list.

**sigmet-airmet**
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3800644833 ProductFormDialog  should save a draft sigmet after making changes, closing the form and choosing to save
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3822237944 ProductFormDialogContent  should not save a SIGMET with only phenomenon as draft when pressing BACK and choosing Discard and Close
- locally sigmet/airmet: Following test is failing locally pretty often:
```
 FAIL  src/lib/components/ProductForms/ProductFormDialogContent.spec.tsx (57.57 s)
   components/SigmetForm/ProductFormDialogContent  should be able to save a SIGMET as draft with only phenomenon as value
```

**core snapshots**
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3807223627 Layer Info Dialog Dark (takeSnapshot)
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3837674528  Layer Info Dialog Light (takeSnapshot)",2
124054970,2023-02-21 12:42:30.200,FE: update cypress to latest version,"- update the cypress packages to the latest version: 
  - `cypress`
  - `@testing-library/cypress`
  - `@types/testing-library__cypress`
- fix breaking changes
- remove `cy.findByTestId('customDialog-close').click();` from e2e (this was closing the browser issue dialog that pops up for old browsers, this will now no longer show)",3
124037419,2023-02-21 08:03:51.904,FE make jest work with container queries,"Make jest work with container queries so we can remove the `IS_JEST` check everywhere

Check if it can be done without updating jest-dom, otherwise find a ticket of storybook in which they specify progress on allowing useage of the newest jest-dom and link it on the user story.",3
123984696,2023-02-20 09:54:38.208,FE: sigmet/airmet make aviaton config work with gitlab credentials,"Currently the config of sigmet/airmet is not loaded correctly for gitlab users. The `createApi` is making an instance with a baseUrl, and will try to fetch the `knmi.sigmet/airmet.config` via gitlab. 

For now make sure we every createApi inside sigmet/airmet always serves te local url. In future these configs will probably come from the backend, so no need to store it in gitlab.

To show the correct error try this as gitlab user:
- remove the following keys from `config.json`:
```
  ""GW_GITLAB_PRESETS_BASE_URL"": ""https://gitlab.com/api/v4/projects"",
  ""GW_GITLAB_PRESETS_API_PATH"": ""/{project_id}/repository/files/{presets_path}{preset_filename}/raw?ref={branch}"",
  ""GW_GITLAB_PROJECT_ID"": ""24089222"",
  ""GW_GITLAB_PRESETS_PATH"": ""env%2Flocal%2Fpresets%2F"",
```
- if you now open sigmet/airmet an error of a failing backend will appear, which is expected
- now open `knmi.sigmet/airmetConfig.json` and remove a prop
- reload, open sigmet or airmet and a validation error should appear",3
123862291,2023-02-17 08:48:31.573,FE: sigmet/airmet add readme for config,Provide some readme for the used config files for sigmet/airmet. Also a getting started how to add a key would be nice,1
123862284,2023-02-17 08:48:15.157,FE: sigmet/airmet config name consistency,Use snake_case for consistent config keys in sigmet/airmet config,2
123862248,2023-02-17 08:47:47.535,FE: sigmet/airmet don't show new product button when config fails loading,"Hide new product button if config fails loading 

![Screenshot_2023-02-17_at_09.47.17](/uploads/7a01cb87fe60caa847ed79056ea56672/Screenshot_2023-02-17_at_09.47.17.png)",2
123671768,2023-02-14 15:03:47.685,BE: Removable system presets in presets BE - deploy to TST,"After merging into master, a tag can be created to deploy to ACC before friday

Part of: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3254",1
123650921,2023-02-14 10:43:38.596,BE: Make ACC and PRD cognito userpools,"Make ACC and PRD cognito userpools in https://gitlab.com/KNMI/geoweb/backend-services/cognito-userpool 

Start February Friday morning 17th during coding challenge.

Extra information: These are the notes we discussed 14-02-2023:

- Make a list of email adresses of current users (ACC and PRD) (Jan wil do)
- Make ACC and PRD cognito userpools in https://gitlab.com/KNMI/geoweb/backend-services/cognito-userpool (Start February Friday morning 17th)
- In de week starting 20 February: announce ACC that their accounts are about to change. Inform users that they can re-use the same username/password
- Keep in mind that the pentest is taking place till March 3rd
- Configure new ACC and PRD userpools in geoweb-serverless. Deploy new userpool when pentest is done in ACC, probably March 10th.
- When ACC seems to be OK, announce users in PRD that their account is to change. The PRD userpool can be deployed at normal PRD release (21th of March)


For going to TST:
- [x] connect presets backend (this will also make smoketest and serverless BE pass)
    - [x] update presets BE repo readme https://gitlab.com/opengeoweb/backend-services/presets-backend/-/merge_requests/64
    - [x] create new tag for presets BE repo
    - [x] update deployment BE repo for new tag & merge https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/merge_requests/63
    - [x] make new release to TST in BE repo
- [x] make sure smoketest in serverless BE passes, get MR merged https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/433
- [x] contact Jan Koerts for proceeding going to ACC and PRD (MRs for the cognito user manager repo have been prepared and linked as well)",3
123640163,2023-02-14 07:53:42.499,BE: Removable system presets in presets BE - migration script,"Part of https://gitlab.com/opengeoweb/opengeoweb/-/issues/3254


First step: create a migration script",2
123598274,2023-02-13 14:38:31.511,BE: save TAF output with correct format,"In the taf lambda, edit the output filenames of TAF as specified in the related US, include test updates.


Could first create a test for correct filenames, then update code to pass test",2
123577804,2023-02-13 09:38:39.045,Meeting on Cognito stand-alone setup,"Discuss PRD Cognito integrated in geoweb-serverless-backend. Possible risk of losing accounts. Should be a stand alone project, like TST and ACC. Preferably, Jan Koerts is involved/present at this meeting",3
123577453,2023-02-13 09:34:24.824,FE: fit version in TST in menu,"Due to change of version name in TST, version text overflows in menu. Fix display:

```
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; 
```


![image](/uploads/eb68cb9974451f127a58f4d0907cf269/image.png)",2
123576854,2023-02-13 09:26:37.358,Meeting on creating grafana dashboards,,3
123576776,2023-02-13 09:24:00.928,FE: For a cancelled sigmet/airmet the options menu should not show,Remove menu button if status if sigmet/airmet is cancelled,2
123576532,2023-02-13 09:19:58.008,FE: DockedLayerManager size small not working correctly in map for sigmet-airmet,"When opening the docked layer manager (it opens in small by default) or when resizing the docked layer manager to small it doesn't work correctly. It gets too big on the right side but the drag handles are somehow displayed in the correct location.

Investigate: CSS related, forwarding properties to subcompenents? > Something with source, try to reproduce this first in sigmet storybook",2
123576005,2023-02-13 09:11:31.251,"BE: Make clear whether you work in TST, ACC or PROD","In the Geoweb Serverless BE, edit the value of GW_FEATURE_APP_TITLE (https://dev.opengeoweb.com/assets/config.json) so that:
- in TST the application name is Geoweb TST
- in ACC it is equal to Geoweb ACC. No changes for PRD",2
123575340,2023-02-13 09:01:45.378,Go to PRD on Tue 21st of February,,3
123574935,2023-02-13 08:55:46.615,BE: Removable system presets in presets BE,"For the pentest, we need system presets that can be removed by a malicious user. This issue is on implementing 5 Workspace presets that are named Pentest01 upto Pentest05. Content of these presets can be a copy of existing presets.


Prepare an alembic migration to update the database with 5 presets. This is for ACC only (pentest is done on ACC). Make sure that the presets are available in ACC by doing a release before the pentest starts (before / on friday 17th)


-----
TO DO:
- [x] create alembic migration (see https://gitlab.com/opengeoweb/opengeoweb/-/issues/3266)
- [x] (deploy test version in deploy-presets-backend repo https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/merge_requests/61 - this one does not have to be merged)
- [x] make a release to ACC by:
   - [x] creating a new tag in presets be
   - [x] use new tag & merge into deploy-presets-be master: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3269
   - [x] create new tag in deploy-presets-be & deploy to ACC",3
123573850,2023-02-13 08:42:09.236,FE: TAFedit interface too small; update snapshots,"Update snapshots after update of the TAF interface. Snapshots required of every screen size in the design, one with columns at the top, one without. Only if there are changes in different sizes, it would be good to have that snapshot (to not end up with too many snapshots)

Link to new design: https://zpl.io/wqQnxLj",3
123573679,2023-02-13 08:39:29.846,FE: TAFedit interface too small; remove input title of text field to column header,"The current TAF edit interface is to small. Link to new design: https://zpl.io/wqQnxLj

Implement the design in steps. Third step is to remove the input title of the text field to a column header


Container query important here. Depending on screen size, show the column header and hide the field label. For smaller screens, see how a single row is splitted into two (or more) rows to fit on the screen",3
123573545,2023-02-13 08:37:26.782,FE: TAFedit interface too small; use full screen width,"The current TAF edit interface is to small. Link to new design: https://zpl.io/wqQnxLj


Implement the design in steps. First step in this ticket: use full screen width",3
123572131,2023-02-13 08:18:09.491,FE: TAFedit interface too small; Increase font size,"The current TAF edit interface is to small. Link to new design: https://zpl.io/wqQnxLj


Implement the design in steps. Second step in this ticket: increase the font sizes according to the design. Double check the container query specification to see if this font size is supported (also by next Firefox for example).


First update the mobile screen (or layout before?) and work to increasingly bigger screens. We can try also first to use font size 12 on all screens, see if it works.",5
123571868,2023-02-13 08:15:53.985,FE: update snapshots sigmet/airmet list for the small layouts,,2
123571760,2023-02-13 08:14:15.699,FE: update snapshots for layermanagager,"Create snapshots for small, medium and large versions of the layer manager",2
123571697,2023-02-13 08:13:29.669,FE: update chromium to latest version,"Chromium is currently at version 104, while the latest version is 110. We should update it, after doing it we can use container queries in the snapshots to test mobile and small layouts. Chromium is supporting container queries since v 106 (https://caniuse.com/css-container-queries). Should make it possible to use snapshots with container queries.",3
123571526,2023-02-13 08:11:41.104,Release to ACC on 23rd @12.00,,3
123571313,2023-02-13 08:08:43.862,Extra release to ACC,"Can be done by whoever is on call that day
- FE release
- BE release

Drop a message in international channel to see if devs from other institutes are available to joint the release process",3
123452374,2023-02-10 09:46:19.387,BE: fix version smoketest,"TST Smoketest failes: https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/3748803086

Due to this change: https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/commit/33b96958d781270fee564f979f5ec1a3d457df19#587d266bb27a4dc3022bbed44dfa19849df3044c_1964_2026

Try to come up with a solution to:
- fix the smoketest by editing the value of the version",2
123432544,2023-02-10 07:53:26.974,FE: taf autocomplete should validate,"Autocomplete does not trigger validate. To reproduce:
- make a field error in visibility
- blur out of the field, make the error is visible
- now go back to the field and select all text
- press `C` and observe `CAVOK` is displayed with error

When pressing C, it should also validate as the value is valid. Solution:
Inside `onKeyDown` in `TafFormTextField` add `shouldValidate: true` as param in the `setValue`:

```
 setValue(name, foundValue.value, {
            shouldDirty: true,
            shouldValidate: true,
          });
```",2
123355901,2023-02-09 09:48:26.495,FE: flaky tests,"Ticket to gather flaky FE unit tests

Core:
- ~~https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3741581445~~ fixed by Alvar here https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2249 

If other flaky tests appear, please add to the list",3
123281685,2023-02-08 11:21:52.602,FE: lowercase validation weather,Make sure field can handle lowercase values. Start with the unit tests to let them include lowercase values. After that fix the validations,2
123281584,2023-02-08 11:21:15.704,FE: TAF lowercase validation wind,"Make sure field can handle lowercase values. Start with the unit tests to let them include lowercase values. After that fix the validations. 

The mainValidation is the most important ones. Parsers probably don't need extra as we can uppercase on blur",2
123281519,2023-02-08 11:20:55.185,FE: TAF lowercase validation visibility and valid,Make sure field can handle lowercase values. Start with the unit tests to let them include lowercase values. After that fix the validations,2
123281368,2023-02-08 11:19:52.605,FE: TAF lowercase validation validfield,Make sure field can handle lowercase values. Start with the unit tests to let them include lowercase values. After that fix the validations,2
123281225,2023-02-08 11:19:18.881,FE: Taf lowercase validation clouds,"Make sure field can handle lowercase values. Start with the unit tests to let them include lowercase values. After that fix the validations. 

The mainValidation is the most important ones. Parsers probably don't need extra as we can uppercase on blur",2
123277359,2023-02-08 10:37:07.574,FE: taf lowercase change/prob,Make sure change and prob field can handle lowercase values,2
123268018,2023-02-08 08:44:29.773,FE master pipeline failed,"Master failed on https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3728961475

Created [a hotfix](https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2230) but not sure this is the way. 

Strange thing was if running the failed test separately, it does work. Would be nice to revert the hotfix and fix the failing test at test level, instead of in the code",2
123191547,2023-02-07 10:54:50.399,BE: update cypress version to latest,"- Update the cypress package used in serverless-be to the latest (12.5.1). 
- Update the image tag used in the pipeline to match the cypress version: `cypress/included:12.5.1`

This includes an updated version of Chrome (v109), which supports container queries. That way we don't have to update the smoketest when we use the latest FE release that includes a dialog for old versions.",2
122991679,2023-02-03 10:17:34.986,FE: sigmet/airmet reuse AviationModule,"Inside app we currently have 2 files with almost the same logic; SigmetModule and AirmetModule. Create an AvationModule to bundle them, to eliminate errors when working on them and reduce work",2
122927322,2023-02-02 13:43:27.954,FE: release before react-18,,1
122927107,2023-02-02 13:41:40.591,FE: sigmet/airmet add keys to app config,Add new keys to app so it won't break the BE if we update the keys there.,2
122920422,2023-02-02 11:36:55.032,BE: sigmet/airmet add 2 keys to config,"The sigmet/airmet expects a custom configuration. In order to do this, we have in the frontend 2 new config files which can be set per environment. Since the the configurations will change, they will remain inside the FE. These keys need to be added to the places where a `config.json` is defined. Add the 2 following keys + values. They need to be the same as https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2211/diffs#8f40f629b08b79a5d0ee35da56b46aa62af17c62_52_52

Add the following:
```
""GW_FEATURE_MODULE_AIRMET_CONFIGURATION"": ""knmi.airmetConfig.json"",
""GW_FEATURE_MODULE_SIGMET_CONFIGURATION"": ""knmi.sigmetConfig.json"",
```",3
122679846,2023-01-30 13:47:53.687,FE: update storybook packages to latest version,"- to have React 18 support in storybook we need to update the storybook packages to the latest version
- some story names need to be updated
- release notes see https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#from-version-64x-to-650",2
122660493,2023-01-30 09:40:23.353,BE: DynamoDB backup cleanup,"* Think of a suitable retention time for backups of deleted tables
* Reduce number of backups of deleted tables related to dev-branches on AWS
* Make sure that recovery of data in PRD/ACC/TST is still possible

It would be nice to clean up these backups and investigate whether (a) a retention time of these backups exists and can be shortened, or (b) a retention time can be set up. Since data in the dev-branches usually does not have to be recovered, it seems unnecessary to keep these backups around indefinitely.

Could be done via cloudformation settings?",3
122659980,2023-01-30 09:33:10.751,BE: spaceweather publish notification issue,"Not able to issue spaceweather notification for Geomagnetic Sudden Impulse after saving as draft first. Reproduced in v2.7.1.

### Steps to reproduce

* open spaceweather module
* click ISSUE A KNMI NOTIFICATION
* choose Category: Geomagnetic
* choose Category detail: Geomagnetic Sudden Impulse
* fill in Source, impulse time and Magnetometer deflection
* click POPULATE
* click SAVE AS DRAFT
* now open the notification you just saved from the list and click ISSUE

Findings after short investigation:
* After first save the FE sends the magnetometer deflection field as a number
* The BE then returns a string when you re-open the form. 
* When the FE tries to re-send to issue this field is sent as a string which the BE rejects as the specification states it can only accepts numbers

This also likely happens for other number fields.

Add unit test in BE to ensure no data types are modified",3
122659850,2023-01-30 09:31:49.748,Publish @opengeoweb/api  package on NPM (needed by ATMOS),,2
122659664,2023-01-30 09:29:53.767,FE: use mocked presets file for e2e tests,"use mocked screenpresets file for FE e2e tests. 

Currently the screenpresets.json file is used which could lead to issues if anything is changed in there.",2
122658191,2023-01-30 09:06:26.869,FE: User is signed out after period of API call inactivity,"* After a period of inactivity, a user should not be signed out
* after connection is lost, user should be notified actively. Check every 5 minutes. Keep information on screen; just add e.g. red alert in top bar to notify user.
* if connection is restored, notification should be pleite.

Use refresh token call to sustain connection - if connection is lost add the red alert containing text: ""Connection has been lost, please fix your network connection and press continue""

* Try to keep most of the code inside of the auth lib

![image](/uploads/2bbaae20ff651b118c185f6ed60f5bf4/image.png)

Display the alert bar below the header, above the workspace. 
- ""Continue"" button that retries the token call when pressed. If connection still lost, keep alert otherwise hide.
- No close option inside of the alert

Ensure for open apps such as staging and demo are not affected.

**NOTE if you can reach the token endpoint when at KNMI WITHOUT being on connect we need to find another solution**",5
122657495,2023-01-30 08:55:44.386,FE: remove polyfills,"- Remove polyfill from main.css
- Remove all other polyfill mentions `:not(.container-query-polyfill`
- uninstall container-query-polyfill lib

Ensure no side effects and everything still works in FF",3
122657396,2023-01-30 08:53:10.856,FE: If FF display solution to enable container queries,"If running FF display info on how to enable container queries

![image](/uploads/6dfbf9fcbed222e7fc8d4ad4104aa987/image.png)


You can check for not supporting container queries like:
```
if (!('container' in document.documentElement.style)) {
 // I do not understand container queries
}
```
https://github.com/GoogleChromeLabs/container-query-polyfill/blob/main/src/index.ts",3
122657149,2023-01-30 08:50:06.988,FE: inform users to update to newest browser version,"With the use of a modal, (1) inform users about the browser issue, and (2) redirect users to a possible solution.

![image](/uploads/56b913a1d80adff23deb655c32fe4e5b/image.png)

* users should be able to click away the warning
* check if the browser support container queries, if not show dialog (that way, in the future, when the browser does support it, we don't have to change anything in the code)",3
122656560,2023-01-30 08:41:14.375,FE: inform user of minimal browser version in index.html,"Issue:
- the browser won't run javascript and the application cannot be shown (blocking)

Desired solution:
- Add an info text in the base html of the application (`index.html`) telling your that GeoWeb is loading:
""Loading GeoWeb......"" -> see if it is annoying for the ""normal"" users.

To replicate issue:
- Run application from build
- Modify the dist folder so it contains invalid js
- Try and run it in your modern browser",2
122656259,2023-01-30 08:36:08.948,FE: On publish: open TAF issues pane in case of errors,"When trying to publish a TAF that still has errors nothing happens at the moment.

In this case, open the issues pane to make it more visible to the forecasters something is still wrong.

Ensure the focus in the form remains on the first field containing errors.",2
122655303,2023-01-30 08:26:41.204,FE: TAF: publish draft AMD/COR without changes gives wrong message,"Publishing a previously saved (and changed) AMD or COR TAF results in a message that there are no changes in the TAF

### Steps to reproduce

* Make a new TAF, save it and publish it.
* Make a correction, change the TAF and save it
* Publish the saved TAF. A message displays that there are no changes in the TAF

- Taf is available in the list - you should be able to find via previousId
- Compare current draft to that original TAF excluding the following fields:
     - baseforecast: valid start
     - validDateStart
     - messageType
     - issueTime
     - previousId
     - previousValidDateStart
     - previousValidDateEnd
     - uuid",3
122654647,2023-01-30 08:16:56.642,FE: Incorrect title for COR and AMD,"When going to a published TAF-> hit editor-mode-> then press Correct: The title header still shows 'Published'. If you now save the draft it will be called 'Draft Corrected'

For New amendments and corrections we need to base the title on the action taken by button:
* New Correction
* New Amendment

Also, for status amended and corrected, rename title to:
* Published Correction
* Published Amended

Please ensure that the tooltips on the icons in the location tabs and the TAC overview are not affected as they are also based on the same function I believe.",3
122654467,2023-01-30 08:13:30.341,FE: TAF COR. When editing and leave for 5 minutes all input is gone,"When Correcting a published TAF and I put content into the draft without saving, and then leave the screen untouched for approx. 5 minutes, all new content is gone. This could very well happen in a situation a meteorologist gets one or multiple calls and is not working on the TAF for a bit.

- Could be related to shouldUnregister: true, we need to investigate what the issue is here
- Related to the poller that runs every 5 minutes refreshing the list and potentially clearing out the form?",3
122490285,2023-01-26 14:10:43.668,Release new FE,,1
122480350,2023-01-26 10:49:41.993,FE: fix flaky tests,"Taf
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3643752770
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3666971763
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3689341618

Shared
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3593519010

Spaceweather
- https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3681899733",2
122439233,2023-01-25 16:01:39.755,FE: Layer info not visible for all layers - part 3,"Final step, part 3


https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2199",2
122359074,2023-01-24 12:05:59.138,FE: sigmet/airmet add tests to prevent sigmet2tac to break,"When working on sigmet2tac, I could not get the unit tests to work. To ensure extra safety, we need some extra checks to make sure unrendered inputs are not send to the sigmet2tac (or perhaps later when posting a form)

possible scenario sigmet
- choose a new sigmet, make sure you have volcanic fields in and type as far to make a sigmet2tac
- choose other phenomenon, and do another sigmet2tac call, should have not the volcanic fields included",2
122312030,2023-01-23 15:58:09.205,FE: Airmet Broken Cloud above and surface checkboxes not displayed correctly on React 18,"- create a new Airmet
- choose phenomenon `Broken Cloud` or `Overcast cloud`
- fill in levels like this, with Above and SFC checked:
- ![image](/uploads/a7690c1047f5659018c11cd537285665/image.png)
- save as Draft
- open it from the list
- the levels should be displayed correctly
- instead, the Above and SFC checkboxes are shown unchecked (they did get saved correctly):
- ![image](/uploads/78592f1f6a1671bca2d147192b31e657/image.png)
- if you click Save or Publish, the fields get populated and saved correctly. But they show up very late.",3
122311078,2023-01-23 15:42:47.947,FE: Volcanic Ash Cloud fields missing on published and cancelled Sigmet in React 18,"

On React 18 the Volcanic Ash Cloud fields are not shown, see images below which fields. To reproduce:

- create a Volcanic Ash cloud sigmet with Volcano name and coordinates filled and publish it
- open it from the list
- expected: the Volcano name and coordinates are visible
- actual: Volcano name and coordinates are missing
- Cancel it and choose a FIR that it's moving to
- open the Cancels sigmet
- expected: text `Volcanic Cloud is moving in the direction of:` is visible
- actual: the text is missing
- open the Cancelled sigmet
- expected: the Volcano name and coordinates are visible
- actual: Volcano name and coordinates are missing

They are saved correctly but not getting displayed.

![image](/uploads/3583262058402eca8ac7e3e172fb6198/image.png)
![image](/uploads/43bbece583125f6661810fbf86d6eccb/image.png)",3
122305929,2023-01-23 14:24:15.825,FE: TAF extra drafts created when switching between a corrected and draft corrected/amended TAF in React 18,"To reproduce:

- use React 18 branch
- nx serve
- open TAF module
- publish a TAF correction
- set the correction to editor mode
- click Correct
- click Save
- now you should have one correction and one draft correction for the same location, the draft correction is currently open
- select the correction
- select the draft correction again
- this will trigger autosave and another draft correction is saved, you will now have 2 draft corrections and one correction for the same location
- same happens for amendment

On master the autosave is not triggered here.",3
122303499,2023-01-23 13:49:45.894,Fix GOES16-CPP LatLonBox mask and attribution string,"In configuring the GOES16 CPP layers a bit too much information was copied from the MSG-CPP layers. 
This resulted in an incorrect attribution string source: EUMETSAT/KNMI and incorrect cutting off of the GOES 16 data west of 80 degrees West",2
122293818,2023-01-23 11:08:43.535,BE: Fix Docker for new TAF BE,"While the calls work with uvicorn, there are some problems with Docker compose.",2
122278180,2023-01-23 08:59:24.157,FE: Also replace msg-cpp wms with satellite,,2
122275962,2023-01-23 08:27:45.422,BE: cleanup satcomp wms from presets,"* In this file: https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/staticpresets/view-presets.json links to satcomp should be replaced with the satellite wms
* Line 57: update link to adaguc server wms & satellite as msgrt has been added to geoweb adaguc server
* Double check where static preset data is written into database",2
122185166,2023-01-20 12:43:00.148,"BE: fix ""name already exists"" issue for SW open key for TST deployment",,2
121883669,2023-01-16 11:39:12.367,Harmonize layer types in older to solve #2859 - part 2,"This is part 2 to correctly solve https://gitlab.com/opengeoweb/opengeoweb/-/issues/2859 (FE: Layer info not visible for all layers)

Layer interfaces are re-used where possible.

To test: Make sure everything layer related still works.

See MR https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2175",1
121877705,2023-01-16 10:13:32.834,BE: new TAF BE - documentation,Update/write readme & update HLD,3
121876173,2023-01-16 09:56:24.185,BE: new TAF BE - deployment repo,"* Similar setup as presets backend deployment repository
* This repo should also deploy avi messageservice for standalone TAF functionality",5
121876157,2023-01-16 09:56:09.159,BE: new TAF BE - migrate current state of TAF,"Import data from DynamoDB to ensure compatibility

If it is very difficult, skip this. When going to PRD, it has been accepted that older TAFs cannot be accessed for a single timeslot.

For development: functionality to grab data with a /taflist call and copy into database

Should not be more than 1.5 days of work, or if it feels not feasible after a couple of hours, it can be dropped",3
121875736,2023-01-16 09:50:00.044,BE: new TAF BE - taf2tac,"* The docker compose should also start a container that runs the avi-messageconverter which is called with taf2tac
* Create an endpoint for taf2tac and test/verify functionality
* Make only accessible internally from fastAPI via TAF BE (only for developing environment)",3
121875525,2023-01-16 09:47:40.598,BE: new TAF BE - migrate logic from lambdas to new BE,"* Migrate code from lambdas
* Update/rewrite all unit tests - make sure all tests pass",5
121875251,2023-01-16 09:44:05.698,BE: new TAF BE - database schema,"* Migrate from DynamoDB to postgres
* Copy as much as possible from DynamoDB schema
* JSON object inside one sql column
* Also very similar to how presets schema is set up",3
121875093,2023-01-16 09:42:24.796,BE: new TAF BE - tafplaceholder,"* Use a timer service to make sure that taf placeholders are generated
* Inside same fastAPI server as rest of TAF BE",3
121874767,2023-01-16 09:38:59.482,BE: new TAF BE - define interfaces & types,"* Adapt code for Fast API
* Define data types for endpoints - these should be derived from openAPI defintion
* Should be backwards compatible, so only change is URL, not endpoints
* Make sure all calls are working and return something (even if it's an empty string).",3
121874619,2023-01-16 09:37:14.629,BE: new TAF BE - set up code repository,"Set up code repo for TAF similar to presets BE (clone presets and edit that one even?)

repo name: aviation-taf

Includes docker compose.",3
121873120,2023-01-16 09:20:47.449,FE: More default lines in (new) edit TAF,When you open a TAF in edit mode then by default 1 baseline and 5 changegroup lines appear.,2
121871310,2023-01-16 08:58:33.067,FE: TAC adverse Weather not clear enough,"The adversed weather in the TAC overview is in red. Turns out to be not clear enough for some forecasters.

Implement updated designs: https://zpl.io/wqQnxLj (bottom right)",2
121870772,2023-01-16 08:52:17.454,FE: Published clock symbol shows 'Upcoming' in TAF overview,"When a TAF gets published a green clock symbol shows up in the TAF overview and in the editor menu on the left. When you go to a published TAF in the menu on the left and it opens it shows 'Published' in the title header. When you hover the green clock symbol in the TAF-overview a popup appears with 'Upcoming' This leads to confusion. 

When hovering the green clock-symbol, the text should say 'Published' to prevent confusion. Fix could be to show status from BE on hover",2
121870430,2023-01-16 08:46:41.291,BE: Clean up of TAF table,"### Test criteria

* All databases (especially TST/ACC/PRD) should be cleaned up
* TAFs in databases should be accessible for 10 days
* It is proposed to integrate the cleanup of the database into the ""tafplaceholder"" lambda which runs every hour.
* Use startDate (start time of validity) to determine if the TAF is older than 10 days.
* While developing, try to use a different retention time so not everything is removed at once (testing)",3
121869886,2023-01-16 08:39:04.517,BE: Implement new cleanup in GeoWeb-Adaguc,"If you use the latest nested stack version of adaguc, then we can configure the clean up as part of the layer configurations

Latest version is 1.3.4

Then we could remove all the eventrules in the cloudformation

For the layers that should be cleaned up, three properties should be added to the configuration: RetentionPeriod, RetentionType & EnableCleanup (see [documentation](https://github.com/KNMI/adaguc-server/blob/master/doc/configuration/FilePath.md))

On ACC this cannot be tested for all datasources (will only work for event based datastreams), this should nog be a problem",3
121869061,2023-01-16 08:30:32.610,BE: track api versions in grafana,"Create a dashboard which displays the versions of deployed micro-services. Create dashboards for ACC & PRD

- Completely new dashboard",3
121868728,2023-01-16 08:27:24.481,BE: add version call to GeoWeb - avi messageconverter,,3
121868679,2023-01-16 08:26:56.695,BE: add version call to GeoWeb - Aviation,,3
121868632,2023-01-16 08:26:35.730,BE: add version call to GeoWeb - SpaceWeather,"When you tag, you should add some information that is displayed when doing the version call. The version call should automatically be updated after creating a new tag.

After creating a tag, somewhere in the build the version is displayed/written. Here the version call should be updated as well.",3
121867938,2023-01-16 08:15:23.280,Deploy to PRD 24th of January,,1
121867712,2023-01-16 08:12:01.594,Release to ACC Tue 17/1/23,"Confluence: https://confluence.knmi.nl/display/GW/GeoWeb+2.7.1

Release to ACC failed with following message: `Resource handler returned message: ""API Key already exists (Service: ApiGateway, Status Code: 409, Request ID: 14f972e9-f0bf-4071-89d4-1cd9b392d89d)"" (RequestToken: e39651e4-d83b-fb05-07cf-b89803483f46, HandlerErrorCode: AlreadyExists)`",3
121751812,2023-01-13 15:52:05.509,"In Layer interfaces: Change the text property to title, in order to harmonize layer types","This is part1 to correctly solve https://gitlab.com/opengeoweb/opengeoweb/-/issues/2859 (FE: Layer info not visible for all layers)

`text` property is named `title` where possible.

The `text` property on some layer interfaces was needed to accommodate previous ExtJS components. The text property does represent the title property of the layer. We currently need many unnecessary conversions from text to title and vice versa. This MR harmonized that.

To test: Make sure everything layer related still works.

MR: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2173",1
121736437,2023-01-13 11:34:29.983,FE: correct fields sent to /sigmet2tac,"When making a sigmet2tac call, irrelevant/incorrect fields are sent, causing an incorrect TAC to be generated. This blocks the smoketest from passing in https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/414. For other sigmet calls, we should check if incorrect fields are sent or not. 

If fields are empty or none, they should be stripped, except for ""phenomenon"", this is a mandatory field.

Irrelevant fields are (list to be checked further):
- observationOrForecastTime
- IS_DRAFT
- endGeometry (if not used)
- endGeometryIntersect (if not used)

Example of incorrect JSON sent to sigmet2tac:
```json
{
  ""locationIndicatorATSR"": ""EHAA"",
  ""locationIndicatorATSU"": ""EHAA"",
  ""isObservationOrForecast"": ""OBS"",
  ""levelInfoMode"": ""AT"",
  ""change"": ""WKN"",
  ""firName"": ""AMSTERDAM FIR"",
  ""phenomenon"": ""SEV_ICE"",
  ""type"": ""TEST"",
  ""uuid"": ""c5b533cc-9325-11ed-b145-c63d169815aa"",
  ""sequence"": ""-1"",
  ""locationIndicatorMWO"": ""EHDB"",
  ""movementType"": ""STATIONARY"",
  ""validDateStart"": ""2023-01-13T10:06:29Z"",
  ""firGeometry"": {
    ""type"": ""FeatureCollection"",
    ""features"": [
      {
        ""type"": ""Feature"",
        ""geometry"": {
          ""type"": ""Polygon"",
          ""coordinates"": [
            [
              [
                5,
                55
              ],
              [
                4.331914,
                55.332644
              ],
              [
                3.368817,
                55.764314
              ],
              [
                2.761908,
                54.379261
              ],
              [
                3.15576,
                52.913554
              ],
              [
                2.000002,
                51.500002
              ],
              [
                3.370001,
                51.369722
              ],
              [
                3.370527,
                51.36867
              ],
              [
                3.362223,
                51.320002
              ],
              [
                3.36389,
                51.313608
              ],
              [
                3.373613,
                51.309999
              ],
              [
                3.952501,
                51.214441
              ],
              [
                4.397501,
                51.452776
              ],
              [
                5.078611,
                51.391665
              ],
              [
                5.848333,
                51.139444
              ],
              [
                5.651667,
                50.824717
              ],
              [
                6.011797,
                50.757273
              ],
              [
                5.934168,
                51.036386
              ],
              [
                6.222223,
                51.361666
              ],
              [
                5.94639,
                51.811663
              ],
              [
                6.405001,
                51.830828
              ],
              [
                7.053095,
                52.237764
              ],
              [
                7.031389,
                52.268885
              ],
              [
                7.063612,
                52.346109
              ],
              [
                7.065557,
                52.385828
              ],
              [
                7.133055,
                52.888887
              ],
              [
                7.14218,
                52.898244
              ],
              [
                7.191667,
                53.3
              ],
              [
                6.5,
                53.666667
              ],
              [
                6.500002,
                55.000002
              ],
              [
                5,
                55
              ]
            ]
          ]
        },
        ""properties"": {
          ""centlong"": 4.98042633,
          ""centlat"": 52.8618788,
          ""selectionType"": ""fir"",
          ""FIRname"": ""AMSTERDAM FIR"",
          ""StateName"": ""Netherlands"",
          ""StateCode"": ""NLD"",
          ""ICAOCODE"": ""EHAA"",
          ""REGION"": ""EUR""
        }
      }
    ]
  },
  ""validDateEnd"": ""2023-01-13T13:06:29Z"",
  ""status"": ""DRAFT"",
  ""observationOrForecastTime"": null,
  ""startGeometry"": {
    ""type"": ""FeatureCollection"",
    ""features"": [
      {
        ""type"": ""Feature"",
        ""geometry"": {
          ""type"": ""Polygon"",
          ""coordinates"": [
            [
              [
                5,
                55
              ],
              [
                4.331914,
                55.332644
              ],
              [
                3.368817,
                55.764314
              ],
              [
                2.761908,
                54.379261
              ],
              [
                3.15576,
                52.913554
              ],
              [
                2.000002,
                51.500002
              ],
              [
                3.370001,
                51.369722
              ],
              [
                3.370527,
                51.36867
              ],
              [
                3.362223,
                51.320002
              ],
              [
                3.36389,
                51.313608
              ],
              [
                3.373613,
                51.309999
              ],
              [
                3.952501,
                51.214441
              ],
              [
                4.397501,
                51.452776
              ],
              [
                5.078611,
                51.391665
              ],
              [
                5.848333,
                51.139444
              ],
              [
                5.651667,
                50.824717
              ],
              [
                6.011797,
                50.757273
              ],
              [
                5.934168,
                51.036386
              ],
              [
                6.222223,
                51.361666
              ],
              [
                5.94639,
                51.811663
              ],
              [
                6.405001,
                51.830828
              ],
              [
                7.053095,
                52.237764
              ],
              [
                7.031389,
                52.268885
              ],
              [
                7.063612,
                52.346109
              ],
              [
                7.065557,
                52.385828
              ],
              [
                7.133055,
                52.888887
              ],
              [
                7.14218,
                52.898244
              ],
              [
                7.191667,
                53.3
              ],
              [
                6.5,
                53.666667
              ],
              [
                6.500002,
                55.000002
              ],
              [
                5,
                55
              ]
            ]
          ]
        },
        ""properties"": {
          ""centlong"": 4.98042633,
          ""REGION"": ""EUR"",
          ""StateName"": ""Netherlands"",
          ""FIRname"": ""AMSTERDAM FIR"",
          ""StateCode"": ""NLD"",
          ""centlat"": 52.8618788,
          ""ICAOCODE"": ""EHAA"",
          ""selectionType"": ""fir"",
          ""stroke"": ""#f24a00"",
          ""stroke-width"": 1.5,
          ""stroke-opacity"": 1,
          ""fill"": ""#f24a00"",
          ""fill-opacity"": 0.25
        }
      }
    ]
  },
  ""startGeometryIntersect"": {
    ""type"": ""FeatureCollection"",
    ""features"": [
      {
        ""type"": ""Feature"",
        ""properties"": {
          ""stroke"": ""#f24a00"",
          ""stroke-width"": 1.5,
          ""stroke-opacity"": 1,
          ""fill"": ""#f24a00"",
          ""fill-opacity"": 0.5
        },
        ""geometry"": {
          ""type"": ""Polygon"",
          ""coordinates"": [
            [
              [
                4.331914,
                55.332644
              ],
              [
                3.368817,
                55.764314
              ],
              [
                2.761908,
                54.379261
              ],
              [
                3.15576,
                52.913554
              ],
              [
                2.000002,
                51.500002
              ],
              [
                3.370001,
                51.369722
              ],
              [
                3.362223,
                51.320002
              ],
              [
                3.36389,
                51.313608
              ],
              [
                3.373613,
                51.309999
              ],
              [
                3.952501,
                51.214441
              ],
              [
                4.397501,
                51.452776
              ],
              [
                5.078611,
                51.391665
              ],
              [
                5.848333,
                51.139444
              ],
              [
                5.651667,
                50.824717
              ],
              [
                6.011797,
                50.757273
              ],
              [
                5.934168,
                51.036386
              ],
              [
                6.222223,
                51.361666
              ],
              [
                5.94639,
                51.811663
              ],
              [
                6.405001,
                51.830828
              ],
              [
                7.053095,
                52.237764
              ],
              [
                7.031389,
                52.268885
              ],
              [
                7.063612,
                52.346109
              ],
              [
                7.065557,
                52.385828
              ],
              [
                7.133055,
                52.888887
              ],
              [
                7.14218,
                52.898244
              ],
              [
                7.191667,
                53.3
              ],
              [
                6.5,
                53.666667
              ],
              [
                6.500002,
                55.000002
              ],
              [
                5,
                55
              ],
              [
                4.331914,
                55.332644
              ]
            ]
          ]
        }
      }
    ]
  },
  ""IS_DRAFT"": false,
  ""level"": {
    ""unit"": ""FL"",
    ""value"": 100
  },
  ""endGeometry"": {
    ""type"": ""FeatureCollection"",
    ""features"": [
      {
        ""type"": ""Feature"",
        ""properties"": {
          ""stroke"": ""#6e1e91"",
          ""stroke-width"": 1.5,
          ""stroke-opacity"": 1,
          ""fill"": ""#6e1e91"",
          ""fill-opacity"": 0.25,
          ""selectionType"": ""poly""
        },
        ""geometry"": {
          ""type"": ""Polygon"",
          ""coordinates"": [
            [
              
            ]
          ]
        }
      }
    ]
  },
  ""endGeometryIntersect"": {
    ""type"": ""FeatureCollection"",
    ""features"": [
      {
        ""type"": ""Feature"",
        ""properties"": {
          ""stroke"": ""#6e1e91"",
          ""stroke-width"": 1.5,
          ""stroke-opacity"": 1,
          ""fill"": ""#6e1e91"",
          ""fill-opacity"": 0.5,
          ""selectionType"": ""poly""
        },
        ""geometry"": {
          ""type"": ""Polygon"",
          ""coordinates"": [
            [
              
            ]
          ]
        }
      }
    ]
  }
}
```",3
121724604,2023-01-13 08:58:54.312,FE: spaceweather empty string on populate,"First make sure the unit test will fail, as the smoketest.

When pressing populate and sending a form, all field values are send, including empty ones. Only field values with a value should be send. 

After this the smoketest should pass again so we can make a release again.",3
119187066,2022-11-22 13:10:34.294,FE: Add new faultline layer to BES preset,"Update the BES preset that uses the `faultlines_caribbean` fault lines to use layer `faultlines_world`

Do this AFTER 29th of November after going to production with adaguc-server",1
119159979,2022-11-22 08:33:10.798,BE: Update openapi specs for TAF,"An issue reported by Marcel brought forward the following problem: in the openapi specification a validation case is missing where the change group contains _only_ a ""probability"" field and **not** a ""change"" field. 


#### What should be done?
Currently, the ""change"" field is set as required. An additional validation case should be created where the ""probability"" field is required and should have a value of ""PROB30"" or ""PROB40"" and the ""change"" field may be left empty.


#### Requirements
The changegroup below should be accepted by the openapi specification. In a change group:
1. The field ""change"" is not empty, the field ""probability"" may be empty
2. The field ""probability"" is not empty, the field ""change"" may be empty
3. Both may be not empty
4. At least one of the two should have a value


#### Example
Changegroup causing error:
```
 {
        ""probability"": ""PROB30"",
        ""valid"": {
          ""start"": ""2022-11-23T05:00:00Z"",
          ""end"": ""2022-11-23T08:00:00Z""
        },
        ""visibility"": {
          ""range"": 4000,
          ""unit"": ""M""
        },
        ""weather"": {
          ""weather1"": ""BR""
        },
        ""cloud"": {
          ""cloud1"": {
            ""coverage"": ""BKN"",
            ""height"": 4
          }
        }
      }
```",2
119087155,2022-11-21 09:59:26.060,FE: wmjsmap doesn't currently work with React 18 in Strict mode,"We be fixed in:

1. https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2081
1. https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2105
1. https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2124",5
119085644,2022-11-21 09:46:49.924,Investigate alerts coming from presets,">  [Alerting] Nginx ERROR ALERTS (tst) alert
> 
> A Nginx error occurred in the Presets Backend service. Affected environment: tst

NGINX looking up token to talk to cognito. Latest fix to cater for cognito changing IP did not fix the problems.

- Possibly exceeding amount of connections? Try this and see if it fixes it.
- Could possibly be that the FE is working fine and the message is simply a warning or if it is really failing?",3
119085280,2022-11-21 09:42:10.598,Release to acc 01/12 at 10:00,,2
119085030,2022-11-21 09:38:21.566,Fix smoketest,Smoketest broke after the layermanager changes from the joint sprint. Fix the smoketest to work again with the new changes.,3
119084690,2022-11-21 09:34:24.295,Deployment of nested stack ADAGUC,,2
119084515,2022-11-21 09:32:13.556,Afstemmingsdag presentatie 8 Dec,Link to presentation: https://docs.google.com/presentation/d/1ujVZ9WT3MK7PHnk2Kddr8oywCH48OC45/edit#slide=id.p1,3
119084446,2022-11-21 09:31:56.289,PRD deployment 29th November,,2
119083791,2022-11-21 09:25:15.381,FE: VRB allowed for LESS then 3 kt,The use of VRB in the wind field is (only) allowed with windspeeds of LESS than 3 kt. So VRB01 and VRB02 are ok. (Currently also VRB03 is validated as correct.),2
119083693,2022-11-21 09:23:34.900,FE: Change in windgust validation,"Windgusts currently are allowed when these gusts are 10 or more its above the average wind AND this average wind is 15 kts or more.

We need to change that to:

* Gusts are 10kts or more above the average wind without checking FF for a minimum value",2
119082598,2022-11-21 09:12:54.321,BE: Investigate performance DynamoDB database,"For TAF we are currently experiencing timeouts of 15secs (FE cuts the request) if we are doing too many requests. We should investigate what makes the response take so long.

Could it be the scan of the DB instead of query? Should we add a secondary index? Increase performance?",3
119082497,2022-11-21 09:10:52.877,FE: Remove discard button add 'clear button',"Remove the discard functionality as it is right now and add a button 'clear', that removes the content of the edited taf and start with a clean slate. Add confirmation dialogue when user presses clear button.

No call required to the BE, only empty the FE form.",3
119081607,2022-11-21 09:00:40.191,FE: Refresh token if expired for 75% (45min),"In the API Provider/Authentication lib - before doing a request check if the token has expired for more than 75% (probably 45mins as it is valid for 1h) and if that's the case, refresh to retrieve the new token before doing the call using that new token.",3
119081328,2022-11-21 08:55:38.770,Investigate: Getting 403 errors when loading TAF interface,"Investigate the issue and see if we can reproduce.

This occurred during the TAF-testing period in the weather office on ACC when multiple people were working at other positions at the same time.

The only thing I did a couple of times after each other was:

* Reload GeoWeb
* Login
* Click on the hamburger menu select TAF
* This is the moment the 403's were encountered.
* After another click in the menu the error went away",3
119080445,2022-11-21 08:43:25.547,ADAGUC: Add GOES images to Satcomp GeoWeb system WMS,"Goals of this issue is to add the newly processed GOES satellite images for the BES to the existing Satcomp system WMS services of GeoWeb.

Link to WMS with both existing Satcomp and newly processed GOES BES : https://adaguc-server-wkdinnov.wlm.acc.knmi.cloud/adaguc-server?dataset=satcomp&service=WMS&request=GetCapabilities

Note that, because of cost reduction, images for BES are currently updated every 1 hour.

MR already created: https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/merge_requests/48",2
119079423,2022-11-21 08:37:14.092,ADAGUC: Add faultlines database,"The standard fault line database in the GeoWeb dashboard should be **replaced** by the [GEM Global Active Faults Database](https://github.com/GEMScienceTools/gem-global-active-faults).

Implement the GeoJSON file: [harmonised file](https://github.com/GEMScienceTools/gem-global-active-faults/blob/master/geojson/gem_active_faults_harmonized.geojson)

Ensure keep the same name so it works with the existing preset",3
119077549,2022-11-21 08:24:35.938,FE: Styling of pop-up for click on feature info marker,"As a user I want to display information from a seismic event in a separate window.

(meta)data information:

* time of event
* depth
* magnitude
* lat, lon

Design to be discussed with Didier.

- Add tests and snapshots",3
119077150,2022-11-21 08:20:16.543,FE: Clicking on map triggers getFeatureInfo,"Add a button that allows you to click on features on the map to trigger a getFeatureInfo. The information retrieved will be shown in a pop-up.
- Add tests
- No snapshots as there is no design yet!

(meta)data window (see attached screenshot as an example)

* when the user clicks on a event marker, the selected marker needs to be clearly identifiable
* when the context window is not open yet, the window will appear when the user clicks on a event-marker
* the window will display the (selected) content of the active event-marker
* the window can be resized
* the window can be closed
* the window can be moved around within the map view (to discuss how to deal with multi-tiled map views)
* the last position of the window before closing will be saved for future use
* each map can have one pop-up over open",3
119076643,2022-11-21 08:12:22.350,FE: Add BES Harmonie to available WMS services,Add dataset to the available WMS services in the LayerSelect for internal KNMI.,2
119076532,2022-11-21 08:10:41.833,ADAGUC: add configuration for BES Harmonie Domain,"Contact IKM/WKD for the configuration file. Add to geoweb-adaguc server.

Proposed name: `BES Harmonie`

MR: https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/merge_requests/55",2
118912300,2022-11-17 13:24:22.890,FE: update react-hook-form to V7,"https://legacy.react-hook-form.com/migrate-v6-to-v7/

We might need react-hook-form V7 before we can use React 18. 

- typing in a TAF field breaks the app, updating to react-hook-form to V7 might fix it?",5
118893005,2022-11-17 09:09:35.244,FE: layermanager fix select box styling,"fix styles for the select boxes:
- hover should not get blue outline, fill should be 100% in row height
- hover/focus should not have a rounded outline, should be borderRadius 0
- focus should show blue outline on select 

See designs/ OpacitySelect component for styling how it should look",2
118840061,2022-11-16 14:08:07.470,FE: fix layermanager size on smaller screen,"If the layermanager is small, and hugging right side, and user presses big, it should grow as big as possible. Same for left",2
118812334,2022-11-16 09:08:19.149,BE: taftaclambda add typehints,,1
118812296,2022-11-16 09:07:36.653,BE: tafplaceholder add typehints,,2
118812126,2022-11-16 09:04:54.598,BE: sigmettaclambda add typehints,,1
118812067,2022-11-16 09:04:14.782,BE: airmettaclambda add typehints,,1
118811989,2022-11-16 09:03:04.126,BE: TAF Add typehints,,2
118811819,2022-11-16 09:00:03.207,BE: increase tafapi test coverage,"Current tafapi.py testcoverage is 76%, increase to > 90%",3
118811761,2022-11-16 08:59:35.729,BE: increase authorizerlambda test coverage,,3
118811671,2022-11-16 08:58:43.081,BE: make TAF object oriented,"#### Requirements
* Functionalities should remain the same
* Test coverage should remain the same or increase",3
118810582,2022-11-16 08:45:04.185,BE: Presets: Align README with actual behaviour,Check if all response status codes described in the README are actually implemented that way.,3
118650448,2022-11-14 08:10:51.088,FE: Fix loading Bounding Box for all layers,"
Fix loading Boarding Box when it's not in the leyer

-- Update 2023-01-26:

Fixed in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2199",2
118648953,2022-11-14 07:46:31.149,FE: layermanager fix opacity select,"Some issues to fix with the opacity slider:
- styling is not correct
- zIndex is not correct
- doesn't show correct position for medium layermanager (for example if you open row 3) 

![Screenshot_2022-11-14_at_08.48.57](/uploads/6865a946def4d63c3bc96107765e7283/Screenshot_2022-11-14_at_08.48.57.png)",3
118555899,2022-11-11 10:53:00.028,Interaction between layermanager button and docked layermanager,Clicking on the layermanager button should open te floating layer manager and if the corresponding docked LM is opened for that map it should close.,3
118555861,2022-11-11 10:51:24.406,Fix baselayers for docked layermanager,"Having multiple docked layermanagers open resuls in a ""No service available"" in the one not in focus. This needs to be fixed",3
118486672,2022-11-10 11:02:56.221,BE: separate lambda handling V2 notifications,"Create the code for a separate lambda handling the V2 SpaceWeather notifications from the MetOffice.
This branch should be based on the test-new-notif branch where most of the code has aready been developed.",3
118477296,2022-11-10 08:57:47.738,FE: add firefox container queries polyfill to fix layermanager size issues,"The firefox polyfill works locally, but breaks in the build and showing a blank screen. It looks like the css is broken, because buttons still seem to click. Maybe we can use the cdn link and include it somehow? Or some (babel) config for build which we can tweek? 

The polyfill has been moved in the MR to the polyfill file in the app. 

To test:
- firefox should work (in the build)
- firefox should be able to show correct container queries

Check the MR: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1985. To test this out with the build, deploy to poc.opengeoweb.com after the build is ready in Firefox. (maybe this can be tested locally as well?)

Without this polyfill, the layermanager in firefox is not working correct, like not showing the correct size buttons or handling resize correctly.",3
118472258,2022-11-10 07:57:27.350,FE: Layermanager medium part 2: toggle,Fix the toggle styling,3
118472173,2022-11-10 07:55:12.413,BE: PresetsBE: Update Aurora RDS postgres version,"Update https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/blob/master/cloudformation.cfn.yaml#L541 to new version. (11.13 would suffice, but maybe 14 is better).

The database will automatically update, but make sure that this is really the case.

This was done as well for the adaguc nested stack: https://gitlab.com/KNMI/shs/adaguc-server-cfn/-/blob/master/rdbms-postgres-serverless.component.cfn.yaml#L116",1
118253636,2022-11-07 10:03:59.723,FE: Toggle groups/keywords in layerselect filter dialog,Use drawer for keyboard/groups. Default open,3
118252905,2022-11-07 09:53:28.394,FE: ServicePopupConnect rerender issue,"Move the ServicePopupConnect up the child tree, so it won't rerender when LayerSelect is rerendering. Probably some redux state needs to be added to the `layerSelect` store, so we can hide/show it on every place as long as it's a connected component.

To test: `console.log` the component, and see if it does not rerender when searching for example for new service. Hold in account that the docked layermanager can cause issues with this, we should be careful when to render the component.",3
118252670,2022-11-07 09:49:54.880,FE: Improve the layer select redux store with redux-toolkit,"Start with creating a adapter, and use it inside the reducer. If fixing the selectors is too big, split it.",5
118252316,2022-11-07 09:43:33.679,FE: Show snackbar deleting a service,See US.,2
118252293,2022-11-07 09:43:23.824,BE: Share knowledge for FastAPI implementation of presets BE,Discuss what should be worked on to finish and give overview,3
118252210,2022-11-07 09:42:03.104,FE: Fix initial load of service chips,"Show all services as disabled initially, and when ready enable them one by one.

Ticket is re-opened because of issues with selecting knmi services, code has been reverted. Should wait for https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2073

- fix issue with knmi services
- reducer should be rewritten so it's more readable",3
118251653,2022-11-07 09:35:17.283,FE: Autofocus on serviceUrl in ServicePopup,"Don't show error on focus when it's empty. Only autoFocus for **new** services, not existing",3
118250915,2022-11-07 09:33:11.766,FE: Make keyboard controls work in services list menu,See [US](https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2277).,2
118250378,2022-11-07 09:31:20.871,FE: Sort services list same as service chips,See US.,2
118250232,2022-11-07 09:30:01.744,FE: Layer info not visible for all layers,"See US

- Part1: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2173
- Part2: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2175
- Part3: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2199",2
118250103,2022-11-07 09:27:38.564,FE: LayerSelect new service content not available before reload,"Test this out, if it's already fixed then nothing needed, otherwise fix the issue.",2
118249902,2022-11-07 09:24:46.490,FE: Keyword and Group filter has stopped working,See US.,2
118249206,2022-11-07 09:14:37.821,FE: layermanager dock/undock,"- add layermanager ~~to screenmanager view~~ to mapStore
- add layermanager as prop to the ~~screenmanager store~~ map store with properties:
    - isOpen
    - ... width/size (later ticket)
    - ... position (later ticket)
- add layermanager actions show/hide per map
- possibly sagas need to help to connect the different store modules (ui/map)
- only focus on this ticket on the show/hide button of the layermanager; not the main control button of layermanager on the map

see: https://www.sketch.com/s/4a6c597a-34a0-4382-ba18-e8de658f132d/prototype/a/E85F4838-1508-48A2-9D2C-47AFE660F1EB",5
118249081,2022-11-07 09:12:47.649,Release to ACC on 17th of November,"Check/sync with joined sprint for FE release


Release notes: https://confluence.knmi.nl/display/GW/GeoWeb+2.5.0",1
118248977,2022-11-07 09:10:39.825,BE: SpaceWeather version 2 notifications: plan how to deploy the changes before or when the MetOffice switches over the notification source (5-9Dec),"Plan a meeting to discuss how to deploy spaceweather V2 to switch to new notification source


No changes needed for FE",3
118248950,2022-11-07 09:10:28.037,BE: SpaceWeather version 2 notifications: add test cases for all notification types/eventfecycles,"Test each type and all life cycle events to complete test cases for ingester. Can use previous events as mock events

Criteria:
* All type of notifications
* All life cycle events",5
118248746,2022-11-07 09:07:39.984,BE: Fix comments on FMI-avimessageconverter lib,"Can affect other libraries, include updates. Main focus on FMI-avimessageconverter

Refine comments, plan of action
If comment means lot of work, create separate ticket. Link as ""to do"" in code and pick up (or in next sprint)

Link to MR and review comments: https://github.com/fmidev/fmi-avi-messageconverter/pull/100

Comments:
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974932710
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974933055
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974935517
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974941462
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974941847
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975136677
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975184529
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975289369
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975302052
 - [ ] __: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975310439
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r977188468
 - [x] BH: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r989696087
 - [x] EV: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r975013125
 - [x] EV: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974933055
 - [ ] EV: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974973461
 - [ ] __: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974979761 TBD!!
 - [ ] EV: https://github.com/fmidev/fmi-avi-messageconverter/pull/100#discussion_r974986298
 - [ ] 
Put your initials if you're working on a comment. And tick the checkbox when done. Commit your work to branch `merge-fmi`: https://gitlab.com/opengeoweb/avi-msgconverter/fmi-avi-messageconverter/-/commits/merge-fmi",5
118248627,2022-11-07 09:06:23.847,BE: Plan meeting with Gijsbert on visualising archived data,Probably on 17th of November,3
118248371,2022-11-07 09:01:06.372,BE: Understanding geoweb-serverless-backend authentication lambda/cognito,Plan a meeting,3
118247907,2022-11-07 08:57:18.460,BE: TAF warning continuously in #geoweb-monitoring-acc,"While working on a TAF, incomplete data is sent to avi-message converter. This returns an error. 

Instead of error, return standard massage that a TAC could not be created",3
118247552,2022-11-07 08:52:34.839,BE: Fix dead TAF code,"Double check that piece of code can be removed (code coverage). If needed, update tests",2
118247148,2022-11-07 08:47:43.908,FE: layermanager size buttons,"When clicking the buttons, add the size the layermanager. Use width/heights, the container queries should do the rest (don't use types for this). Always hide your current size button.

- the layermanager should always be in view. If it's too big, it should jump back to be visible inside screen (if too big split in separate ticket).
- also fix the header height, on small screen should be small",3
118246916,2022-11-07 08:45:41.283,FE: TAF sorting in TAF overview current and expired,"Check if sorting based on issue date goes as required: the order should be for every station the current TAF on top and the expired TAF below. Do not use status but issue date, as the expired TAF should have an earlier issue date.

NOTE: A placeholder TAF does not have an issuedate, but it should still sort correctly. In that case expired should still show below current.

NOTE2: The examples in the user story that went wrong are all with corrected and amended tafs. A draft correction or amendment also doesn't have an issuedate, make sure to handle these as well.",2
118246666,2022-11-07 08:42:57.243,BE: Number of TAFs in TAF overview current and expired,"In the TAF overview current and expired there always should be visible the current TAF and the expired TAF for every station. The order should be for every station the current TAF on top and the expired TAF below.


Required:
* Should return correct number of TAFs
* Expired TAF should be returned after the current TAF per station
* FE takes care of sorting of stations",3
118246648,2022-11-07 08:42:44.657,FE: layermanager medium mappresets,"See US. use breakpoints as defined as width in design. If it's too big, split it (see both US for splitting ideas). This ticket will do mapPresets.",5
118246206,2022-11-07 08:37:12.902,BE: TAC starting new lines goes wrong with PROB and TEMPO,"In the TAC overview, the starting of new lines goes wrong sometimes. A new line should always start in the same way a line in the editor field starts, with the starting of a new change group. Even when the last item of the previous linev needs a new line, the next change group must be on a new line in the overview.. A new line must start in the TAC overview with the start of a new group in the TAF, with

* FM
* BECMG
* TEMPO
* PROB30
* PROB40
* PROB30 TEMPO
* PROB40 TEMPO


Possibly a FE fix is required after BE update as well. If necessary, create a follow up ticket",3
118245832,2022-11-07 08:34:10.768,FE: TAF taking over Edit mode when state not updated,"If a user takes over a TAF that is already being edited by another user, a warning should pop up


Do the list call before the takeover, include test",3
118245654,2022-11-07 08:33:24.814,FE: layermanager remove mini layermanager,"Remove js logic from mini layermanager. Don't let it toggle to different layouts, and put it back later with a container query css solution",3
118245571,2022-11-07 08:32:27.830,FE: layermanager small,Use container queries to show the small layermanager. Use tooltip to show layer. Use size as in zeplin (88px) for width,3
118245249,2022-11-07 08:27:59.894,FE: Add RADIS basemap to standard maps,"- Include in baselayer list
- Only for KNMI",1
118245240,2022-11-07 08:27:51.581,BE/ADAGUC: Add RADIS basemap to standard maps,"- Create new style for baselayer
- For naming & clarity, give it a separate name
- RADIS standard & RADIS pre-flits",3
118245188,2022-11-07 08:27:01.850,FE: Remove old layer select from application,,2
118245123,2022-11-07 08:26:04.621,FE: New layer select will open behind active view,,2
118244481,2022-11-07 08:16:55.222,FE: Add resize handles to all sides of the window,"See US
- bottom left and right should be adjustable
- only show the drag handles on hover
- this components is the ToolContainer, should work for all components using it (legend, layermanager etc)",3
118244043,2022-11-07 08:10:39.353,BE:  set up monitoring for presets BE,"Grafana dashboard (including alerts) for presets BE

Should detect errors and issues of functionality of presets BE

The current Presets dashboard is here: https://gitlab.com/KNMI/geoweb/monitoring/-/blob/master/grafana/PresetsDashboard.json",3
118244025,2022-11-07 08:10:09.302,BE: Research & solve presetsBE not working,"From the logging we found that the nginx container was not able to communicate with the userinfo endpoint of cognito. This is because the ip adress behind the domain name of cognito changes once in a while. The domain name is not re-resolved by nginx.

Possible fix in https://gitlab.com/opengeoweb/backend-services/presets-backend/-/merge_requests/54

This resolves the new IP to the domain name on regular basis.

This is deployed in tst for testing.",3
118243456,2022-11-07 07:59:47.274,FE: add tooltip delay to TooltipSelect,"see https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1973#note_1156762907

follow up of https://gitlab.com/opengeoweb/opengeoweb/-/issues/2790",2
118137765,2022-11-04 10:50:44.607,FE: investigate firefox container query polyfill issue,"### User

Developers, users
### Short description
Investigate why firefox is breaking on the build (it is working locally) with using the container-query polyfill. Test this on the build to make sure staging won't break again. 


### Why
So we can use container queries in firefox and have a uniform view

### Test criteria
- firefox should not cause blank screen in build
- firefox should work with container queries

### Extra information
A MR is already open with moving the polyfill to the `polyfills` file, but that did not work and gave a blank screen as well. Maybe include it with cdn link somehow?",3
118124901,2022-11-04 07:09:19.931,FE: fix withEggs wrappers causing unit tests to fail,"Currently a lot of providers are wrapper use the `withEggs` wrapper. Even non-redux ones. Tests are getting sometimes a timeout sometimes now because it takes a long time (also in pipeline), and redux warnings appear in tests for non redux components. Have a look at this wrapper only wrapping a non redux theme, causing every story/unit test to use redux:
```
const ThemeWrapperWithModules: React.FC<ThemeProviderProps> = withEggs([
  capModuleConfig,
])(({ theme, children }: ThemeProviderProps) => (
  <ThemeWrapper theme={theme}>{children}</ThemeWrapper>
));
```



Right now every story has redux wrapped. Only redux related components should use this wrapper. Check this for every lib.",3
117931519,2022-11-01 12:05:37.802,FE: Allow querying layers using WMS GetFeatureInfo,Make use of WMS GetFeatureInfo to obtain the value under the mouse cursor.,3
117919707,2022-11-01 08:49:27.018,FE: fix redux console errors draw function,"**Solution needs to be discussed**, see https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1987#note_1162617666 
Meeting planned for Friday 25 Nov at 10.00

- In `opengeoweb/apps/geoweb/src/app/store.ts` set `serializableCheck` to true.
- nx serve
- open timeseries preset

Fix redux console errors about `A non-serializable value was detected in the state` for `drawFunction`

link to redux doc https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state

![Screenshot_2022-10-31_at_14.27.33](/uploads/17a86e0cc94cffceb8aac4a95249da4b/Screenshot_2022-10-31_at_14.27.33.png)

Possible solutions:
- we might need to change the type of values we store, avoid non-serializable values
- make the serializableCheck ignore specific parts for the non-serializable values that we need to store, see for an example https://github.com/maxmantz/redux-oidc/issues/169#issuecomment-693474948",3
117861907,2022-10-31 13:26:27.261,FE: fix redux console errors time interval,"- In `opengeoweb/apps/geoweb/src/app/store.ts` set `serializableCheck` to true.
- nx serve
- add a harmonie layer to the map

OR
- nx storybook core
- go to http://localhost:5001/?path=/story/application-demo--geo-web-demo

Fix redux console errors about `A non-serializable value was detected in the state` for TimeInterval

link to redux doc https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state

![Screenshot_2022-10-31_at_14.27.23](/uploads/d86260ab89b506e48efef3b0c2c91283/Screenshot_2022-10-31_at_14.27.23.png)

Possible solutions:
- we might need to change the type of values we store, avoid non-serializable values
- make the serializableCheck ignore specific parts for the non-serializable values that we need to store, see for an example https://github.com/maxmantz/redux-oidc/issues/169#issuecomment-693474948",3
117850002,2022-10-31 09:52:17.066,BE: Deployment: Describe deployment procedure with microservices,"During discussion on 31-10-2022 we decided to continue with the microservices direction.

We need to extend the deployment procedure with a description which version (tag) of the microservice is deployed.

Write this in:
https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend#making-a-new-deployment",1
117608021,2022-10-26 12:14:32.395,Add snapshots to cap libray,Snapshots should be enabled in this library,2
117454059,2022-10-24 12:24:46.217,FE: sigmet/airmet remove disabled prop from fields and use isREadOnly,Remove disabled props and only use isReadOnly,2
117440654,2022-10-24 08:38:52.230,Go to PRD,"1 November 2022

- geoweb-adaguc-server (Maarten / Loes)
- presets-backend (Tineke)
- geoweb-serverless-backend (Tineke)",1
117440577,2022-10-24 08:37:13.699,Go to ACC,"3 November 2022


Release notes: https://confluence.knmi.nl/display/GW/GeoWeb+2.4.0",1
117440146,2022-10-24 08:29:05.688,FE: Add refresh button for your own WMS service in service list,"- Add a refresh button at all services giving the user the option to refresh his WMS when he wants.
- Show it for all services
- Add a tooltip for the refresh button saying: 'Reload WMS service'
- Add Snackbar indicating that his WMS service is refreshed.
- Clear the image store for legend and getmap to ensure new image data is loaded.

![image](/uploads/889dedcb941bff13b60de7305731b476/image.png)",3
117439078,2022-10-24 08:13:49.606,FE: Investigate and find replacement library for redux-dynamic-module loader library,"- Go through the mentioned links in the user story. 
- Choose a library and see if it works
- Remove old redux-dynamic-module library
- Make sure it works with React 18
- Cleanup test which mock the redux-dynamic-module library

Result is an MR where redux-dynamic-module library is not needed anymore.",5
117438888,2022-10-24 08:11:45.691,FE: Layer Manager shows no service even when layers are showing on map,Solve it!,2
117438461,2022-10-24 08:07:17.789,FE: Tooltip label blocks user action,"- All tooltips should have default delay of 1 second: should only be shown after the mouse is stopped for 1 second (enter delay)
- Add CSS property like `{""pointer-events"": none}`.",3
117436857,2022-10-24 07:41:31.939,FE: Display MetNo Cap feed warnings in Gantt timeline,"Use https://cap.opengeoweb.com/allalerts?url=https://api.met.no/weatherapi/metalerts/1.1

Check if the TypeScript type can represent the warning items, this type can be extended in the future to accomodate extra warning properties.

Warning item type should have:
- title
- description
- link
- author
- category
- area (identifier as string)
- phenomenon - (These need to be obtained from the title)
- color - (These need to be obtained from the title)
- guid
- pubDate
- endDate - (These need to be obtained from the title, last item in the comma separated list)
- startDate - (These need to be obtained from the title)

Result is a new storybook displaying the CAP feed in the Gantt component.",5
117436374,2022-10-24 07:35:21.879,FE: Make proof of concept with the Gantt library,"Put the mentioned functionalities in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2258

Use some fake (dummy) data, possibly from the CAP library.

- Add unit test
- ~~- Add snapshot~~ since it's a POC, we decided to not include a snapshot. After we have design we should do it

If it is becomes too big, split this tickets into smaller.",5
117435935,2022-10-24 07:29:54.042,FE: Find OS timeline component (Gantt),"Find a suitable library and try it out. Result is a MR with a storybook demonstrating the new library. Should be done at first in the nx CAP library.

- Suitable to use in React, if possible react based
- Well maintained
- Should handle many items, the library should be able to represent many warnings.
- It should support all functionalities as described in the user story https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2258",3
117434884,2022-10-24 07:18:15.917,BE: Airmet cleanup of tests,"Structure and clean up tests, split file if necessary. Add more tests if pieces are not covered still.

* Make sure the inline documentation gives a proper description of what is being tested
* Group tests with similar functionality",3
117215477,2022-10-20 06:23:18.701,FE: sigmet/airmet add readonly fields for view forms,"For the view forms, all inputs should get the `isReadOnly` prop to look like design. They have disabled, that can stay to prevent focussing",2
117149776,2022-10-19 07:23:57.939,BE: cancel AIRMET does not have correct type if TEST or EXCERCISE,,2
117102851,2022-10-18 12:38:29.427,FE: sigmet/airmet fix form error styling,"The optional styling works nice for the form, because all inputs are now aligned in height but not when there is an error, it show on top of the other optional field:

![Screenshot_2022-10-18_at_14.38.03](/uploads/5142288e0bf2ba36df1eed5df94af20b/Screenshot_2022-10-18_at_14.38.03.png)

Make sure both are visible, maybe the second one (or all errors) could get a relative position, it's not bad to push the form content when there are errors. Snapshot should not change initially, only for when showing an error 

Also make sure to add a snapshot for field errors, so this won't happen again",2
117045236,2022-10-17 15:21:25.959,BE: fix unstable MapPresets functionality,"In the TST environment, the performance of the MapPresets is unstable: you need at least two attempts to open the list of MapPresets, often you cannot immediately open a preset but first need to open another one, and saving and opening a custom user preset also needs at least two attempts.

The issue may seem to lie in the NGINX configuration: https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/nginx/nginx.conf#L114

Currently, it impedes the passing of smoketests of the geoweb serverless BE",3
125564161,2023-03-21 06:49:55.820,BE: fix nginx configuration for DELETE,"To enable deleting, the nginx configuration should be updated: https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/nginx/nginx.conf#L136",2
125540862,2023-03-20 15:06:50.042,FE: workspaced don't load when going directly to /workpreset,"- clear your session storage
- go to /workspace
- you should get redirected to login

currently it does not",2
125532138,2023-03-20 12:27:09.855,BE: Load workspace presets from BE - KNMI / taf,"Follow up of https://gitlab.com/opengeoweb/opengeoweb/-/issues/3412

Copy KNMI hamburger menu contents to workspace preset database, this also includes adding mappresets in the workspaces

To move: taf, ~~presets, satcomp presets~~

### Testing criteria

* check if any workspace presets are available in the hamburger menu
* check if all workspace presets expected show up in workspace select",2
125532126,2023-03-20 12:26:50.547,BE: Load workspace presets from BE - KNMI / satcomp,"Follow up of https://gitlab.com/opengeoweb/opengeoweb/-/issues/3412


Copy KNMI hamburger menu contents to workspace preset database, this also includes adding mappresets in the workspaces

To move: ~~taf, presets,~~ satcomp presets

### Testing criteria

* check if any workspace presets are available in the hamburger menu
* check if all workspace presets expected show up in workspace select",2
125521700,2023-03-20 08:44:49.227,FE: handle fallback for non backend connected,"When no backend_url for presets (workspaces) is present, we should load workspaces from fakeApi. Gitlab support will be dropped

- inside Workspace replace the `ScreenManagerApiWrapper` with `ApiProvider`. 
- import fakeAPi and realApi and API_NAME from screenmanager
- depending on 
```
        createApi={config?.GW_PRESET_BACKEND_URL ? createApiWorkspace : createFakeApiWorkspace}
```
- remove the `ScreenManagerApiWrapper` apiWrapper",3
125521211,2023-03-20 08:34:26.440,FE: data.fmi.fi layers missing TIME parameter after v4.11.0 part 2,,1
125520706,2023-03-20 08:19:16.860,Add options menu in SelectMenu,![image](/uploads/00c0d07d0c7d1fded551ee5e28dff9e7/image.png),2
125519054,2023-03-20 07:24:16.982,FE screenmanager store types are not correct,"See `ScreenManagerPreset` and `ScreenManagerViewType`, they are not correct. It seems they have some overlap, but when using it in tests you can quickly see there are issues. 
- store type should be same as in Type
- all tests with store tests should use the correct type (https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2339#note_1320821300)",2
125518961,2023-03-20 07:20:59.742,FE: error state on fetch workspace,"how does it look when
- workspace can't be loaded
- when a viewpreset can't be loaded (screenshot shows map, but we don't know that)
- errors should be able to be dismissed 


When error on workspace
- show error notifiction without screenmanager view (completely grey)
- make sure to retry and close it

add error stories
- add storybook examples

![image__1_](/uploads/78dc412fef9bee365ecc978603e114b5/image__1_.png)",3
125518762,2023-03-20 07:12:15.285,FE: Implement MenuSelectList Connect,"Implemented the connected component of `WorkspaceSelectList` that connects to the redux store and retrieves the list and the selected workspace from the store. Some logic that now is done in `WorkspaceDetail` can be moved over there, as the `screenManagerActions.fetchWorkspace` action

- create WorkspaceSelectListConnect
- use selector from store to retrieve the list of workspaceListItems
- pass workspaceListItems to the underlying component
- on click list item, should trigger `screenManagerActions.fetchWorkspace`
- move `fetchWorkspaceList` in `WorkspaceDetail`  the new connect component. 

After this is done, the list with links that now is rendered in WorkspaceDetail can be removed as we don't use it anymore, leaving only the home button",3
125440012,2023-03-17 13:36:42.977,BE: new TAF BE: Publish TAF to TAC and IWXXM,"Make published TAF's available as TAC and IWXXM.

MR in https://gitlab.com/opengeoweb/backend-services/aviation-taf-backend/-/merge_requests/9",3
125431996,2023-03-17 10:48:10.153,FE: router store,Splits router logic to make https://gitlab.com/opengeoweb/opengeoweb/-/issues/3383 smaller. This ticket sets the router store with action to reuse later,2
125431473,2023-03-17 10:36:31.146,Extra release to ACC,,1
125424277,2023-03-17 08:38:43.591,FE: TAC overview does not update all TAFs,See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2543,2
125423300,2023-03-17 08:31:36.172,FE: fix hamburger in workspace route,"Only bring in 
- sigmet-airmet
- spaceweather,
- sync groups
- auto arrange windows. 

Add the tests as well, perhaps Home has some you can copy and paste. Storybook does not really have to do this. Unless big issues arise. Maybe we need a new custom header? Or can we use the old one",3
125422356,2023-03-17 08:06:50.559,BE: Load workspace presets from BE - MET NO,"Copy MET Norway hamburger menu contents to workspace preset database, this also includes adding mappresets in the workspaces

### Testing criteria

* check if any workspace presets are available in the hamburger menu
* check if all workspace presets expected show up in workspace select",5
125422347,2023-03-17 08:06:25.470,BE: Load workspace presets from BE - KNMI,"Copy KNMI hamburger menu contents to workspace preset database, this also includes adding mappresets in the workspaces

To move: taf, presets, satcomp presets

### Testing criteria

* check if any workspace presets are available in the hamburger menu
* check if all workspace presets expected show up in workspace select


##### Follow up
Tickets: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3430 & https://gitlab.com/opengeoweb/opengeoweb/-/issues/3431",5
125420982,2023-03-17 07:34:25.471,FE: create WorkspaceTabConnect,"After https://gitlab.com/opengeoweb/opengeoweb/-/issues/3383 is merged, the current selected workspace is there so we can use it to show the title of the workspace inside the WorkspaceTab.

1. Create a new WorkspaceTabConnect inside WorkspaceTab
2. Create a new selector, getWorkspaceTitle and use it there
3. Pass the title to the WorkspaceTab component
4. Include the WorkspaceTabConnect inside apps/geoweb/src/app/pages/workspace/WorkspaceLayout.tsx",3
125382427,2023-03-16 15:50:48.008,FE: BUG: data.fmi.fi layers missing TIME parameter after v4.11.0 Part 1,Make smaller MR of fixes issues found during investigation of #3286.,1
125374058,2023-03-16 13:14:56.860,Go to ACC (March 23),,1
125361384,2023-03-16 08:32:51.895,FE: add loading state for workspacepresetList,"Make sure workspacepresetList has a loading and error state. Perhaps better to split this ticket, and possible depending on https://gitlab.com/opengeoweb/opengeoweb/-/issues/3422 to have the connected component in 

example new state:
```
workspaceList: {
    // new props
    isFetching: true,   
    // current props
    ids: [
      'workspaceSomeId',    
    ],
    entities: {
      workspaceSomeId: {
        id: 'emptyMapView',
        date: '2023-03-21T15:21:15.089171',
        title: 'Empty Map',
        scope: 'system'
      },      
    }
  },
```


Loading:
- add `isFetching` to the `workspaceList` reducer
- make it true on `fetchWorkspaceList` and false on `fetchedWorkspaceList`
- create a new selector like `getIsWorkspaceListFetching`
- use the selector to show the loading state for the preset list.",3
125299117,2023-03-15 12:28:37.800,FE: change border radius from 5 to 3,"The border-radius should be turned from 5 to 3. Inside `libs/theme/src/lib/components/Theme/utils.ts` you can see the `BORDER_RADIUS` is already set to 3. Somehow the button's (like the map zoom buttons, and pretty much all other buttons) don't use it and have 5 as border-radius.

Find how why they are not respecting the `BORDER_RADIUS` and fix it. Maybe some components in `libs/theme/src/lib/components/Theme/utils.ts` are missing the default value of `BORDER_RADIUS`",3
125296548,2023-03-15 11:17:01.536,screenmanager Storybook hotfix,storybook does not run anymore with `nx storybook screenmanager`,1
125283511,2023-03-15 09:03:08.402,BE: deploy workspace presets,"Follow-up for: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3362

In this ticket, set up the deployment for the workspace presets endpoint in addition to the existing view/map presets. End result should be that the workspace preset endpoint is available from a deployed URL (so not local) and that a list can be requested",3
125283166,2023-03-15 08:56:48.392,FE: screenmanager move store logic to subfolder,screenmanager store should have subfolders to handle later other folder imports,2
125280289,2023-03-15 07:50:30.827,FE: screenmanager cleanup providers,"Screenmanager has a a lot of provider files:
- Providers folder
- ScreenManagerProvider
- TestWrapper
- TestWrapperWith store

I think we can limit this to 2 wrappers: 
- Providers/ScreenManagerProvider
- Providers/ScreenManagerStoreProvider

Only 2 are needed for connected and unconnected components. We can use it for stories and tests. See the presets lib for inspiriation",3
125276854,2023-03-15 06:16:00.941,FE: fetch workspace on detail and route change,See if workspace can be fixed on detail with just an id. If route change new data should be fetched.,3
125247177,2023-03-14 14:49:32.787,FE: create workspace demo page inside screenmanager lib,"Currently the screenmanager has a `ScreenManager.stories.tsx` main demo page. Here we are loading screenPresets without any api with the old code.

We should create a new `Workspace.stories.tsx` demo page, where we can try out loading and testing the full workspace UI with the fakeApi (wrap story with `WorkspacePresetsProvider`). For now, show what we have that mimics what we have on app. Just a basic app header without content (use the AppLayout), and wrapped with the ApiProvider using the fakeApi like:

![Screenshot_2023-03-14_at_15.54.54](/uploads/853a8086a5dda2e4e59b02f6607be004/Screenshot_2023-03-14_at_15.54.54.png)",3
125246830,2023-03-14 14:41:41.032,Add workspace top bar to header,Add the workspace top bar to the Header in the workspace demo route page in storybook (not yet in app),2
125240517,2023-03-14 12:54:35.001,FE: reuse app TestWrapper,"The app is using inside pages on some places a `TestWrapper`. This can can be reused in all component tests inside pages. 

Create a new Providers folder inside components, and move the TestWrapper here. Inside the pages components tests use this test wrapper",2
125238954,2023-03-14 12:21:45.775,BE: Deploy getCapabities monitoring lambda,"- Make standalone deployment, the python code becomes a ""real"" lambda. 
- Make sure logging appears in Kibana",3
125238836,2023-03-14 12:18:18.607,BE: Make python lambda for monitoring adaguc-server getCapabilities,"- This should be done for all configured datasets
- Should read the getCapabilities file and report the time dimension for each layer
- Should also report the amount of seconds since current time for each layer. 
- Time resolution should be extracted from the time dimension. 
- Log this as json so Kibana can pick it up.

See repo in https://gitlab.com/KNMI/geoweb/backend-services/monitor-wms",3
125238026,2023-03-14 12:10:15.931,BE: Make it possible to e-mail more than 50 cognito users,,3
125237908,2023-03-14 12:08:10.507,BE: Remove cognito domain creation from GeoWeb serverless BE deployment,Make the cognito domain independent of the serverless deployment.,3
125237535,2023-03-14 11:59:35.868,Go to PRD (21st March),,1
125237482,2023-03-14 11:57:47.181,Go to ACC with TAF refresh (16th March),,2
125237395,2023-03-14 11:54:53.927,BE: tafplaceholder running with docker compose,"- Remove the sleep statement from the python code. The docker configuration should handle the problem of concurrency.

Fixed in https://gitlab.com/opengeoweb/backend-services/aviation-taf-backend/-/merge_requests/6",3
125237301,2023-03-14 11:51:43.524,BE: Deploy aviation-taf-be using docker compose," - We want this to be cloud-agnostic. 
 - Should work with opengeoweb independently of KNMI systems

Note: Done in https://gitlab.com/opengeoweb/backend-services/aviation-taf-backend/-/merge_requests/9",5
125233076,2023-03-14 10:15:09.620,FE: Apply new workspace API in app,"Apply fake API. Include wrapper. Inside app, should use real API. Implement workspace calls, but also viewpreset calls.

If you wrap API provider with workspace api, can you remove API provider work viewpreset api (only try, no fixing required)

Set up in discussion with BE, so that real api and fake api align.",3
125189567,2023-03-13 12:45:01.334,FE: create filter component in storybook,"Create the filter with text field and some filterchips. Same as in the layermanager. Later we can hook it up with real data. 

- create snapshot with link to design",3
125184291,2023-03-13 10:40:37.195,Open workspace preset,"- after clicking on a workspace preset in the workspace menu, make a call to fetch the workspace preset from the BE.
- update url with opening workspace preset. in storybook, check how this is implemented. maybe we can separate by making some detail examples
- fetch mappresets based in mappreset ids in allIds
- if one of the mappresets in the workspace preset fails to load, a banner should show saying that the mappreset failed to load. include a reload/retry button. 
- if one of the mappresets in the workspace preset was deleted, a banner should show up that the mappreset no longer exists and cannot be loaded


```json
 {
    ""id"": ""RadarAndSatelliteScreenConfig"",
    ""title"": ""Radar and satellite"",
    ""abstract"": ""some long string""
    ""views"": {
      ""allIds"": [""screenSat"", ""screenRadar""]
    },
    ""syncGroups"": [
      { ""id"": ""Area_SatRadar"", ""type"": ""SYNCGROUPS_TYPE_SETBBOX"" },
      { ""id"": ""Time_SatRadar"", ""type"": ""SYNCGROUPS_TYPE_SETTIME"" }
    ],
    ""viewType"": ""multiWindow"",
    ""mosaicNode"": {
      ""direction"": ""row"",
      ""first"": ""screenSat"",
      ""second"": ""screenRadar""
    }
}
```",5
125184277,2023-03-13 10:40:17.810,BE: Open workspace preset - endpoint open workspace by id/detail,"- workspace presets saved in database. links to mappreset, saves the display configuration and syncing as is shown in schema below
- allIds refers to mappreset id s

```json
 {
    ""id"": ""RadarAndSatelliteScreenConfig"",
    ""title"": ""Radar and satellite"",
    ""views"": {
      ""allIds"": [""screenSat"", ""screenRadar""]
    },
    ""syncGroups"": [
      { ""id"": ""Area_SatRadar"", ""type"": ""SYNCGROUPS_TYPE_SETBBOX"" },
      { ""id"": ""Time_SatRadar"", ""type"": ""SYNCGROUPS_TYPE_SETTIME"" }
    ],
    ""viewType"": ""multiWindow"",
    ""mosaicNode"": {
      ""direction"": ""row"",
      ""first"": ""screenSat"",
      ""second"": ""screenRadar""
    }
}
```",5
125183049,2023-03-13 10:23:43.148,BE: Delete a workspace preset in the workspace select menu,Add endpoint and logic to delete user workspace presets from the database. Note that only the workspace presets should be deleted and not the viewpresets in the workspace preset,2
125183022,2023-03-13 10:23:33.521,Delete a workspace preset in the workspace select menu,Add delete icon in the menu for `user` workspace presets and make correct call to BE to delete the workspace preset. Copy paste the logic and dialog from the presets menu. Make sure there is a confirmation dialog and a snackbar.,3
125181059,2023-03-13 09:51:49.163,BE: Implement workspace select menu UI - setup workspace presets,"Set up basis for workspace presets. Create table, setup link to mappresets to appear in workspace presets based on mappreset id.

Should return title, scope and abstract (minimum) to be displayed in workspace menu, also: id's of mappreset in workspace preset. 

Include functionality to load default workspace presets (the menu presets) during startup. Start with basic list from opengeoweb. Each institute can later provide their own initial workspace presets to be shown by default.

(To open: FE will request workspace preset from BE. BE will return the id's of the mappresets that are linked in the workspace presets. FE will do another call to fetch the mappresets that belong in workspace preset)",5
125180531,2023-03-13 09:43:01.606,BE: Implement workspace select menu UI - implement list call,"Implement endpoint to return a list of workspace presets. Sorting: system presets first, alphabetical. Followed by user presets, alphabetical.

Should return id, date, title, scope and abstract (at minimum) to be displayed in workspace menu (also: id's of mappreset in workspace preset?)

No max length yet (and no user presets yet).


Example:
```json
  {
    ""id"": ""Radar"",                          # required
    ""date"": ""2022-06-01T12:34:27.787184"",
    ""title"": ""Radar"",                       # required
    ""scope"": ""user"",                        # required
    ""abstract"": ""some long string"",
    ""viewType"": ""tiledWindow""               # required
  },
```",3
125180428,2023-03-13 09:41:14.096,Implement workspace select menu UI - create fakeAPI,"Create a FakeAPI to support developing of workspace presets in storybooks. Include wrapper. Inside app, should use real API. Implement workspace calls, but also viewpreset calls. 

If you wrap API provider with workspace api, can you remove API provider work viewpreset api (only try, no fixing required)

Set up in discussion with BE, so that real api and fake api align.",3
125180201,2023-03-13 09:37:30.071,Implement workspace select menu UI - list items,"The name of the menu should be `Workspace Select` (shown in the topbar). Should display a list of workspace presets. Start with a fake list to display. Add snapshot as well. This does not include filtering (and sorting will be done in BE)

For opening with click, use a callback param. Because we need to wire it up with routing probably

It has two main components, a WorspaceSelect (not sure if correct name) and a WorkspaceSelectConnect component. This wrapper has store selectors to get the presets from the store and has the only connection to redux. It will pas them to WorkSpaceSelect component.

For the WorkspaceSelectConnect we need some new store actions. I suggest wait for that until we have the full store moved from presets",3
125179336,2023-03-13 09:19:59.087,BE: Save as workspace preset from workspace select menu - add BE endpoint,"Add logic in the BE to allow system workspace presets to be `Saved as` (duplicating a system workspace preset), similar to `Save as` for existing map presets.

Duplicate names are not allowed in your own account, send error message from BE.",3
125176840,2023-03-13 08:33:33.525,Implement workspace menu (options) UI - workspace menu button,"Add button to open `Workspace Menu`, can be empty. Could be inner component of the ToolContainerDraggable minus the draggable, should look like ToolContainerDraggable but without the draggable. Needs a backdrop to be added.


Just simple hello world logic",3
125176820,2023-03-13 08:33:03.192,Save as workspace preset from workspace select menu - add Save As dialog,Copy paste logic from presets dialog. Add error and snackbar menu. Include snapshots,3
125176660,2023-03-13 08:29:40.154,Implement workspace menu (options) UI - options (dropdown) button,"Clicking on the title, a dropdown menu with options should appear. Show `Save`, `Save as`, `Edit` and `Delete` in menu. As long as functionality does not work, grey out the text. 

Lives inside the screenmanager, but header can render children to allow viewing. Include snapshots",3
125176649,2023-03-13 08:29:25.492,Implement workspace menu (options) UI - top bar with tab,"Just the title and tab, without button functionality. Add a fake title, hook up with routes when that works. Include snapshots

Logic for italic display will be done in a later ticket.

Should be a seperate component inside the screenmanager storybook. Can be included inside the app header as child? 

![Screenshot_2023-03-13_at_14.04.04](/uploads/e5a3cecabf73cd1e4594219f7789676e/Screenshot_2023-03-13_at_14.04.04.png)",3
125176501,2023-03-13 08:25:52.123,FE: Starting page workspace presets,"Following starting page design: https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/63f39f8146fcd10f3a7243fb

Make sure when you are on an unselected workspace (new empty map) that the dialog is triggered (both app as storybook)

![Screenshot_2023-03-21_at_09.33.27](/uploads/ac0a1a6f3c775a16876d59d67abdb6ff/Screenshot_2023-03-21_at_09.33.27.png)",3
125175605,2023-03-13 08:03:37.485,Routes for workspaces - create a workspace route,"Create a new route to access workspace logic from inside the GeoWeb App. The component should be created inside pages. For now uses only the layout of the application, and the text `Workspaces`.

We will use this page to import all the logic that will be used for the workspace presets. Right now, we have a homepage with all modules imported, can leave that untouched for now. This way, we can leave current code untouched and work in a separate component on workspaces and import the required components. Hook the application up with the screenmanager library. 


The page should only be accessible via the URL, not via the application

- create a new folder inside pages called workspace 
- inside workspace create a new component called Workspace. This hold the text 'Workspace' and has the page layout. 
- create a new route inside app.tsx called `/workspace` and import the Workspace component",3
125175280,2023-03-13 07:54:56.927,"POC Routes for workspaces - if refresh page, stay on same route","Make a POC of routes, make sure if you refresh your page, that you stay on the page. Current place/url should be saved before refreshing. A POC was created, but should be tested on a build

Can try with a `hello world`, test for every institute (make sure that re-routing is working for every institute, with cognito/gitlab login for example). Test is locally, also with a build (not nx serve, but build it)


After this ticket, is will be more clear what steps need to be taken to finish the routes",5
125089946,2023-03-10 09:42:46.541,BE: update serverless and presets repo BE documentation with latest new config example,"When working on the FE, I would expect that the serverless BE documentation has a copy and paste config to let the FE run. This is the current config we are using, should be updated in the readme. Also update the readme the presets repo
```
{
    ""GW_APP_URL"": ""http://localhost:5400"",
    ""GW_AUTH_CLIENT_ID"": ""lhp25jhdqin65sn0sg335boru"",
    ""GW_AUTH_LOGIN_URL"": ""https://knmi-geoweb-tst.auth.eu-west-1.amazoncognito.com/oauth2/authorize?client_id={client_id}&response_type=code&scope=email+openid&redirect_uri={app_url}/code&state={state}&code_challenge={code_challenge}&code_challenge_method=S256"",
    ""GW_AUTH_LOGOUT_URL"": ""https://knmi-geoweb-tst.auth.eu-west-1.amazoncognito.com/logout?client_id={client_id}&logout_uri={app_url}/login"",
    ""GW_AUTH_TOKEN_URL"": ""https://84q8po1iql-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra/auth/token"",
    ""GW_FEATURE_APP_TITLE"": ""GeoWeb"",
    ""GW_FEATURE_FORCE_AUTHENTICATION"": true,
    ""GW_FEATURE_MENU_FEEDBACK"": true,
    ""GW_FEATURE_MENU_INFO"": true,
    ""GW_FEATURE_MENU_SATCOMP"": true,
    ""GW_FEATURE_MENU_VERSION"": true,
    ""GW_FEATURE_MODULE_AIRMET"": true,
    ""GW_FEATURE_MODULE_AIRMET_CONFIGURATION"": ""knmi.airmetConfig.json"",
    ""GW_FEATURE_MODULE_SIGMET"": true,
    ""GW_FEATURE_MODULE_SIGMET_CONFIGURATION"": ""knmi.sigmetConfig.json"",
    ""GW_FEATURE_MODULE_SPACE_WEATHER"": true,
    ""GW_FEATURE_MODULE_TAF"": true,
    ""GW_INFRA_BASE_URL"": ""https://84q8po1iql-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra"",
    ""GW_INITIAL_PRESETS_FILENAME"": ""knmi.initialPresets.json"",
    ""GW_PRESET_BACKEND_URL"": ""https://gwpresetsbe-tst.geoweb.dev.knmi.cloud"",
    ""GW_SCREEN_PRESETS_FILENAME"": ""knmi.screenPresets.json"",
    ""GW_AIRMET_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
    ""GW_SIGMET_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
    ""GW_SW_BASE_URL"": ""https://vko1z3liqc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/spaceweather"",
    ""GW_TAF_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation""
  }


```",1
125051235,2023-03-09 14:53:04.361,FE: sigmet/airmet rounding Progress,"To allow SIGMET/AIRMET to be used by the partners some validation needs to be made configurable.

* Validation for movement is hardcoded. Rounding to nearest ...m/..FL/..ft/...degrees needs to be configurable
* FIR setting and not globally per institute

Apply the current settings to the config for KNMI so the current behaviour doesn't change.",3
125048471,2023-03-09 13:52:20.154,FE: sigmet/airmet configurable rounding SurfaceWind,Make SurfaceWind configurable,2
125014156,2023-03-09 05:51:45.341,FE: fix broken e2e,e2e are broken because of new credentials,2
124980593,2023-03-08 16:08:38.100,FE: sigmet/airmet configurable rounding SurfaceVisibility,"Make these 2 fields configurable, see https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2310/diffs#35faa092f04bcef8072ce278ab297a2400044d1c",2
124979869,2023-03-08 15:56:57.737,FE: flaky sigmet test,https://gitlab.com/opengeoweb/opengeoweb/-/jobs/3896788946,1
124972464,2023-03-08 14:14:51.535,FE: sigmet-airmet configurable rounding cloudlevels,Splits CloudLevels for rounding in config,2
124953574,2023-03-08 09:32:35.263,BE: Presets: Remove pentest entries from presets BE without pentest,Version 1.4.1 of the presets backend should not contain the pentest entries.,2
124946709,2023-03-08 07:53:07.055,FE: sigmet-airmet fix draw issue after changing FIR and drawing,"See:

![Screen_Recording_2023-03-07_at_13.29.58](/uploads/927a2f16b6189649b1e184d14927ffa0/Screen_Recording_2023-03-07_at_13.29.58.mov)

To reproduce:
- draw a shape
- select a different FIR location
- note that the shape disappears
- try to draw a shape, you can't. The map is moving instead
- if you press delete, and try again it's working again

Comments (https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2292#note_1303894527): 
First thoughts, and a hint: The mouse is taken over by the drawing tool when the function adagucMouseMove in libs/core/src/lib/components/ReactMapView/AdagucMapDraw.tsx returns `true`. Otherwise the map will resume its normal mode.

See other comment below for other point mentioned by @maartenplieger for app",2
124946432,2023-03-08 07:48:00.259,FE: sigmet-airmet fir validation,"Changing FIR should trigger some validations. See original comment https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2292#note_1303690919  

There are several configurations that depend on the selected FIR for example:

* validation of valid from/to
* validation of cloud/level/movement/wind speed min max and rounding
* units displayed in the dropdowns
* surface wind + surface visibility min/max

When changing the selected FIR the untis are displayed correctly (they get added or removed accordingly) but the validation is not retriggered. So if you add a valid value for one FIR, then change the FIR (for which the value is invalid) there is no error showing. Not even when going in to the field and blurring. I'd say this is not MVP but probably something we should keep in mind.

Either use `setValue(name, value, {shouldValidate:true})` or `trigger`",3
124889468,2023-03-07 15:15:53.105,FE: sigmet/airmet rounding cloudlevels,"To allow SIGMET/AIRMET to be used by the partners some validation needs to be made configurable.

* Validation for cloudlevels is hardcoded. Rounding to nearest ...m/..FL/..ft/ needs to be configurable
* FIR setting and not globally per institute

Apply the current settings to the config for KNMI so the current behaviour doesn't change.",3
124878492,2023-03-07 12:20:22.633,BE: acc & prd userpool - deploy presets be,"See MR: https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/merge_requests/63

sub-ticket of https://gitlab.com/opengeoweb/opengeoweb/-/issues/3267",1
124874314,2023-03-07 11:01:20.069,FE: sigmet/airmet max windspeed configurable,"To make SIGMET/AIRMET useable for our partners the following has to be made configurable via the sigmet/airmet config file:

* Min/max wind speed values are hardcoded
* FIR based setting

This will have to be adjusted in the validation. Ensure the current values are added to the KNMI config so the current behaviour doesn't change.",3
124872758,2023-03-07 10:36:41.746,FE: Scroll bar missing in TAC overview TAF,"In the TAC overview, the scroll bar is missing. Making it impossible to see all TAC.

If content fits, no scrollbar.

One scrollbar on the right side of the TAF form, for the TAF form and list of TAF locations, one scrollbar on the right of the TAC overview for the tac overview",2
124869164,2023-03-07 09:46:37.756,"FE: sigmet-airmet make ""selectionType"": ""fir"" in geojson optional","Make `""selectionType"": ""fir""` optional, so configs work without passing that in. Make sure the FIR still works

Do we also want to allow other properties? As Ernst said:
> This is a bit too limiting. GeoJSONs are very often large datastructures, that are imported from a GIS data source. They can have any number of properties, depending on the source of the data. It can be very tedious if we are required to remove those properties from GeoJSONs when we add them to the code. I think this schema should not worry if there are extra fields here.",2
124791211,2023-03-06 11:59:36.903,FE: make airmet work with merged schemas,For several FIR settings we also need to be able to only define these for Airmet hence the need to also make airmet work with merged schemas,3
124786400,2023-03-06 10:39:43.283,BE: acc & prd userpool - presets be,Sub-ticket for: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3267,1
124694279,2023-03-03 14:37:52.542,FE: spaceweather TestWrapper should accept a fakeApi,"- Change the spaceweather TestWrapper so it can accept a fakeApi. This way we have more control in tests to mock some api requests with custom responses. We use this same approach in other libs.
- Update existing tests that use a spy to mock api requests and instead pass a fakeApi.",2
124686908,2023-03-03 12:26:16.986,BE: new TAF BE - error messages,Verify that all error messages show correctly in the FE / are FE compatible. If it works in the FE it should be fine. If issues report new tickets. Test all BE calls,3
124668813,2023-03-03 08:50:50.508,FE: Test out a FMI config for sigmet/airmet,"Make a `FMI.sigmetConfig.json` and `FMI.airmetConfig.json` inside app, and make it work for 1 location. See if all the configs are there, or if there are settings missed.",3
124667962,2023-03-03 08:35:42.933,FE: extend airmet e2e test with checks for new configuration values,"- do it at the end when all new configuration is there
- extend existing test",3
124667953,2023-03-03 08:35:23.727,FE: extend sigmet e2e test with checks for new configuration values,"- do it at the end when all new configuration is there
- extend existing test",3
124666769,2023-03-03 08:17:56.762,FE: fix getLaterDate function for e2e to be able to handle running in the evening,"If you would run the sigmet/airmet e2e tests in the evening, they might fail because the getLaterDate function would then make an invalid date.

Fix it so it works anytime.

![image](/uploads/038d60628021173b441ffef41a6d8ab5/image.png)",2
124637552,2023-03-02 16:34:52.873,Deploy to ACC,,2
124628195,2023-03-02 14:08:34.539,FE: sigmet/airmet max cloudlevel configurable,"To make SIGMET/AIRMET useable for our partners the following has to be made configurable via the sigmet/airmet config file:

- Min/max cloudlevels values are hardcoded
- FIR based setting

This will have to be adjusted in the validation. Ensure the current values are added to the KNMI config so the current behaviour doesn't change.",3
124627595,2023-03-02 13:59:46.921,FE: sigmet/airmet max movement configurable,"To make SIGMET/AIRMET useable for our partners the following has to be made configurable via the sigmet/airmet config file:

- Min/max movement values are hardcoded
- FIR based setting

This will have to be adjusted in the validation. Ensure the current values are added to the KNMI config so the current behaviour doesn't change.",3
124618319,2023-03-02 11:41:45.998,FE: sigmet/airmet filter out non base layers,"see https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2283#note_1298625382

make sure to filter out non base layers, and add some tests for it",2
124423848,2023-02-28 13:41:48.749,FE: sigmet/airmet - configurable DEFAULT_VALID_TIME_SIGMET/AIRMET,"Goal is to make SIGMET/AIRMET configurable:.

One of the things we need is:
* A default validity duration is used to prepopulate the validity end on opening of a new SIGMET/AIRMET. For KNMI this is set to 3 hours (SIGMET) and 1 hour (AIRMET). This needs to be made configurable via the config to ensure we can set different values per institute (DEFAULT_VALID_TIME_SIGMET/DEFAULT_VALID_TIME_AIRMET)

Make both settings configurable and add to the config file for KNMI so the current settings remain unchanged for us.",3
124417627,2023-02-28 12:15:39.690,FE: nx enforce-module-boundaries,"Make sure the dependencies are as strict as possible. 

Try it out with making a new import, it should give an error.",2
124417495,2023-02-28 12:13:31.961,FE: nx dependency depth grap exclude story files,Timeboxed 2 hours,2
124417325,2023-02-28 12:09:33.315,FE: remove webmap dependencies from everything but core,"Webmap should only be imported by core. Any types that are now imported from webmap, should be imported in core first and extended. This way core ""exports the webmap types"". 

Constrain the library, so you get an error when importing it from other lib",3
124417082,2023-02-28 12:05:27.597,FE: remove form-fields dependency from shared,,2
124416994,2023-02-28 12:03:16.822,FE: reduce api dependency from auth,"the `getBeVersion` is already defined in the app api, it can be removed here. Try to remove the complete `api` file from the `auth` lib",3
124410035,2023-02-28 10:07:06.448,FE: sigmet/airmet make fir dropdown example in storybook,"Make an example with working dropdown for fir selection. Make sure to updates the needed vars, propably useDraw hook needs to know which fir is selected",2
124406390,2023-02-28 09:16:05.088,FE: TAF issues pane cannot use full height,"- use a big screen
- open taf module
- open a taf in edit mode and open the issues pane
- try to drag the issues pane below the last change group row

Actual: this is not possible, it's blocked

Expected: should be possible to drag it over the full height of the tafmodule view

![image](/uploads/461d2c3266b0702c2a16010d219eaa6c/image.png)",1
124356314,2023-02-27 13:13:36.167,"Static background tiles: configure cloudfront, caching and enable http/2","The KNMI static background tiles are widely used by KNMI and partners for various projects. Currently these are served directly from a S3 bucket, as static website. It seems dat the expiration time is not set for this way of serving. Without expiration time, the tiles are fetched unnecessary often.

A benefit of adding an expiration time, is that the map view experience will probably be more smooth. By using tiles with an expiration time the map will display with less loading and flickering.

To enable expiration time, we need to serve the static tiles behind cloudfront. Serving via cloudfront is also considered best practice by AWS.

Goal of this ticket:

* Configure cloudfront in front of the S3 bucket
* Enable expiration time (Cache-Control)
* Enable http/2, this seems to be a more efficient protocol to obtain a large number of small files.",3
124355668,2023-02-27 13:02:57.563,FE: Add NOAA National Hurricane Center (NHC) data API to 'BES dashboard' preset,"Adding all datalayers to all maps in the BES dashboard is not necessary; these are the selected ones:

* 2/5 day probability Outlook
* 2/5 day probability Outlook Area.
* 34kt probabilistic wind

These layers need to be added to the left map (showing windflags) and the right bottom view (satellite). All new layers can be added on top of existing map-preset in above order and need to be, by default, visible. No changes in existing leading layer.",2
124355580,2023-02-27 13:00:06.995,FE: Meeting on lib dependencies,Discuss and create tickets,3
124355452,2023-02-27 12:58:16.048,BE: Security issue with starlette and fastapi libraries,Security issue with starlette and fastapi libraries (affects presets BE only). The upgrade is a 2-line change (already done in aviation-taf BE) -> version update to same ones in presetsBE,2
124355080,2023-02-27 12:52:07.750,FE: SW: Properly register/unregister fields in the SW form,"See both user stories, check if the populate button is not working because fields are not unregistered in the background.

If it is indeed related, we need to ensure that fields are properly registered/unregistered when fields are added/removed from the form.

Ensure to add tests to make sure that fields are unregistered properly when changing catergories/details so only relevant properties of the notification are registered in the form. 

If this doesn't solve the populate issue, create a further ticket to investigate (and discuss).",3
124354650,2023-02-27 12:43:56.915,FE: Increase speed of tests SIGMET-AIRMET,"* AdvanceInTime?
* Split files as tests in one file can not be run in parallel
* Check merge request report for detailed info on what tests take most time",3
124354502,2023-02-27 12:40:54.528,FE: Increase speed of tests TAF,"- AdvanceInTime?
- Split files as tests in one file can not be run in parallel
- Check merge request report for detailed info on what tests take most time

Before: local taf test run takes  73.061 s

Slowest testfiles:
```
 PASS   taf  libs/taf/src/lib/components/TafModule/TafModule.spec.tsx (43.541 s)
 PASS   taf  libs/taf/src/lib/components/TafForm/TafForm.statusChanges.spec.tsx (48.012 s)
 PASS   taf  libs/taf/src/lib/components/TafLayout/TafLayout.spec.tsx (66.42 s)
 PASS   taf  libs/taf/src/lib/components/TafForm/TafForm.spec.tsx (68.422 s)",3
124353306,2023-02-27 12:22:11.422,FE: Ensure rerenders of MetInfoWrapper doesn't cause any issues,"Currently rerenders of the `MetInfoWrapper` cause issues in the SIGMET/AIRMET form (see https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2194, form fields are cleared out on refresh of the token).

We need to ensure we test for this properly to ensure any future changes don't cause this as well as fix this issue.

Reproduce by adding defaultValues in the formwrapper as done in the above mentioned MR.

2 steps:
- Implement test which fails in branch of MR
- Fix so the test no longer fails in that MR and then port the fix and the test to a new branch",3
124352351,2023-02-27 12:04:51.907,FE: TAF AMD valid period of a BECMG group validation bug,"### What is the current *bug* behavior?

1. Amend a **current** TAF
1. make a BECMG-changegroup that has a start-hour that is the same as the start-hour of the valid-period of the AMD-TAF (in the example this is 13). The end-hour of the valid-period of the BECMG is set to 1 hour later (in the example this 14)
1. there is an issue stating that the length of a BECMG group should be 1,2,3 or 4 hours. In the example the length is 1 hour so that should be correct.

### What is the expected *correct* behavior?

Amending a current TAF should show no errors when having a BECMG-group of length of 1 hour that has the same starthour as the one from the valid period of the TAF

(See the user story for a screenshot)",2
115104243,2022-09-15 08:07:58.452,FE: TAF after publish of draft amendment/correction wrong location is in focus,"First recreate the issue in storybook. After that, fix it the issue. 
If the recreation takes more than 2 files, then the ticket should be split.

The problem:
The amended taf keeps the same uuid as the draft_amendment. The frontend tries to match the uuid of the previous taf to the previousId of the new taf. But in this case we need to match the uuid of the previous taf to the uuid of the new taf.",3
115101108,2022-09-15 07:23:31.101,FE: padding of app header,Update app header with correct padding for breakpoints,2
115063804,2022-09-14 16:13:33.276,FE: storyName inside story.parameters doesn't work,"StoryName inside story.parameters doesn't work. 

See for example in `libs/shared/src/lib/components/Avatar/Avatar.stories.tsx`
The storyname in storybook should contain `(takeSnapshot)` but it doesn't. The snapshot did not get updated. 

Fix by removing storyName from .parameters and defining it separately

```
AvatarLight.storyName = 'Avatar Light (takeSnapshot)';
```

Instead of:
```
AvatarLight.parameters = {
  storyName: 'Avatar Light (takeSnapshot)',
  zeplinLink: [
    {
      name: 'Light theme',
      link: 'https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/60ec68c87ed4860e1d14f5dd',
    },
  ],
};
```

TRY OUT:
Instead of using params, can we use story to have 1 object? (see https://storybook.js.org/addons/storybook-zeplin)
```
Default.story = {
    name: ""Responsive Button"",
    parameters: {
        zeplinLink: [
            {
                name: ""Desktop"",
                link: ""zpl://components?pid=pid1&coid=coid1"",
            },
            {
                name: ""Tablet"",
                link: ""zpl://components?pid=pid1&coid=coid2"",
            },
            {
                name: ""Mobile"",
                link: ""zpl://components?pid=pid1&coid=coid3"",
            },
        ],
    },
};
```





**Fix all stories that have a storyName inside the parameters and update the snapshots.**",2
115036597,2022-09-14 10:56:50.551,FE: cleanup makeStyles from core part 5: Syncgroups and WMsloader,,2
115036493,2022-09-14 10:54:44.388,FE: cleanup makeStyles from core part 4: Timeslider,,2
115036478,2022-09-14 10:54:20.625,FE: cleanup makeStyles from core part 3: (multi) MapView,,2
115020363,2022-09-14 07:38:54.182,FE: taf update mobile design,"Update TAF mobile design:
- update the mobile header space
- add link to Zeplin

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bfb7c86d02b398b51a68

![Screenshot_2022-09-14_at_09.38.28](/uploads/fd02069856e2928575faad58d09bd903/Screenshot_2022-09-14_at_09.38.28.png)",2
115015446,2022-09-14 06:20:33.838,FE: update readme with design link instructions,"Update readme with:
- install instructions. Don't do it per lib, but create an env file and add your token there. This MR should also update the gitignore to not send the env to the repo https://gitlab.com/opengeoweb/opengeoweb/-/issues/2617 
- how to use it (use parameters on story, don't move storyName), link to correct version in Zeplin. If design changes update link
- mention how to use version web link inside Zeplin to link to correct version (the app url does not work if you want to click on the design in storybook to go to zeplin)
- tips (side panel, overlay feature, lock screen)
- put it in opengeoweb",2
114931597,2022-09-13 09:08:05.369,FE: link stories to design rest of components,"Add missing links to the design:
- sigmet/airmet
- spaceweather
- taf
- layerselect
- timeseries
- timeslider
- layermanager
- shared components",3
114925659,2022-09-13 08:18:06.387,FE: update color for mouseover snackbar close button,"- Mouseover for close button Snackbar (light the same as dark theme) #7BACFF opacity 0.2
- Elevation 12
 
see updated design https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf926c9c931a2a11621c31",2
114844261,2022-09-12 09:26:06.069,FE: Connect frontend to adverse json weather format api,Make sure the TacContainer always requests the json tac and shows the AdverseWeatherTACMessage,2
114843830,2022-09-12 09:19:54.123,FE: Update TAC request to display new adverse json format in TAC overview in storybook,"Goal is make storybook running with adverse json tac, without breaking the application
- Extend (Dummy) API to make the storybook work
- Make sure that GeoWeb application does not brake, because the real backend does not return the adverse weather json yet.
- Add snapshots.",3
114843380,2022-09-12 09:13:06.350,FE: BES Cyclone services are missed in available services,Add the two services back in the json file. Details in US.,1
114843068,2022-09-12 09:09:50.815,FE: Link storybook stories to design in theme,"- Install `storybook design link` library
- Remove all links to design in current components and change them to links to the stories",3
114842735,2022-09-12 09:07:07.311,FE: Implement new design for application avatar,Can be done after the header is styled. See US for details.,2
114842579,2022-09-12 09:05:26.948,FE: Implement new design for application header,"First style the header, next style the avatar (https://gitlab.com/opengeoweb/opengeoweb/-/issues/2604).",2
114841996,2022-09-12 08:57:38.611,FE/BE: Add smoketest for presets backend,"In geoweb-serverless-backend, add a smoketest to test the presets-backend.
- Load a system preset
- Save a user preset
- Load the user preset
- Delete the user preset",3
114840223,2022-09-12 08:54:00.179,FE: TAF show snackbar notifications for Editor actions,- Show notifications when switching the editor switch button.,2
114839583,2022-09-12 08:45:33.326,FE: TAF upcoming label is changing,"Fix by showing loading indicator while TAF is loading, do not display anything else.

Can be easily tested in story http://localhost:4500/?path=/story/components-taf-module--taf-module-light-theme-with-error-on-loading-list

It should not show anything except the error message",2
114837277,2022-09-12 08:12:06.180,BE: Display AVI message logging in grafana dashboard,"- Make sure logging shows up in Kibana
- Configure dashboard in Grafana",3
114836962,2022-09-12 08:07:20.691,BE: AVI message converter cleanup and make logging consistent,"The logging generated in https://gitlab.com/opengeoweb/avi-msgconverter/geoweb-knmi-avi-messageservices needs to be cleaned up and needs to be made more consistent.

Check if logging can be formatted into the json-logger format.

**Result:**

Usable logging for kibana and grafana dashboard.",5
114835900,2022-09-12 07:52:45.576,"BE: AVI message converter, extend TAC converter with  adverse weather hints","Discussion with Petri 13 September, and then we can refine and re-plan this ticket",5
114835231,2022-09-12 07:43:29.286,FE: Support adverse weather encoded TAC in storybook,"Create an example of what will be returned by the new endpoint.

It would be good to adhere to an existing format corresponding with the mimetype. 

For the endpoint, the current text/plain tac will stay the same, if ""Accept"" header is set to application/json and send with the request, the following will be returned:

1. Make a proper TAC with adverse weather format example
2. Add a storybook example displaying this new TAC format
3. Add snapshot.
 

Nested array, first array is for each line. Second array is for each TAC element.

```json
{
  ""tac"": [
    [
      {
        ""text"": ""TAF""
      },
      {
        ""text"": ""EHAM""
      },
      {
        ""text"": ""1406/1512""
      },
      {
        ""text"": ""08020KT"",
        ""type"": ""adverse""
      },
      {
        ""text"": ""CAVOK""
      }
    ],
    [
      {
        ""text"": ""PROB30""
      },
      {
        ""text"": ""TEMPO""
      },
      {
        ""text"": ""1505/1512""
      },
      {
        ""text"": ""1000"",
        ""type"": ""adverse""
      },
      {
        ""text"": ""+SHRA"",
        ""type"": ""adverse""
      },
      {
        ""text"": ""BKN040"",
        ""type"": ""adverse""
      },
      {
        ""text"": ""FEW050CB""
      }
    ],
    [
      {
        ""text"": ""BECMG""
      },
      {
        ""text"": ""1506/1509""
      },
      {
        ""text"": ""32015G20KT"",
        ""type"": ""adverse""
      },
      {
        ""text"": ""VV001="",
        ""type"": ""adverse""
      }
    ]
  ]
}
```",3
114834453,2022-09-12 07:34:34.083,BE: 400 error returned when opening some notifications for spaceweather,"### Summary

Sometimes when opening a spaceweather notification from the list you get a 400 error. The error returned from the BE (not shown in the dialog): `Error while retrieving event: event not found` and error logged: `Error in PRD grafana: 2022-09-08 10:06:16 Error while retrieving event from the events table: Event not found. Line 386`

### Steps to reproduce

Open several notifications in the list until you get a 400 error. It seems to happen quite frequently so no need to open a lot before it happens.

### Possible fixes

From Ernst:

> I did a quick scan of this problem: it probably is caused by the DynamoDB sometimes returning 0 items for a query, but also telling you to request more results because the query has not finished yet. This surfaces only now because the eventtable has grown above a certain size. We've had similar problems with other queries and fixed all queries, but apparently missed this one. It probably could happen with any type of notification.

Result: opening notifications in the FE should no longer lead to 400 errors - really hard to test in the dev branch as there is not a large database there. Test in dev branch it works as expected and verify once deployed to tst.",3
114833684,2022-09-12 07:26:31.969,BE: update SW notification lambda to read and use new notifcation,"Update the SW notification lambda to read and use the new notification format as sent by MetOffice.

For this, use the serverless BE `master-sw` branch as a type of ""master"" branch and create MR to this branch.
`master-sw` listens to the SNS topic where the new service announces its notifications (also listens to the old service).

Ensure we can extract the same information we extract now from the new messages coming in.",5
114832770,2022-09-12 07:11:44.112,ADAGUC: GeoJSON format support (for seismic data),"ADAGUC should support the ingestion of GeoJSON in order to enable users to select and visualize interactive content on the map and for a better compatibility with USGS RS-feed

GeoJSON Summary Format to be used. (link: https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php)

Aspects to discuss/find out: all fields vs. selection, number of points (rough estimate 1000; the lower the magnitude the more events). Filtering will be on RDSA side.


Goal: ADAGUC server should be able to read GeoJSON data allowing you to click on a point to see the properties/get all metadata of the point using getFeatureInfo.",3
114832564,2022-09-12 07:08:22.377,Collection of topics related to KNMI AWS infrastructure,Collect several topics to be discussed in a meeting/presentation from CPT,3
114832531,2022-09-12 07:07:25.711,Informal discussion on SIGMET-BE sharing,Have an informal discussion on sharing the SIGMET/AIRMET BE after the meeting with the partners on Tuesday,3
114744526,2022-09-09 14:15:55.938,FE: ApiProvider make api work inside redux part 2,"Make the api accessable inside redux sagas, and let the old code still work",3
114716399,2022-09-09 08:10:57.699,Layer Select Bug: Editing user added service does not check whether name or url is already saved,"Currently editing a user added service does not check whether name or url is already saved

![Screenshot_2022-09-09_at_11.21.00](/uploads/f252491eb3c20337061b5daf1637c15e/Screenshot_2022-09-09_at_11.21.00.png)

Note: Name and URL check from redux works when adding a new service, but not when editing an existing one

How to reproduce:

1. Open new Layer Manager and Layer Select
2. Add new service and save it
3. Open serviceOptionsDialog (three dots on right side of horizontal layer list)
4. Click pen icon to edit the service that was added
5. Try changing name to a service name that already exists --> this should give warning, and now doesnt
6. Try changing name to a service url that already exists --> this should also give a warning, and now doesnt. This currently only only works after a empty space is added after the whole url is typed

ToDo

- Make sure that before service can be saved, checking the name and url from redux works
- Fix tests to reflect fixes on code",2
114649357,2022-09-08 10:28:43.287,FE: remove snackbarContent from snackbar action,"To use the snackbar currently you have to do:
```
snackbarActions.openSnackbar({ snackbarContent: { message } })
```
Would be nice to improve:
```
snackbarActions.openSnackbar({ message })
```",2
114635150,2022-09-08 06:56:06.063,FE: fix flaky unit tests,"see pipelines that have run in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1791/pipelines

there are multiple libs with flaky tests, should be fixed:
- Fix date issues (mock the date object)
- Tooltip tests for toolbutton sometimes fail",3
114635142,2022-09-08 06:55:48.557,BE: Geoweb-Serverless: Configure new presets-be domains,"Use the new domain names for the presets-backend in geoweb-serverless:

* **gwpresetsbe-dev.geoweb.dev.knmi.cloud** - Connected to https://geoweb-dev.auth.eu-west-1.amazoncognito.com/oauth2/userInfo, for development branches of geoweb-serverless-backend
* **gwpresetsbe-tst.geoweb.dev.knmi.cloud** - Connected to https://geoweb-tst.auth.eu-west-1.amazoncognito.com/oauth2/userInfo, for master deployment of geoweb-serverless-backend


This can be configured in 
- https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/blob/master/.gitlab-ci.yml#L2330 for dev
- https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/blob/master/.gitlab-ci.yml#L2382 for tst",1
114634659,2022-09-08 06:46:21.823,BE: PresetsBE: Correct domain name for tst and dev deployments,"This ticket corrects the domain names for the presets backend deployment.

Previously the dev and tst deployments tried to use the same DNS record

**gwpresetsbe.geoweb.dev.knmi.cloud**


This ticket differentiates between:
- **gwpresetsbe-dev.geoweb.dev.knmi.cloud** - Connected to  https://geoweb-dev.auth.eu-west-1.amazoncognito.com/oauth2/userInfo, for development branches of geoweb-serverless-backend
- **gwpresetsbe-tst.geoweb.dev.knmi.cloud** - Connected to  https://geoweb-tst.auth.eu-west-1.amazoncognito.com/oauth2/userInfo, for master deployment of geoweb-serverless-backend",1
114631677,2022-09-08 05:24:00.588,Layer Select: Enable and save Abstract part 1,"![Screenshot_2022-09-08_at_8.25.08](/uploads/9bc465afa5e86e487017cbcef3f8f4e2/Screenshot_2022-09-08_at_8.25.08.png)

Current situatuon:
- Currently when adding a new service, the Abstract field is disabled.
- Currently the data structures (Redux, localStorage) that are used in Layer Select do not support adding or editing the abstract


Notes from PO
- Abstract (and Service name) should come from getCapabilities and should be prefilled.
 

ToDo

- [x] validate service url
- [x] if url is valid, fetch the url to get the abstract and name
- [x] download could start onBlur
- [x] show loader while url is being downloaded
- [x] once data arrives, display the abstract and the name
- [x] abstract should not be saved yet only displayed",3
114581330,2022-09-07 13:11:29.752,FE: Spaceweather investigate response message,"In Spaceweather we test the prop message from a response, that does not seem to be there in the type definition. Probably it's a mistake, but we should fix it correctly. 


Mentioned:
https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1784#note_1091319071

Introduced:
https://gitlab.com/opengeoweb/opengeoweb/-/blob/6126aa447d765c2ead51164d659e188bb6d9d095/libs/spaceweather/src/lib/utils/api.ts#L52",2
114580539,2022-09-07 13:00:29.757,FE: cleanup makeStyles from core part 2,Cleanup makeStyles from any other component than LayerManager and LanguageSelect. Split further if needed,3
114572657,2022-09-07 10:26:47.761,FE: Use fakeApi in mockApi TAF,"Currently we have 3 places where we define the api:

* api
* fakeApi (for stories)
* mockApi (for tests, all api libs but presets)

It would be nice to:

* reusability. 3 api's is a bit too much, we could import the and spread prop the `fakeApi` in `mockApi`, and overrule the routes if needed.

Do this for remaining Taf lib. Starting this will cause some `dependency cycle` issues because of `MOCK_USERNAME`, so best to move this to some testUtils (maybe mockData/fakeTafList.ts?) first before starting on the real issue.",2
114557012,2022-09-07 07:09:57.606,FE: make config GW_INITIAL_PRESETS_FILENAME and GW_SCREEN_PRESETS_FILENAME optional,"The typescript definition says these are still mandatory. But other env's don't pass these values so it should be optional. All presets should still work. 

Currently when not passing, it will catch the error and sets these values as default (see loadConfig). 

We have two levels of validations: `isValidConfig` and `isValidConfigWithAuthentication`. `isValidConfigWithAuthentication` can still have missing keys, for `isValidConfig` all keys should be optional.",3
114509759,2022-09-06 13:36:42.242,BE: Update to avi-msg version 0.0.31,,2
114508677,2022-09-06 13:21:32.237,FE/BE: Deploy new version to ACC,"- For FE do a MAJOR version update as there are breaking changes
- Then in the BE update the FRONTEND_IMAGE_TAG to the new version just created",2
114496450,2022-09-06 10:12:37.868,FE: snapshot tests that contain a draggable toolcontainer sometimes fail,"see for example https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2983627484

Snapshots with a toolcontainer sometimes have a different position. Toolcontainer needs to be wrapped in a div. Make sure that the toolcontainer never changes position during the tests.

snapshots with toolcontainer:

**core**
- layermanager
- layerselect
- dimensionselect
- multimapdimensionselect
- keywordfilterresults

**shared**
- Toolcontainer

**taf**
- issues pane",3
114496049,2022-09-06 10:05:50.501,BE: Change URL of presets-be in TST,"TST env of presets-be is now available at http://gwpresetsbe.geoweb.dev.knmi.cloud/, but this should be http://gwpresetsbe.geoweb.tst.knmi.cloud/",2
114491778,2022-09-06 09:05:33.505,FE: add check in pipeline to test that docker image starts before pushing it to registries,"Add test in pipeline make a test job for the docker, check that is starts. Add test with 1 boolean and 1 string value. Check config.json if result is ok",3
114484609,2022-09-06 07:23:37.438,FE: improve error message for config.json when using wrong keys,"The message ""the following keys are not present or don't have a value:"" doesn't make sense when the keys are wrong. In this case the config.json contains `GW_AIRMET_TAC_URL` and others which should not exist. Also `GW_LAYER_SELECT` should be `GW_FEATURE_LAYER_SELECT`

![image](/uploads/22309a83a68d584511e3e36011a57347/image.png)",2
114455276,2022-09-05 15:13:39.608,FE: Use fakeApi in mockApi,"Currently we have 3 places where we define the api:
- api
- fakeApi (for stories)
- mockApi (for tests, all api libs but presets)

It would be nice to:
- reusability. 3 api's is a bit too much, we could import the and spread prop the `fakeApi` in `mockApi`, and overrule the routes if needed.

Do this for all libs (spaceweather, taf, sigmet/airmet). Tests should not be affected",3
114446442,2022-09-05 13:02:25.091,FE: fix flaky sigmet-airmet tests,"https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2980501361

![image](/uploads/770bbbbb179867b93e45b57614ae659a/image.png)",3
114437915,2022-09-05 10:57:43.100,FE: ApiProvider api cleanup types,Cleanup types so we can reuse more,3
114432813,2022-09-05 09:31:49.294,FE: cleanup makeStyles from space weather part 2,"fix remaining components, split if needed",3
114426022,2022-09-05 07:54:22.603,FE: align error alertbanner,"Make sure all icons are aligned with the text. Currently texts are a bit too high, and one is a bit too low:

![Screenshot_2022-09-05_at_09.27.26](/uploads/443e3d0c117c62a1b095ec24d6cff966/Screenshot_2022-09-05_at_09.27.26.png)

Check is with @didier.dezanet before creating MR. Design: https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6093e697eeeb043620e92089",2
114422911,2022-09-05 07:16:02.706,BE: username should be checked when loading preset by id,"Currently `dbactions.db_get_viewpreset` just returns the requested preset for the given `preset_id`, even if it belongs to another user.",2
114422269,2022-09-05 07:02:09.537,FE: cleanup makeStyles from core lib part 1: LayerManager + LanguageSelect,"- cleanup all use of makeStyles in the core lib, replace with Sx
- split into multiple tickets if needed",3
114422109,2022-09-05 06:59:05.159,FE: cleanup makeStyles from space weather part 1,"- cleanup all use of makeStyles in the space weather lib, replace with Sx
- split into multiple tickets if needed",3
114348976,2022-09-02 12:44:07.701,FE: Add types to spaceweather api,"The spaceweather lib needs some extra work regarding api and types:
- not all api route _params_ are defined, add them all. Missing example:
```
  getEventList: (params): Promise<{ data: SWEvent[] }> => {
      return axiosInstance.get('/notification/eventList', { params });
    },
```
- The fakeApi does not have all routes defined. Should be added there as well with some dummy data
- When this is done, we can use the `fakeApi` in tests without having to cast it everytime. Try to make `unknown as SpaceWeatherApi` and `as SpaceWeatherApi` not findable if possible
- See if we ignore some more api types at places, for example the `useStreams` hook:
```
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
export const useStreams = (api): [[], () => void] => {
  const [streams, setStreams] = React.useState([]);
  const [streamsDict, setStreamsDict] = React.useState(null);
  const prevStreams = usePrevious(streams);
```",3
114343062,2022-09-02 10:30:57.551,FE: ApiProvider: cleanup spaceweather api files,Cleanup spaceweather api files like done at presets and taf,3
114341628,2022-09-02 10:10:04.720,FE: cleanup makeStyles from sigmet-airmet,,3
114339729,2022-09-02 09:32:43.140,BE: expand readme in presets-be for testing dev-branches,"In the [README.md of presets-backend](https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/README.md) a description can be found to test presets-be with a locally composed docker in local FE. 

It would help as well to expand/add a description of testing versions of presets-be that have been _deployed_ with the help of the [presets-backend deployment repository](https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend). 

After deployment, an additional step is needed to be able to test the presets-be functionalities in the FE: a dev-branch of the `geoweb-serverless-backend` should be deployed, in order to be able to log into a dev environment.

After this, a `config.json` can be composed with the following fields:
```
...

GW_PRESET_BACKEND_URL

...
```

It would be helpful to add these steps to the README's of the presets-backend and/or deploy-presets-backend.",2
114330044,2022-09-02 06:22:57.997,FE: ApiProvider: cleanup sigmet-airmet  api files,Cleanup sigmet-airmet and spaceweather api files like done at presets and taf,3
114284246,2022-09-01 11:00:23.881,FE:  ApiProvider fix typescript types of api,Fix the api types so we can use the api correctly and have autocomplete,3
114283942,2022-09-01 10:53:49.666,FE: ApiProvider redux part 2: cleanup  app api files,Cleanup app api files like done at presets and taf,2
114276207,2022-09-01 08:45:37.143,BE: Check/update import of userpool id in geoweb-serverless BE dev-stacks,"* check exported name for the userpool id
* re-populate the userpool",1
114275959,2022-09-01 08:40:49.384,BE: Make sure development cognito userpool does not get deleted by cleanup script,"- Change stackname of dev userpool deployment from -dev- to -development-, that will make sure cleanup script does not delete the stack after 7 days.
- Update the stackname in geoweb-serverless backend as well, in order to make the import value statement correctly relate to the new stack.
- Re-populate all users, incl smoketest user",1
114219675,2022-08-31 12:26:47.935,FE: remove makeStyles from theme lib,"- Remove makeStyles and replace it with sx props in theme lib. 
- Also update the theme README!",3
114219403,2022-08-31 12:23:02.270,FE: remove makeStyles from taf lib,Remove makeStyles and replace it with sx props in taf lib. (currently used in 1 component: DragHandle),2
114219263,2022-08-31 12:21:32.240,FE: remove makeStyles from webmap and screenmanager libs,Remove makeStyles and replace it with sx props in webmap and screenmanager libs. (currently used in 2 stories),2
114218675,2022-08-31 12:11:43.005,FE: fix geoweb homepage test,"this test: `should render successfully with correct map` in geoweb `Home.spec` is not checking anything. There is no layer with makeStyles anymore.

If you add `expect(layerList.length).toBeGreaterThan(0);` it will fail

Should be fixed",1
114203117,2022-08-31 07:39:13.046,BE: update config.json example in README with new GW_ prefix,,2
114203030,2022-08-31 07:38:03.434,FE: Create release tag to deploy FMI demo,In order to deploy a new version in the FMI demo deployment we need to create a new release tag,1
114146504,2022-08-30 12:03:48.855,BE: fix presets vulnerabilities: use new version in docker image,"To fix [vulnerability issue](https://security-tracker.debian.org/tracker/source-package/db5.3), use newer python image in [Dockerfile](https://gitlab.com/opengeoweb/backend-services/presets-backend/-/blob/main/Dockerfile). 

Update code to accomodate this new version

----
What has been done:
* Tried to use new debian version `bookworm`
  * No official python version with bookworm is available: https://hub.docker.com/_/python
  * So I tried to use `debian:bookworm` and install python in that image
  * This did **not** work as this image could not be scanned on AWS (see [this](https://eu-west-1.console.aws.amazon.com/ecr/repositories/private/568951685059/gitlab/pipeline-scan/image/sha256:4f1ab5d9e4d96bad163ef2b4c4f1add90da6b85f82ffffed58618070dade9a4f/details/?region=eu-west-1))
* Tried to use a newer python version with the same debian version
  * `python:3.10.6-slim-bullseye` instead of `python:3.9-slim-bullseye`. (During refinement it was agreed to use a newer version of python)
  * Additionally, tried to use a fixed version of the vulnerable package db5.3 which was released for `bookworm`
  * This still marked the package as vulnerable
 
**Conclusion:**
* Vulnerability is still marked as high, so the decision was made to whitelist the vulnerable package
* The new version of python will be kept (python 3.10 instead of 3.9)
* It seems now that the only way to fix this vulnerability is waiting until a python image with `bookworm` is released
* In the end, only this [MR](https://gitlab.com/opengeoweb/backend-services/presets-backend/-/merge_requests/49) has to be merged (with new python version). The 2nd MR mentioned was created to deploy the dev branch of the presets-be and pass the vulnerability scanning. A third MR (https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/332) can be cleaned up. This one was used to deploy the serverless BE in order to test the dev branch in a local FE.


---
How to test:
* You can test functionalities in local FE with the following `config.json`:
```
{
  ""GW_AUTH_LOGIN_URL"": ""https://geoweb-dev.auth.eu-west-1.amazoncognito.com/oauth2/authorize?client_id={client_id}&response_type=code&scope=email+openid&redirect_uri={app_url}/code&state={state}&code_challenge={code_challenge}&code_challenge_method=S256"",
  ""GW_AUTH_LOGOUT_URL"": ""https://geoweb-dev.auth.eu-west-1.amazoncognito.com/logout?client_id={client_id}&logout_uri={app_url}/login"",
  ""GW_AUTH_TOKEN_URL"": ""https://non3m9kr27-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra/auth/token"",
  ""GW_AUTH_CLIENT_ID"": ""7lnismfj33ddrsdtss3qthglji"",
  ""GW_INFRA_BASE_URL"": ""https://non3m9kr27-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra"",
  ""GW_APP_URL"": ""http://localhost:5400"",
  ""GW_SW_BASE_URL"": ""https://co5iqnti4a-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/spaceweather"",
  ""GW_AIRMET_BASE_URL"": ""https://i2kc0llw1g-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""GW_SIGMET_BASE_URL"": ""https://i2kc0llw1g-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""GW_TAF_BASE_URL"": ""https://i2kc0llw1g-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""GW_PRESET_BACKEND_URL"": ""https://gwpresetsbe-dev-2527-fix-vulnerabilities.geoweb.dev.knmi.cloud"",
  ""GW_INITIAL_PRESETS_FILENAME"": ""knmi.initialPresets.json"", 
  ""GW_SCREEN_PRESETS_FILENAME"": ""knmi.screenPresets.json"",
  ""GW_FEATURE_LAYER_SELECT"": false,
  ""GW_FEATURE_APP_TITLE"": ""KNMI GeoWeb"",
  ""GW_FEATURE_FORCE_AUTHENTICATION"": true,
  ""GW_FEATURE_MODULE_SPACE_WEATHER"": true,
  ""GW_FEATURE_MODULE_TAF"": true,
  ""GW_FEATURE_MODULE_SIGMET"": true,
  ""GW_FEATURE_MODULE_AIRMET"": true,
  ""GW_FEATURE_MENU_SATCOMP"": true,
  ""GW_FEATURE_MENU_FEEDBACK"": true,
  ""GW_FEATURE_MENU_INFO"": false,
  ""GW_FEATURE_MENU_VERSION"": true
}
```

* Go to https://localhost/5400
* Open presets
* Test that functionalities remain the same",5
114029729,2022-08-29 13:55:02.674,BE: allow unified geoweb localhost:5400 for cognito geoweb-backend-dev-user-pool,"currently the login doesn't work when using a dev branch in the unified geoweb local frontend, which uses localhost:5400

the callback and sign out urls need to be updated to also allow localhost:5400 for geoweb-backend-dev-user-pool",2
114026807,2022-08-29 13:07:44.289,BE: fix linting issue,,2
114004401,2022-08-29 09:34:27.259,BE: fix deployments in deploy-presets-BE,"deployment of all branches fail, investigate and fix the deployment.

`E1019 Parameter DatabaseCluster.Endpoint.Address for Fn::Sub not found at Resources/PresetsBackendTaskDefinition/Properties/ContainerDefinitions/0/Environment/0/Value/Fn::Sub
./cloudformation.cfn.yaml:197:15
E1019 Parameter DatabaseCluster.Endpoint.Address for Fn::Sub not found at Resources/PresetsBackendTaskDefinition/Properties/ContainerDefinitions/1/Environment/0/Value/Fn::Sub
./cloudformation.cfn.yaml:214:15
E1010 Invalid GetAtt DatabaseCluster.Endpoint.Address for resource DatabaseUser
./cloudformation.cfn.yaml:610:9`


**hint:** database creates many snapshots. there is a limited number of snapshots available. if limit exceeded, no new databases can be created. potential additional/follow-up action: automatic cleanup of snapshots",5
114003905,2022-08-29 09:25:59.979,FE: KNMI geoweb does not show correct initial bbox,"Should show the correct bbox, if you select the empty map preset from the menu it shows the correct one",2
114003363,2022-08-29 09:16:26.514,BE: TBD: fix vulnerabilities in avi-messageconverter,"![image](/uploads/5c8ca402a9efedf3e15d453f2d9a3358/image.png)

* do a quick check of issues of listed packages
* see how to fix or whitelist",3
114001396,2022-08-29 08:45:23.445,FE/BE: fix nginx configuration in opengeoweb dockerfile,"* Currently, signing in is not possible. To do this, need to configure nxinx correctly in the dockerfile of opengeoweb
* Create/add an nginx.conf file to the opengeoweb repository
* For example, you can look at the nginx.conf file in the geoweb serverless backend
* Add a statement in dockerfile to copy nginx.conf file to correct place


**What to test:** you should be able to sign into the geoweb application. 

**Hint to test**: After running the docker file locally: `https://localhost/code` should show the application with an error (code invalid or something), but not a 404 error.",3
114001136,2022-08-29 08:40:46.426,BE/FE: make opengeoweb docker configurable with environment variables,"* make sure that defaults work as before, so that you can overwrite the settings
* for each field of the config.json, make an environment variable
* config.json should be written during startup FE container",3
114000246,2022-08-29 08:20:48.473,FE: use openSnackbar inside presets,"Show snackbar for the following actions:
- save as: New map preset successfully saved
- save: Map preset successfully saved
- delete: Map preset successfully deleted

Follow the design:
https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/627286258f6a9f110b0a7be9",3
114000062,2022-08-29 08:17:34.464,FE: remove makeStyles from shared (the easy components),All components which have no ticket in this sprint inside shared,2
114000051,2022-08-29 08:17:17.782,FE: remove makeStyles from AppHeader,,2
114000032,2022-08-29 08:16:56.469,FE: remove makeStyles from CustomSlider,,2
114000020,2022-08-29 08:16:36.263,FE: remove makeStyles from ManagareButton in shared,,2
113999838,2022-08-29 08:12:58.229,FE: Remove unneeded divs core on ToolButton with Tooltips part 1,"Fix the tooltips by removing the unneeded spans. If the lib is too big, split it into smaller parts. Snapshots should not be affected by this change",3
113999828,2022-08-29 08:12:47.359,FE: Remove unneeded divs taf on ToolButton with Tooltips part 1,"Fix the tooltips by removing the unneeded spans. If the lib is too big, split it into smaller parts. Snapshots should not be affected by this change",2
113999803,2022-08-29 08:12:30.981,FE: Remove unneeded divs shared on ToolButton with Tooltips part 1,"Fix the tooltips by removing the unneeded spans. If the lib is too big, split it into smaller parts. Snapshots should not be affected by this change",2
113999561,2022-08-29 08:08:41.648,FE: Remove unneeded divs timeseries on ToolButton with Tooltips part 1,"Fix the tooltips by removing the unneeded spans. If the lib is too big, split it into smaller parts. Snapshots should not be affected by this change",2
113999363,2022-08-29 08:04:48.198,FE: ApiProvider use in presets to see if we can improve,See if we can improve code now we can use the api inside sagas. Show this in presets.,3
113999299,2022-08-29 08:03:45.177,FE: ApiProvider make it work inside redux part 1: cleanup,"Cleanup api files: extract the routes so we can easy refactor later. Also add correct types and put fakeAxiosInstance to shared

~~Make the api accessable inside redux sagas, and let the old code still work~~",3
113998852,2022-08-29 07:56:10.902,BE: add layerSelect to KNMI GeoWeb,"inside serverless-backend change `LAYER_SELECT` to true, also update the readme:
- change the default LAYER_SELECT to true",2
113998704,2022-08-29 07:53:06.172,FE: use openSnackbar for TAC import,Use openSnackbar when TAC is successfully imported,2
113998189,2022-08-29 07:43:57.984,FE: use snackbar inside TAF,"Wrap TAF with a redux provider. Wrap TAF with snackbar Wrapper. Use `openSnackbar` for the following use actions:

1. TAF is properly saved as draft
1. TAF is properly published
1. TAF is properly cancelled
1. TAF is properly corrected
1. TAF is properly amended
2. TAF is autosaved",3
113997406,2022-08-29 07:33:06.039,FE: create redux store for snackbar,"Create redux store called `snackbar`. Use `createEntityAdapter` to create the store, this will create the `byId` and `allIds`, every time openSnackbar is triggered, it will erase the store and only show the latest message, and will reset the timer interval. When the timer interval is complete, it will clear the store as well. Probably the interval on the `SnackBar` should be set to an infinite duration. The saga will take care of the timer

Create a saga. When a new openSnackbar is triggered, it first closeSnackbar, after they are gone it will trigger openSnackbar. Wrap the new SnackBarWrapperConnect component with a ReduxModuleWrapper, so everytime we use it it will create the `snackbar` store instance. 

The component only shows the snackbar if the `getCurrentSnackbarMessage` selector returns something. The timeout will be handled by saga

2 actions:
- openSnackbar ({message: string})
- closeSnackbar (use this action on the closeButton)

1 selector:
- getCurrentSnackbarMessage",3
113997066,2022-08-29 07:29:33.891,FE: create a snackbar wrapper component inside core,"Create a simple snackbar wrapper that wraps components. See https://mui.com/material-ui/react-snackbar/ for an example. The storybook should be a simple example with a button (without redux), to have a basic example. It should be able to render children. If you press the button a message should show. Default timeout `4000` ms. Close button should close it 

~~Wrap the HomePage also with this component, although it can't show anything yet.~~

hint: see https://mui.com/material-ui/react-snackbar/#consecutive-snackbars",3
113996625,2022-08-29 07:24:20.702,FE: create a snackbar example in theme,"Create a storybook example with snapshot, should not have a timeout. Show a text with the cross button, no timeout.",2
113995681,2022-08-29 07:05:08.405,BE: TBD: fix vulnerability of presets,"![image](/uploads/5c8ca402a9efedf3e15d453f2d9a3358/image.png)

* high priority to fix before going to prd
* first, cleanup of unused images in ECR 
  * you can check acc/prd pipeline to see which images are used in acc/prd
  * presets-be shorter repository names should be removed
* fix vulnerabilities in remaining ones in **follow up** [ticket](https://gitlab.com/opengeoweb/opengeoweb/-/issues/2527)

---
* **Step 1:** clean up registry --> done 30-9-2022, see [comment](https://gitlab.com/opengeoweb/opengeoweb/-/issues/2491#note_1081041275).
* After first step, in `knmi/geoweb-presets-backend-gwpresetsbe/presets-backend` only 1 high vulnerability remains ([CVE-2019-8457](https://security-tracker.debian.org/tracker/CVE-2019-8457)) which is whitelisted in [.gitlab-ci.yml](https://gitlab.com/KNMI/geoweb/backend-services/deploy-presets-backend/-/blob/master/.gitlab-ci.yml)",3
113995639,2022-08-29 07:03:18.050,release to production Tuesday 6 september,Release to production Tuesday 6 september,1
113845771,2022-08-25 09:47:58.870,BE: deploy new release to ACC,Release notes: https://confluence.knmi.nl/display/GW/GeoWeb+1.2.10,2
113843149,2022-08-25 09:03:05.514,FE: unified knmi version does not show correct available baseLayers,KNMI shows only 3 baseLayers while 4 are defined in the initalPresets.json,2
113842254,2022-08-25 08:47:47.891,BE/FE: change message label to warning if you are no longer editor of taf,"Follow up of this [comment](https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/319#note_1076101182) in [MR](https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/merge_requests/319)

For FE it would help if this label would be changed to 'WarningMessage' instead of 'ErrorMessage': currently the FE filters for the message string to display the warning as it is labelled as an error. More robust if the label were changed and FE could filter for WarningMessage",2
113774263,2022-08-24 12:38:24.757,FE: Split window changes projection bug,see description in linked ticket,2
113766553,2022-08-24 10:43:15.996,FE: remove use- makeStyles from geoweb,Remove make and useStyles from geoweb,2
127425225,2023-05-02 13:33:50.845,Deploy to ACC,,1
127386113,2023-05-01 13:11:40.695,FE: Fix validation error Levels Sigmet/airmet,"change the default steps in levels to: 
- 5 for flight level
- feet: 500

same for airmet/sigmet config for KNMI.",2
127382901,2023-05-01 10:54:53.067,FE: Create CustomIconButton part 4,Replace IconButton with CustomIconButton in shared and geoweb.,3
127205485,2023-04-26 13:45:41.009,FE: Create CustomIconButton part 3,replace IconButton with CustomIconButton in core,2
127196425,2023-04-26 10:47:56.014,FE: Bring back tooltip hover in core DragHandle and fix e2e,Enable tooltip in DragHandle (`libs/core/src/lib/components/LayerManager/LayerContainerRow/LayerRow/DragHandle/DragHandle.tsx`) and fix failing e2e task. Also fix the unit test.,2
127194217,2023-04-26 09:48:42.871,FE: Create CustomIconButton part 2,Replace `IconButton` with `CustomIconButton`,2
127185246,2023-04-26 06:30:57.834,FE: Create CustomIconButton part 1,Create the button and take some components to remove IconButton and replace with CustomIConButton,2
127092843,2023-04-24 08:40:28.792,BE: CellWarn data from EWC dev team using S3/SNS,"Update the adgaguc configuration to retrieve CellWarn data with the SNS topic. Old/current CellWarn configuration should not be overwritten.


S3/SNS the ARN: arn:aws:sns:eu-west-1:401110613659:knmi-cell-tracking-output-event-prd

Bucket: knmi-cell-tracking-output-prd

The result should be two active CellWarn datasets in GeoWeb: the original one, distributed by VIVID, named cell-tracking and the new one, distributed by S3/SNS named CellWarn",3
126978766,2023-04-20 12:00:18.249,FE: Create CustomIconButton,"- extend MUI IconButtonProps
- add prop variant
- add tooltip 
- make sure all currently used IconButton are now using CustomIconButton
- use CustomIconButton instead of ManagerButton
- for active/selected styling use className `. Mui-selected`
- snapshots
- should have no custom colors
- can use size=small for toolButtons 

Check in render template:

```
if(tooltip){
 return <TOoltipWrapper><Icon></TooltipWrapper>
}
return <Icon>
```",3
126966627,2023-04-20 09:08:58.608,FE map is moving while typing in the abstract field,"Happening after selecting a workspace, and splitting a view:

tested in Chrome

See what the problem is, and make sure we come up with a solution that also works for future

![Screen_Recording_2023-04-20_at_11.08.20](/uploads/3df6868a48dff70fd635d660de90facc/Screen_Recording_2023-04-20_at_11.08.20.mov)",3
126965818,2023-04-20 09:00:12.286,FE fix empty map id for new splitted view,"A new splitted view should not have anything selected, currently it's using the same preset as the last opened map. You can see when opening the layermanager

check `registerMapSaga` inside `libs/screenmanager/src/lib/store/screenmanager/sagas.ts`",2
126961981,2023-04-20 08:18:31.931,FE: don't use WorkspacePresetAction directly for title naming,"We use the following type for our titles:
```
export enum WorkspacePresetAction {
  DELETE = 'Delete',
  EDIT = 'Edit',
  SAVE = 'Save',
  SAVE_AS = 'Save as ',
  DUPLICATE = 'Save as',
}
```
This works ok until you have the same values. As a quick fix, I used a empty space to differentiate, but we should not use these keys as titles. 

Possible solution, use the same values as keys, and map the key to a string (`DELETE = 'DELETE' etc)",2
126960196,2023-04-20 07:56:02.723,FE: fix all viewTypes of storing workspace,"Storing gives issues when splitting a tiledWindow for example. Might happen as well for Taf, sigmet/airmet.

Wait for other ticket first, if problem still exists investigate.",3
126960154,2023-04-20 07:55:42.295,FE: show stored syncgroups in the dialog,"Syncgroups are stored, but not shown in the dialog. This happens when for example saving 3 groups. 
- If any groups have been added or removed, show it as a change for the workspace
- target changes are not visible as change for workspace",2
126959272,2023-04-20 07:41:57.200,FE: MUI: update @mui/x-date-pickers package,"1. Check the latest version with `npm outdated`
1. Run `npm install` for all listed packages & specify version if latest needs higher major version
   * for example: `npm install @mui/x-date-pickers@6`
1. Check that application works, tests don't fail
1. Fix errors and problems

Packages included in this dev task:

* @mui/x-date-pickers",3
126928292,2023-04-19 13:56:13.301,FE: Fix syncgroup target changes,"Currently we 
- when a syncgroup target is changed show it as change for the view preset
- when saving a viewpreset, make sure the linked sync groups are saved as well",3
126928066,2023-04-19 13:51:10.727,FE: Create unique screen id after splitting view,"Splitting a view creates a new view id, `screen_x`. If `screen_1` is already as view defined in your workspace as a start, the screenmanager will crash after you want to split the view.

steps to reproduce:
- go to /workspace
- open a workspace
- split the view
- save it
- refresh page and open same workspace again with new split view
- split again; the error will appear

No matter which unique name we come up, it could give issues. Probably when creating the id, we should check if the id exist. If it does, it should regenerate and check again until it is unique.",2
126909457,2023-04-19 06:53:03.188,FE: limit the setDialogFocus action,"The setDialogFocus action is send a lot of time, limit this. 

![Screenshot_2023-04-19_at_08.10.49](/uploads/d780b1cd33bbb6dd5aa14801c95ea037/Screenshot_2023-04-19_at_08.10.49.png)",2
126880216,2023-04-18 12:42:08.085,FE: Allow save as option for `New workspace` option in list,"We cannot ""Save as"" the`New workspace` as the BE tries to find the view preset it includes and that is not stored in the BE. 

To prevent errors showing, the save as option has been disabled.

Re-enable it again and use the emptyMap view preset when sending the new workspace to the BE from the `WorkspacePresetsFormDialog.tsx`

Use the details as stored in the emptyMapWorkspace but replace the view with `[{mosaicNodeId: 'emptyMapView', viewPresetId: 'emptyMap'}]`.

Also re-enable test in WorkspaceSelectListConnect.spec.tsx",3
126875822,2023-04-18 10:55:54.122,FE: Fix issue with selecting New Workspace in list,When selecting the `New workspace` in the list you get a 400 error as it is trying to retrieve it from the BE but of course it doens't exist as it is defined in the FE.,3
126873633,2023-04-18 09:56:09.609,FE: workspace add state sanitizer to store,"The browser is really slow in screenmanager. Add the statesanitizer (don't bother about reusing the code) to the store of storybook and make it hopefully faster again (see `apps/geoweb/src/app/store.ts`)

the checks for development environment can be ignored .",1
126865641,2023-04-18 07:57:04.888,FE: workspace show selected viewPreset as active after fetching workspace,"When opening a workspace, the selected viewPreset should be visible in the preset list. This way we can later easier store the workspace as we know which viewPreset belongs to which view. When nothing is selected, we can use the emptyMap as id to store  

![Screenshot_2023-04-18_at_09.56.34](/uploads/d3b1bd129d68f9bb6e330f0b46f99351/Screenshot_2023-04-18_at_09.56.34.png)",2
126829365,2023-04-17 12:39:50.126,FE: Rename Empty map workspacepreset in FE,"Rename the empty map workspace preset in WorkspaceDetail.tsx to `New workspace`. 
- Add to top of list (call `New workspace`)
- Remove id if possible 
- if no id selected (url ""empty"" -> /workspace), select this workspace",2
126828848,2023-04-17 12:26:12.903,FE: Add delete option from workspace menu (options),"Add the delete option from the workspace menu options:

Deleting a workspace preset from within the workspace menu, can be done by clicking on the workspace menu and select 'Delete'

* user is asked to confirm the delete action
* when confirmed, the workspace preset is removed
* if the current workspace do no longer refer to an existing workspace preset, then the name in the workspace menu is changed to `New workspace (not saved)`, the content of the workspace should not be changed.

### Test criteria

* open a workspace
* open the workspace menu and select `workspace that needs to be deleted `Delete\`
* the user gets a warning
* if user confirms deleting
* the name in the workspace menu is changed to `New workspace` -> update URL
* snackbar will confirm delete action
* If user cancels deleting
  * Nothing happens",2
126826149,2023-04-17 11:14:35.075,FE: Workspace create OptionsConnect component,Create OptionsConnect component with setWorkspaceActionDialogOptions action to use for save as and delete,2
126816469,2023-04-17 07:46:36.588,FE: add story in screenmanager with sync groups dialog and layermanager with mappreset list,"- add hamburger menu in all workspace demo stories to open sync groups
- add workspace demo story in screenmanager storybook that contains the sync group dialog and a layermanager with the mappreset list, so we can easily test detecting workspace changes without a working BE",2
126814373,2023-04-17 07:00:12.139,BE: geoweb-adaguc-server: Prevent individual time steps listing in WOWDATA,"# Prevent individual time steps listing in WOWDATA

The GetCapabilities document of the WOWDATA set is huge. See

https://adaguc-server-geoweb.geoweb.knmi.cloud/adagucserver?dataset=WOWDATA&service=WMS&request=GetCapabilities

(Currently 3.5 mb)

This is causing performance issues in opengeoweb, as all these values are loaded into the redux store. We should prevent individual time steps listing in WOWDATA.

We should configure a interval time configuration in the dataset at:

https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/blob/master/adaguc-config/WOWDATA.xml

This will list a start/stop/resolution Dimension in the GetCapabilties, thus resulting in a much smaller and more managable file.

It will probably something like 

```
  <Dimension name=""time"" interval=""PT5M"">time</Dimension>
```
for each layer.

See https://github.com/KNMI/adaguc-server/blob/master/doc/configuration/Dimension.md for documentation.",1
126661872,2023-04-14 08:45:48.362,FE: Detect changes for workspace presets part 2,"Don't use sagas, but use reducer and listen to the following actions and set hasChanges to true:

- [x] updateScreenManagerViews
- [x] addScreenManagerView
- [x] deleteScreenManagerView
- [x] mapPresets/selectMapPreset
- [x] Syncgroup changes:

      - synchronizationGroupsReducer/syncGroupRemoveTarget
      - synchronizationGroupsReducer/syncGroupAddTarget",2
126659628,2023-04-14 07:43:57.623,FE: Allow for reuse of mosaicNodeIds between workspace presets,"Currently the mosaicNodeIds need to be unique even between workspace presets otherwise the check in screenmanager/reducer line 113 fails:

```
const duplicateIdBetweenPresets = draft.views.allIds.some((id) =>
        newViews.allIds.includes(id),
      ); 

if (duplicateIdBetweenPresets || duplicateIdWithinPreset.length) {
        console.warn('Invalid preset: duplicate viewId found.');
        return initialState;
      }
```

We need to ensure the ids of the mosaicNodeIds within a workspace have to be unique but BETWEEN workspaces they can be the same. Possibly this has already been fixed due to the fact that when toggling between workspaces it quickly sets an empty preset before changing to the new one. Check if this already fixes this.

- Try to fix in the screenmanager reducer and not in the sagas
- CHECK THAT WHEN TOGGLING BETWEEN WORKSPACE PRESETS THE VIEWS GET PROPERLY UPDATED
- Also follow the instructions from the linked user story to check that works correctly now
- Create a story in which the getWorkspaceList call is mocked so we can test this easily, in this getList call, add two workspaces which use the same mosaicNodeIds but different viewPresetId so we can test the toggling between them.

```
[
  {
    ""id"": ""emptyMap"",
    ""title"": ""Empty map"",
    ""scope"": ""system"",
    ""abstract"": ""This can contain an abstract"",
    ""viewType"": ""singleWindow"",
    ""views"": [
      { ""mosaicNodeId"": ""screenA"", ""viewPresetId"": ""emptyMap"" },
    ],
    ""mosaicNode"": ""screenA""
  },
{
    ""id"": ""radar2"",
    ""title"": ""Radar 2"",
    ""scope"": ""system"",
    ""abstract"": ""This can contain an abstract"",
    ""viewType"": ""singleWindow"",
    ""views"":  [
      { ""mosaicNodeId"": ""screenA"", ""viewPresetId"": ""radar"" },
    ],
    ""mosaicNode"": ""screenA""
  },
]
```",3
126596071,2023-04-13 12:21:54.230,FE: sigmet/airmet textfields sends empty strings,"Kristian noticed them when trying to save drafts with only a few fields filled 

for sigmets the only fields that ended up being passed as """" were
```
isObservationOrForecast
change
levelInfoMode
movementType
```
for airmets the fields with """" were
```
isObservationOrForecast
movementType
change
visibilityCause
```

- When one of these fields is empty, should not be send to the backend. 
- Add tests to make sure it won't happen again",3
126585240,2023-04-13 08:29:02.238,FE: Support Atmos create Custom LayerManager story,Create an example layerStory for Atmos to use and test their theming,2
126585182,2023-04-13 08:27:44.281,FE: Support Atmos cleaner theme export,Make sure you can use the theme without importing other methods like `parseColors` and `elevations` and `createShadows`,2
126538599,2023-04-12 09:18:31.927,BE: Deploy TAF BE - Review Memory and CPU for all containers,"Follow-up for this comment: https://gitlab.com/KNMI/geoweb/backend-services/aviation-taf-deployment/-/merge_requests/9#note_1349518685

#### Intro:
After all micro-services in the TAF BE have been set up, we should review the CPU and memory allocated for each instances.

During deployment of dev-branches, sometimes an issue was encountered that insufficient CPU or Memory was available in the container instances in the KNMI cluster. Therefore, the CPU and memory was decreased for all services.

With everything set up, review the current settings and see where CPU and/or memory should be decreased or increased. Compare this with the availability in the cluster. Or try another approach

#### Latest configuration:
Please note, instead of this configuration, now the entire task was given 1 CPU and 1 GB to share in between. But before that, CPU & memory were divided like (you can check out cloudformation!):

| Container | CPU | Memory | Temp   |
| ------ | ------ | ------ | ------ | 
| admin  |  .25   |  256   |  yes   |
| tafbe  |  .25   |  256   |  no    |
| nginx  |  .25   |  256   |  no    |
| avimsg |  .25   |  256   |  no    |
| placeh.|  .125  |  256   |  no    |
| publish|  .125  |  256   |  no    |
| total-1 |  1.25 CPU | 1.5GB  |  yes   |
| total-2 |  1 CPU  | 1.25GB  |    no    |

1=total of all containers including temporary admin
2=total of ""final"" status

#### Example of issue:
![image](/uploads/02aaec9ec4d249f62b53623b51c34ccd/image.png)

##### In ECS > Cluster > Infrastructure you can see the available CPU and memory per container instance
![image](/uploads/dedd6353fcf66df252a6637e8c52f884/image.png)",3
126537278,2023-04-12 08:53:06.798,BE: investigate TAF form issue,"Follow-up of reported bug occurrence. Meteorologists were able to save a draft of a TAF with the following field contents:
![image](/uploads/be5e01895e0db0a50d14222884b6051b/image.png)

Which made publishing the TAF impossible as BE validation failed. Try to find out why/how this slipped through FE validation and try to find the logs in the BE when this was saved as draft.

Look for timestamps between 18.30 - 19.00 on the 9th of April:

https://eu-west-1.console.aws.amazon.com/cloudwatch/home?region=eu-west-1#logsV2:log-groups/log-group/$252Faws$252Flambda$252Fgeoweb-taf-prd/log-events/2023$252F04$252F09$252F$255B$2524LATEST$255D7cb97357b30b490fafd3cc8fd8520052",3
126533518,2023-04-12 07:53:45.715,FE: Disable redux devtools in production builds,"The redux devtools can cause performance loss in opengeoweb.

For optimal user experience disable it in production builds. See https://redux-toolkit.js.org/api/configureStore#devtools",2
126498115,2023-04-11 13:32:17.873,BE: fix opening sigmet/airmet on master opengeoweb,"Currently when you open a sigmet you will see this error:

![Screenshot_2023-04-11_at_15.30.20](/uploads/50055f11edf4488c1051cc8afc6d4d3a/Screenshot_2023-04-11_at_15.30.20.png)

- cleanup data from brussel FIR in tst. check for both sigmet as airmet.",2
126496900,2023-04-11 13:14:58.812,BE: Shared TAF BE: deploy publish service & s3 bucket,"- Deploy the tafpublisherapi in the existing ECS task
- Set up an S3 bucket for published products",3
126492805,2023-04-11 11:50:19.849,Deploy to ACC on the 20th of April,Together with FMI and MetNo.,3
126492713,2023-04-11 11:47:34.899,FE: Support/Help atmos with the configurable layermanager,"Setup separate repository with atmos where we work on making the layermanager configurable. Use opengeoweb as library inside this repository.

![Screenshot_2023-04-11_at_14.53.33](/uploads/bd025e86d3601225fbc77501e8ec66c6/Screenshot_2023-04-11_at_14.53.33.png)

Goal: get geoweb maximal configurable with the least amount of impact

Questions
- how many dependencies to use geoweb? and which?
- how about styling with custom theme?

To do:
- see MR
- should KNMI create a geoweb consumer application somewhere?
- Buttons should be easier to style overwrite via theme https://gitlab.com/opengeoweb/opengeoweb/-/issues/3551",3
126492388,2023-04-11 11:37:57.800,BE: Meeting about BE ticket splitting strategy.,"- Please note that not all comments need to be resolved in the same MR/dev task. As a reviewer indicate whether this can be picked up in a follow up ticket.
- It is OK to split the dev task during working on it.
- Be aware of splitting too much?: https://gitlab.com/KNMI/geoweb/backend-services/aviation-taf-deployment/-/merge_requests/11#note_1349567570",2
126492354,2023-04-11 11:36:30.820,BE:  Start deployment of Harmonie datasets from the WIK repo,,3
126492102,2023-04-11 11:28:40.551,FE: Organize meeting about scoping of drawing tools,,1
126488486,2023-04-11 09:55:53.178,FE: Debounce updatescreenmanager view action during resizing,"Debouncing action for performance improvements

Check for map resize https://gitlab.com/fmi-atmos/frontend/-/blob/staging/libs/products/src/lib/map/ResponsiveMapView.tsx",2
126488122,2023-04-11 09:49:26.973,FE: Show errors when saving a workspacepreset fails,"- Should show an error when the fetch (PUT action) fails.
- Possibly reuse existing error handling logic and components.
- Ensure the current workspace with changes stays on screen so you can easily retry without losing all your workspace
- Create story to show error",2
126487736,2023-04-11 09:39:43.359,BE: Implement save workspace preset logic,"- Nginx `PUT` should be enabled to save workspace presets.
- Check if save logic corresponds with the expected behavior in the user story
- Update tests
- Update readme",3
126487365,2023-04-11 09:31:38.278,FE: Fix syncgroups with workspacepresets,Syncgroups do not display when a workspace preset is opened.,2
126487231,2023-04-11 09:28:41.971,FE: Detect changes for workspace presets part 1,"
- Add a new property to the screenmanager reducer `hasChanges` and reset this on on `screenManagerActions.changePreset`.
- Make a selector `hasWorkspaceChanges`
- Follow the design to update the tab title if there are changes.


Listening to changes will be part of the follow-up ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/3597",2
126487214,2023-04-11 09:28:17.448,FE: Implement save existing functionality,"- Enable the `save` option in the menu for personal workspace presets
- Make it work ;) :tada:
- URL does not need to be be updated.
- Saga should do the PUT workspacepreset request to the backend.
- Show snackbar and reset the hasChanges property (if already implemented https://gitlab.com/opengeoweb/opengeoweb/-/issues/3563)",3
126485903,2023-04-11 08:57:00.530,BE: Throw away existing workspace presets in the DB.,Throw away workspace presets inside the RDS database.,2
126484692,2023-04-11 08:40:23.159,FE: Support new workspace preset structure,"- Create a new workspace preset type (ScreenmanagerPresetFromBE)
- Update the fakeApi with the new workspace preset structure. Adjust API to use the new type.
- Add an example with using the same preset in two views
- Ensure all stories still work
- Mention in the MR title that this will be a breaking change

When opening MR warn other institutes that master will no longer work with the BE.

The workspace preset should have the following structure:

```json
{
    ""id"": ""screenConfigRadarTemp"",
    ""title"": ""Radar and temperature"",
    ""scope"": ""system"",
    ""abstract"": ""This can contain an abstract"",
    ""viewType"": ""multiWindow"",
    ""views"": [
      { ""mosaicNodeId"": ""A"", ""viewPresetId"": ""radar"" },
      { ""mosaicNodeId"": ""B"", ""viewPresetId"": ""radar"" },
      { ""mosaicNodeId"": ""C"", ""viewPresetId"": ""emptytaf"" }
    ],
    ""syncGroups"": [
      { ""id"": ""Area_RadarTemp"", ""type"": ""SYNCGROUPS_TYPE_SETBBOX"" },
      { ""id"": ""Time_RadarTemp"", ""type"": ""SYNCGROUPS_TYPE_SETTIME"" }
    ],
    ""mosaicNode"": {
      ""direction"": ""row"",
      ""first"": ""A"",
      ""second"": {
        ""direction"": ""row"",
        ""first"": ""B"",
        ""second"": ""C"",
        ""splitPercentage"": 33
      },
      ""splitPercentage"": 33
    }
  },
```",5
126484677,2023-04-11 08:40:03.252,BE: Update FastApi Schema to support new workspace preset structure,"- Implement new workspace preset structure in the fastapi preset backend.
- Adjust the static workspace preset jsons

Check https://gitlab.com/opengeoweb/opengeoweb/-/issues/3560 for the structure.

(Yes it will break existing workspace presets)",3
126482352,2023-04-11 07:41:28.312,FE: Save as workspace preset from workspace menu (options),"See user story full description.

A workspace consists of view presets. If a 

Make a selector `getworkspacedata` which returns the data according to the `ScreenmanagerPresetFromBE` type and contains the following information:
- See exact structure in https://gitlab.com/opengeoweb/opengeoweb/-/issues/3560
- Use emptyMapView as empty preset to indicate a empty map view
- Enable the save as option in the menu.
- Use the action `toggleWorkspaceDialog` as used in `WorkSpacePresetFormDialog` in `WorkspaceTabConnect`. Then the snackbar onSucces should automatically work, ensure onSucces is adjusted so it loads the new workspace and updates the url (ideas: 1; pass origin, or 2; create a new onSucces method).
- If you press saveas then it should use the new id and new url (should be automatic).",5
126481941,2023-04-11 07:31:54.289,To PRD on Tuesday 18 April,- Also deploy geoweb-adaguc-server 1.0.3 (https://gitlab.com/KNMI/geoweb/geoweb-adaguc-server/-/pipelines/839474081),2
126332828,2023-04-06 11:48:13.693,FE: SIGMET/AIRMET: BBOX configurable,"BBOX of the map for sigmet/airmet should be configurable. Should be a global setting (so outside of the FIR).

If none set we should default to Northern Europe.

Probably just need to add it into the mappreset property for the map bbox.",2
126323653,2023-04-06 08:40:52.561,FE: Theme use Icon variants for Icon Button,"Update variants for Icon button inside theme

- first add icons styling in theme
- check impact everywhere
- also link to latest design
- snapshots
- make sure we can use the button with one of the 3 variants (as classname as variant does not exist) (see ButtonToggle as example)",2
126317875,2023-04-06 06:34:16.980,FE: theme clear errors in stories,Check al stories. Some have errors of missing `key`,2
126225916,2023-04-04 13:51:21.576,FE: list item icon has the wrong color when li is selected in light theme,"1. the list item icon should have the same color as the text when selected


Probably you can do this by fixing it inside theme utils, if you have the `MuiListItem` item, you can add a selector to overwrite the button style (only for active, maybe something like `.Mui-Selected .MuiIcon`)


![image](/uploads/2026e791ad642c7e4a48fe52ab65f03a/image.png)",2
126223825,2023-04-04 13:26:15.312,FE: remove serviceActions.serviceSetLayers saga intercept and move to reducer,"The `serviceActions.serviceSetLayers` is caught in the `layerSelect` saga, and afterwards a new action is fired. We can do this inside the reducer.",3
126205694,2023-04-04 09:30:50.471,FE: Remove manager enable button from shared,"Remove it, and make sure the removed buttons look correct. Probably you can use the ManagerButton",3
126202950,2023-04-04 08:44:03.972,FE: remove disableFocusRipple from buttons,"Since `disableFocusRipple=true` is set as default (inside theme utils), we can remove it from all buttons",2
126202561,2023-04-04 08:37:11.499,FE: investigate memory leak,,3
126168140,2023-04-03 13:03:16.927,FE: Cleanup  Manager Button unneeded props,"Remove it when styling is correct of layermanager

It's a useful component, because it has a tooltip. 
- remove the props `onClick` and `testId` (replace in code with data-testid) as `IconButtonProps` also has these and these props are spread over the `IconButton`.  
- styling will be removed later when we have a IconButton style",2
126168053,2023-04-03 13:01:09.907,FE: Remove ManagerDeleteButton,"Remove it, and make sure it uses the correct one from shared",3
126161353,2023-04-03 11:07:06.037,FE: fix flaky sigmet test,see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/4049543063,1
126153414,2023-04-03 08:31:36.916,FE: Add outline to focus buttons,"Do this in theme, so we don't have to do this everywhere else. Components:
- Button
- IconButton
- ToggleButton",2
126152059,2023-04-03 08:09:40.768,FE: make an overview of used buttons,"Currently we have too many button types. Currently we have:

- Button
- ToggleButton
- IconButton
- ToggleMenu?
- ToolButton
- some more?

After this, check with Didier how to proceed with this. What are the variants? How can we make this easier for the developer? 

We should narrow to for example:
- CustomButton
- CustomIconButton
- CustomToggleButton

After this we can discuss how to make this into dev tasks

Theme:

![Screenshot_2023-04-03_at_14.34.09](/uploads/b0309b284e08eb6109ad86bc0ce60eea/Screenshot_2023-04-03_at_14.34.09.png)

![Screenshot_2023-04-03_at_14.34.13](/uploads/72c40ba5b53e535ff9abe61dde328537/Screenshot_2023-04-03_at_14.34.13.png)

![Screenshot_2023-04-03_at_14.34.23](/uploads/14f543884f509e6e56da998da7f8a920/Screenshot_2023-04-03_at_14.34.23.png)

Shared:



![Screenshot_2023-04-03_at_14.36.02](/uploads/5c2fd86f1121b1e71e23c12b592a10d1/Screenshot_2023-04-03_at_14.36.02.png)

![Screenshot_2023-04-03_at_14.36.22](/uploads/c0e8f64dc0b0be4f161545d263f828ac/Screenshot_2023-04-03_at_14.36.22.png)

![Screenshot_2023-04-03_at_14.36.29](/uploads/3a1a49a25b3c83735c8b3ef0eeeec9f1/Screenshot_2023-04-03_at_14.36.29.png)

![Screenshot_2023-04-03_at_14.36.33](/uploads/7000e79903352a2c244838484095f380/Screenshot_2023-04-03_at_14.36.33.png)",3
126150104,2023-04-03 07:25:06.655,FE: Update Buttons new styling,"Make sure the buttons use the latest design colors  https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/5ecf85c60f301e47ca4eee55

- update the colors of primary, secondary, mouseovers etc. Focus outline will be picked up in https://gitlab.com/opengeoweb/opengeoweb/-/issues/3520 and can be ignored
- update design link in theme with latest design link with version

Code change should only happen in **Theme lib**. Do this for components (see if it's too big, then split it per component):
- Button
- IconButton
- ToggleButton",3
126040979,2023-03-31 06:26:20.925,FE: design WorkspaceListDialog list,"- 7 mouseover color
- 8 active shape
- 9 active focus
- Fix white background for presets list
- Correct active (hover) colors

![Screenshot_2023-03-30_at_10.41.32](/uploads/7cffa7c4f6305a1089f024a6a9b999ca/Screenshot_2023-03-30_at_10.41.32.png)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6422fafa9613f722d3fefe16",3
125992921,2023-03-30 09:59:58.358,FE: Design workspace list Actions,"- Dialog title is too big compared to the design
- ~~Buttons should be further apart~~ fixed in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2388

Current styling of CustomDialog:
```
sx={{
            fontSize: { xs: '16px', sm: '34px' },
            fontWeight: { xs: 500, sm: 400 },
          }}
```

Discussed with Didier, and since we are moving all modules to the screenmanager, the CustomDialog should always have fontSize 16px, not only on mobile.

![image](/uploads/d30be598b50048a3b84882ebca5f5192/image.png)
![image](/uploads/debb17435885e41e6c07ec5b16544a04/image.png)

![image](/uploads/02a42beeb48287d988b326e142bb6f20/image.png)",2
125988692,2023-03-30 08:43:12.985,FE Design backdrop,"11 backdrop should not cover header 

![Screenshot_2023-03-30_at_10.43.20](/uploads/9196aa57ca7eea19dd9fbd9c8522e9e7/Screenshot_2023-03-30_at_10.43.20.png)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6422fafa9613f722d3fefe16",2
125988585,2023-03-30 08:41:21.597,FE Design WorspaceListDialog,"- 6 header title + height
- 10 remove bottom bar > if no resize no bottom bar

![Screenshot_2023-03-30_at_10.41.32](/uploads/7cffa7c4f6305a1089f024a6a9b999ca/Screenshot_2023-03-30_at_10.41.32.png)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6422fafa9613f722d3fefe16",2
125986945,2023-03-30 08:09:21.169,FE: Design WorkspaceTab,"3. add space
4. use correct font
5. remove space under tab
6. make sure it's horizontal aligned

![Screenshot_2023-03-30_at_10.09.49](/uploads/0947536d22ac63a0fd09dc1adbf3b432/Screenshot_2023-03-30_at_10.09.49.png)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6422fafa9613f722d3fefe16",2
125986863,2023-03-30 08:07:43.373,FE: Design View title,"1. use correct font size
2. remove the name from the map, but keep them for multimaps

![Screenshot_2023-03-30_at_10.07.03](/uploads/8f372a00fe867faff209b909cf7f93ea/Screenshot_2023-03-30_at_10.07.03.png)

https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6422fafa9613f722d3fefe16",2
125985904,2023-03-30 07:44:09.191,FE: Try to create a opengeoweb sigmet/airmet config,,2
125943057,2023-03-29 11:34:08.782,BE: Deploy python lambda monitor,Deploy the lambda which monitors the geoweb WMS,3
125893342,2023-03-28 13:28:58.185,FE: investigate to load viewPresets in batches,See if we can chunk (load in batches) the amount of same viewPresets by for example 3 at the same time,2
125891300,2023-03-28 12:47:43.496,FE: Workspace actions onsuccess follow up,"After saving or deleting a workspace we need to take the following actions in a saga:
- show a snackbar
- reload the workspace list
- if the deleted workspace was shown, select the empty map workspace as default


NOTE: According to the design, for a save as action, the newly saved workspace should NOT be opened (contrary to what we do for presets)",3
125878050,2023-03-28 08:50:28.401,BE: Shared TAF BE: Deploy avi-message sevices inside KNMI infrastructure,"Avi-message services needs to be deployed in the same private subnet, accessible to taf-backend",2
125877774,2023-03-28 08:45:23.217,BE: Shared TAF BE: Deploy fastapi taf backend in KNMI infrastructure,"- The taf-backend needs to be deployed in its own private subnet, accessible to nginx. It needs to communicate with the postgres database
- The taf-backend needs to be able to talk to the publish service (https://gitlab.com/opengeoweb/opengeoweb/-/issues/3484)
- Deploy the taf placeholder, it should be connected to the postgres database
- Deploy the taf admin container, it should be connected to the postgres database",3
125877494,2023-03-28 08:39:35.729,BE: Shared TAF BE: Deploy the NGINX container inside the KNMI infrastructure,"- The NGINX container needs to accessible from within KNMI
- Add all configuration options (via Environment) already, includes cognito userinfo, placeholder for taf backend, base on presets backend deployment.



It should give a welcome message.",3
125877170,2023-03-28 08:32:53.461,BE: Shared TAF BE: Add publish service to deployment repo,"The publish service is a separate component in the shared TAF backend. We need this as well in the KNMI TAF deployment repository:

~~- Configure a S3 bucket connected to a lambda which acts as a webservice to publish products from the new TAF backend to S3.~~
~~- The service listens to POST requests from the fast-api taf backend.~~]
- write code to run a publish service as a micro service

Follow up ticket to deploy the service & set up an S3 bucket: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3577",3
125875845,2023-03-28 08:05:56.791,BE: TAF logging,"* Make sure the logging tests work
* Create/update the aviation logging dashboard
* Also check that no taf logs are coming into the presets dashboard

![image](/uploads/502116febc86fafe926f24688f82ed44/image.png)",3
125874952,2023-03-28 07:45:17.558,FE: independent e2e tests,"Make sure the e2e don't break when we have a problem with cognito. This issue could also happen with gitlab. 

- can we mock cognito (use a fake url)?
- fix the test with the fake one
- maybe use a fake router, to pass params",5
125874868,2023-03-28 07:42:58.078,Meeting pentest,Setup meeting to discuss points with Marcel,1
125828925,2023-03-27 13:23:31.185,FE: Add workspaceActionDialog to redux store,"For showing the delete/save as dialog we need some state in the redux store including actions/selectors to retrieve this.

Actions: Open and close the dialog and set the appropriate details

Selectors: Check the state of the dialog and whether it needs to be open or closed

Location: Add to workspaceList store",3
125684390,2023-03-23 13:38:15.683,FE: layermanager stuck after drag,"If you try to drag the layermanager it will shoot to the top.

![Screen_Recording_2023-03-23_at_14.37.40](/uploads/d4257d90db874a3897ff71064f1dd135/Screen_Recording_2023-03-23_at_14.37.40.mov)",2
125678378,2023-03-23 10:52:23.074,FE: check the fakeApi if all routes are working,"When using the fakeAPI in the minimal config app, not all routes are working. Should make sure that all routes are working. 

- copy paste/ example config to config.json to test this
- remove broken ones, as Taf for example. 
- every route should work",3
125667548,2023-03-23 07:40:13.999,FE: Show selected preset,"Should show the correct active preset. Same solution should work for storybook and app. Should have no reducer logic needed.

See WorkspaceTabConnect, `currentView.id` if it has id, show selected, otherwise don't show the selected. 

![Screenshot_2023-03-23_at_08.40.29](/uploads/371dc0ba68f65281bde485ca3956bc04/Screenshot_2023-03-23_at_08.40.29.png)",3
125641207,2023-03-22 15:41:06.914,FE home button click,"Would be nice to to let the home button work to return to `/workspace`. We should do this only for workspace

- on hover use pointer styling
- maybe an onclick on the logo + text would be easy, and then via our route action send it to `/workspace` (that's our home default for now)",2
125641036,2023-03-22 15:37:59.057,FE: close dialog after selecting preset,"The dialog of workspacelist should close after selecting a preset. Currently this logic is handled by local react state, but should be moved to the reducer so we can use the action everywhere in the application. 

1. in the `workspaceList` reducer add a new prop called `isWorkspaceListDialogOpen`. 
2. create a new action, toggleWorkspaceDialog with 1 param : `isWorkspaceListDialogOpen`
3. create a new selector, `getIsWorkspaceListDialogOpen`
4. replace all current local state with this redux logic
4. Now everything is working like before only in redux, only one thing left to fix and thats closing after selecting a preset

5. Inside the saga, first update the url, then close the dialog, and then fetch the current workspace. Any errors or loading state will be shown on the detail workspace


6 also close it on detail pages, as it's always open now (if too big, then split this)",3
125632626,2023-03-22 12:53:04.220,FE: remove TAF aviation module from header and remove api calls,"The Header that is used in the app for workspace, also fetches all old screenPresets. 

1. copy paste the Header component, and place it in `pages/workspace`
2. remove all api logic, and taf",2
125631473,2023-03-22 12:22:48.004,FE: MUI: Update outdated FE packages,"1. Check the latest version with `npm outdated`
2. Run `npm install` for all listed packages & specify version if latest needs higher major version
    - for example: `npm install @mui/x-date-pickers@6`
3. Check that application works, tests don't fail
4. Fix errors and problems

Packages included in this dev task:
- @mui/material
- @mui/system
- @emotion/react
- @emotion/styled

- ~~@mui/x-date-pickers~~  will be done separately: https://gitlab.com/opengeoweb/opengeoweb/-/issues/3627",5
125629926,2023-03-22 11:49:21.270,FE: WorkspaceTab long title issue,"Can have some improvement for long titles, it should cap the title with `...` and not come under the button. 

- On mouseover use tooltip to show the whole title. (move this to https://gitlab.com/opengeoweb/opengeoweb/-/issues/3517 to make issue smaller)
- add some more room to the left for the hamburger menu
- check it with @didier.dezanet before putting it open

![Screenshot_2023-03-22_at_12.48.54](/uploads/f43a1922f7b2b42e73deca6882455539/Screenshot_2023-03-22_at_12.48.54.png)",2
125624130,2023-03-22 11:29:59.182,FE: show error on failing of workspacelist,"Make sure workspacepresetList has error state. 

example new state:
```
workspaceList: {
    // new props
    error: {
       message: '',
       type: ''
    },
    // current props
    ids: [
      'workspaceSomeId',    
    ],
    entities: {
      workspaceSomeId: {
        id: 'emptyMapView',
        date: '2023-03-21T15:21:15.089171',
        title: 'Empty Map',
        scope: 'system'
      },      
    }
  },
```

Error:
- add `error` to the `workspaceList` reducer
- add `errorWorkspaceList` action to reducer
- fix `ErrorWorkspaceList` type in `libs/screenmanager/src/lib/store/workspaceList/types.ts`
- use the new `errorWorkspaceList` inside the saga to trigger the error
- catch the error in the `workspaceList` reducer and store it. Also set `isFetching` false
- create a new selector like `getWorkspaceListError`
- use the selector to show the error state for the preset list. 
- make it so to be able to retry",3
125619629,2023-03-22 09:46:21.095,FE: fix bug when clicking a preset that's already open,"There is an issue when clicking an preset that's already open. https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/2361#note_1323683531

In app we use reload to reload current preset , can we improve?

Or can we verify that if you open a preset > make changes > select same preset again > that it will remove all made changes?",3
125616304,2023-03-22 08:29:46.625,BE: Update README of presets BE,"Update documentation with new endpoints, seeding the database and the synergy between view-presets & workspace-presets",2
125615782,2023-03-22 08:18:00.362,FE: temporary disable not working components,"
For the demo (see http://localhost:5200/?path=/story/components-workspace-workspacedemo--workspace-top-bar-dark), it would be nice to show only functionality that is currently working. We can disable/hide stuff that needs work:
- disable filter
- disable options in list
- all individual storybook examples should still work",2
125612757,2023-03-22 06:54:55.532,FE: workspace list selector,Fetch workspacelist from api and make a selector to acces data from store,3
125587121,2023-03-21 15:33:25.158,FE: Add save as/delete dialog UI,"Implement the dialog to save/delete a workspace preset. No logic yet, not connected to the options menus.",3
125576187,2023-03-21 11:54:06.075,FE: error states view presets in workspace,"When error on viewPreset
- show error inside screenmanagerview 
- without any map
- retry and close option

add error stories
- add storybook examples


![image](/uploads/7cf46a5b15c34bc9e00b4be106bf41bb/image.png)",3
89757264,2021-07-05 08:16:44.127,"SIGMET and AIRMET area using box, error message incorrect.","Change the second line of the warning to:
_Check if the TAC in the preview corresponds to the intended area._",1
89756556,2021-07-05 08:07:21.968,Fix SIGMET VA MOV TO FIR,"VA MOV TO FIR is not being handled correctly by fm-avi-messageconverter-tac library.
Should be fixed there.",5
89754141,2021-07-05 07:32:23.454,"BE: Monitoring of ""edges"", like S3 buckets for output","Extending monitoring to monitor output system. See events of the bucket in Grafana. 

Acknowledgement that publish was successful.",5
89753782,2021-07-05 07:26:04.165,FE: Split spaceweather form fields,"File: `components/LifeCycleDialog/LifeCycleEditOptions.tsx`

Like sigmet-airmet, bundle inputs if possible in group",3
89753168,2021-07-05 07:17:34.552,deploy SW,"Clear database, reingest old incoming MET office events. Only ACC",5
89752881,2021-07-05 07:13:59.293,FE: SW validation: number fields,min/max/positive number validations,2
89752668,2021-07-05 07:10:48.679,FE: SW validation: in the future,![Screenshot_2021-07-08_at_16.30.14](/uploads/e9d59994c4900344938fb241ac651d8d/Screenshot_2021-07-08_at_16.30.14.png),2
89752565,2021-07-05 07:08:59.900,FE: SW validation: in the (recent) past,"see https://gitlab.com/opengeoweb/geoweb-assets/uploads/a2aeb41d4740b779562e92d369b6e080/met_office_notification_fields_options_notes.png

- recent past = week
- verify with Eelco if recent past = week is correct --> 1 week is OK, Eelco is going to double check if there have been any events that were going on for any longer than a week",3
89596928,2021-07-01 09:20:48.710,FE: add light/dark theme toggle to user menu,"* add light/dark theme toggle in user menu in knmi-geoweb and reference application
* default theme is light
* keep the theme provider with GWTheme per component
* then we can start changing components/modules one by one to respond to the toggle, starting with sigmet-airmet

App mode selector: 
light (https://zpl.io/VKBpZJJ)
dark (https://zpl.io/a3Q35Y1)",3
89596740,2021-07-01 09:18:52.376,FE: create story with light/dark theme toggle in theme storybook,"* keep current GWTheme
* define new light theme
* define new dark theme
* add a story with toggle to the theme storybook to see how it would work
* default theme will be light
* add missing components to the theme storybook, for example different buttons etc.",5
89413689,2021-06-28 14:18:29.360,FE: edit new fields ELECTRON_FLUX,"* all the relevant fields for category ELECTRON_FLUX should become available when changing category or categorydetail
* NOTE: it's different fields for an alert/warning or summary
* for cancellation show the same fields as for the warning/extension that is being cancelled
* see table in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1292",2
89413554,2021-06-28 14:16:05.367,FE: edit new fields PROTON_FLUX,"* all the relevant fields for category PROTON_FLUX should become available when changing category or categorydetail
* NOTE: it's different fields for an alert or summary
* for cancellation show the same fields as for the warning/extension that is being cancelled
* see table in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1292",2
89413451,2021-06-28 14:14:11.049,FE: edit new fields GEOMAGNETIC,"* all the relevant fields for category GEOMAGNETIC should become available when changing category or categorydetail
* NOTE: it's different fields for an alert/warning/watch or summarise/cancel
* some fields influence one another (threshold value and event level for kpIndex!)
* make sure the statustag is shown at the top when cancelling/summarising
* see table in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1292",3
89413294,2021-06-28 14:11:50.326,FE: edit new fields XRAY_RADIO_BLACKOUT,"* all the relevant fields for category XRAY_RADIO_BLACKOUT should become available when changing category or categorydetail
* NOTE: it's different fields for an alert or summary
* see table in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1292",5
89408318,2021-06-28 12:53:59.008,FE: timeseries - POC Chart.js,"Test on the following criteria (random order):

* Being able to create graphs as defined here: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1382
* Zoom and pan of time series graph
* Check bar chart, line chart, symbol chart
* Combining graphs
* Connect different views with time
* Use thresholds in graph-Display gaps in data-Tooltip / hovering on the graph should display actual value
* Easy updates / additions of new data
* Clear view of date/time on x axis
* Localisation options of time display
* Actively maintained repository
* Good integration with React
* Nice to have good TypeScript support
* Avoid huge dependencies (e.g. no jQuery)
* Extensibility: Be able to extend with custom code-Support to display sounding graphs / vertical profiles is probably not possible because much interactivity will be required for sounding displays
* Support for theming and styling, support light/dark theme
* Display logarithmic data",8
89408306,2021-06-28 12:53:42.786,FE: timeseries - POC Plotly,"Test on the following criteria (random order):

* Being able to create graphs as defined here: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1382
* Zoom and pan of time series graph
* Check bar chart, line chart, symbol chart
* Combining graphs
* Connect different views with time
* Use thresholds in graph-Display gaps in data-Tooltip / hovering on the graph should display actual value
* Easy updates / additions of new data
* Clear view of date/time on x axis
* Localisation options of time display
* Actively maintained repository
* Good integration with React
* Nice to have good TypeScript support
* Avoid huge dependencies (e.g. no jQuery)
* Extensibility: Be able to extend with custom code-Support to display sounding graphs / vertical profiles is probably not possible because much interactivity will be required for sounding displays
* Support for theming and styling, support light/dark theme
* Display logarithmic data",8
89408289,2021-06-28 12:53:25.594,FE: timeseries - POC Recharts,"Test on the following criteria (random order):

* Being able to create graphs as defined here: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1382
* Zoom and pan of time series graph
* Check bar chart, line chart, symbol chart
* Combining graphs
* Connect different views with time
* Use thresholds in graph-Display gaps in data-Tooltip / hovering on the graph should display actual value
* Easy updates / additions of new data
* Clear view of date/time on x axis
* Localisation options of time display
* Actively maintained repository
* Good integration with React
* Nice to have good TypeScript support
* Avoid huge dependencies (e.g. no jQuery)
* Extensibility: Be able to extend with custom code-Support to display sounding graphs / vertical profiles is probably not possible because much interactivity will be required for sounding displays
* Support for theming and styling, support light/dark theme
* Display logarithmic data",8
89408219,2021-06-28 12:51:46.975,FE: timeseries - POC Echarts,"Test on the following criteria (random order):

* Being able to create graphs as defined here: https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1382
* Zoom and pan of time series graph
* Check bar chart, line chart, symbol chart
* Combining graphs
* Connect different views with time
* Use thresholds in graph-Display gaps in data-Tooltip / hovering on the graph should display actual value
* Easy updates / additions of new data
* Clear view of date/time on x axis
* Localisation options of time display
* Actively maintained repository
* Good integration with React
* Nice to have good TypeScript support
* Avoid huge dependencies (e.g. no jQuery)
* Extensibility: Be able to extend with custom code-Support to display sounding graphs / vertical profiles is probably not possible because much interactivity will be required for sounding displays
* Support for theming and styling, support light/dark theme
* Display logarithmic data",8
89296686,2021-06-25 10:53:10.445,BE: Fix issue in Grafana while showing logs,"Probably due to a change made by CPT, a new field (cloud.account.name) have been added for the Grafana Logs.
This new field is by default enabled and doesn't allow the message display.

It is necessary for all Logs in Grafana to disable this cloud.account.name field.",3
89221084,2021-06-24 07:56:37.607,BE: Refactor Airmet code to match Sigmet,the get_latest functions of Sigmet and Airmet do not match. Refactor Airmet in the same way Sigmet was refactored a couple weeks ago.,3
89219492,2021-06-24 07:26:46.532,FE: duplicate story title warnings in spaceweather storybook,"![image](/uploads/4821a2acf41b2e4540653e92b4844236/image.png)

also should be components instead of modules to match folder structure",2
89087914,2021-06-22 12:15:32.059,FE: Regroup and order WMS Loader,We need to move the new WMSLoader wrapper (`AddLayersButton`) to the WMSLoader folder and rename it to WMSLosder. The old one should be removed,3
89086951,2021-06-22 12:01:29.859,FE: make new timeslider work with syncgroups,"The new timeslider doesn't work with the sync group stuff, this needs to be fixed: 

Hints to fix timeslider sync:
Three files in the TimeSliderRail.: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612/diffs#b50b30d4c8ade5773ecb10ac885bd72b3a7ff7a2_41_52   

A small adjustment was needed in the selector of the synchronization group to ensure that it is backwards compatible if there is no synchronization config: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612/diffs#098356053fb875ec260a820e5e05ae0dc25bd722_90_92

And lastly the timeslider now needs it's own ID: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612/diffs#c47d016304896ac3055cfae728d9955bf6badc26_190_189",3
89084337,2021-06-22 11:16:07.515,FE: ReactHookFormNumberField can't handle null values,"If we get a `null` value from BE for a field that uses ReactHookFormNumberField, the FE would break with this error

```
Uncaught TypeError: Cannot read property 'toString' of null
    at parseInput (ReactHookFormNumberField.tsx:38)
```

See discussion here: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/683#note_607759776


Possible solution:

1. const validationRules = {
    ...rules,
    setValueAs: (value: string): number => parseFloat(value),
  };

2. and add null check on parseInput


Scenarios to test:

- formprovider defaultvalue set to null
- ReactHookFormNumberField with defaultValue={null}
- formprovider defaultvalue set toNaN

check that the required: true validation still works for each scenario

check that it will send NaN

make sure there are no console warnings",2
89073385,2021-06-22 08:13:56.165,FE: Legend make maxHeight an initial option,"if you remove the startSize, the Moveable will grow with the content. Would be nice to let it grow until a maxHeight, until the user choses to resize. For small Legends, the window will be small until it reaches the maxHeight.",5
89071486,2021-06-22 07:43:07.104,BE: pass correct info to audit logging,"if you search for audit-logging in the lambda python code you will see that the info passed to the logging does not correspond with our format specified here: https://docs.google.com/document/d/11awf__MNJmvdAKQag2o_aBEDPmod_Z3W57RJVP8DlaA/edit#

Fix this in both spaceweather and aviation",2
89044302,2021-06-21 16:32:04.256,FE: Legend crawls down when opening,"Should not crawl down when opening/closing. Only happening in the ref application and knmi-geoweb, not in the storybook examples in core.

![Screen_Recording_2021-06-21_at_18.30.30](/uploads/ccbdce630b1ace6a9e552abf9fd3cc0d/Screen_Recording_2021-06-21_at_18.30.30.mov)",3
89024064,2021-06-21 10:40:17.248,Meeting with Bart about refinement - planned July 8,,3
89024003,2021-06-21 10:39:21.609,Meeting to prepare afstemmingsdag 2,,3
89023656,2021-06-21 10:30:40.089,FE meeting to make a plan for light/dark theming - Thu July 1st 10h,"1. 
- keep current GWTheme
- define new light theme
- define new dark theme
- theme storybook with toggle first to see how it would work
- default theme will be light
- add missing components to the theme storybook, for example different buttons etc.

2. 
- add toggle in user menu
- keep the theme provider with GWTheme per component
- then we can add components/modules one by one to respond to the toggle",3
89023386,2021-06-21 10:27:06.071,"FE: Layer warnings can block map, only show them for enabled layers","Layer warnings can block map, step1: only show them for enabled and non-deleted layers",5
89023300,2021-06-21 10:26:16.728,Brainstorm session with Marcel on Screenmanager,"Brainstorm session with Marcel on Screenmanager next steps, determine MVP and continue from there",3
89022990,2021-06-21 10:21:09.955,Test application with Safari,"Test application with Safari, add BUG tickets to geoweb-assets, send to Marcel to prioritise
- add label PO-review

Timeboxed",3
89020195,2021-06-21 09:38:39.313,FE: Remove old layer manager,"cleanup components, tests, storybook",3
89020005,2021-06-21 09:34:55.923,FE: Use of new LayerManager in KNMI application,,3
89019730,2021-06-21 09:31:20.289,FE: make shortlist for selection of charts library,"see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1380

The result of this issue is a shortlist with 3-4 graph software libraries that can be tested in the POC and the criteria (max 10) that need to be tested for each candidate. Make follow-up tickets for the backlog to make the Proof of Concepts.",3
89016778,2021-06-21 08:54:13.146,FE: electron flux new fields,"* implement relevant fields for geomagnetic categories, see table
* show the fields for the UKMO notifications and KNMI notification only with originator MetOffice
* notifications with originator KNMI is a new ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/878

https://gitlab.com/opengeoweb/geoweb-assets/uploads/e7803a3c456c968b8066114276ee0008/met_office_notification_fields.png

Note:

In `constructBaseNotification`, if there are no internal notifications (`case externalprovider`) to pre-populate the fields we should make use of the last incoming (external) notification from MOUK. If there are already internal notification(s) (`case internalprovider`) we should make use of the last internal notification.

For a draft we of course use the already saved draft values",5
89016501,2021-06-21 08:50:28.767,FE: proton flux new fields,"- implement relevant fields for proton flux categories, see table
- make sure the user can see 100MeV or 10Mev
- show the fields for the UKMO notifications and KNMI notification only with originator MetOffice
- notifications with originator KNMI is a new ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/878

https://gitlab.com/opengeoweb/geoweb-assets/uploads/e7803a3c456c968b8066114276ee0008/met_office_notification_fields.png

Note:

In `constructBaseNotification`, if there are no internal notifications (`case externalprovider`) to pre-populate the fields we should make use of the last incoming (external) notification from MOUK. If there are already internal notification(s) (`case internalprovider`) we should make use of the last internal notification.

For a draft we of course use the already saved draft values",5
89016177,2021-06-21 08:45:18.207,FE: geomagnetic new fields,"![image](/uploads/2d5aa9a2caa68a77701854e2add9ead2/image.png)

- implement relevant fields for geomagnetic categories, see table
- for geomagnetic-storm-watch the label should say Watch instead of Warning
- show the fields for the UKMO notifications and KNMI notification only with originator MetOffice
- notifications with originator KNMI is a new ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/878

https://gitlab.com/opengeoweb/geoweb-assets/uploads/e7803a3c456c968b8066114276ee0008/met_office_notification_fields.png

Note:

In `constructBaseNotification`, if there are no internal notifications (`case externalprovider`) to pre-populate the fields we should make use of the last incoming (external) notification from MOUK. If there are already internal notification(s) (`case internalprovider`) we should make use of the last internal notification.

For a draft we of course use the already saved draft values",5
89015986,2021-06-21 08:42:44.436,FE: new fields for notifications with originator KNMI,"- when making a new KNMI notification, you should be able to select the categorydetail -> add a new input field next to the category to select this, first one is default selected
- all the relevant fields for each type should become available when changing category or categorydetail

Note:
- Only show the relevant category details in the dropdown (e.g. when selecting PROTON_FLUX as event type - don't show GEOMAGNETIC_STORM_WATCH)
- X_RAY_RADIO_BLACKOUT doesn't have a category detail, the dropdown should be hidden for that
- Some category detalils can only be one type (alert or warning etc) - make sure you can only select the proper type. For example ELECTRON_FLUENCE is only a warning
- GEOMAGNETIC_WATCH has as label WARNING in the background but on screen we should always display WATCH",5
89015511,2021-06-21 08:35:27.384,FE: make field categorydetail required,"after all new fields have been implemented

Also ensure that all conditional statements checking if categorydetail is set are removed, for example:

```
categoryDetail={
                  result.categorydetail ? result.categorydetail : ''
                }
```

in LifeCycleDisplay.tsx line 101",2
89015062,2021-06-21 08:28:54.536,FE: Add new fields to Event and Notification to deal with additional types,"- update the types to match the new fields
- make the new fields optional
- see presentation, slide 4+5

https://docs.google.com/presentation/d/1nPQwy3UTFU2RHG6SvpL8FMqyN7cqUd8BoRI3nNNbmC8/edit",3
89014946,2021-06-21 08:27:17.228,FE: xray radio blackout display new fields,"- implement relevant fields for xray radio blackout, see table
- show the fields for the UKMO notifications and KNMI notification only with originator MetOffice
- notifications with originator KNMI is a new ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/878

https://gitlab.com/opengeoweb/geoweb-assets/uploads/e7803a3c456c968b8066114276ee0008/met_office_notification_fields.png

Note:

In `constructBaseNotification`, if there are no internal notifications (`case externalprovider`) to pre-populate the fields we should make use of the last incoming (external) notification from MOUK. If there are already internal notification(s) (`case internalprovider`) we should make use of the last internal notification.

For a draft we of course use the already saved draft values",5
89014533,2021-06-21 08:19:42.971,BE: send all fields for each notification type,"- for new notifications all the relevant fields should be stored in the database, see table
- rerun the ingest so all the old notifications also have the new data
- BE should send these fields to the FE
- openAPI specification should be updated


https://gitlab.com/opengeoweb/geoweb-assets/uploads/e7803a3c456c968b8066114276ee0008/met_office_notification_fields.png",5
89013668,2021-06-21 08:06:08.932,Analyse monitoring dashboard to improve alerting,"Timebox to a meeting, result should be tickets on the backlog

Topic to discuss or to be done:

**Aviation Dashboard**:
API Gateway Logs.
- [x] Make the info in this panel clear/complete.

Lambda's Metrics. 
- [x] Define which info should be logged for the Lambda's Metrics Logs: START, END, Username, REPORT for every time 
Lambdas are called, unmanaged Errors.
- [x] Implement the Lambda's Metrics Logs for Sigmet, Airmet, Taf (correspondent TACs) and Authorizer.
- [x] Rediscuss about the alert for the Lambda Errors (rule, conditions, no-data, Error-handling, message)
- [x] Rediscuss if the notification  should be sent to slack AND/OR mail?

Application Errors & Warnings
- [x] Implement in Aviation BackEnd the logs with ERROR log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Taf-Placeholder, Authorizer.
- [ ] Implement in Grafana the logs with ERROR log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, **Taf-Placeholder**, Authorizer.
- [ ] Implement in Aviation BackEnd the logs with WARNING log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Taf-Placeholder, **Authorizer**.
- [ ] Implement in Grafana the logs with WARNING log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, **Taf-Placeholder**, Authorizer.
- [x] Discuss about the alert for the ERRORs (no-data, Error-handling, message)
- [x] Rediscuss if the ERROR notification  should be sent to slack AND/OR mail?
- [x] Discuss about the alert for the WARNINGs (no-data, Error-handling, message)
- [x] Rediscuss if the WARNING notification should be sent to slack AND/OR mail?

Application Info
- [ ] Implement in Aviation BackEnd the logs with INFO log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Taf-Placeholder, **Authorizer**.
- [ ] Implement in Grafana the logs with INFO log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, **Taf-Placeholder**, Authorizer.
- [x] Discuss what should be reported as string in INFO. (at this moment the logs are very unclear)

Extra stuff:
- [x] Implement in Aviation BackEnd the logs with DEBUG log_level for Sigmet, Sigmet TAC, Airmet, Airmet-TAC, Taf, Taf-TAC, Taf-Placeholder, Authorizer.
- [ ] Discuss what should be reported as string in DEBUG. (at this moment the logs are too long)


**Spaceweather Dashboard**:
API Gateway Logs.
- [x] Make the info in this panel clear/complete.

Incoming data streams:
- [x] Adapting the alert time to the interval of incoming data streams.

Lambda's Metrics. 
- [x] Define which info should be logged for the Lambda's Metrics Logs: START, END, Username, REPORT for every time 
Lambdas are called, unmanaged Errors.

Application Errors & Warnings
- [x] Implement in Spaceweather BackEnd the logs with ERROR log_level for TimeseriesAPI, NotificationAPI, reqM, reqX, reqSw, reqKP, BulletinAPI, Notifications, EventIngest, Update Stream, Authorizer.
- [x] Implement in Grafana the logs with ERROR log_level for TimeseriesAPI, NotificationAPI, reqM, reqX, reqSw, reqKP, BulletinAPI, Notifications, EventIngest, Update Stream, Authorizer.
- [ ] Implement in Spaceweather BackEnd the logs with WARNING log_level for TimeseriesAPI, NotificationAPI, reqM, **reqX**, **reqSw**, **reqKP**, BulletinAPI, Notifications, EventIngest, **Update Stream**, **Authorizer**.
- [x] Implement in Grafana the logs with WARNING log_level for TimeseriesAPI, NotificationAPI, reqM, reqX, reqSw, reqKP, BulletinAPI, Notifications, EventIngest, Update Stream, Authorizer.
- [x] Discuss about the alert for the ERRORs (no-data, Error-handling, message)
- [x] Rediscuss if the ERROR notification  should be sent to slack AND/OR mail?
- [x] Discuss about the alert for the WARNINGs (no-data, Error-handling, message)
- [x] Rediscuss if the WARNING notification should be sent to slack AND/OR mail?

Application Info
- [ ] Implement in Spaceweather BackEnd the logs with INFO log_level for TimeseriesAPI, NotificationAPI, reqM, **reqX**, **reqSw**, **reqKP**, BulletinAPI, Notifications, EventIngest, Update Stream, **Authorizer**.
- [x] Implement in Grafana the logs with INFO log_level for TimeseriesAPI, NotificationAPI, reqM, reqX, reqSw, reqKP, BulletinAPI, Notifications, EventIngest, Update Stream, Authorizer.
- [x] Discuss what should be reported as string in INFO. (at this moment the logs are very unclear)

**Infrasctructure Dashboard**:
API Gateway - Infrastructure API
- [ ] This panel is always empty. Should be fixed.

API Gateway Logs.
- [x] Make the info in this panel clear/complete.

Token Lambda - Logs
- [ ] This panel is always empty. Should be fixed.",3
89013410,2021-06-21 08:01:07.111,FE: Moveable don't respect horizontal legend," Legend window is now rather narrow and does not anymore change size according advertised  width of the legend. For example ECMWF horizontal legends are now rather useless.

When changing layers the width of the legend dialog should be updated according to the widest legend image, even when user has resized.

To check:
- add this service https://apps.ecmwf.int/wms/?token=public\
- choose the first and observe",3
89013169,2021-06-21 07:58:19.028,Analyze aviation lambdas to find out if we need more error handling,,3
89010968,2021-06-21 07:19:23.663,show kibana error messages in grafana,"1. generate trigger for error format in https://gitlab.com/opengeoweb/opengeoweb/-/issues/869 to see these error messages in grafana

2. errors should be forwarded to slack channel geoweb-monitoring",8
89010612,2021-06-21 07:13:36.336,define and implement format for error handling in logstash,including filtering,3
89010219,2021-06-21 07:05:04.259,error handling for s3 writing actions,"- error handling for writing to the s3 bucket
- make sure errors follow format as defined in logstash filter https://docs.google.com/document/d/11awf__MNJmvdAKQag2o_aBEDPmod_Z3W57RJVP8DlaA/edit#heading=h.8zca0wem9b7p
- BE should return error code with message to FE",3
89010196,2021-06-21 07:04:25.891,error handling for database actions,"- error handling for writing and retrieving to/from the database
- make sure errors follow format as defined in logstash filter https://docs.google.com/document/d/11awf__MNJmvdAKQag2o_aBEDPmod_Z3W57RJVP8DlaA/edit#heading=h.8zca0wem9b7p
- BE should return error code with message to FE",5
89009879,2021-06-21 06:55:41.919,FE: legend opens under the vertical level select button,"initial position of the legend is under the vertical level button, should be moved a bit to the left
![image](/uploads/ada9f21695e7f5ad6db6b944e1fc61e4/image.png)",1
88919556,2021-06-18 07:59:19.348,FE: AddLayersPopup allow http urls but warn,"same as https://gitlab.com/opengeoweb/opengeoweb/-/issues/844 but now for the new Layer Manager (this doesn't use WMSLoader, it has its own component `opengeoweb/libs/core/src/lib/components/LayerManager/AddLayersPopup/AddLayersPopup.tsx`

see solution in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/680

depends on https://gitlab.com/opengeoweb/opengeoweb/-/issues/897 where to change this, could be renamed/moved",2
88890592,2021-06-17 15:35:23.637,FE: drawtool bug with square,"Weird bug, does not happen all time, might depend on size, perhaps something with the reverse ordering? Happens when drawing bottom to top

![Screen_Recording_2021-06-17_at_17.37.08](/uploads/49ae5b919bbdf2d83faad3f7ba5b99ae/Screen_Recording_2021-06-17_at_17.37.08.mov)",5
88882143,2021-06-17 13:18:02.951,FE: bug: Moveable can be dragged out of screen,"Draggable object can be dragged out of screen as discussed https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/677#note_603803543. Maybe `bounds` will work? https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#bounds

- Moveable component gets the parent bounds
- Verify if the Legend dialog stays within the map",3
88817258,2021-06-16 14:03:31.158,FE: update Nx packages to latest version,,3
88786133,2021-06-16 07:10:12.130,FE: Bug legend is on left side instead of right,![Screenshot_2021-06-16_at_09.09.48](/uploads/67945313809d4fc797ec43033f83488d/Screenshot_2021-06-16_at_09.09.48.png),3
88751895,2021-06-15 14:07:19.387,FE: remove buttons stories in the TimeSliderButtons stories,"Remove buttons stories in ""TimeSliderButtons"" stories. 

Ask FMI if it is ok to do it.",2
88738487,2021-06-15 10:48:11.921,Save FE artifacts for jobs that need them later (such as production deployment),Put the artifacts into an S3 bucket.,5
88738453,2021-06-15 10:47:19.346,Remove pipeline dependencies when stopping a stack,,3
88738441,2021-06-15 10:46:54.211,FE: Moveable component should only drag on the header,"See the video posted in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/656#note_601340164

It is possible to drag on the dialog content instead of only on the header.
Only happens on the first render, or after closing and opening the dialog. Possibly a thing of the library

**Possible solution**:
1. Move Drag/Size component to a separate component, so it's getting unmounted when it's closed/open
2. Register the dragHandle as ref, and make a `useEffect` to trigger a rerender. Can be without the ref, but this makes it more clear why we do this. 

In the comment some code which works but needs cleanup, can be used as reference",3
88683758,2021-06-14 14:17:48.508,FE: sigmet-airmet remove useFormDirty,"Now a render issue has been fixed, we can use the use the isDirty flag from React-hook-form https://react-hook-form.com/v6/api#formState. Check `ProductFormDialogContent`",2
88664712,2021-06-14 10:52:31.978,FE: the form shows empty fields when opening the same sigmet/airmet for the second time,"- open the list
- open an existing sigmet/airmet
- notice which fields are filled in
- click BACK
- open the same sigmet/airmet again

**expected**: same fields are filled

**actual**: some fields are shown empty

We need to add tests for 2 scenarios for both Sigmet and Airmet:

1. the content of the form should be displayed after opening the same product for the second time (there is a test for MetInfoWrapper but it only checks the title, should also check the fields)
2. when making a product and saving it, and then creating a new product again, the form should be empty

![image](/uploads/4e2eab577617b5f3b9cf470cce30ab09/image.png)",5
88662599,2021-06-14 10:21:06.784,FE: remove es6-enum lib,Replace with Typescript,2
88659986,2021-06-14 09:36:16.729,FE: WMSLoader allow http urls but warn,"When entering a WMS service with http currently the validation rejects with the message ""URL invalid"" -

We should allow this but show a warning saying you need to allow Mixed Content in your browser

Check with http://nwcsaf-adaguc-proofs.aemet.es/adaguc-services/wms?DATASET=CT",3
88657251,2021-06-14 08:58:16.790,BE: Check where extra logging is needed on SIGMET lambda's,"See what logging is missing that we would need for monitoring.

Check if the `audit` we were using for SpaceWeather has to be extended.(see format specification: https://docs.google.com/document/d/11awf__MNJmvdAKQag2o_aBEDPmod_Z3W57RJVP8DlaA/edit#heading=h.8zca0wem9b7p)

Document describing considerations about monitoring: https://docs.google.com/document/d/15MYXIkjq8Em7Y5zE_hiv8anwZbi5obFeCcEZCsQ-W-k/edit#",3
88653469,2021-06-14 08:05:15.334,FE: remove react-resizable,"only used in ContentDialogResizable which we don't use, so this component can be removed and the library uninstalled",1
88653277,2021-06-14 08:01:21.704,FE: replace DraggableDialog with Moveable in MultiDimensionSelect,,3
88653114,2021-06-14 07:59:07.294,FE: replace DraggableDialog with MoveableComponent in knmi-geoweb,,3
88652200,2021-06-14 07:44:49.817,FE: open the Moveable dialog with a custom button or menu item,"This button is currently part of the Moveable component, you can only choose the main icon. The position is fixed. If you have more than one moveable dialog, the buttons will be on top of each other. For some components the button should be fully customisable (like the LayerManager) or there should not be a button, but a menu item (like the aviation modules).

So it should be possible to toggle the Moveable dialog with a custom button.

Possible solution would be to get the whole isOpen state out of the Moveable component, and let that component only return an onClose (Don't unmount the Moveable fully, because then it will loose the lastPosition state).  Dummy code:
```
const Demo = () => {
  const [isLegendOpen, toggleLegendOpen] = React.useState(true);

  return <>
{isLegendOPen &&     <Icon onClick={toggleLegendOpen(true)} /> }
<Moveable onClose={toggleLegenOpen(false) isOpen={isLegendOpen}} />
</>
}
```

![image](/uploads/3e2880ad8504d3da27deb9adfe0ccf0d/image.png)
![image](/uploads/639802f4c0e05ae9e4be30a3b0801606/image.png)",3
88583818,2021-06-11 14:51:48.304,FE: Not possible to save draft when clicking SAVE AND CLOSE,"This issue is for both SIGMET and AIRMET

When creating a draft not complete (with some missing fields), pushing Back and pushing SAVE and CLOSE the draft should be saved even if there are missing fields (like when we push SAVE), instead it is not.
![test-2021-06-11_16.16.26](/uploads/d7ae3b850669515ff4afd549090d3938/test-2021-06-11_16.16.26.mp4)",2
88562479,2021-06-11 08:39:42.749,FE: Full FIR validation fails when publishing from draf,"The validation issue happens when following steps are performed:
- save a sigmet/airmet draft in which the Start Position is the full FIR.
- open a draft, continue to fill the rest of the fields.
- try to Publish. It is not possible due to the validation ""... maximum of 6 individual points"".
![image](/uploads/498e48a14625497b6da523cd71beecd3/image.png)

NOTE: It works correctly if the New airmet/sigmet is directly published without saving a draft or if the draft is saved without ""Start Position"".

Discussion at this link: https://knmi-nl.slack.com/archives/GV34VT97X/p1623398063143400",3
88558900,2021-06-11 07:37:09.339,BE: Fix geometry code for sigmet/airmet,"fix problems and write tests

BE doesn't use the correct polygon for the FMI converstion (choose between drawn and intersection polygon)
On top of that, it can also use one for the TAC text and the other for the coordinates passed to the FMI object",5
88510364,2021-06-10 09:42:06.134,FE: update baselayer urls to include https instead of //,"Several baselayers have a url like: //services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/

We need to add a protocol (https:)",2
88503756,2021-06-10 08:17:50.364,FE: Fix issue with urls in staging app,,1
88498335,2021-06-10 06:46:15.629,FE: number field has NaN when empty,"When first rendering an emtpy number field it's value is NaN.

To see:
- Log out the values of the sigmet form 
- Choose volcanic sigmet
- In the console.log you can see that the values of the volcanic field are NaN even though the fields show as empty
- Then only check one of the radio boxes from the level

You see now that there appears NaN in the volcanic coordinate boxes. If you look at the logged out values for the form you will see that secretly the levels value field also is NaN.",3
88450457,2021-06-09 11:09:38.752,FE: fix warning from AdagucMapDraw componentwillreceiveProps,"Don't forgot to add unit tests. To reproduce, open a Map with draw tools (like sigmet/airmet)

https://gitlab.com/opengeoweb/opengeoweb/uploads/0667e7bc59ae1058043c8353279fc6e4/Screenshot_2021-06-09_at_12.09.04.png",3
88383036,2021-06-08 10:12:30.208,"FE: bug when the map loads en you directly starts zooming, it will take the upper left corner as reference","![Screen_Recording_2021-06-08_at_12.16.46](/uploads/7f02077f47d3a04265baa5c1a2deb836/Screen_Recording_2021-06-08_at_12.16.46.mov)

This is captured on a Mac, is this happening on more machines? ->  LC: yes on my Linux machine",3
88370280,2021-06-08 07:47:21.975,BE: VV leading zeroes to ensure 4 char,"When an AIRMET for surface vissibility is made, the VIS in the TAC code needs to have 4 characters, even if the VIS is below 1000m. If the VIS number has 3 characters, a 0 comes first

In the KNMI AIRMET specifications is written (at page 6): SURFACE_VIS = ""SFC VIS"", ""\\s"", VVVV, ""M"", ""\\s"", ""("", OBSCURATION, "")""; VVVV means 4 characters.

So, if for example the VIS is 900 m this has to be written as 0900 m. A 0 comes before the number.

Behavior now: EHAA AMSTERDAM FIR SFC VIS 500M (FG) OBS WI

Correct behavior: EHAA AMSTERDAM FIR SFC VIS 0500M (FG) OBS WI",2
88370245,2021-06-08 07:46:49.350,Investigation: Pipeline job smoketest and other subsequent pipeline jobs give a warning about missing artifacts after 1 hour,"See this job https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend/-/jobs/1316300973

Pipeline job smoketest gives a warning about missing artifacts after 15 mins.
Because the job is triggered manually, it should be possible to run it at any time.

The smoketest doesn't need any artifacts, so either make it independent or make sure the artefacts don't expire.

![image](/uploads/3110d67f4c50b5cd54633f320857421b/image.png)

This is also affecting the deployment from acceptance to production, as well as the deletion of dev branches (because the delete job also has that same dependency). 

The problem has been briefly discussed with Mark from CPT, he suggested two possible solutions:
- Increase the artifact expiry
- Place the artifact in an S3 bucket

It would also be interesting to see why we have a dependency in the first place. The two above solutions might work, but we will be storing artifacts we don't really need...",3
88328894,2021-06-07 14:05:43.957,FE: validation maximumOneDrawing doesn't seem to work anymore,"See screenshot, drawing more than 1 polygon should give an error message. Somehow the validation doesn't get triggered when drawing the second polygon.

![image](/uploads/f8205a9ba096cac67ced57480218f6c4/image.png)",3
88312223,2021-06-07 09:46:42.418,FE: Move LayerManager stories to component folder,,2
88312192,2021-06-07 09:46:18.605,FE: Move timeslider stories to component folder,,3
88312176,2021-06-07 09:45:55.923,FE: Move CanvasComponent and LanguageSelect stories to component folder,,2
88312070,2021-06-07 09:44:48.880,FE: Move MultiDimensionSelect WMSLoader stories to their component folders,,2
88312000,2021-06-07 09:43:37.804,FE: Remove Vertical Dimension Select,"Component, stories everything!",2
88311900,2021-06-07 09:42:14.096,FE: SyncGroups stories to main level,"Move in /lib folder directly next to the demo stories

Temporary solution until we get sync components",2
88311831,2021-06-07 09:41:18.760,FE: make story utils folder and put storybook related things in there,,2
88311690,2021-06-07 09:39:02.475,FE: move Legend DraggableDialog and AutoUpdate stories to component folders,,2
88311523,2021-06-07 09:36:46.861,FE: move MapView stories to component folder,"All stories in MapViewWithoutRedux

The MapStatic stories should be moved to the ReactMapView folder and renamed to `AdagucMapDraw.stories.tsx`",2
88309329,2021-06-07 09:07:06.671,FE: fix white space in loading sigmet list,The loading skeleton is not full width when loading the sigmet/airmet list,3
88308130,2021-06-07 08:53:39.091,FE: Remove WMDebounce,Replace with debounce library `throttle-debounce`,5
88308111,2021-06-07 08:53:25.258,FE: add tests image store,Check WmImage for using dispatchEvent,5
88307426,2021-06-07 08:48:33.212,FE: Clean up logs,"Clean up any remaining logs (ignore the errors thrown by the draggable lib)

- geoweb-application-demo

![Screenshot_2021-06-09_at_12.07.35](/uploads/592bfc14803d90d8ddca5802d757912a/Screenshot_2021-06-09_at_12.07.35.png)

This one is coming from Drawer should be fixed in MUI v5: https://github.com/mui-org/material-ui#500-alpha36
![Screenshot_2021-06-09_at_12.14.04](/uploads/16c1c35ee95eddd75be3b929171116a1/Screenshot_2021-06-09_at_12.14.04.png)

![Screenshot_2021-06-09_at_12.19.43](/uploads/28452b8270587a610192c07cd748acdc/Screenshot_2021-06-09_at_12.19.43.png)

- These logs coming from sigmet/airmet

![Screenshot_2021-06-09_at_11.23.32](/uploads/8c5410e2c9ba5cc2157ce8638eae14ba/Screenshot_2021-06-09_at_11.23.32.png)

![Screenshot_2021-06-09_at_12.09.04](/uploads/0667e7bc59ae1058043c8353279fc6e4/Screenshot_2021-06-09_at_12.09.04.png)

- These from TAF, when closing a open taf
![Screenshot_2021-06-09_at_12.05.46](/uploads/fc60e07d1e2515c33d7eb14adc13eddf/Screenshot_2021-06-09_at_12.05.46.png)",3
88307205,2021-06-07 08:46:18.737,Technical refinement of SW notification fields,"Prepare SW changes to add the new notification fields
- Implications for BE/FE
- Type definition adjustment
- API changes needed",3
88306299,2021-06-07 08:35:46.354,BE: Investigate cookie error in issues panel/console log,"Find out cause and what we could potentially do about this. It's happening when scrolling or zooming the map

Caused by updates to the browser/BE?

Hint: Check if the WMS from FMI gives the same issue. If this is not the case, we know that the issue is in our own KNMI server.

![Screenshot_2021-06-11_at_16.59.32](/uploads/a06b813d5d0d451990b5bc574337caf1/Screenshot_2021-06-11_at_16.59.32.png)",5
88306065,2021-06-07 08:32:39.947,FE: remove old draggable packages,"When all components are updated to use react-moveable, the old libs should be removed

- react-draggable",2
88305664,2021-06-07 08:26:12.407,FE: Investigate FMI draggable lib or find better alternative,"The current drag and drop lib throws a lot of errors. FMI has started using a different lib, investigate this and see if that works better.

Goal: find a lib that doesn't throw errors and ensure one lib is used throughout the application.

- FMI: react-rnd (ask if they are happy with this?) --> fully depends on react-draggable, same errors in console in strict mode.
- Current: react-draggable, react-resizable


To try out:
- react-moveable -> has draggable + resizable (and a lot more) https://www.npmjs.com/package/react-moveable
- react-dnd in combination with react-resizable


both support snapping to a grid (for the future) and both are actively maintained",5
88305207,2021-06-07 08:19:02.942,FE: POC screenmanager with react-grid-layout,"See user story for details

timeboxed: 8h

Demo in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612",5
88304702,2021-06-07 08:11:12.222,Discussion on monitoring tools for 24/7 Sigmet/Airmet and Spaceweather,,3
96741691,2021-11-04 15:08:48.726,FE: fix flaky sigmet-airmet test MetInfoWrapper,see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1748705926,3
96730918,2021-11-04 13:16:25.395,FE: Toggling between screenpresets does not erase previous maps,"Toggling between screenpresets does not erase previous maps.

Use the sagas to clean the layers store.  action set_screenmanager_preset

Below an image after doing some stuff to individual maps in 1:1 and then switching to 1:all -

![image](/uploads/02ce68cce7a88e5dff71edb04237ce35/image.png)",3
96710665,2021-11-04 07:52:00.678,FE: sigmet airmet storybook opens behind list,"Check http://localhost:4400/?path=/story/demo-sigmet--sigmet-dialog-demo

![Screenshot_2021-11-04_at_08.52.03](/uploads/a4f1ba6946220f298b06d2354f34bfc9/Screenshot_2021-11-04_at_08.52.03.png)",2
96709577,2021-11-04 07:41:24.692,FE: Sigmet/Airmet map has wrong baselayer,"When opening the sigmet/airmet form the map has the wrong baselayer (it should be copied from the main map and use the baselayer grey etc)

![image](/uploads/0421b4a9582697af671aa500beb9ab34/image.png)",2
96669700,2021-11-03 14:44:57.009,FE: reference app use ThemeWrapper,,2
96666975,2021-11-03 14:32:43.396,FE: knmi-reference use ThemeWrapper,,2
96664842,2021-11-03 14:11:15.158,FE: form-fields use ThemeWrapper,,2
96664336,2021-11-03 14:03:57.972,FE: authentication and screenmanager use ThemeWrapper,,2
96662630,2021-11-03 13:39:06.364,FE: taf use ThemeWrapper,,2
96661865,2021-11-03 13:28:18.837,FE: sigmet-airmet use ThemeWrapper,,2
96661024,2021-11-03 13:13:54.539,FE: spaceweather use ThemeWrapper,,2
96655333,2021-11-03 11:53:53.134,FE: core use ThemeWrapper,,2
96653427,2021-11-03 11:19:55.667,FE: fix layermanager styling hover issues of active layer,"This happens on hover of the Active layer on a non-active row. Sometimes it does work after sorting. 

Check the enable layer for reference of the styling. This is only in Chrome, not FireFox

- ![Screenshot_2021-11-03_at_12.09.06](/uploads/edfad17b63ae5c7941f6a8cfcf1c00fc/Screenshot_2021-11-03_at_12.09.06.png)
- ![Screenshot_2021-11-03_at_12.11.01](/uploads/1bde997b905bcf887ca8709a005c308f/Screenshot_2021-11-03_at_12.11.01.png)",3
96642324,2021-11-03 08:59:11.466,FE: shared use ThemeWrapper,use the `ThemeWrapper` in shared in prepare for MUI5,2
96582353,2021-11-02 14:11:31.542,FE: baselayers for knmi-geoweb application from internal services,baselayers for knmi-geoweb application should be retrieved from internal services (KNMIservices) and from the KNMI layers list (KNMIlayers).,2
96579858,2021-11-02 13:34:35.533,FE: reuse same story wrapper in theme,one single point to make MUI5 upgrade easier.,2
96576659,2021-11-02 12:47:59.108,FE: move workspace.json to separate project.json files to prepare for nx 13,,3
96563611,2021-11-02 09:21:15.971,FE: HarmonieTempAndPrecipPreset should get layers as props,"In knmi-geoweb app the `Harmonie Temperature and Precipitation` screenmanager preset still makes use of the geoservices HARM service, while it should use the knmi internal service.
This because it is necessary to pass the layers as props in HarmonieTempAndPrecipPreset.

Example can be HarmRefTimePreset.",3
96559717,2021-11-02 08:30:24.596,FE: update cypress to fix npm vulnerabilities,,3
96558482,2021-11-02 08:08:46.472,FE: MultiMap layermanager: Make two presets for demonstration,"Make the multimap layermanager work with two presets:
- One demonstrating the singlemap layermanager, with many buttons for opening the layermanager
- One demonstrating the multimap layermanager, with one button for opening the multimap layermanager",3
96518381,2021-11-01 14:58:59.750,FE:Fix layers/servicesfor Harmonie and EUMETSAT,"Fix layers/services for 
- Harmonie
- Eumetsat",2
96514610,2021-11-01 13:57:52.007,FE: Harmonize WMS service variable names,"The public KNMI services from geoservices are now named (from libs/core/src/lib/utils/publicServices.tsx):
- KNMIgeoservicesBaselayers,
- KNMIgeoservicesRadar,
- KNMIgeoservicesObs,

**It would be good to rename the following:** (from libs/core/src/lib/utils/publicServices.tsx)
- harmonieWMSService ==> KNMIgeoservicesHarmonie

**It would be good to rename the KNMI internal ones in a similar way** (from libs/core/src/lib/utils/KNMIservices.tsx):

- RadarService ==> KNMIGeoWebRadarService
- Harmonie ==> KNMIGeoWebHarmonie
- HarmonieML ==>  KNMIGeoWebHarmonieML
- HarmonieEPS==> KNMIGeoWebHarmonieEPS
- Lightning ==> KNMIGeoWebLightning
- Observations ==> KNMIGeoWebObservations
- Satellite ==> KNMIGeoWebSatellite
- SevereWeather ==> KNMIGeoWebSevereWeather
- CellTrackingService ==> KNMIGeoWebCellTrackingService
- Overlays ==> KNMIGeoWebOverlays",2
96507755,2021-11-01 11:46:39.847,FE: add theming snapshot tests,"- Some styles and components have a bit of different styling, we can prepare for that by adding storybook snapshots for the current storybook examples
- Add an example with text with a link (``` <a href> ```) in story as well",3
96503169,2021-11-01 10:16:02.938,BE: sigmet/airmetTAC lambda - only generate warning in case the tac conversion fails,"- in the sigmet/airmet tac lambda used in the FE we do not want to throw an error (and trigger an grafana alert) in case the conversion fails and change that into a warning. This error has so far always been false alarm without any blocking issue for the user

current error thrown
```
application - 2021-10-31T07:11:18Z - ERROR - Error while calling Airmet TAC service: 
{
    ""timestamp"": ""2021-10-31T07:11:18Z"",
    ""status"": 500,
    ""error"": ""Internal Server Error"",
    ""message"": """",
    ""path"": ""/getairmettac""
}
. Line 39
	
```

- ensure that for publish, a TAC generation fail should result in an error that triggers a warning in grafana",2
96494841,2021-11-01 07:50:44.002,FE: Fix service https://geoservices.knmi.nl/,"In the code at this moment it is used https://adaguc-server-knmi-geoservices.pub.knmi.cloud/

It should be substitute with https://geoservices.knmi.nl/

Moreover there are 2 mistakes in the url:
- double // should be only one /
- double && should be only one &",2
96407962,2021-10-29 14:02:46.015,IWXXM: missing Volcano coordinates cause IWXXM to fail,"Conversion failed with: 
```
SYNTAX:XML Schema validation error at line 111, column 94:cvc-elt.3.1: Attribute 'http://www.w3.org/2001/XMLSchema-instance,nil' must not appear on element 'metce:position', because the {nillable} property of 'metce:position' is false.
SYNTAX:Failed Schematron assertation: VolcanicAshSIGMET.VolcanicAshSIGMET-6: If a geometry is defined for iwxxm:eruptingVolcano//metce:position by providing @srsName, @srsDimension must equal to 2 and @aixsLabels must be non-empty
```",3
96407852,2021-10-29 14:00:26.028,IWXXM: SIGMET cancel fails because of missing phenomenonType,Java call to the library fails with `NoSuchElementException` when retrieving the (non-existing) phenomenonType,3
96403323,2021-10-29 12:55:48.093,Bug: PROTON_100MeV events not stored,"PROTON 100 MeV are not recognized by the event_ingester

There should also be teststo make sure all event-types are handled.",3
96397162,2021-10-29 11:10:39.699,Workshop WKD innovatie cluster preparation,,3
96391688,2021-10-29 09:30:18.253,FE: remove dark/light theme stories from TAF,"TAF is not using theme yet, but there was a story. For now removed it to make MUI5 upgrade easier",1
96332970,2021-10-28 14:01:48.330,FE: update jest packages to v27,"To prepare for the Nx update, we can already start using Jest 27.",3
96330850,2021-10-28 13:44:50.524,"FE: MUI5 preperation, remove themeprovider from theme from TAF","Check this file libs/taf/src/lib/components/IssuesPane/IssuesPane.spec.tsx, theme provider should be imported from material ui",2
96317283,2021-10-28 11:11:36.710,Discuss NPM version > 7,"Investigation:

Test backwards compatibility of NPM > 7 with lower NPM versions.

===> Discuss when to update readme and use new NPM version >7",3
96305956,2021-10-28 08:26:03.221,FE: remove GWTheme from core and knmi-geoweb app,"Before implementing mui5, it would make it easier to remove first GWTHeme from core and some left-overs in knmi-geoweb app.

- make sure the AlertBanner still looks nice in Sigmet/Airmet as well.",5
96226736,2021-10-27 07:57:34.402,"FE: MultiMap LayerManager: Make layer add, layer move and layer delete work as well","Support the following actions for the multimap layermanager:
- WEBMAP_LAYER_DELETE
- WEBMAP_LAYER_ADD
- WEBMAP_LAYER_MOVE",5
96140181,2021-10-26 08:00:29.792,FE: Discuss need for generateLayerId in static layer definitions,,3
96139793,2021-10-26 07:55:50.102,BE: TAC line splitting causing empty messages,"See https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1615

Line splitting / truncation is going wrong.

Since this is deployed in ACC, fix this issue based on the TAG deployed in ACC.",3
96137428,2021-10-26 07:18:53.021,FE: Reuse exported layers/services from core in the application/libraries,"At this moment, in the entire application and in several libraries, same layers are defined many times.
To harmonize everything, we should reuse the exported layers/services from core.",5
96137110,2021-10-26 07:13:22.489,FE: Layers/Services in ScreenManager lib,Use in ScreenManager library the layers/services defined in the core (public and KNMI).,2
96068137,2021-10-25 09:07:50.614,Investigate impact of MUI4 to MUI5 upgrade and report the impact,"Steps to upgrade:
1. Prepare the code for lower impact: the new style engine will add a new `StyledEngineProvider` to each ThemeProvider in the code. To make sure the impact is low, we need to create one ThemeWrapper, which we import in every story in libs. 
2. Update MUI 4 to 5. This will break a lot of things, but MUI has some codemods which make it easier. Some components will break, some will be fixed automatically and some we have to do manual. To prepare for this, we added snapshots tests in theme library. We can create a main branch for this, and split the components into smaller tickets but have to see the impact.",3
96067938,2021-10-25 09:05:55.389,Cleanup KNMI GeoWeb DEV backlog,Timebox: 1 h,3
96067788,2021-10-25 09:04:25.550,Archive old KNMI GeoWeb Gitlab repositories,Timebox: 1 h,3
96066463,2021-10-25 08:49:06.743,BE: Fix opposite rotation order of polygons in IWXXM vs TAC,"rotation order of polygons in IWXXM: counterclockwise
rotation order of polygons in TAC: clockwise

Fix in the FMIavimessageconverter libraries.",5
96066251,2021-10-25 08:46:19.338,KNMI confluence documentation,"Figure out what is necessary to clean-up, update and add in the documentation in Geoweb Confluence Space.
Timebox: 2h

Conclusion:
- [X] Team section: Add short description of the team and subfolder for PO and DE.
- [X] Documentation DE-Team section: Remove background Info. Move into this section the entire folder 'Product Information'  from Documentation developers section. Move into this section the 'Reset Cognito user password for Geoweb' from Documentation maintenance. 
- [X] Documentation developers section: think about DoD for tasks, USs and application and add those here. HDL needs to be updated and split per module (SpaceWeather, Aviation, Authorization). We can add a functional design for the entire application. Move into this section the 'Datastream' from Documentation maintenance and update it for all existing modules.
- [X] Documentation maintenance section: remove completely
- [X] Spaceweather: move into Meetings section.

TO CLARIFY:
Troubleshooting should move from IKM Geoweb doc space to GeoWeb SMP space.",3
96065906,2021-10-25 08:41:54.770,Redux action validator for time actions in geoweb core via Unit tests,"Certain actions are triggered with wrong values. Some actions trigger the time format `2020-01-01T00:00Z` and some trigger `2020-01-01T00:00:00.000Z`, while it should be `2020-01-01T00:00:00Z`.

Add a regex check for the correct format in the reducer where the time action is handled.

Make sure it does not cause performance issues.",5
96065901,2021-10-25 08:41:43.640,Fix ts errors complaining about ___spreadArray,"Fix ts errors complaining about ___spreadArray. Possible solutions:
- upgrade to es6 as compiler 
- or update tslib

To check it it is possible to use ui/reducer.",3
96065224,2021-10-25 08:33:35.480,Check if SatComp bucket/SNS topic are accessible in GeoWeb account,"Check if SatComp bucket and SNS topic are accessible in GeoWeb account 

(arn:aws:s3:::knmi-satellite-composites-prd in the knmi-wlm-prd)",5
96064412,2021-10-25 08:20:30.894,FE: Make default services list for application,"PreLoadedMapServices prop should be the same for all layer mangers used in one application.

Generic list can be defined in the core to use in the storybook.

KNMI list should be defined in the KNMI-geoweb application.",3
96063089,2021-10-25 08:05:02.845,BE: After VV a CB or TCU must be allowed in a group; do not appear in TAC now.,"When using VV in the firt cloud group, no other clouds are allowed, except for CB or TCU. They do also appear in TAC.

After VV, BE should check also the cloudgroup for CB and TCU",3
96062412,2021-10-25 07:58:26.632,BE: NSC does not appear in TAC in changegroups,"Problem probably is in conversion to FMI Object or in TAC generation. To be checked!

Write a test.",3
96061949,2021-10-25 07:52:39.375,FE: Weather groups in combination with visibility,"Rules:
1. Combination of Weather elements with visibility group FU, DU, HZ DRDU, BLDU need to be combined with a visibility of 5000 m or less.
2. BR needs to be combined with a visibility between 1000 and 5000 m (including 1000 and 5000 m.)
3. FG needs to combined with a visibility below 1000.

Add validation messages related to the previous rules. Fix and add tests",5
96061407,2021-10-25 07:46:11.134,FE: Add flag button to highlight active layer in layer manager,"Add flag button to highlight active layer in layer manager.

@didier.dezanet nedds to supply the svg for the flag.

![image](/uploads/5be65716cdac8389464bf0c3937fe3b0/image.png)",2
96060813,2021-10-25 07:39:33.721,"FE: NSW is mentioned in error notification, while not being used.","Description in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1567

As error message we could put: **Invalid weather input**",2
96060753,2021-10-25 07:38:57.427,FE: NSW not allowed in baseforecast,"NSW should not be allowed in baseforecast.

Double check that this is already in the code. If it is not working, fix it!",1
95951644,2021-10-22 10:09:22.699,FE: update to NX 13 to fix npm vulnerabilities,"
1. upgrade nx packages (@nrwl) to v13 latest following the migration guide. Blocked by [issue](https://github.com/nrwl/nx/issues/7536) (and [this issue](https://github.com/nrwl/nx/issues/7648)) with gitlab pipelines. [Fix](https://github.com/nrwl/nx/pull/7617) has been merged, and included in version **13.1.4**
1. should include webpack5
1. check if all critical vulnerabilities are solved `npm audit` and if not, create follow-up ticket",5
95946228,2021-10-22 09:05:21.599,FE: MultiMap LayerManager: Implement SyncGroup to control multiple maps with one layermanager,"Implement the multimap layermanager using SyncGroups. 

In this issue the goal is to make it work for only the action `WEBMAP_LAYER_CHANGE_NAME`. This is to test the feasibility of the implementation using SyncGroups. This involves creating a new syncgroup type LAYER next to the two existing BBOX and TIME types. Demonstrate that it works with **a new** MultiMap preset.

If this is the way to go, second step is to make it work for `WEBMAP_LAYER_CHANGE_STYLE`, `WEBMAP_LAYER_CHANGE_OPACITY`, `WEBMAP_LAYER_MOVE` and  `WEBMAP_LAYER_DELETE`

**For the new preset:**
* Copy the Precipitation, pressure and wind preset and make a similar one but with one master layer manager, so its easy to compare both types of preset. Names can be `Harmonie precipitation, pressure and wind 1:1` and `Harmonie precipitation, pressure and wind 1:all` respectively
* The master layer manager button can be in the first map for now",5
95944689,2021-10-22 08:48:23.468,Sync Groups Panel: Improve selector to reduce unnecessary re-rendering,"The SyncGroup panel is re-rendered very often while it is unchanged. It listens to all updates from the redux sync state.

To check:
When animating while the SyncGroup panel is open, the panel is rendered for each animation step. 
This is probably caused by the selector. This selector creates a new object each time the input (sync redux state) changes. We need to improve the selector. For this there are a few options: 1) making multiple smaller selectors and chaining these, 2): Use a memoized selector which detects if the resulting object is changed.",5
95870335,2021-10-21 11:54:44.156,FE: release new version,,2
95797636,2021-10-20 13:32:06.771,IWXXM lib should fix OBS time before start time,"According to Annex 3 it is legal to set the observation time of a SIGMET or AIRMET phenomenon to a time before the start of SIGMET/AIRMET's validity time. 
IWXXM-3.0 validation, however does not allow this. 

_I ran into a small problem with SIGMET/AIRMET  and the optional time for the OBS/FCST when implementing IWXXM3.0:
In the FE the OBS or FCST time is optional, that is fine. The OBS time can be (slightly) before the starting time of the SIGMET/AIRMET, as ICAO has specified rather vaguely. The FCST time should be in the valid period. These things are validated in the FE.
It turns out that for IWXXM there is a rule which states that the OBS time should be inside the valid period (which boils down to OBS time == VALIDSTART). Generating IWXXM's with OBS time before VALIDSTART fails on the IWXXM validation.
This is a problem in IWXXM3.0, which will be fixed in the upcoming version, but we're still stuck on 3.0.
See also: https://github.com/wmo-im/iwxxm/issues/208
This means that with the current state of the FE we can produce SIGMET/AIRMET's that can not be converted to IWXXM3.0.
Possible solutions would be to:
build the same validation into the FE: OBS time should be equal to start of VALID TIME (result would end up in both TAC and IWXXM)
when generating the IWXXM always change the OBS time to the valid time start (result would only show up in IWXXM and forecasters would never see it, because in the TAC it remains unchanged)_",3
95767854,2021-10-20 08:30:42.583,FE: order UI dialog to top when opening from buttons,"After dimension select buttons are created, we can order an opened dialog to the top when opening. This can be done in `UI_TOGGLE_DIALOG` in the ui reducer. 

Also, see if we can refine our selectors to return the order based on opened dialogs.",3
95767654,2021-10-20 08:28:16.625,FE: connect vertical dimension select buttons to the UI store,"Vertical dimension buttons currently use local state for open/close. Should create connected buttons like LayerManager and Legend currently have.

Also order dialog to top when opening",3
95575109,2021-10-18 06:43:26.847,FE: Layers/Services definition in core lib.,"At this moment KNMIlayers and KNMIservices are defined in CORE lib.

It is better to distinguish between KNMILayers/KNMIServices and GenericLayers/GenericServices (all defined in CORE) usable from KNMI but also from other partners.

KNMILayers/KNMIServices -> only layers/services that are working for the KNMI-geoweb application
GenericLayers/GenericServices -> only layers/services that are public accessible (e.g. in reference-application)

Goal: define layers/services in CORE library to be used all from one single source (at this moment layers/services are defined in almost all libraries)",5
95478233,2021-10-15 10:06:53.954,FE: theme tooltip styling,"Core was using a custom Tooltip component with default styles of the tooltip. Place it in theme, and remove the styling so everywhere we use tooltip it will look the same. We have to be a bit careful with this since a there are multiple versions in sizes.

Zeplin: https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/6093e6920eaaea0ab7da3d16

tryout 
https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/938/diffs",5
95215520,2021-10-11 12:18:42.551,FE: finish LayermManager theme styling part 1,Add correct base elements so future extension and theming is easier,2
95203903,2021-10-11 09:28:15.222,FE: Add back vertical scrollbar in screenmanager,"Add multiple maps - they get put underneath each other but due to the fact there is no scrollbar you'll never be able to find them anymore.

Likely fix: _overflow-y: auto_",2
95202597,2021-10-11 09:07:07.671,"Add one Home + zoom in/out buttons to multimapview (Precipitation, pressure and wind preset)",Add one set of buttons to the preset that controls all maps (add top right of the panel),3
95200197,2021-10-11 08:39:41.333,FE: Add timeslider to SIGMET/AIRMET map,"Need to add the timeslider to the sigmet/airmet map
- Ensure you can still see the coordinates either make sure the 't' shortcut to hide the timeslider should work OR position the timeslider in such a way that you can always see the coordinates
- Make sure that if you press the 't' while in a form field the t actually gets put in the form field and doesn't result in the toggling of the timeslider
- Make sure that if you press t while NOT in a form field, ONLY the timeslider gets hidden and no other strange behaviour is visible.",3
95199628,2021-10-11 08:34:23.241,FE: add layer manager to SIGMET/AIRMET map,"Useful to be able to enable/disable layers while having the SIGMET/AIRMET module open.

Adding/removing layers would only affect the SIGMET/AIRMET map and not the main map behind",2
95199525,2021-10-11 08:32:50.321,Meeting: WKD for getting Harmonie data in GeoWeb,,3
95199208,2021-10-11 08:28:56.587,Deployment to PRD Tue 19 or Thu 21 weather,,3
95198997,2021-10-11 08:26:51.980,Meeting: Define minimum requirements for SIGMET backend,"The KNMI GeoWeb version has some additional functionalities compare to the GeoWeb reference version.

In order to work towards one (full functionality) GeoWeb version that can be tested and used by everyone in the GeoWeb cooperation, this issue aims to make an inventory on what needs to be done with existing KNMI GeoWeb functionality, in this case the SIGMET.

**The result of this issue is an overview of the minimum requirements for a backend in e.g. AWS for the SIGMET as implemented in KNMI.**

The outcome will be used for discussion with FMI and MET Norway on possible next steps.",3
95198766,2021-10-11 08:25:08.522,TAF: unclear error message FM,"Error message change, see linked user story for new message.",1
95198251,2021-10-11 08:19:40.760,Error in header TAF when issuing COR,"When issuing TAF correction, there is one space too much after the datetime group in the header of the tac message.

FTNL99 EHDB 20211001112140  COR

- Header is created in the TAF lambda (GW BE)
- Also check and make sure AMD/CNL normal TAF are correct and without too many spaces
- Fix there and add tests",3
95196384,2021-10-11 08:05:42.299,FE: SIGMET and AIRMET: lat/lon marker does not work during drawing,"Do: 
- in webmap we need to ensure the coordinates are still displayed when in drawing mode
- if possible add a test


### Summary

During the drawing (when in drawing mode) the lat/lon positioner in the left down corner does not work. The position of the mouse is only given, when the user is not in drawing mode. 
This however should also work IN drawing mode

This is necessary, because sometimes areas from other messages (VAAC (Volcanic Ash advisory) https://www.metoffice.gov.uk/services/transport/aviation/regulated/vaac/advisories ) have to be used, which consist of coordinates. Good examples can be found in the archive in may 2011
Then it is quite inconvienent if the positionidentification does not work.

### Steps to reproduce

When the user is in drawing mode (f.e. box or polygon), the location identification should give the lat/lo location of the mouse, so the user knows at which coordinates the user is putting the points. 


### What is the current *bug* behavior?

The position identificiation does not work and only gives the lat//lon of the start of the drawing.

### What is the expected *correct* behavior?

When the user is in drawing mode (f.e. box or polygon), the location identification should give the lat/lo location of the mouse, so the user knows at which coordinates the user is putting the points. 

### Relevant logs and/or screenshots

This is really important during Volcanic Ash situations! (And because there is a volcano erupting at La Palma and Iceland is quite restless, I think it is really important!",5
95195373,2021-10-11 07:56:35.496,FE: TAC not displayed when saving a draft without start and enddate and then opening it again,"### Summary

TAC not displayed when saving a draft without start and enddate and then opening it again

### Steps to reproduce

- open the AIRMET or SIGMET module
- click to create a new product
- make start and enddate fields empty
- fill in all other fields
- click SAVE
- open the product you just saved
- notice the date fields get prepopulated, but the TAC is still displaying 'Missing data: no TAC can be generated'


### What is the current *bug* behavior?

TAC is still displaying 'Missing data: no TAC can be generated'

### What is the expected *correct* behavior?

TAC should be retrieved with the visible dates",3
95193559,2021-10-11 07:38:05.830,SIGMET/AIRMET/TAF: TAC line not longer than 69 characters,"**NOTE: ERNST NEEDS TO CHECK SPECIFICS FIRST**

We need to break up the lines to ensure they are not longer than 69 characters.

- Ensure lines are not longer than 69 characters in the **lambdas** in geoweb-serverless-BE before writing to S3 so that the endpoint for the generation returns a ""normal"" TAC that is also used for the FE. 
- Write a re-useable function in utils that can be used for SIGMET/AIRMET and TAF
- Add some tests

### Summary

According to ICAO Annex 10 Aeronautical Telecommunications 
Volume II (zie confluence ICAO documentatie) lines in TAC messages like SIGMET and AIRMET may not be longer than 69 characters.

This must be implemented in GeoWeb to avoid that the SIGMET and AIRMET are not distributed around the world, for those countries still using Telex.

Source: According to ICAO Annex 10 Aeronautical Telecommunications 
Volume II; to be found at page 49 or 4-17.
Document can be found at confluence: http://confluence.knmi.nl/pages/viewpage.action?pageId=65374401

_4.4.4.4 The inclusion of optional data in the origin line shall be permitted provided a total of 69 characters is not
exceeded and subject to agreement between the authorities concerned. The presence of the optional data field shall be
indicated by one occurrence of the SPACE character immediately preceding optional data_.

### What is the expected *correct* behavior?

Lines must have a length no longer than 69 characters, excluding the line-closing sequence.

### Relevant logs and/or screenshots

>Dag Marcel,
 
>Gisteren spraken we over de undocumented feature in AIRMET en SIGMET betreffende de 72 characters per regel.
 
>Ik heb kort afgestemd met LVNL en de procedure afdeling geeft aan dat dit iets uit het verleden zou kunnen zijn, maar dit is niet gechecked door IT en blijft van belang om goed te testen om te zien of er mogelijk issues zijn. (zie onder).
 
>De rol van KNMI DMG focal point is al geruime tijd niet ingevuld en daarom heb ik mijn collegas van de Data Management Group (ICAO EASPG METG DMG) om advies gevraagd inzake de internationale uitwisseling via het ICAO Aeronautical Fixed Service (AFS)  .
 
>Een requirement van 72 characters is hen niet bekend, wel een requirement van 69 characters, en dat is een actueel requirement. Deze requirements  staan beschreven in ICAO Annex 10  Aeronautical Telecommunications  Volume II (zie toelichting hieronder).
 
>De requirement stamt van het telex tijdperk maar is nog steeds actueel voor TAC berichten, en die blijven bestaan tot een moment in de periode 2025-2030. Als niet aan de requirement voldaan wordt is het risico dat waarschuwingen van KNMI internationaal niet gedissemineerd worden. Dat willen we uiteraard voorkomen.
 
>Is de requirement van 69 characters wel gedocumenteerd en gemplementeerd?
 
>Mvg Jan Sondij
>Senior Adviseur Luchtvaartmeteorologie
 
>Internationale uitwisseling van ICAO OPMET berichten
>ICAO Annex 10 Aeronautical Telecommunications
>Volume II (zie confluence ICAO documentatie)
>Communication Procedures including those with PANS status
 
>4.4.9 Teletypewriter operating procedure  general
>4.4.9.1 END-OF-LINE FUNCTIONS
>4.4.9.1.1 A single line of page-copy shall not contain more than a total of 69 characters and/or spaces.
>4.4.9.1.2 One CARRIAGE RETURN [<] and one LINE FEED IMPULSES [] shall be transmitted between each
>printed page-line of the text of a message.",5
95193071,2021-10-11 07:31:58.617,Discuss OAuth security issue with Kristian (meeting),,3
95191793,2021-10-11 07:17:44.177,IWXXM: change urls to retrieve IWXXM v3.0.1,"Currently we call the IWXXM converter endpoints using version 2.1

This needs to be changed to use the new endpoints generating version 3.0.1

Add tests (or update tests)",3
95191589,2021-10-11 07:14:11.212,Add endpoints for IWXXM 3.0.1: /getsigmetiwxxm3 /getairmetiwxxm3,"In knmi-geoweb-avi-messageservices two new endpoints need to be added to be able to call the conversion to IWXXM version 3.0.1.

Add for both Sigmet and Airmet 

Add test cases and examples",5
95191380,2021-10-11 07:10:30.530,IWXXM 3.0.1: add converter for AIRMET,"- Use documentation of IWXXM on GitHub in the WMO-IM/IWXXM repo

Low level XML stuff is already in the library (FMI put it in) 

- Converting FMI airmet model to XML airmet model 
- Very similar to the 2.1 version (but not the same!)",8
95191199,2021-10-11 07:06:59.729,IWXXM 3.0.1: add converter for SIGMET,"- Use documentation of IWXXM on GitHub in the WMO-IM/IWXXM repo

Low level XML stuff is already in the library (FMI put it in) 

- Converting FMI sigmet model to XML sigmet model 
- Very similar to the 2.1 version (but not the same!)",8
95111161,2021-10-08 13:21:44.987,FE: make the application header responsive,"See screenshot, when the screen size is smaller, the 'add map' menu option falls off the header (in screenmanager view). Also the application title drops a bit. It should be more responsive.

![image](/uploads/136962a3362b26bf9614519c26b578b7/image.png)

Fix in both KNMI and reference application",3
94945142,2021-10-06 11:06:54.043,FE: SIGMET and AIRMET: special preset,"### User

Forecaster

### Short description

For making a SIGMET or AIRMET often the same datalayers are necessary. It is convenient for the user, if they are all in 1 preset for SIGMET and AIRMET, so he can open them at once and select the ones he needs by making them vissible or not vissible with the layer manager.

The SIGMET/AIRMET preset contains the following datalayers:
- Radar: Reflectivity (dBZ)
- Radar: precipitation NL
- Satellite: HRVComb
- Satellite: RGB Vulkaanas
- Obs wind
- obs gust
- obs weather code
- obs cloudbase
- obs MOR
- Harm windflags
- Harm gusts
- Harm T
- Harm precip
- Harm Neso
- Harm cloudbase

The layers in the layermanager should be in this order.

To make the loading faster, best to have them not vissible, except for Radar precip NL and satellite HRVComb.

### Why 

To make it more easy for the user to get the usefull data for a SIGMET

### Test criteria

* When the user chooses the SIGMET and AIRMET preset
  * then this preset opens, with all layers available, whereoff only precip NL and HRVComb are switched on vissible.",3
94881892,2021-10-05 14:13:52.534,BE: allow publishing a TAF with probability without change,"FE implementation is here https://gitlab.com/opengeoweb/opengeoweb/-/issues/1265

BE needs to accept publishing a TAF with Probability but without Change

![image](/uploads/e47e8cef527bdd8b297673c21078cdfe/image.png)",3
94848048,2021-10-05 07:49:03.841,BE: The date-time group in the TAF header is incorrect,"The date-time group in the TAF header is incorrect.
This has to be:
FTNL99 EHDB 280635
(DDHHMM)

`FTNL99 EHDB **20210928063507**
TAF COR EHAM 280635Z 2806/2912 25015KT 5000 OVC010
BECMG 2809/2812 18020G35KT 2500 DU OVC010
PROB30 TEMPO 2806/2809 28015KT 3000 +RA=`",3
94847883,2021-10-05 07:46:35.698,BE: TAFs with PUBLISHED status get no issue date,"At some point we removed the issueDate field from a PUBLISHED TAF. An example of a TAF generated with no issueDate is:

```
{
 ""uuid"": ""d0691215-211c-11ec-9c1f-09487534b449"",
 ""creationDate"": ""2021-09-29T18:00:00Z"",
 ""taf"": {
  ""messageType"": ""ORG"",
  ""location"": ""EHGG"",
  ""validDateStart"": ""2021-09-29T18:00:00Z"",
  ""type"": null,
  ""baseTime"": ""2021-09-29T18:00:00Z"",
  ""uuid"": ""d0691215-211c-11ec-9c1f-09487534b449"",
  ""validDateEnd"": ""2021-10-01T00:00:00Z"",
  ""baseForecast"": {
   ""valid"": {
    ""start"": ""2021-09-29T18:00:00Z"",
    ""end"": ""2021-10-01T00:00:00Z""
   },
   ""cavOK"": true,
   ""wind"": {
    ""speed"": 60,
    ""unit"": ""KT"",
    ""direction"": 130
   }
  },
  ""status"": ""PUBLISHED""
 },
 ""canbe"": [
  ""CANCELLED"",
  ""AMENDED"",
  ""CORRECTED""
 ]
}
```

Older TAFs do contain the field so we probably removed the line assigning the issueDate during a refactoring. 

We should add a test (or a check to an existing test) to make sure the field is there.

Another related problem is that draft versions of TAF do get an issueDate added. They shouldn't.",5
94847631,2021-10-05 07:42:41.537,FE: PROB is only allowed with TEMPO or alone,"PROB30/PROB40 with FM and BECMG is not allowed. Can we add a validation rule to state this
(quote from validation document from Marcel `BECMG can not be combined with PROB40 or PROB30)`

But PROB30/PROB40 must ALSO be allowed without any changegroup (so without TEMPO). 

So possible groups are:

- PROB30 TEMPO
- PROB40 TEMPO
- PROB30
- PROB40
- TEMPO
- BECMG
- FM

**So all we have to do is now allow PROB30 and PROB40 on its own without a changegroup**",3
94847493,2021-10-05 07:40:53.725,"FE: TAF: when CAVOK is used, NSC, clouds should not be allowed","See userstory for full description and images.

When CAVOK is used for VIS, weather and clouds are not to be filled in.

For the baseline it now is possible to fill in NSC or clouds in for clouds.
For changegroups now it is possible to fill in weather and cloud with CAVOK, but they do not appear in TAC. It should not be possible to fill in anything; it should be validated incorrect.

**Correct behavior:** When using CAVOK for VIS, weather and cloud groups should be empty, nothing should be filled in there (and/or appear in the TAC).",3
94847446,2021-10-05 07:39:35.220,FE: TAF: change group time BECMG length not validated,"There are some bugs in the change groups validity periods:

BECMG group: a becmg group may be valid 1, 2, 3 or 4 hrs. This is not validated in GeoWeb. In GeoWeb a becmg group can be any length now. So the validation for a BECMG group should be 1, 2, 3, or 4 hrs valid.",3
94847311,2021-10-05 07:37:28.884,FE: TAF: No TAC created with visibility 0000,"No TAC is created with visibility is 0000 in baseline of TAF. Validation gives no error. The TAC should be created, When VIS 0000 is used in changegroup, the TAC is created.

Also check all other fields in baseforecast to see if wind 00000 works, cloudheight 0000 etc works",3
94791684,2021-10-04 11:15:29.052,FE: TAF TAC doesn't get updated when reordering change groups,"We retrieve the TAC onBlur on the form. When dragging and dropping changegroups, the onBlur is not triggered of course and the TAC is not updated so still reflects the old ordering

To reproduce:
- Add 2 changegroups with different data filled in
- drag/drop the two to change the order
- see that the TAC still show the old order",3
94776456,2021-10-04 07:45:05.114,BE: Product Lambda: export IWXXM product for AIRMET,"In the lambda where the tac is generated, use the geoweb-knmi-avi-messageservices library with endpoint getairmetiwxxm21. 

See https://gitlab.com/opengeoweb/avi-msgconverter/geoweb-knmi-avi-messageservices#testing-iwxxm21-sigmet",3
94776420,2021-10-04 07:44:55.702,BE: Product Lambda: export IWXXM product for SIGMET,"In the lambda where the tac is generated, use the geoweb-knmi-avi-messageservices library with endpoint getsigmetiwxxm21. 

See https://gitlab.com/opengeoweb/avi-msgconverter/geoweb-knmi-avi-messageservices#testing-iwxxm21-sigmet",3
94680188,2021-10-01 11:37:05.791,BE: Make AIRMET IWXXM work for 2.1 version,,5
94552315,2021-09-29 14:34:21.356,BE: Streams table updates even when there is no incoming data,"Even if we receive no data from MetOffice, the streams table is updated anyway with a MAX timestamp in 2050.",2
94551153,2021-09-29 14:21:29.864,FE: improve screenmanager folder structure,"- the subfolder `components/Screenmanager` is unnecessary, the library is already called screenmanager
- the folder `storyUtils` has a lot of files, that are not only used inside stories. It should only contain utils for stories
- the components folder could use some subfolders for different components, like we do in all the other libs
- the file `utils.ts` is only importing and exporting, those should be added to `index.ts`
- move configurableMapWithSliderConnect.tsx to core lib, same folder as the MultiMapViewConnect

no renaming of exports, this is a separate ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/1104",2
94547032,2021-09-29 13:20:13.177,BE: geoweb-knmi-avi-messageservices check if IWXXM documents make sense,"- The geoweb-knmi-avi-messageservices can now make IWXXM-2.1, but we need to verify if they are correct.
- Please check if the coordinates / polygons are correct
- Can we load these in a IWXXM check and visualizer?",5
94545805,2021-09-29 13:02:52.795,BE: geoweb-knmi-avi-messageservices fix IWXXM tests for Sigmet,"In file `src/test/java/nl/knmi/geoweb/backend/product/GeoWebSigmet/TestGeoWebSigmetToFMIIWXXM21.java` of geoweb-knmi-avi-messageservices certain tests are commented because they are not working yet.

Fix these.",5
94355957,2021-09-27 10:13:11.524,BE:geoweb-knmi-avi-messageservices: Remove sesar sigmet code,,3
94355695,2021-09-27 10:09:04.036,Add CI/CD for fmi-avi-message-converter-iwxxm,CI/CD is needed for the dev workflow,3
88304145,2021-06-07 08:02:24.058,BE: Increase memory/CPU of lambdas to increase performance,"As the CPU increases with memory increase for the Lambdas, to speed them up we should increase lambda memory.

Test if 1GB RAM is enough (investigate what is ""sort of"" optimal)

Test out if it would work with a database filled with 1000 sigmets",5
88303689,2021-06-07 07:55:34.771,BE: return consistent data object from API gateway,"In case of a timeout and other errors we should consistently send back a result so that the FE doesn't get sent any surprises

Configure API Gateway and lambda to send back consistent results",5
88303347,2021-06-07 07:49:44.214,FE: prevent white screen of death for failed publish due to timeout,"For a timeout the error comes from the API-gateway (502 error) which results in a different return result. 

We should be able to deal with this error gracefully returned from API-gateway. 

Deploy test BE and set timeout of the lambda to 100ms to mimic the timeouts.",5
88302874,2021-06-07 07:42:46.170,BE: for multi polygon intersection use the drawn polygon,"When a multipolygon intersection is sent from the FE the originally drawn polygon should be used in the TAC.

Should be handled in the converter when deciding which of the geometries should be used.

(Possibly reuse the code for the more than 7 points intersections)",5
88302462,2021-06-07 07:36:06.727,FE: Add warning when polygon results in multiple intersections,"Drawing a polygon (start and/or end) that results in two intersections should result in highlighting both intersections and a warning should be given to warn that the drawn polygon will be used in the TAC.

- Ensure that the two intersections are highlighted on the map as we do for single intersections
- When multiple intersections are detected (the resulting intersection GeoJSON has type multipolygon) we should give a grey warning like we do for when there are too many points in the FIR intersection

`The drawn polygon has multiple intersections with the FIR-boundary. The drawn polygon will be used for the TAC-code.`",3
88301633,2021-06-07 07:23:07.149,FE: SIGMET units in movement must be KMH not KPH,"Change type to KMH and send this to BE.

The visible version should be lower case",2
88301610,2021-06-07 07:22:37.360,BE: SIGMET units in movement must be KMH not KPH,"Currently we use KMH for movement unit but this should be KPH, replace all occurences of KMH with KPH",3
88301280,2021-06-07 07:18:10.333,FE: change default behavior 'valid from' to 30 mins,"When a new SIGMET/AIRMET is opened atm the valid from time is set to 10 mins from that point in time.

This defaulted time should be set to 30 mins from the point of opening the form.",1
88301036,2021-06-07 07:14:41.028,FE: Handle correctly full getCapabilities address,"Should check the WMS url to see if it already contains the parameters, if not, add on otherwise don't add them on again

check for:
- version
- request
- service

The rest of the URL should be left unchanged

Add unit tests",3
88300830,2021-06-07 07:11:28.486,BE: Numbering WS and WV SIGMET indepedent,"Check for right category for the numbering of the SIGMET to distinguish between volcanic, tropical cyclone and normal SIGMETS to allow for separate numbering.",3
88300483,2021-06-07 07:07:20.835,FE: Polygon: don't allow more than 6 individual points,"Give a validation error when a polygon with more than 6 individual points is drawn (for start geometry and also end geometry for a SIGMET)

Note that in the geojson a polygon with 6 points is represented by 7 coordinates.",3
88201996,2021-06-04 07:55:10.020,FE: move core storyshots outside stories folder,,2
88162649,2021-06-03 13:41:30.693,POC screenmanager,"Related to #739 

# Make a screenmanager POC using golden layout/react-grid. 
- The screen should be configurable with a json file like in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612. 
- It should be possible to specify which component should be rendered at which location on the screen with a configuration file
- Check if golden-layout provides handles / feedback / callbacks to get status updates when positions/sizes of components are changed. These can then be stored back in the preset 
- The screenmanager code should be decoupled from a specific layout manager like golden-layout, in such a way that it remains possible to switch to another layout manager without getting into trouble.
- Next to golden-layout, React-Grid will be tested for needed functionality
- How well does the library functions with material design?
- Opening new browser tabs?
- Tooling (icons) for closing, moving, dragging elements on screen?
- Final result is POC in storybook


# Examples: 
![image](/uploads/3a892de5689aa413a0eeab8261b604a4/image.png)

![image](/uploads/b7397515e5a4a229f200145920774118/image.png)

![image](/uploads/1b063f36c95f11af76f578c42b8a8e08/image.png)",5
88142623,2021-06-03 07:47:57.491,FE: move geoweb layer select stories to component folder,Also move the current demo story to this folder,2
88142548,2021-06-03 07:46:31.970,FE: move core stories to component folder Mapview WIth Redux,,2
88142161,2021-06-03 07:40:43.322,FE: SIGMET - Default value of validity,Change default validity period of sigmet to 3 hours instead of the 1 currently used (see user story),2
88141812,2021-06-03 07:36:29.252,FE: Change order for AIRMET phenomenon list,For order see corresponding user story,2
88090413,2021-06-02 09:35:14.788,FE: in ReactHookFormTextField manage the 'decimal' conversion in float,"In ReactHookFormTextField if the inputMode is 'decimal', the value is converted in string when it should be in float.

Hint: to avoid to customize too much the code, suggestion is to use the ValueAsNumber (https://react-hook-form.com/v6/api/)",3
88081454,2021-06-02 07:24:25.488,FE: fix errors on webmap,"There are many logs/errors about cookies coming from webmap during panning, zooming etc.

![Screenshot_2021-06-02_at_09.24.47](/uploads/edd1f4f760eb07db583a587fc0a01d56/Screenshot_2021-06-02_at_09.24.47.png)",2
88015325,2021-06-01 07:05:32.753,FE: bug - fields populated in form after discarding,"To reproduce:
1. open a new sigmet/airmet and fill in phenomenon and level
2. press discard and go back to the list
3. click ""create a new sigmet/airmet"" and you will see the fields you filled in in your discarded sigmet are already filled!

We probably need to clear the form on a discard? (Potentially use reset() for this to clear out all values?)",3
87973056,2021-05-31 12:19:56.029,FE: add unit test to make sure an upcoming update to react-hook-form 7 will not introduce unwanted behavior,"Add tests to make sure any future update will be more robust. Based on comments of disabled fields and unregistrerd fields onMount https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/603

test:
- disabled fields get send to BE  https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/603#note_586881404
- unrendered components should not be send to BE https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/603#note_588694179
- also add a story with all inputs included",2
87970889,2021-05-31 11:39:39.964,BE: SpaceWeather PROTON events ignored,Currently we're missing the PROTON events due to a typo in the eventname of the lambda (underscore where there should not be an underscore),2
87970790,2021-05-31 11:37:16.146,FE: Make volcano name input field in capitals,"For volcanic ash SIGMETs, the name of the volcano should be sent to the BE in capitals",2
87867620,2021-05-28 10:57:36.486,Add typescript for cypress in BE repo,"- we have the deployment smoke tests inside https://gitlab.com/KNMI/geoweb/geoweb-serverless-backend with cypress
- it's currently in js.
- would be nice to add the types and convert to ts to improve the editor experience",3
87855626,2021-05-28 07:30:12.737,Timeout timer in WMImage can be removed,"The timeout timer in WMImage is not necessary anymore. The map is now not blocked anymore by slow WMS services.

Overall it is better to let the browser handle the timeout behavior of requests.",3
87816978,2021-05-27 13:26:06.075,FE: the SIGMET and AIRMET list is doing TAC requests for incomplete products which results in errors,"When you save a SIGMET or AIRMET as draft you can leave a lot of the fields empty. The LIST is trying to get a tac message for these products, but this results in errors in the console and an empty TAC message in the list when hovering.

NOTE: there is already a check in the Form if all relevant information is there, could we reuse that in the list?

![image](/uploads/da6b1ae9a8f6bf6bb24d6715d7815a37/image.png)

![image](/uploads/387a67e41ec9f9117dc3ca3bf594f794/image.png)",3
87808755,2021-05-27 11:01:09.860,FE: Clean up console logging in core,Clean up and remove all console logging/warning in core. Remove if unnecessary or make sure they can be switched on/off for debugging,3
87797373,2021-05-27 08:10:55.339,FE: Fix DateTImePicker focus bug,This is introduced by react-hook-form 7. Does not focus on first error (need to press twice). This was the best solution so far but still not 100% (instead of a format bug on render). https://github.com/react-hook-form/react-hook-form/issues/5328,3
87736965,2021-05-26 09:20:41.381,FE: fix hidden input bug spaceweather,"I think we should also add hidden fields at line 141 in `LifeCycleEditOptions` instead of `null` for `neweventlevel` and `threshold`.

When I summarise an event and then have a look at the result, these two fields are empty as they were never sent to the BE while they did have values before: ![image](https://gitlab.com/opengeoweb/opengeoweb/uploads/b429c53c10b154562eaf462ca73d47f4/image.png)",2
87731854,2021-05-26 08:13:07.106,FE: Extract isMounted logic to separate hook,"The `isMounted = React.useRef(null);` is used a lot

Should be extracted to a reusable hook and moved to the reusable lib",3
87667738,2021-05-25 10:07:12.312,FE: move spaceweather story folder files to respective components,This repo still has storybook files in a separate folder.,2
87661968,2021-05-25 08:57:05.752,FE: Fix duplicate hidden input fields of Spaceweather,"In the LifecycleEdit component, we define some hidden input fields twice (label and category). We have to check when to use those input fields. Maybe we can filter them out.",3
87661634,2021-05-25 08:51:27.309,FE: Move all geometries from SigmetForm/AirmetForm into the relevant components,"- Move start geometry hidden input (and intersect) from both airmet/sigmet form into the `StartGeometry` component
- Move the endGeometryIntersect from the sigmet form into the `Progress` component and make sure it's not used when form type is airmet",3
87661353,2021-05-25 08:48:18.027,FE: Update storybook examples for FormFields with submit button validation,"- Add submit button
- Remove the demo story of FieldsArray",2
87660612,2021-05-25 08:37:06.940,BE: Create FIR database for library,Create the FIR database on the fmi-avi-messageconverter-tac library (similar to what we are doing in the converter). The database is based on a JSON object containing information about all the FIRs.,3
87659858,2021-05-25 08:27:07.776,BE: Order polygons clockwise/counter clockwise according to TAC standard,,3
87658728,2021-05-25 08:12:19.248,Deployment smoketest for aviation,"Do something similar to what we did with Spaceweather in Cypress

Create notifications with type ""TEST"".

Only do it for tst and acc.",3
87658102,2021-05-25 08:01:55.873,Move geoweb-webmap to its own library in NX,"Move it on its own and create storybook stories for it.

Stop if too many issues arise (low priority). 
Do not spend more than half a day (discuss if in doubt).",3
87657533,2021-05-25 07:52:56.386,Remove errors from the unit tests for SIGMET/AIRMET and FormFields,,2
87657362,2021-05-25 07:50:11.928,Cleanup of console logs from the mapping component,"Currently there's a lot of logging inside the console and it's poluting everything. Make sure the logs only are visible when the dev flag is true here:

https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/libs/core/src/lib/geoweb-webmap/WMJSMap.ts#L57

Better to disable it by default, and mute all logs. Only when it's set to true (as a developer) you can see the logs again. Maybe this const needs a own file inside geoweb-webmap to prevent circular dependencies, because other files inside geoweb-webmap will need it as well.",5
87656493,2021-05-25 07:39:04.015,Remove errors from the unit tests for core,"Handle warnings, too",3
87656396,2021-05-25 07:36:54.487,"Discuss POC on custom layout manager, boundaries, next steps.","Invite Marcel
Outcome is a document/presentation (possible tickets for future sprints)

Made new ticket: https://gitlab.com/opengeoweb/opengeoweb/-/issues/781

Added MR with WIP: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/612",3
87656330,2021-05-25 07:35:35.984,BE: Update PRD deployment if OK by PO,,1
87655163,2021-05-25 07:18:00.118,Prepare meeting about Frontend timeseries library for the meeting at 09-06,"- Slide comparing several libraries
- Specs should be clear
- Share experience with Spaceweather library (Recharts, React Timeseries)",3
87654837,2021-05-25 07:12:14.716,"Reactivate ""no-undef"" eslint setting","It's set to off at the moment. Should be back to on as it was before:
https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/.eslintrc.json#L225",2
87654348,2021-05-25 07:04:29.382,Review the eslint settings,"Review the current eslint settings,  For some reason certain validation rules (""no-undef) had been disabled and there could be more: 
https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/.eslintrc.json#L225",2
87495449,2021-05-21 09:44:03.140,FE: fix the map intersections in storybook for sigmet and airmet,"some of the start position drawings in the sigmet-airmet storybook are not matching the fir area anymore, should be updated

![image](/uploads/1ae6f77f38dfc6b10050361caee7ae6f/image.png)",2
87409644,2021-05-20 06:55:22.630,FE: coding style guide in Readme,"Would be nice to have some rules in the repo with some basic coding styles where we can link to. Maybe some good vs bad examples, and also the why.
- functional programming https://opensource.com/article/17/6/functional-javascript
- redux hooks
- unit tests https://testing-library.com/docs/react-testing-library/intro/

Put in top level README.",2
87349828,2021-05-19 10:07:44.788,FE: sigmet-airmet error in console,![Screenshot_2021-05-19_at_12.07.10](/uploads/c0c29324d986680b7544e823d0c40ee7/Screenshot_2021-05-19_at_12.07.10.png),1
87290496,2021-05-18 14:59:54.822,FE: update react-form-hooks from 6 to 7,"
### User

Developers

### Short description

Upgrade react hook form from 6 to 7

### Why 

So we are up to date, and we can later more easily for example split the date input

### Test criteria

Everything form related should still work as before


### Extra information
* It will break. Read upgrade instructions here https://react-hook-form.com/migrate-v6-to-v7/
* Some (dirty) fixes can be fixed in a good way in v7, [check this MR](https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1147) for example for the focus issue of `insert`
* old attempt https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/601/diffs",3
87282909,2021-05-18 13:03:15.676,FE: Level Between Unit validation,"This task is for both SIGMET and AIRMET.

At this moment for the level all combinations of unit for Upper and Lower levels are accepted.

From Annex 3:
[SFC/]FLnnn or
[SFC/]nnnnM (or [SFC/][n]nnnnFT) or
FLnnn/nnn or
TOP FLnnn or
[TOP] ABV FLnnn (or [TOP] ABV [n]nnnnFT)
[nnnn/]nnnnM (or [[n]nnnn/][n]nnnnFT) or [nnnnM/]FLnnn
(or [[n]nnnnFT/]FLnnn)
or 24
TOP [ABV or BLW] FLnnn

So this means (in order lower/upper):
- FL
- SFC/FL
- M
- SFC/M
- FT
- SFT/FT
- FL/FL
- M/M
- FT/FT
- M/FL
- FT/FL

Give a validation error if something changes",3
87282766,2021-05-18 13:00:15.409,FE: Cloud Level should have the same unit for Upper and Lower level,"For Airmet Cloud Level at this moment is possible to choose different unit (m or ft) for Upper and Lower level.

As specified in Annex3 this is not correct: for both Upper and Lower level only the same unit is applicable.
This task involves @didier.dezanet design.

Both the unit dropdown menu stays there.
Changing the unit for the Upper Level will automatically change the unit for the Lower Level (and Vice-versa)",2
87266078,2021-05-18 08:48:57.154,FE: Reset values when changing option in Level section,"When changing from 'Level Between' (with already filled values) to 'Level At' in the TAC are reported the values of the previous upper level (see video)

![test-2021-05-18_10.54.13](/uploads/9396f56e8993cb031e85c3355a6b3e32/test-2021-05-18_10.54.13.mp4)

Every time that the choice is changed the values should be reset.",2
87204837,2021-05-17 14:04:10.244,FE: use new layer style for sigmet/airmet map icons,"Use new style in FE for the sigmet/airmet maps to display locations of the stations/airports

style name: `circle`",1
87204729,2021-05-17 14:02:32.475,FE: update preset waarschuwingssystematiek radar/polygonen,"see linked issue, the preset needs some changes (updated layer order, opacity, styles and provinces disabled)",2
87204602,2021-05-17 14:00:50.067,adaguc - SIGMET/AIRMET - change icons of airports/heliports,"Create a new style with in the layer already made with the new icons without the sation/airport names.

Keep the current style also in case we want to use it later",2
87204140,2021-05-17 13:54:32.143,FE: configure sigmet/airmet form units for KNMI,"both sigmet and airmet

use the existing config and add the units that KNMI wants to display, hide the ones that are not in the config

when there is nothing in the config for the units, display them all by default",3
87203916,2021-05-17 13:51:09.768,FE: SIGMET/AIRMET - expand map view,"Expand the sigmet form dialog to be as wide as the sigmet list dialog behind.

Keep the form the same width but extend the width of the map to span 3/4 of the dialog. 1/4 will be used by the form.

For both AIRMET/SIGMET",2
87202320,2021-05-17 13:26:56.126,FE: Deal with case sensitiveness for Dimension names in WMS GetCapabilties,"The **TIME** dimension is not seen as **time** dimension in http://halo-wms.met.no/halo/default.map?service=WMS&REQUEST=GetCapabilities&VERSION=1.3.0&service=WMS&request=GetCapabilities

That is why the timeslider does not see the time dimension.

Fix: Case in-sensitive dimension names?",5
87205253,2021-05-17 11:49:25.311,FE: Map: The throttling of parallel loading WMS GetMap is  gradually slowing down,"WMImage throttles the amount of simultenous loading of WMS GetMap requests to prevent overload of the WMS server. It seems that this mechanism is not working well. There is a global counter for the number of images currently loading:
https://gitlab.com/opengeoweb/opengeoweb/-/blob/master/libs/core/src/lib/geoweb-webmap/WMImage.ts#L20

If no images are loading, this counter should be zero. In practice, this counter slowly increases. The effect is that only one image can be loaded in parallel at some point. This slows animations down.

The other thing is that it might be better to leave this functionality to the browser. Nowadays the browser does probably a better job at throttling than custom JS code.

Fix: Remove this throttling mechanism or make it work properly.",5
87098381,2021-05-14 15:54:59.669,FE: test for getCurrentDateIso fails sometimes,"see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1263197669

was introduced in https://gitlab.com/opengeoweb/opengeoweb/-/issues/687

the mock for Date.now is not implemented correctly 

if you search on `jest.spyOn(Date, 'now')` you can find other tests that do implement it correctly, should be done the same way",1
86932636,2021-05-12 10:57:30.011,"FE: Surface visibility ""Cause"" does not refresh the TAC","The input of a new visibility will update the TAC, but changing the cause will not. 

![image](/uploads/7adb92364e099ca01e9b975619be4d01/image.png)


Config required for the FE to test against the latest BE:

```
{
  ""AUTH_LOGIN_URL"": ""https://geoweb-dev-airmet-tac.auth.eu-west-1.amazoncognito.com/oauth2/authorize?client_id={client_id}&response_type=code&scope=email+openid&redirect_uri={app_url}/code"",
  ""AUTH_LOGOUT_URL"": ""https://geoweb-dev-airmet-tac.auth.eu-west-1.amazoncognito.com/logout?client_id={client_id}&logout_uri={app_url}/login"",
  ""AUTH_TOKEN_URL"": ""https://h5m7yumf2a-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra/auth/token"",
  ""AUTH_CLIENT_ID"": ""7v2kceg0bo6e8rjodb0ul704bc"",
  ""INFRA_BASE_URL"": ""https://h5m7yumf2a-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra"",
  ""APP_URL"": ""http://localhost:4200"",
  ""SW_BASE_URL"": ""https://vko1z3liqc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/spaceweather"",
  ""SIGMET_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""AIRMET_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""TAF_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation""
}

```

Make sure to have a user on geoweb-backend-dev-airmet-tac-user-pool or ask for one.",2
86932382,2021-05-12 10:55:19.902,"FE: Surface wind ""kts"" unit is wrong","The unit for surface wind should be ""KT"" instead of ""kts"". Also, ""kt"" should be displayed, and not ""kts"".",1
86932174,2021-05-12 10:52:52.218,FE: Send units in capital letters,"Find out which ones are missing 

The same thing we did for the Movement units (see MR https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/537) should be done for all other units that the FE sends to the BE

Create extra tests, make sure it matches Sigmet


Config required for the FE to test against the latest BE:

```
{
  ""AUTH_LOGIN_URL"": ""https://geoweb-dev-airmet-tac.auth.eu-west-1.amazoncognito.com/oauth2/authorize?client_id={client_id}&response_type=code&scope=email+openid&redirect_uri={app_url}/code"",
  ""AUTH_LOGOUT_URL"": ""https://geoweb-dev-airmet-tac.auth.eu-west-1.amazoncognito.com/logout?client_id={client_id}&logout_uri={app_url}/login"",
  ""AUTH_TOKEN_URL"": ""https://h5m7yumf2a-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra/auth/token"",
  ""AUTH_CLIENT_ID"": ""7v2kceg0bo6e8rjodb0ul704bc"",
  ""INFRA_BASE_URL"": ""https://h5m7yumf2a-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra"",
  ""APP_URL"": ""http://localhost:4200"",
  ""SW_BASE_URL"": ""https://vko1z3liqc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/spaceweather"",
  ""SIGMET_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""AIRMET_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""TAF_BASE_URL"": ""https://hw99pubyfc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation""
}

```

Make sure to have a user on geoweb-backend-dev-airmet-tac-user-pool or ask for one.",5
86925407,2021-05-12 09:01:58.013,FE: Fix flaky test sigmet-airmet,"This test is **sometimes** failing 
See https://gitlab.com/opengeoweb/opengeoweb/-/jobs/1255627358",3
86920895,2021-05-12 08:24:35.317,FE: fix npm vulnerabilities,"```
found 211 vulnerabilities (1 low, 206 moderate, 4 high)
  run `npm audit fix` to fix them, or `npm audit` for details

```

part 1: 
- [x] immer@9.0.2
- [x] `npm update underscore --depth 2` (to resolve 2 issues with underscore package, dep of pondjs and react-timeseries-charts)
- [x] `npm update hosted-git-info --depth 13` (to resolve 99 issues with hosted-git-info, dep of @nrwl and jest)

part 2:
- [x] typedoc@0.20.36 --> test it well, breaking changes

part 3:
- [x] update @nrwl to v12.3.3 (follow readme instructions to update Nx). This will probably include:
   - @storybook/react@6.2.7 --> test it out
   - includes linting updates, due to dependencies (set one rule to warning to fix in new ticket)
   - avoid updating react to v17, should be done in a separate ticket because we need material-ui v5 for that https://gitlab.com/opengeoweb/opengeoweb/-/issues/365

> part 4:
> - update webpack@5.37.0 ---> storybook 6.2 still needs webpack4, webpack5 support is experimental and will be available in 6.3",3
86874695,2021-05-11 14:52:37.830,FE: Readme missing install steps,"First step is missing; the cloning + cd'ing into that folder of repository. 
1. git clone 
2. cd folder
3. npm ci",1
86847915,2021-05-11 10:23:22.472,FE: rewrite example connected component in core README with redux hooks,"The readme for core  has an example with a connected component, we should rewrite that with redux hooks https://gitlab.com/opengeoweb/opengeoweb/-/tree/master/libs/core",2
86847791,2021-05-11 10:20:28.968,FE: storybook for core is giving warnings about intl-messageformat,"maybe we are missing `@types/react-intl`? try installing with --save-dev


![image](/uploads/7e92e64f6a83efbbed1dfaf598a20f10/image.png)",2
86763397,2021-05-10 08:02:43.370,BE: EWC cell tracking layer will get config update in adaguc,"Bram will send new config file, we have to edit and put in our environment and redeploy to adaguc",2
86763108,2021-05-10 07:58:31.687,Meeting with FMI about licences,Meeting will be on Tuesday 18th at 14:00.,1
86762520,2021-05-10 07:47:48.498,FE: add layermanager button in KNMI application,"- make sure there is a button to open the layer manager
- make sure to keep the preloaded services and base layers like we had them before

![image](/uploads/db7ec7caf1d906548e0f0a9c6d2dae58/image.png)

see the reference application how its done: https://gitlab.com/opengeoweb/geoweb-core-demo/-/blob/master/src/components/MapWithGeoWebLayerSelect.tsx

![image](/uploads/9eeb29a2b0257c6b030e48d733750897/image.png)",2
86761935,2021-05-10 07:40:19.638,FE: add the new Timeslider in the KNMI application,"- in the KNMI application replace the old timeslider with the new one that FMI made
- don't delete the old timeslider component yet from the core library, we can do that next sprint

see the reference application how its done: https://gitlab.com/opengeoweb/geoweb-core-demo/-/blob/master/src/components/MapWithGeoWebLayerSelect.tsx

![image](/uploads/141052624eeed5118e325403e091185c/image.png)",3
86761928,2021-05-10 07:40:11.989,FE: add the new MultiDimensionSelect in the KNMI application,"- replace `VerticalDimensionSelectConnect` with the new `MultiDimensionSelectConnect`
- Import redux component into KNMI application and verify the dimensions work if present. Test for example this layer: Harmnonie Pressure levels. Also make a test for it

See how it's done in https://gitlab.com/opengeoweb/geoweb-core-demo/-/blob/master/src/components/MapWithGeoWebLayerSelect.tsx
![image](/uploads/8583fe1d428af17fce56436c64479cf4/image.png)",3
86761797,2021-05-10 07:37:40.711,FE: Reduced precision timestamps parsing fails in getCapabilities,"for description see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1304

- add tests",5
86761489,2021-05-10 07:33:03.266,FE: WMS layers do not inherit properties from their parents,"for description see https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1243

- create example xml's with different settings (fake wms capabilities documents with nested layers)
- use those in tests and check if properties are inherited properly
- verify the log has been removed and the legend works as described in this MR: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/545?diff_id=184708213&start_sha=56401a91708b92885e5be401834e129640b8a448#fa09a443a8231f67baa63c26fe502ef3573eed9e_180_180",5
86761316,2021-05-10 07:30:03.782,"sync syncgroups, see where we are",,1
86759949,2021-05-10 07:07:07.655,Build FMI message converter TAC library,"- not all geometries are handled well, tac to model
- FIR database for conversion
- Airport database for application

Current bugs found:
- Levels not displayed on Broken Cloud, Overcast Cloud
- Speed/Direction does not appear on Surface Wind",20
86634626,2021-05-07 07:44:06.285,FE: publishing of theme to NPM,"Publish of the new theme lib to NPM

Don't forget to enable the pipeline task to publish to npm in file:

* .gitlab-ci.yml

Also update all the versions to `2.0.1`. Because theme is already on `2.0.1`, we have to start from there now. (otherwise publishing theme to npm will fail)

Also update the readme of core because it needs the theme provider to work.

introduced here: https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/526",3
86581634,2021-05-06 10:35:16.005,FE: pass capital movement units to BE,"The BE wants [KT, KPH] for movement but the FE currently sends [kt, kph]",3
86580350,2021-05-06 10:16:23.292,FE: make storybook use fullscreen layout,"all the stories currently have some padding around, storybook has an option to use fullscreen layout

Changing `.storybook/preview.js` to

```
export const parameters = {
  layout: 'fullscreen',
  options: {
    storySort: (a, b) => a[1].id.localeCompare(b[1].id),
  },
};
``` 
should solve it. 

Then this file should be obsolete: `opengeoweb/libs/core/.storybook/preview-body.html`",5
86438915,2021-05-04 09:09:55.486,BE: published draft sigmet/airmet not exported to bucket,"When publishing an already saved as draft sigmet/airmet it is not exported to the bucket, only the DB record is updated.",2
86428502,2021-05-04 07:01:56.213,FE: make sure cypress e2e tests don't fail on uncaught exceptions,"See image, make sure e2e tests don't fail on uncaught exceptions

(this pops up when we use the latest version of geoweb-core in the application)

https://docs.cypress.io/api/events/catalog-of-events#Uncaught-Exceptions

![image](/uploads/67326d1f5111d63b6c1c5279962b75bb/image.png)",2
86427266,2021-05-04 06:52:21.173,FE: add FMI to opengeoweb licences,"if we move geoweb-core as it is to opengeoweb, the license check will fail. FMI is not in there yet, should be added",2
86396164,2021-05-03 15:29:26.085,FE: fix imports from @opengeoweb/core/store,"in sigmet-airmet and knmi-geoweb there are imports from `@opengeoweb/core/store` 

- [x] export store from opengeoweb/core
- [x] publish a new version for core v0.0.41
- [x] use this in opengeoweb
- [x] fix the imports 

when we move core to opengeoweb, this should be fixed, otherwise this will give type errors",3
86437755,2021-05-03 15:17:29.783,FE: turn linting rule no-underscore-dangle off in opengeoweb,"in `.eslintrc` disable rule `no-underscore-dangle`: it's currently turned off in geoweb-core, but this will give linting errors in opengeoweb.

We need to turn this rule off in opengeoweb as well.",1
86391950,2021-05-03 14:17:18.158,FE: uninstall @storybook/addon-action in geoweb-core,"Inside geoweb-core we have some stories that use `@storybook/addon-action`. We don't use that yet in opengeoweb.

It should be uninstalled and where actions are used in the stories, check if it should be replaced with a console.log",3
86391507,2021-05-03 14:10:51.192,FE: add packages to opengeoweb to prepare for geoweb-core,"Install the packages that core needs that opengeoweb doesn't have yet, to prepare for the big move:

**make sure to install the same version that core currently has!**

**check if it should be installed as dependencies or devDependencies**

- [x] - react-sortable-hoc
- [x] - react-rnd
- [x] - es6-enum
- [x] - proj4
- [x] - @types/proj4 (as devDep)
- [x] - mq-polyfill (as devDep)
- [x] - redux-dynamic-modules-saga
- [x] - redux-saga
- [x] - reselect
- [x] - react-intl
- [x] - lodash.clonedeep
- [x] - throttle-debounce",2
86390661,2021-05-03 13:55:34.092,FE: move storyshots functionality from geoweb-core to opengeoweb,"In geoweb-core we had snapshot testing for canvas components. We don't have that yet in opengeoweb. After the core code is moved, copy this functionality and add the pipeline job.",3
86387563,2021-05-03 13:02:21.100,FE: release new version,,1
86385205,2021-05-03 12:31:18.765,FE: copy geoweb-core code to opengeoweb,"> [ ] make sure there are no open merge requests in the old repo
1. [x] remove the dummy files from opengeoweb `libs/core/src/lib`
1. [x] copy all the folders and files inside the geoweb-core `/src` folder into opengeoweb folder `libs/core/src/lib`
1. [x] copy the `stories` folder into opengeoweb folder `libs/core/src/lib` and update all the imports (the opengeoweb folder structure is a bit different)
1. [x] copy the file `.storybook/preview-body.html` to `libs/core/.storybook/preview-body.html`
1. [x] run `npm uninstall @opengeoweb/core`
1. [x] enable the alias for the new core lib inside `tsconfig.base.json` and `.storybook/main.js`
1. [x] remove `@opengeoweb/core` from the externals in `workspace.json` since it's not external anymore
1. [x] copy the relevant README contents into opengeoweb (note in opengeoweb there is a main README for our development and a lib specific README that gets published with the NPM package, make sure to put information in the logical location)
1. [x] make sure the new core lib uses the **local-theme** (renaming that back to theme is a separate ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/656)
1. [x] run the formatting `npm run format`
1. [x] enable the publish to npm job for core in `.gitlab-ci.yml`
1. [ ] make sure all the pipeline jobs work for core
> [ ] archive the old repo

NOTE: moving storyshots functionality is a separate ticket https://gitlab.com/opengeoweb/opengeoweb/-/issues/666",5
86384367,2021-05-03 12:14:38.844,FE: let pipeline fail on console.error caused by tests,"Let pipeline fail on console.error on tests, don't let it fail on console.error in our (core) code
![Screenshot_2021-05-03_at_14.20.06](/uploads/e17b5ba958ed8ba4315f270fb76f2b14/Screenshot_2021-05-03_at_14.20.06.png)",5
86383924,2021-05-03 12:05:44.499,FE: try out geoweb-core in opengeoweb,,3
86383015,2021-05-03 11:45:00.812,FE: cleanup sigmet-airmet test warnings,"Fix this issue (might do this after https://gitlab.com/opengeoweb/opengeoweb/-/issues/663 that can be tested well)


 ![Screenshot_2021-05-03_at_14.01.46](/uploads/71bf3467439373bc3e20704afdf768ab/Screenshot_2021-05-03_at_14.01.46.png)",2
86271857,2021-04-30 09:35:27.386,FE: Saving a draft with validation issues,"While saving draft, all the required fields should be optional except for the phenomenon. Single field content validation should still take place.

Before merging, wait for #659",5
86271450,2021-04-30 09:27:51.254,BE: Saving a draft with validation issues.,"It is necessary:
- change openAPI specification to make all fields not required except Phenomenon.
- build some checks for publishing action.
- add tests to discriminate the saving a draft with the publishing a product.",8
86271232,2021-04-30 09:24:09.938,BE: Sort listing of SIGMET and AIRMET by issue time.,"The listing of SIGMETs in ""drawer-mode"" must be sorted by issue time. Now, it's done by valid time (when saving a draft, valid time must be filled in). Draft Sigmets are always on the top of the list sorted by ""saved draft-time"".

This is for Sigmet and Airmet.",3
86230127,2021-04-29 14:56:40.819,FE: setup empty core lib in opengeoweb,"Prepare an empty lib so we can easily copy paste the code when it's ready.

- Follow the steps for adding a new **publishable** library like defined in the readme, with name `core`.
- add a dummy component, story and test so we can fully run the pipeline for this new library
- Inside the main `tsconfig.base.json` add an alias for @opengeoweb/core but leave it commented out (so it can be enabled when core is moved). See for example like we did previously for the empty theme library:
![image](/uploads/3e76304eba127a9703b9299c34bd7703/image.png)",3
86211481,2021-04-29 11:12:30.898,FE: rename local-theme alias to theme,"When geoweb-core is moved, we should rename local-theme to theme. Find and replace `import { GWTheme } from '@opengeoweb/local-theme';` and remove the `local-` prefix in following files:

- .storybook/main.js
- libs/theme/package.json
- tsconfig.base.json
- remaining files in libs
- remaining files in apps",3
85943147,2021-04-26 09:38:50.311,Meeting: Refine US with PO,"The following User Stories need to be refined better with PO
- https://gitlab.com/opengeoweb/geoweb-assets/-/issues/983
- https://gitlab.com/opengeoweb/geoweb-assets/-/issues/969",2
113758125,2022-08-24 08:36:27.658,BE: check for editor should be done earlier,"When you are in editor mode of a TAF and someone else takes over that TAF and publishes it, if you try to save it your get the message that the status change is not allowed.

This is confusing. We should be showing the error message that the TAF has been taken over by someone else.",3
113749280,2022-08-24 06:31:56.783,FE: make TAF stories work again,All stories don't work now with the switch. Would be good to fix that so developers can quickly develop without the need of `nx serve`,3
113706966,2022-08-23 15:12:01.011,BE: use latest FE and fix TAF smoketest,"
in geoweb-serverless-backend:

- use latest release FE version
- The TAF smoketest could fail if a taf is locked by another user while trying to save. Make sure the smoketest checks if a TAF is unlocked before trying to edit.",2
113699931,2022-08-23 14:25:20.681,FE: create new release,,2
113698199,2022-08-23 14:06:36.228,BE: dev-branches should import dev UserPoolId,"Currently, UserPoolId to dev userpool is hardcoded in cloudformation.

Preferably, the id is retrieved based on the stack name `knmi-geoweb-backend-dev-user-pool`

The dev-userpool stack exports the ID but this is not yet imported in the dev-stacks. 

First step would be to research how to import outputs from stacks. Second step is to implement this for the dev-branches in the geoweb serverless backend",5
113688769,2022-08-23 11:53:41.146,FE: fix bbox for FOG preset,fix bbox,1
113677308,2022-08-23 08:23:32.214,FE: TAF switch button part 3,"- show an error on the TafPanel when the PATCH request failed
- Note that there is already an error for when the POST request fails
- can be tested in story http://localhost:4500/?path=/story/components-taf-module--taf-module-light-theme-with-error-on-action",2
113638091,2022-08-22 14:52:45.203,FE: fix taf issues pane thumbs up icon,"The thumbs up icon in the TAF issues pane should be bigger [as in design](https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/61f2bfb7f296e5b460ed7dde)

![image](/uploads/797fa86d9fb90008d6b080c502622f4c/image.png)",1
113612577,2022-08-22 08:02:19.857,FE: fix flaky taf test componentslookup,"There is one TAF unit test that fails sometimes, should be stable

https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2913715597

![image](/uploads/0a3940338d33507903640ab68bb088b6/image.png)",2
113608868,2022-08-22 07:15:11.564,FE: TAF add tooltip for refresh button,"- add tooltip to the refresh button, see design (https://app.zeplin.io/project/5ecf84a3c6ae1047a368f393/screen/62e25835359f7084c3e32f1b) (scroll down, it's on the last screen)",1
113605223,2022-08-22 06:04:06.700,Update serverless backend readme with local config,"Create a repo where we can store (local) config keys for geoweb knmi. 

- Add to readme of serverless backend instructions to run geoweb locally with the following config

config knmi:
```
{
  ""AUTH_LOGIN_URL"": ""https://geoweb-tst.auth.eu-west-1.amazoncognito.com/oauth2/authorize?client_id={client_id}&response_type=code&scope=email+openid&redirect_uri={app_url}/code&state={state}&code_challenge={code_challenge}&code_challenge_method=S256"",
  ""AUTH_LOGOUT_URL"": ""https://geoweb-tst.auth.eu-west-1.amazoncognito.com/logout?client_id={client_id}&logout_uri={app_url}/login"",
  ""AUTH_TOKEN_URL"": ""https://84q8po1iql-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra/auth/token"",
  ""AUTH_CLIENT_ID"": ""2ol63v0glufqj39r67slauv6uj"",
  ""INFRA_BASE_URL"": ""https://84q8po1iql-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/infra"",
  ""APP_URL"": ""http://localhost:5400"",
  ""SW_BASE_URL"": ""https://vko1z3liqc-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/spaceweather"",
  ""SIGMET_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""AIRMET_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""TAF_BASE_URL"": ""https://argl88v0da-vpce-026bc1761b17f4f69.execute-api.eu-west-1.amazonaws.com/aviation"",
  ""PRESET_BACKEND_URL"": ""https://gwpresetsbe.geoweb.dev.knmi.cloud"",
  ""INITIAL_PRESETS_FILENAME"": ""knmi.initialPresets.json"",
  ""SCREEN_PRESETS_FILENAME"": ""knmi.screenPresets.json"",
  ""LAYER_SELECT"": false,
  ""FEATURE_APP_TITLE"": ""KNMI GeoWeb"",
  ""FEATURE_FORCE_AUTHENTICATION"": true,
  ""FEATURE_MODULE_SPACE_WEATHER"": true,
  ""FEATURE_MODULE_TAF"": true,
  ""FEATURE_MODULE_SIGMET"": true,
  ""FEATURE_MODULE_AIRMET"": true,
  ""FEATURE_MENU_SATCOMP"": true,
  ""FEATURE_MENU_FEEDBACK"": true,
  ""FEATURE_MENU_INFO"": false,
  ""FEATURE_MENU_VERSION"": true
}

```",1
113512263,2022-08-19 07:58:53.167,BE: update HLD with PATCH call,"Update Confluence: https://app.diagrams.net/#G1J7nOT811x4Uz1ejjaY74V-jeKbJag63A


Verify that this page has been updated:
- https://confluence.knmi.nl/display/GW/Frontend+HLD",2
113509741,2022-08-19 07:08:23.261,FE: unified version fix linting,"I noticed in https://gitlab.com/opengeoweb/opengeoweb/-/merge_requests/1730/diffs#e914e8a23cd6a5a4647c3eca647780bdd83d2299_65_75 that the MR did not fail, while I'm console.logging. The linting job should fail if there's an error like using console.log",2
113461857,2022-08-18 11:30:40.066,FE: unified version make all config keys conditional,"Currently INITIAL_PRESETS_FILENAME and SCREEN_PRESETS_FILENAME are required, even though a fallback is provided in the code. We should make these conditional as well.


Make sure to remove the keys as well for the `config.json` fallback default values in `useConfig`.",3
113451440,2022-08-18 09:16:17.284,BE: TAF set conditional for update_item,"Check examples in lambda function for tafapi in lock and unlock 

Should add conditionals as update_item will create new item if given keys not found
Add conditionals to only update existing items",2
113449303,2022-08-18 08:46:48.304,FE: make geoweb app run without config.json,Make sure the app runs even without config.json,3
113338875,2022-08-16 11:31:07.188,BE: backend testing documentation,"Update documentation for presets-backend and serverless backend to test BE with FE branch

Serverless BE
- Has to be deployed to be able to test 
- Add yourself to the user pool if needed
- Check the logs of Deploy cloud formation job
- Find the url of the deployed branch there
- In your browser go to this url+/assets/config.json
- Copy the BE + auth urls to your local frontend config.json

Presets BE
* Make sure you are not on connect
* Checkout branch locally
* Make sure docker is installed and running
* Run command line in the root of the project:

cat <<EOF > .env
PRESETS_ENABLE_SSL=TRUE
PRESETS_BACKEND_PORT=4443
PRESETS_BACKEND_PORT_HTTP=80
EXTERNALADDRESS=https://localhost:4443/
OAUTH2_USERINFO=https://geoweb-tst.auth.eu-west-1.amazoncognito.com/oauth2/userInfo
VERSION=1.0.0
EOF

docker compose up -d --build

* In the web browser that you will use to test the app: go to address: https://localhost:4443/ and accept the certificate (this is not possible on connect). Keep this browser open.
* Copy   ""PRESET_BACKEND_URL"": ""https://localhost:4443/""  into your local config.json
* Go on connect
* Run your app with cognito authentication (same cognito as OAUTH2_USERINFO key that started the presets-be)
* Open the app in the same browser as where you accepted the certificate",3
113328898,2022-08-16 08:32:25.395,FE: unified version rename LAYER_SELECT to FEATURE_LAYER_SELECT,"Rename LAYER_SELECT to FEATURE_LAYER_SELECT to keep it consistent with the rest. Also make this change on fmi-aws-config repo.

PRESETS_BASE_URL"" and ""PRESETS_API_PATH should be prefixed with GITLAB\_ as well",3
113328135,2022-08-16 08:19:05.282,FE: Add Presets module to Frontend HDL,"Presets module and its calls should be added to the FrontEnd HDL document.
https://app.diagrams.net/#G10h7Bkjtv2wHEMgf-PqTzCs-SBwEo5NNZ

Upload the image to [confluence](https://confluence.knmi.nl/display/GW/Frontend+HLD).",2
113327010,2022-08-16 07:58:19.666,FE: unified version remove eslint disable rules,"These components have the following rule: `Menu`,`ReleaseNotes`, `UserMenu`
```
/* eslint-disable @typescript-eslint/explicit-function-return-type */
```

All should be removed",2
113278597,2022-08-15 08:47:13.094,Prepare tech meeting for drawing tools,See https://docs.google.com/presentation/d/1IRwnbtycZjcbtG6hSh7XCMmKggGeRmT3/edit?usp=sharing&ouid=108664741257531327255&rtpof=true&sd=true,3
113278078,2022-08-15 08:34:45.768,BE: geoweb-serverless BE should use geoweb docker image for deployment,geoweb-serverless BE should use unified geoweb docker image for deployment,3
113278024,2022-08-15 08:32:41.380,BE: make error message for user after takeover,"When saving a TAF and being taken over in the meantime, the user should get the message: `You are no longer the editor for this TAF.`",2
113277683,2022-08-15 08:25:43.183,FE: TAF show error message from backend to user,"When Cancel or Publish fails currently user only sees a generic error, but BE sends more info. Show this to the user.",2
113277220,2022-08-15 08:15:22.384,Adaguc: ask KDP team to create one file per time step for WOW data,Prefer that file will be overwritten,1
113277144,2022-08-15 08:14:00.729,Adaguc: deploy server for WOW data,,1
113277020,2022-08-15 08:10:57.497,BE: check if we can reach spaceweather beta version,Check and let know to metoffice,3
113276893,2022-08-15 08:08:50.624,BE: deploy the preset-be with v1.0.0,Create tag 1.0.0 & deploy (to acc),2
113276786,2022-08-15 08:06:58.994,Bug fix: TAF screen shows old TAFS as the upcoming TAFS,"First step: research where bug originates from: BE or FE? 

Next step: solve or create ticket to fix bug and make sure that BE or FE knows to solve it",3
113276577,2022-08-15 08:02:48.729,BE: Use opengeoweb/backend-services presets-backend containers in deploy-presets-backend deployment (instead of re-building them in our own pipeline),use from statement using the container from opengeoweb,2
113276480,2022-08-15 08:00:32.632,BE: add nginx container to opengeoweb presets-backend,"currently only flask container is made available, nginx container should be made available too",2
113276262,2022-08-15 07:55:00.028,FE: unified version remove KNMI app,"Do this when we are fully sure everything is working.

- remove knmi-geoweb and knmi-geoweb-e2e (there are nx commands to make this easy that automatically remove references in other files)
- update the depGraph.png
- remove commands from package.json
- remove/update gitlab pipeline jobs (there should be no reference to `knmi` in `.gitlab-ci.yml`)",2
113276170,2022-08-15 07:52:05.477,FE: unified version remove config.json,"* add config.json to .gitignore,
* add an example.config.json with default keys
* update readme with the instructions on how to create own config.json file",5
113276135,2022-08-15 07:51:03.629,BE: implement cleanup policy for container registry presets-backend,"The presets-backend container registry stores one container per branch that has ever existed. Solution: delete everything that is not a tag after a number of weeks

Registry: https://gitlab.com/opengeoweb/backend-services/presets-backend/container_registry/3005024",2
113276096,2022-08-15 07:50:14.813,FE: unified version upload docker image for release tag,"Upload new docker image to gitlab for geoweb for each release tag. Check in the pipeline jobs, there is already a docker image uploaded on each merge to master.",2
113276052,2022-08-15 07:48:34.821,FE: unified fix missing unit test coverage,"Knmi has currently 96% coverage, geoweb 90%. Make sure this is aligned again",2
113275984,2022-08-15 07:46:49.705,FE: unified version fix config load issue,"the geoweb app load the config.json file multiple times, should load 1 time",3
113275788,2022-08-15 07:41:28.202,BE: TAF: Status change should not be set to published before IWXXM is generated,"On publishing there are 4 steps taken

1. change status to 'published'
1. generate TAC to S3
1. generate IWXXM2.1 to S3
1. generate IWXXM3.0 to S3 the state should be changed to publish if only all those steps did not fail.

Solution: step 1 should become the last step after 2,3 and 4.

An explicit error message should warn that the publish is failed in case of failure.",5
113275777,2022-08-15 07:41:07.170,FE: fix config keys that loads json,"The following keys are known that they are not working. When logged in for KNMI it does not takes a custom json file defined in the following keys: 
```
""INITIAL_PRESETS_FILENAME"": ""knmi.initialPresets.json"",
""SCREEN_PRESETS_FILENAME"": ""knmi.screenPresets.json"",
```

Expected result, should work with `knmi.screenPresets.json`",3
113275680,2022-08-15 07:39:58.102,FE: unified version test and compare geoweb with knmi-geoweb,"Check and compare apps for differences, and create tickets if needed.",2
113275449,2022-08-15 07:35:21.643,FE: unified version create validations for the keys,"Create validations for all keys we currently have. First create a TS type where we can define all our current keys in config.json. Check the knmi-config for reference, as that holds all the keys. Keep some keys optional so we don't have to change other repos, and keep a bit of order in it (api keys together).  

For validation, keep it simple (string has length, or boolean is expected)

Later we can check to make all keys mandatory.",3
113275212,2022-08-15 07:33:00.873,FE: unified version copy all e2e tests to geoweb,Copy all e2e tests from knmi-geoweb to geoweb. Make sure they still work. At least same coverage,2
113274690,2022-08-15 07:26:32.121,FE: TAF show warning to other user after takeover,"When saving a TAF and being taken over in the meantime, show a warning on top of the TAF. This is probably already fixed by an error showing. 

Make sure the user will enter read-only mode for that specific TAF and will loose not-saved information.",2
113274503,2022-08-15 07:23:57.594,FE: TAF show dialog for concurrent user,Show dialog when taking over a TAF,2
113274339,2022-08-15 07:21:11.373,FE: TAF use avatar,Use the avatar at the switch button and locations,3
113274329,2022-08-15 07:20:27.650,BE: Deployment documentation presets backend,List of steps to create new deployment,3
113274324,2022-08-15 07:20:11.336,BE: Deployment documentation GeoWeb serverless backend,List of steps to create new deployment,3
113274298,2022-08-15 07:19:08.748,FE: TAF switch button part 2,"Connect the button the the BE.

- lock: `PATCH /taf` with `editor: ""username""`
- unlock: `PATCH /taf` with `editor: """"`

example body:
```
{
    creationDate: """",
    canbe: ['DRAFTED', 'DISCARDED', 'PUBLISHED'],
    editor: ""username"",
    taf: {
      uuid: '5f9583fjdf0f337925',
      location: 'EHAM',
      status: 'NEW',
      type: 'NORMAL',
      messageType: 'ORG',
      ...
    },
  },
```",3
113274167,2022-08-15 07:15:12.135,FE: create shared Avatar component,"Create an Avatar component in shared, which for now only shows the initials. Create a storybook example with snapshot. Reuse in the user menu.",2
113274137,2022-08-15 07:13:56.744,BE: Investigate on how to improve the geoweb-serverless-backend deployment,"**Goal**

* understand the current CI/CD pipeline
* investigate and propose alternative deployment ways

**Suggestions**

- There's a lot of repetition in the CFN template. By using a tool like [troposphere](https://github.com/cloudtools/troposphere) we could reduce the number of line and make it easier to maintain. Default values are specified only once. First step in the pipeline would be generating the CFN template from a Python script, followed by the usual linting and deployment. We would also get rid of the `sed` replacement in the current template.
- Investigate alternatives (like [stacker](https://stacker.readthedocs.io/en/latest/config.html) and [cdk](https://aws.amazon.com/cdk/)) for managing CFN templates.
- The end-goal could be to have completely separate deployments for frontend, Aviation, SpaceWeather, Cognito. To reach this goal we could take the following path:
   1. Extract monitoring (Grafana) and move to separate repository.
   1. Extract Cognito userpool generation (for tst, acc, prd) to the newly created [dev-cognito-userpool repository](https://gitlab.com/KNMI/geoweb/backend-services/dev-cognito-userpool) like has been done for dev.
   1. Create separate deployment repository for frontend and point to backend services.
   1. Create separate code repository and deployment repository for each backend services (Aviation, SpaceWeather), one at a time.
   1. Optional: create separate deployment repository for triggering deployment pipelines of all the components. In this repo dependencies are managed. Or could this just be the responsibility of the frontend deployment?

**To be discussed**

How do we manage dependencies and rollbacks? We currently have the possibility to deploy the complete stack from a previous tag. This could become more difficult.

How do we connect the different stacks? By exporting output values and importing those in another stack. This makes the importing stack dependent on the exporting stack, meaning the latter cannot be deleted without deleting the first. (We have to investigate if updates are problematic.) Or we use `aws cloudformation describe-stacks` inside CI/CD for looking up exported output values and pass those as parameters through the properties files created in .gitlab-ci.yml. The benefit is that stacks can be deleted independently.",5
113274035,2022-08-15 07:12:44.932,FE: Theme create Switch button in theme,"Create a Switch button we can reuse in theme. Add a snapshot, make sure styling is correct",2
113273776,2022-08-15 07:11:02.845,FE: TAF switch button part 1,"Add the switch button to TAF, and make sure toggles the edit mode. Should not be connected to the BE. Make sure the import TAC icons still only show in edit mode",5
113273602,2022-08-15 07:07:26.477,FE: refresh and let active TAF be untouched,"When having a TAF open and user refreshes, the data should be refetched from all BUT the current TAF.",3
113273491,2022-08-15 07:04:41.148,FE: refresh on demand button,"Show the button, when pressing the button new data should be fetched.",2
113273464,2022-08-15 07:03:18.909,FE: refresh on demand show date,Show date of last update,2
113137099,2022-08-11 14:05:27.291,BE: Dev-branches of deploy-presets-backend should use dev userpool,"Dev branches of deploy-presets-backend should use the communal dev userpool's URL for authorization, imported from the dev userpool CloudFormation stack.",2
113136721,2022-08-11 13:59:34.508,BE: dev-branches should use the general dev Cognito userpool,"Dev branches of geoweb-serverless-backend should use the communal Cognito userpool (exported by it's CloudFormation stack, see #2413) as a userpool by referencing the exported UserPool in the dev-userpool stack and attach their own userpoolclient (with callback-url etc) to that userpool. 
In the communal Cognito userpool, one smoketestuser should exist. In geoweb-serverless-backend, the test should re-use an existing smoketest user. 


The documentation needs to be updated as well


**NOTE** make sure nothing changes for TST & ACC & PRD",3
113136352,2022-08-11 13:51:49.935,BE: Cloudformation stack for dev user pool,"We should create a CloudFormation stack to deploy a Cognito userpool for all dev-stacks to use.

This userpool (and prbably it's URL) should be exported from the stack, so dev branches of geoweb-serverless-backend can use that to add their own userpoolclients (with shared user names and passwords).

So usernames should be added there and a smoketestuser too.

---
**How to test:**
* Repository that created the CloudFormation stack: https://gitlab.com/KNMI/geoweb/backend-services/dev-cognito-userpool 
* Merge this [MR](https://gitlab.com/KNMI/geoweb/geoweb-admin/cognito-user-manager/-/merge_requests/73) to add/remove users to dev userpool
* Name of cognito userpool: `geoweb-backend-dev-user-pool`
* smoketest user has been added to userpool
* Further testing in next ticket #2414",3
113134149,2022-08-11 13:04:46.931,FE: fix preset Save PUT request,"- open a custom preset
- make some changes
- try to save (not save AS)
- this gives an error

Probably because it sends wrong content-type?",2
113128907,2022-08-11 11:43:06.991,FE: test for mapPresetSaga fails sometimes,"see https://gitlab.com/opengeoweb/opengeoweb/-/jobs/2844234779

it fails on a millisecond, make sure the time is mocked in the test",1
113117067,2022-08-11 08:32:38.145,"BE: TAF Increase timeout of TAF lambda, currently 3 seconds",,1
113113062,2022-08-11 07:15:54.233,FE: layermanager add layer tooltip hover bug,"This tooltip is visible when the layermanager is default visible, check the story `http://localhost:4300/?path=/story/application-demo--presets-demo-on-map-dark-theme`, probably it's visible because `<AddLayersButton />` component has `shouldFocus` in `DescriptionRow` file. This is needed for the keyboard controls (I assume), but it's blocking the controls. 

![Screenshot_2022-08-11_at_09.15.05](/uploads/7194f7b9e58a8848b57fe594cc07de9e/Screenshot_2022-08-11_at_09.15.05.png)",2
113072288,2022-08-10 13:39:45.993,FE: Default workspace when logging in to GeoWeb,Description in https://gitlab.com/opengeoweb/geoweb-assets/-/issues/2146,2
112984400,2022-08-09 07:48:47.186,BE: Fix multiline import statement in python,"Multiline import statements are failing. 
Linting is passing but when the lamba is running it fails.",3
112947281,2022-08-08 14:03:45.883,BE: Split requirements.txt in requirements.txt/requirements-dev.txt,See https://gitlab.com/opengeoweb/backend-services/presets-backend/-/merge_requests/40 for Ernst's comment.,2
112938413,2022-08-08 11:30:07.132,FE: don't reset state after creating new preset,Don't reset the values the user just set when coming from a new preset,2
112928902,2022-08-08 09:11:55.157,BE: fix load errors,"Frontend is doing calls to the BE, and some are failing at times. This is happening for all calls. In the network panel the status is cancelled. Happens on both TST and ACC",3
112928887,2022-08-08 09:11:35.446,FE: show spinner when saving as or deleting a preset takes a long time,"When user tries to Save As or Delete a preset, and BE takes a long time, the user should be informed. 

In the confirm dialog, the Save/Delete button should be disabled and show a spinner somewhere, so the user knows that the request is still being processed and doesn't click 10 more times on the Save button.

Check how it's done in sigmet-airmet.",3
112927212,2022-08-08 08:52:46.965,FE: show (modified) when existing preset has changes,"Existing map preset:

* when the map preset is an existing preset, the name of the map preset will be shown in regular (non italic) font in the map preset menu
* when the user changes the content (e.g. add new datalayer) or properties of the content in the map preset, the name of the map preset will be shown in italic font with `(modified)` behind its name in the map preset menu

New preset should still show '(not saved)', existing presets should show '(modified)'

![image](/uploads/960cba9fd5b0bfa0ab92a233bd48b30c/image.png)",2
112926589,2022-08-08 08:43:23.065,FE: not show preset id in error message,"The error message when selecting a preset fails, contains the preset id.

for the user, the id is not useful. 

Change message to: ' `Preset could not be loaded: Select a different one or try again.`


Old message:
![image](/uploads/d14816ada153340d30e0f4b4a48933b7/image.png)",1
112926232,2022-08-08 08:37:15.401,FE: add retry option to preset list error,"When the list call fails, the user should be able to reload the list.

Add retry option to preset list error, should say ""Try again"" and when clicked it does another list call.",2
112919677,2022-08-08 07:06:35.448,FE: change activeMapId to mapId in ui actions,Change activeMapId to mapId in the actions of ui to make them more consistent and easier reusable in other places,2
112847995,2022-08-05 13:19:18.495,BE: Add import/formatting checks to pipeline for presets-backend,In #2356 instructions were added for formatting and imports organization. We also need to enforce this by adding checks in the CI pipeline.,2
112837653,2022-08-05 09:26:43.450,FE: map pin location is set while not being visible or disabled,"In the core [story](http://localhost:5000/?path=/story/components-mapview-mapviewconnect--toggle-map-pin-action) try to do the following action:

1. click on the map somewhere
1. hide the pin
1. click on the map somewhere with mouse (pin is hidden correctly)
1. make the pin visible

At this point you have the pin on the place that you clicked in the point 2). This is strange behavior because you loose the position that you chose correctly when the pin was visible.

Same problem with the disabled map pin. In story http://localhost:5001/?path=/story/components-mapview-mapviewconnect--set-and-disable-map-pin-action

1. the pin is disabled, but when you click on the map the setMapPinLocation action still gets fired

- The problem is the MapPinLocation is fired always, even if it's not visible or disabled. Should only fire when it's enabled and visible.
- would be nice to bundle all MapPin stories in 1 file, to already clean that folder a bit up.",2
112836145,2022-08-05 08:57:06.830,FE: store legend visible on MapPreset,Save legend on MapPreset,3
112776372,2022-08-04 09:33:25.753,FE: add missing map preset test of showTimeSlider in saga,"In the mappreset saga this part:
```
   if (showTimeSlider !== undefined) {
        yield put(
          mapActions.toggleTimeSliderIsVisible({
            mapId,
            isTimeSliderVisible: showTimeSlider,
          }),
        );
      }
```
does not have a test, should be added",1
112767856,2022-08-04 07:17:33.325,FE: fix reset of MapPreset props displayMapPin,Make sure to save this prop if it belongs to a map,2
112662763,2022-08-02 12:41:12.100,FE: add shouldShowZoomControls to store from MapPreset to save it but not change it,"Add this prop to the store so we can save it, but not control it (yet)",2
112659234,2022-08-02 11:32:28.382,FE: fix styling for icons in buttons,"Buttons should have 8px margin between icon and text, and have size 24px.

in buttonStyle:

```
// icon styling
  '& .MuiButton-startIcon': {
    marginRight: '8px',
    '& .MuiSvgIcon-root': {
      fontSize: '24px',
    },
  },
```

this will make sure the startIcon in Buttons always looks the same. 

should also be fixed for `ToggleButton` and `CustomToggleButton`

NOTE: `CustomToggleButton.stories.tsx` now has a custom fix to show some space between icon and text, this should be removed and solved with styling.",2
112642103,2022-08-02 07:28:09.122,Deploy new release to ACC: Th 11 AUG 11h,"- make new FE release
- make new presets-backend release if needed
- use both in BE
- deploy to ACC",2
112642097,2022-08-02 07:28:00.365,FE: remove icons package from npmjs (after release),"Once a new version of @opengeoweb/theme is published to npm that contains the icons, the old icons package should be removed:
* https://www.npmjs.com/package/@opengeoweb/icons
* https://opengeoweb.gitlab.io/opengeoweb/docs/icons/",1
112600813,2022-08-01 12:49:27.319,FE: fix mapPreset timeStep fix template,"When `setTimestep` is given `toggleTimestepAuto` should be set to false. This is for all presets except one, so for consistency also set this to false.",1
112587390,2022-08-01 09:28:05.746,BE: Add HARM vs SFC Obs preset to KNMI map presets,"Goal of this issue is to add the `HARM vs SFC Obs` that currently is present in the openGeoWeb preset menu (only) to the map preset menu in the layer manager.

Note that the observations and Harmonie model output needs to come from the operational KNMI services (currently on openGeoWeb we're using the external services).",3
112586630,2022-08-01 09:17:05.934,FE: Fix layer manager tooltips,Tooltip in the Layer Manager are too verbose and sometimes confusing.,2
112585868,2022-08-01 09:03:59.557,"BE: on publishing a TAF, the TAF should get unlocked",,2
112584973,2022-08-01 08:50:07.496,BE: when saving/publishing a TAF user should be the editor,Only the user who is the editor can change a TAF. This should be checked by the BE and an error message should be returned if that isn't the case.,3
112584628,2022-08-01 08:45:08.866,BE: API call to lock/unlock a TAF for editing,"The API call always sets the editor for locking, whether it is assigned or not. Same call can then be used for taking over an editor role.
There should also be a call (or call argument) to unlock the TAF.",2
112583982,2022-08-01 08:34:36.850,BE: return editor name for TAF in /taflist call,"/taflist should return an editor username if a TAF is locked, if it is not locked the editor username should be empty.
Add the needed field(s) to the database.",5
112583363,2022-08-01 08:22:04.669,"Meeting about ""how to go to GeoWeb Unified version""","Let's discuss about this [US](https://gitlab.com/opengeoweb/geoweb-assets/-/issues/1786) and what we need to go forward with it.

If needed we can use the Tech Thursday to discuss with intl. partner about the outcome of this discussion.",2
112582476,2022-08-01 08:07:59.104,Preset BE in SMP and HLD in Confluence,"HLD for the [Preset BE](https://drive.google.com/file/d/1YynPlkAY9pesJV4liaS2TgbozLPM6BXU/view?usp=sharing)

Add in the SMP and in confluence architecture.",1
112582238,2022-08-01 08:03:46.101,BE: fix refreshing of expired token for presets-backend,"If the Cognito token expires (after 1 hour norm
ally), presets-backend calls fail. Application has to be refreshed for the token to be refreshed.
An easy way to test/fix this is to generate a geoweb-serverless-backend branch with a Cognito which expires tokens within a few minutes, so you don't have to wait long for expiration. Make serverless-backend and presets-backend branches with the same branch name.

Could BE, could be FE problem.",3
112581686,2022-08-01 07:54:58.277,BE: Project-specific Python formatting rules in repo,It would be interesting to push project-specific settings to presets-backend repo to make sure linting standard is the same as pipeline on autosave.,2
112578398,2022-08-01 06:58:23.087,FE: fix MapPreset props replace setTimestep by animationPayload,"Currently you can set the duration of animation via `setTimestep` and `animationPayload`. This is giving issues because what to chose? Better to keep one, suggesting `animationPayload` because this can hold more info like for example interval.
Needs to be changed in geoweb and fmi-aws-config.",3
112577983,2022-08-01 06:49:08.252,FE: icons move to theme,"Because of circular dependencies this is the only option. 
- move the lib to theme
- remove the icons lib
- update Readme with our definition of the theme lib
- how to unpublish to npm",3
112574286,2022-08-01 05:06:44.105,FE: Icons remove duplicates,"The Add button is used 3 times, choose either the first or last variant and remove the rest (test branch temptestbranch). Make a default Props object (with a default width and height which we can reuse for all icons later), and make sure you can overwrite these props. 

![Screenshot_2022-08-01_at_07.07.44](/uploads/f546eda6fe2e669aa24c5c4a90ab70ce/Screenshot_2022-08-01_at_07.07.44.png)",3
112481418,2022-07-29 08:01:28.145,FE: sort presets,Map presets in the map preset menu will be sorted 1. New preset. 2 system map presets (alphabetically) followed by 3. user map presets (alphabetically),2
112475341,2022-07-29 07:16:29.809,FE: error message save as not displayed,"_Note_: messed something up in first (closed) MR, so discarded that one. Only need to look at open MR!

The new error messages returned by the presets BE is not shown in the FE.

To replicate:
- Try to SaveAs a preset with the exact same name as an existing one. 
- It still says ""Request failed with status code 400""

Two thoughts:
- FE: Since the BE does return the error message in the response, we could find it and use it
- BE: Is the error returned differently than what we have for the other modules? Could we fix it here?",2
112339109,2022-07-28 04:35:47.027,FE: app crashes when selecting custom preset in screenmanager,"To reproduce:
- create custom preset
- split screen
- select the layermanager of your new screen, and select your preset
- the app crashes",2
112300876,2022-07-27 12:23:48.489,FE: put the storybook example of icons inside a grid,"Would be nice to align them inside a grid, so we also have an easier diff change when the snapshot changes

![Screenshot_2022-07-27_at_14.24.14](/uploads/a9609dcc809f290dd2b5d9567c76b840/Screenshot_2022-07-27_at_14.24.14.png)",2
112296185,2022-07-27 11:21:18.915,BE: Replace missing satellite layers in presets,"Layers in preset are not available anymore, since cinesat is stopped. Preset can be removed.

After stopping cinesat the following presets have some layers that are not working anymore:

* Satellite
* Radar and Satellite
* SIGMET/AIRMET

The none working satellite layers in these presets can be replaced:

**Satellite** (add updated single map preset only to map preset menu in layermanager and remove from hamburger menu) missing `HRV RGB` replace by Satcom HRV comb RGB

**Radar and Satellite**

??? (currently saying `no service available`) replace by Satcomp RSS HRV comb RGB

**SIGMET/AIRMET** (add updated single map preset only to map preset menu in layermanager and remove from hamburger menu)

missing `HRV RGB` replace by Satcomp HRV comb RGB

missing `vulkaanas` replace by Satcomp Ash RGB

Actions in BE:
* Update presets",2
