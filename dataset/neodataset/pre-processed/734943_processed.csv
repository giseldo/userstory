,issuekey,storypoints,context
0,33999404,2,remove support disk configuration source in introduce domain config source configuration flag allow user choose domain source use disk api in plan remove support old disk configuration source the purpose issue remove domain source code hard remove mr extract follow issue omnibus need update remove flag if user use disk config source gradually rid old code support
1,33344838,1,tech evaluation object storage presigne url this follow tech evaluation thank input slack we need use pre sign url gitlab way need credential pages control rails exclusively link encoded rails control expiry date if serve i think need likely define maximum archive size support likely filter relevant file folder hold memory i assume likely configure file archive archive cache allow configure optimise cache hit ratio likely allow use ton memory need i likely break support content range serve file i think cheaply possible gitlab workhorse openarchive support local remote archive performance optimise http request badly align likely need improve copy pasting great performance start discussion comment oh i think object storage implementation serve zip file disc i simple idea alternative poc we maybe slightly modify page api then return api page specific file proxy user later add cache alternatively artifact zip archive use current zip reading code need cache file i think add object storage specific code page good idea we workhorse use api it slow simpli diagram proposal sequencediagram participant u user participant p gitlab page participant g gitlab workhorse rail participant os object storage get internal source type zip path presignedurl loop zipartifact get presignedurl file func reader end proposal in poc hardcode return value internal page reduce scope i use minio support gdk i shamelessly steal slightly modify zipartifact package workhorse to address source type zip page serve regardless path pre sign url disk path outcomes we parent track future effort rail allow deploy pages archive on deploy size store disk object storage depend feature enable track update internal page return path json source type zip path disk path path page domain project page go extract resolvepath logic disk serve package share add package zip zip reader add zip serve pages allow serve disk pre sign url object storage implement zip reader cache mechanism add metric zip serve testing i hit i think valuable work issue
2,32478519,1,add metric disk serve as work need add metric measure loading time serve disk file size time take serve this visibility serve file allow compare serve time implement object storage
3,31331442,1,fix datum race gitlab source cache package the follow discussion address start discussion comment here race deep inside package use global variable test alter retrievaltimeout goroutine previous run this require extra effort fix i think add race detector warning data race write goroutine nolith gitlab page internal source gitlab cache local src testing previous read goroutine nolith gitlab page internal source gitlab cache nolith gitlab page internal source gitlab cache goroutine running create local src testing nolith gitlab page internal source gitlab cache local src testing goroutine running create nolith gitlab page internal source gitlab cache local src sync nolith gitlab page internal source gitlab cache nolith gitlab page internal source gitlab cache nolith gitlab page internal source gitlab cache nolith gitlab page internal source gitlab cache nolith gitlab page internal source gitlab cache local src testing
4,31320489,1,tech evaluation serve page object storage from the idea create proof concept page able serve content object storage this hopefully help identify unknown enable functionality will use gitlab object storage gdk config explore possible solution result what discover add specific code handle object aws gcs scalable hard maintain implement diagram super slow rails workhorse validate metadata multiple time efficient want random access file cache we explore presigne url
5,29164214,1,content length header provide content encoding gitlab page support serve statically compress file but look like response header miss content length header response header include content encoding gzip
6,29009434,1,tech evaluation support hst gitlab pages problem solve we need research technical implementation detail solve proposal spend day assess sort capability breakdown issue small component large mr some user want enforce access web content https certificate this http strict transport security hsts policy currently support enable gitlab pages site
7,27985016,2,gitlab pages depend availability gitlab api if gitlab api available gitlab pages currently unavailable clear cache case api lookup problem if clear cache case gitlab pages independent wo produce spike error like the follow discussion address start discussion comment should consider replace entry new receive error solve intermediate error processing lookup i consider today happen store lookup success request refresh receive error like gitlab it help catch mechanism short live error gitlab api try use success request long long interval this reduce pages dependence api super stable anticipate upstream api flaky extent or maybe well case use current lookup extend lease lookup allow refresh golang nil error nil note i fine follow mr stability improvement
8,27741902,2,make gitlab client timeout jtw token expiry configurable the follow discussion address start discussion comment be timeout small can large configurable
9,26998252,1,provide way track measure api call we need way track request gitlab config source internal api
10,26188901,4,xssi gitlab pages hackerone report ngalog assign security workflow issue summary since implement access control private page page limit authorized user i find way steal content js file victim site scripting inclusion technique certain condition step reproduce use gitlab ci cd build page limit access project member in gitlab page folder upload js file like then victim login gitlab as attacker domain control prepare html file victim visit page script script then pop contain js secret gitlab page impact xssi steal user gitlab page js file content example give what current bug behavior do block invalid refer what expect correct behavior should able allow attacker carry xssi attacker relevant log screenshot output check impact xssi attachment warning attachments receive hackerone exercise caution
12,26044218,2,secret pass command line pass pages secret deprecate issue issue deprecation warn pages log disallow passing secret breaking change implement major release gitlab
13,21200693,1,default json logging we move json default configure log format gitlab pages omnibus release would like source install default change
14,20643279,2,convert variable gorilla proxyheaders we temporary save flag context variable pass lot call we use instead solution we remove flag step x merge log error flag match x test bed reverse proxy x completely remove flag context detail summary old the follow discussion address start discussion comment i know use imperative style middleware return true false indicate end gitlab page i wonder avoid case instead use style instead one approach middleware type servehttp method member in case currently return false instead r return otherwise serve redirect return we use pattern workhorse serve wdyt this refactoring issue i think gitlab page codebase easy understand use party implementation way one example start serveproxy route
17,16202508,2,custom error page serve namespace domain summary serve exist step reproduce create gitlab pages website go expect serve actual default gitlab page serve serve custom domain useful link public repository minimal complete verifiable example non existent gitlab page page serve relevant documentation
18,13689763,5,load domain datum api instead traverse filesystem we see number bug stale value store stale directory mess domain load i think sense switch gitlab pages load datum api we support access control ce add api endpoint serve project page page fetch cache config exist
19,2803186,1,support hst gitlab pages problem solve some user want enforce access web content https certificate this http strict transport security hsts policy currently support enable gitlab pages site proposal by allow enable custom configuration policy associate pages site possible triage serverless please do not remove this section this page contain information relate upcoming product feature functionality it important note information present informational purpose rely information purchase planning purpose just like project item mention page subject change delay development release timing product feature functionality remain sole discretion gitlab triage serverless please do not remove this section
20,2574075,4,support single page application route request problem solve when route request gitlab pages default request render error permit seo support spa gitlab pages solution route request gitpages implement route single page app checkbox page settings enable spa serve accompany file work ensure existing file serve try serve update closing issue favor we aim enable spa new
21,118056437,2,follow add auth cookie session timeout flag in auth constructor use option struct the follow discussion address start discussion nit directly relate change constructor argument probably worth extract option struct
22,117942630,3,feature flag cause failure staging summary during rollout feature flag gitlab page qa test staging start fail after investigation find application setting different rail node cache create sidekiq nodes cache invalidated since hash application setting cache key sidekiq job find cache key invalide relate possible fix json table item option description instead application setting hash cache key insert hash cache value validate read cache this way app setting cache key invalidated sidekiq nod con validate cache manually base cache value option description instead application setting hash cache key layer cache the main cache key save app setting hash key payload con read redi find cache value
23,117645763,5,support hst gitlab pages domain basis problem solve some user want enforce access web content https certificate this http strict transport security hsts policy currently support enable gitlab pages site solution allow user enable hst pages
24,115192449,3,session timeout minute summary we use gitlab page internal website hosting user experience annoying session timeout short lifetime gitlab page cookie minute as example single page web app load asset image session timeout hard refresh browser necessary the authsessionmaxage constant hardcode internal auth authsessionmaxage minute it introduce so question why timeout set exactly minute be reason standard if specific reason possible increase value or possible value configurable wdyt if desire happy support organization contribution example project if possible create example project exhibit problematic behavior link bug report if old version gitlab determine bug fix recent version what current bug behavior there session timeout minute what expect correct behavior the duration session timeout high configure goal make timeout configurable x add new flag pages auth cookie session timeout default value m x add flag omnibus sample mr x add flag helm chart sample mr x update admin documentation sample mr
25,115128713,3,gcs range request fail please read note please check issue upgrade before open new issue sure search keyword issue include closed one verify issue submit duplicate summary in recently run incident small number pages host fail error dig find result internal error range request gcs fail bad request this behavior recent start sepetmeber judge graph gcs kibana log provide info error need consider log response body response do not change
26,111236649,1,update documentation state redirect limit configurable base work want update guide let user know pages redirect limit configurable
27,110795348,1,flaky testdomainresolvererror race i see increase race test failure testdomainresolvererror recently i think worth investigate bit job fail
28,110261083,1,move gitlab pages documentation menu sidebar level summary gitlab pages contribution documentation recently move docs site i think deserve bit discoverable easy access for i propose contribute submenu img img
29,109935782,1,remove doc development favor please read note please check issue upgrade before open new issue sure search keyword issue include closed one verify issue submit duplicate summary step reproduce describe reproduce issue important please use ordered list example project if possible create example project exhibit problematic behavior link bug report if old version gitlab determine bug fix recent version what current bug behavior describe actually happen what expect correct behavior describe instead relevant log screenshot paste relevant log use code block format console output log code tough read output check if report bug write this bug happen possible fix if link line code responsible problem do not change
30,108886739,3,spike create gitlab page router goal try improve route handle gitlab page expect outcome an example organize gitlab page route plan action small step
31,108336188,1,investigate configure bundle ci disallow change this action determine project use bundle bundle install ci per advisory use frozen deployment option defense depth mitigate supply chain attack this project need use frozen deployment option more background see use bundler mode ci deploy bundler team recommend guarantee application silently switch version create exploit note deployment option install gem vendor want so frozen usually small change note the flag deprecate rely remember bundler invocation bundler long future version instead use bundle config set frozen true stop flag
32,107117140,1,add early return test internal the follow discussion address start discussion i add golang redirect return handler test handler but let follow issue this nice improvement thumb
33,106881635,1,infer artifact server internalgitlabserverfromflag set explicitly summary we lot config option pointing gitlab server we use different reason get domain information redirect authentication fetch oauth token proxye artifact in simple case possible infer single url note url work internal network oauth token gitlab domain information oauth redirect redirect user url so parameter gitlab server gitlab internal server and rest infer right artifact server set config i suggest infer internalgitlabserverfromflags set optional mark artifact server deprecate remove major release implementation detail golang func artifactsserverfromflags string artifactsserver return artifactsserver return internalgitlabserverfromflag
34,106318294,2,tls ciphers break fips mode summary when pages run fips mode cipher work step reproduce follow step it list cipher work fips mode what current bug behavior all cipher mention work pages run gdk work pages host fips enable rhel server these tls cipher by default curl connection go connection explicitly specify max detail summary log pages run gdk explicit tls version specify sh curl host ecdhe rsa try connect port alpn offer alpn offer cipher selection ecdhe rsa successfully set certificate verify location cafile ssl capath out tls handshake client hello in tls handshake server hello in tls handshake unknown in tls handshake certificate in tls handshake cert verify in tls handshake finished out tls handshake finished ssl connection aead alpn server accept use server certificate subject c in st mh l mumbai o gitlab ou create cn emailaddress vtak start date apr gmt expire date apr gmt issuer c in st mh l mumbai o gitlab ou create cn emailaddress vtak ssl certificate verify result self sign certificate continue use server support multiplexing connection state change confirm copy datum stream buffer connection buffer upgrade use stream id easy handle get host user agent accept connection state change cache control max content type text html charset etag expire fri apr utc modify tue mar gmt vary origin content length date fri apr gmt log pages run fips rhel curl log sh curl host ecdhe ecdsa max try connect port alpn offer alpn offer cipher selection ecdhe ecdsa successfully set certificate verify location cafile ssl capath out tls handshake client hello ssl routine alert handshake failure closing connection curl ssl routine alert handshake failure pages server log json tls handshake error tls cipher suite support client these tls cipher curl log sh curl host cipher try set connect port alpn offer alpn offer tls cipher selection successfully set certificate verify location cafile ssl certs capath ssl certs out tls handshake client hello in tls alert protocol version ssl routine alert protocol version closing connection curl ssl routine alert protocol version page server log json tls handshake error tls client offer unsupported version what expect correct behavior the html serve respect tls version cipher comment i think tls cipher ecdhe rsa ecdhe ecdsa support fips mode reason sh openssl cipher grep run rhel fips machine give result openssl cipher grep run rhel fips machine give result i think tls support fips mode pages server log tls client offer unsupported version refer tls see however cipher mention see available fips rhel openssl sh openssl cipher run rhel fips machine kx au enc mac aead kx au enc mac aead kx au enc mac aead available list openssl version details local mac libressl gdk ubuntu openssl mar fips openssl fips mar if mac want spin openssl instal install separate openssl mac the default openssl instal mac tls cipher available reason note while test i generate certificate page domain custom domain do not change
35,106238762,2,revamp gitlab page development doc please read note please check issue upgrade before open new issue sure search keyword issue include closed one verify issue submit duplicate summary while set gitlab page environment i get confuse information doc it confusing duplicate information i propose information gitlab page development place single source of truth ssot for i revamp gitlab page doc require information start gitlab page develop environment mr if mr approve i open mr gdk repository point gdk doc howto gitlab page doc
36,106045796,2,arbitrary protocol redirection please read note please check issue upgrade before open new issue sure search keyword issue include closed one verify issue submit duplicate summary summarize bug encounter concisely gitlab page redirect arbitrary protocol authentication flow step reproduce describe reproduce issue important please use ordered list consider following url it login redirect redirect user mail client this potentially mobile device exfiltrate authentication token custom url handler example project if possible create example project exhibit problematic behavior link bug report if old version gitlab determine bug fix recent version what current bug behavior describe actually happen redirect arbitrary protocol possible what expect correct behavior redirect possible url describe instead relevant log screenshot paste relevant log use code block format console output log code tough read output check if report bug write this bug happen possible fix if link line code responsible problem do not change
37,105901313,3,unable download large file summary if try download large file connection close this probably regression recent security fix step reproduce try download large file slow connection try rate limit connection wget rate work reproduce issue this affect if try download mention download require connection close download finish todo x change default minute x backport version backporte security fix x parameter configurable chart omnibus chart omnibus x log x remove hot fix
38,102683500,2,remove rate limit feature flag summary we roll rate limit gitlab page remove feature flag guard so need remove relevant feature flag remove enforce flag test clean production mention feature flag file grep repository remove mention feature flag
39,102495890,5,tls security gitlab pages metric endpoint refer gitlab component report metric prometheus start pprof listener aid live profiling either open listen run gitlab production inventory endpoint report prometheus determine endpoint tls secure secure unsecured endpoint page
40,101609858,5,intermittent domain exist summary mention see intermittent visit today show domain exist error pop frequently host the issue distribute multiple pod curious url involve exist summarize bug encounter concisely step reproduce describe reproduce issue important please use ordered list example project if possible create example project exhibit problematic behavior link bug report if old version gitlab determine bug fix recent version what current bug behavior describe actually happen what expect correct behavior describe instead relevant log screenshot paste relevant log use code block format console output log code tough read output check if report bug write this bug happen possible fix if link line code responsible problem do not change page
41,100941602,4,feat server shutdown timeout configurable the follow discussion address x start discussion todo timeout configurable proposal add new config flag server shutdown timeout type time duration x add pages server x add omnibus config example x add gitlab charts example x document admin docs example
42,99072743,3,include correlation id remote ip sentry tag summary while investigate hard correlate request sentry error include thing like correlation id remote ip have tag preferably aid greatly track problem
43,99052899,1,refactor revert archive zip long support summary due bug introduce forked version archive zip package this bug fix eventually revert archive zip place support drop do not change page
44,98258008,4,allow customize artifact path public gitlab pages reason currently gitlab pages publish build file folder name public inside project root except minor framework require change default behaviour framework user for example use nuxt astro use dist eleventy use site etc mdash common fact public folder root directory slightly different use it store static public file need build process this mean order deploy site page user need configure build path need change file original public folder live so default behaviour pages user need it conflict default behaviour framework this cause confusion clearly document the user centric way approach refactor gitlab pages obtain artifact folder file use specify proposal the initial idea the easy way drop requirement entirely following if folder artifact use page root if multiple folder educate guessing use quote original mr in case contain folder check presence follow folder these output folder generate popular frontend framework order popularity relate framework public backwards compatibility public previous gitlab behaviour hugo gatsby svelte build react dist vue angular astro vite site eleventy jekyll the problem approach change gitlab pages behavior exist page if previously upload file inside page job public directory start expose time change come effect although unlikely user upload artifact page job want expose case exclude follow principle surprise require user opt behaviour like the well idea let introduce new property pipeline one specific page job say publish yaml page script publish dir so new publish property semantic meaning this folder i want publish in background thing it behave single entry page need single root directory sense allow dir pages the user allow add classic artifact property want publish artifact repo ignore page server it cause gitlab pages server treat folder page root i guess good implementation api i open suggestion now publish property page job definition legacy behaviour without publish property pages expose public folder no surprise user explicitly enable new behaviour
45,96169536,1,enable domain base rate limiting choose rate limit base result enable rate limiting remove feature flag self host version
46,96169359,1,enable domain base rate limiting test mode enable rate limiting introduce test report request reject actually reject
47,96079199,2,try build gitlab pages fips compliant library see reference
48,95676479,1,wildcard redirect break let encrypt integration from the let encrypt automatic integration gitlab page work wildcard redirect redirect file page this happen check project file handle redirect acme middleware redirect gitlab i way fix stop redirect know acme file remove domain r check completely this originally allow user manually implement integration let encrypt people integration in api response domain add true replace domain r domain redirectforacmechallenge in api response return actually acme challenge like path know acme challenge somehte value somevalue currently rely main gitlab instance public reachable let encrypt redirect if option rid requirement however option slow let encrypt integration update domain config cache actually i favor option break exist user people use redirect and slow let encrypt integraiton
49,95409156,1,replace getcompressedpagefromlistener getpagefromlistenerwithcookie getproxiedpagefromlistener getpagefromlistenerwithheader in introduce getpagefromlistenerwithheader now replace getcompressedpagefromlistener getpagefromlistenerwithcookie getproxiedpagefromlistener they similar differ header page
50,95406544,1,make internal lru metric optional summary currently make metric parameter require so need require rate limiter if parameter optional easy test need thing like want test metric specifically ratelimiter new interface clean so i suggest allow nil metric or use functional option convert metric ratelimiter new functional option this low priority nice refactoring do not change page
51,93685391,3,allow configure ip rate limit omnibus cng follow add flag support omnibus mr add flag cng mr add documentation admin guide mr
52,93685350,3,add rate limiting domain add domain rate limiting add quickly mr enable source ip environment mr follow
53,93685291,3,enable rate limit source ip drop request follow add configuration flag pages integrate ratelimit package add acceptance test the flag disable rate limiter default need enable environment manually that mean mr staging production follow approach describe deploy code start collect metric enable understand impact functionality pre prod environment block prod block create dashboard grafana kibana
54,93685212,3,gitlab pages source ip rate limiting follow add ratelimit package support source ip rate limit add middleware add metric release note gitlab pages popular when user try access page time lead outage in release gitlab introduce rate limit source ip this pages host stable for user self host gitlab instance limit number concurrent requester
55,93685144,1,extract lru cache package reuse follow
56,92972812,1,enable default we enable default feature validate long time
57,92972789,1,remove feature flag enable default feature merge
58,92897197,3,investigate test sentry integration summary seem like pages report error sentry we ignore error initialize error tracker blindly assume work fact there way deploy local instance sentry testing purpose integrate gdk consider implement sort catch error reporting verify dsn set correct
59,92242264,2,replace defer cleanup test at split mr unit test acceptance test but small chunk great easy review the follow discussion address start discussion comment suggestion think use cleanup extract testhelper diff git diff code diff internal auth b internal auth index internal auth b internal auth import func testing t internalserver string publicserver string auth func testing t bool require true auth r source newmocksource res result result defer re body close testhelper res body require result code require result diff internal testhelper b internal testhelper index internal testhelper b internal testhelper package testhelper import fmt io mime func testing t path string string return fmt wd path close close like response body testing func testing t c io close helper require close getwd return current work directory func testing t string helper wdyt
60,89642676,2,disable jailing mechanism default release note we disable jailing mechanism gitlab pages default the main reason user complain cause lot problem upgrade it lose relevance stop serve directly disk start you enable jail to once it merged disable break in case reach feedback issue background start gitlab jailing chroot mechanism disable default if api base configuration new zip storage storage need if run problem open new issue enable jail set environment variable edit gitlab set environment variable true gitlab pages ruby true disable jail hopefully fix bunch issue relate dns resolution run pages inside docker container ease transition new pages architecture per suggestion add daemon enable jail flag pages available source installation for omnibus installation enable set follow environment variable gitlab file rb true
61,89577791,1,internal api access drop url path component i gitlab ce docker image run gitlab pages separate server my setup use disk base configuration page accessible i true set point gitlab instance prepare upgrade test setup i run issue contact gitlab server api this cause fact gitlab instance host url like on i following gitlab pages log console log gitlab gitlab page current gitlab internal api connect internal pages api get dial tcp lookup dial udp connect assign request connect note absence path component url after i copy directory directly change console log gitlab gitlab page current gitlab internal api connect internal pages api http status connect for gitlab pages log entry i following log gitlab server console log gitlab nginx get internal page status confirm path component ignore i try set difference despite i able access page so far good thinking however i add gitlab configuration i http status error page sob see require access internal api i loose gitlab pages functionality i upgrade worried
62,88716490,2,add flag disable acme challenge currently pages depend server enable support acme challenge middleware this mean enable default api default we flag allow user disable middleware need config gitlab server acmemiddleware acme config gitlab server proposal add acme middleware flag internal config add omnibus default nil
63,88715846,1,use internal gitlab server acme middleware auth package acme middleware auth package talk gitlab server currently use value server however cause issue network local access we use value config gitlab internalserver instead use gitlab server
64,87172523,3,refactor acceptance test use gitlab api stub as remove support disc source configuration need sure acceptance test run api most current test use disk source effort likely mr
65,86252215,1,remove use legacy storage pages decide remove unnecessary flag use legacy storage pages pages sync the logic handle omnibus instead
66,86163535,3,add permissions policy interest header pages site host background this issue gitlab pages instead gitlab proposal begin send permissions policy interest header default pages site for scope change pages site host self manage pages why floc worrying privacy concern github pages recently block floc additional info github enable new header non custom site page site custom domain impact i exactly sure decision i think send header default page site convincing reason technical proposal add permissions policy interest config customheaders startup add boolean flag floc header permission policy header true attach header add option omnibus update admin doc
67,85999746,1,handle multiple error config validation the follow discussion address start discussion comment this good chance use non fatal logging return error end this way multple problem config report user understand work need have fix config problem time work i maintainer i feel confident recommend add party dependency maybe commit easily revert decide path
68,84834773,3,remove chroot logic we remove chroot jail fully rollout zip this remove remove
69,81597674,1,reduce cyclomatic complexity appmain job fail
70,80527421,1,make mutex type gitlab value receiver the follow discussion address start discussion there need mutexe pointer i wonder pointer
71,78475986,2,allow disable local disk type access since pages run fully remote type access allow disable disk access completely maybe simple way achieve specify disk false switch specify array instead superseed root this need ensure fully disable disk type access case need like cng proposal introduce disk false page need scan page root directory however page root value need daemonize jail chroot
72,78475817,2,introduce switch disk serve allow type access disable currently expose disk serve way access datum we introduce switch disallow usage feature toggle this toggle ideally default default cng installation use legacy storage true
73,77799953,2,page auto configuration source work expect after people start problem gitlab page most common symptom page available time the problem present people multiple server run page gitlab consider setup client gitlab instance multiple server run gitlab rail gitlab page simultaneously how auto currently work during startup gitlab page check api available multiple time get ok response which eventually load balancer eventually gitlab page hit server run then gitlab page remember api function serve error workaround run step explicitly set disk describe recommend option remove need option suggest fix change auto behavior fail access api unauthorized error fallback disk gitlab set explicitly
74,76842878,1,re enable listener acceptance test re enable listener acceptance test resolve block relate
75,76168314,1,flaky acceptance test port use since split acceptance test execution bunch error port use retry job fail pipeline test pass sample job create socket tcp bind assign request address a potential solution use tcp port let os assign available port however easy way communicate port assign pages acceptance test this cause waituntilrequestsucceeds wait timeout response binary currently run sample fale pipeline update disable gitlab org docker runner
76,76013210,4,make gitlab client cache configurable the internal source gitlab package currently semi hardcode defaultcacheconfiguration this make hard write acceptance test execute fast for example we introduce extra flag allow configure cache behaviour resolve domain configuration default configuration var defaultcacheconfig cacheconfig cacheexpiry time minute entryrefreshtimeout time second retrievaltimeout time second maxretrievalinterval time second maxretrievalretries implementation add follow flag pages override defaultcacheconfig gitlab cache expiry the maximum time domain configuration store cache default gitlab cache refresh the interval domain configuration set refresh default gitlab cache cleanup the interval expire item remove cache default gitlab retrieval timeout the maximum time wait response gitlab api request default gitlab retrieval interval the interval wait retry resolve domain configuration gitlab api default gitlab retrieval retrie the maximum number time retry resolve domain configuration api default move cacheconfig internal add flag omnibus documentation update the work what setting user configure setting api base configuration modify cache behavior domain resolution the recommend default value set inside gitlab pages modify need some example increase gitlab cache expiry allow item exist cache long this setting useful communication pages gitlab rails stable content serve pages change frequently increase gitlab cache refresh reduce frequency gitlab pages request domain configuration gitlab rails this setting useful content change frequently decrease gitlab retrieval retrie report issue pages rails quickly however transient failure real issue
77,75395466,1,refactor string error follow start discussion if error message error probably change string constant inline log line there point define error go return value wdyt define message string const createartifactrequesterrmsg fail create artifact request artifactrequesterrmsg fail request artifact
78,74943046,3,use correlationid middleware pages since pages appear use correlationids present the follow discussion address start discussion comment mind review add correlation id pages include propagate correlation id flag add flag omnibus omnibus update pages admin documentation propagate correlation id set omnibus allow installation reverse proxy generate set correlation id request send gitlab pages when reverse proxy set header value x request id value propagate request chain user find correlation id log
79,74618720,2,refactor config flag consolidate internal package move config flag internal refactor config struct call package the follow discussion address start discussion move config flag internal
80,74416375,1,make actual artifact path we decide zip return absolute path see rail perspective however chroot page mount page root we instead ensure chroot env absolute path access resource exactly allow return rail function exactly this require
81,73899685,2,support splat wildcard redirect in simple redirect mechanism implement it great support splat wildcard redirect support accord netlify doc this redirect path like story story it mean lot docs site want away prefix use like release note detail add
82,73297571,1,object storage strict ttfb timeout we outage relate gcs gitlab pages ttfb we clearly ttfb sky rocket disable nfs in regular operation expect outage gcs see disable appear request ttfb close minute connection this create crazy backlog open connection gcs our timeout connection minute summary this outage show aspect improve pages relate pages handle timeout timeout use ensure sane service recovery reduce amplification pressure outage happen proposal define ttfb long this ensure sane request open system fast reject instead hang golang var the long time request execute timeout time minute transport metric httprangetraceduration metric httprangerequestduration metric httprangerequeststotal we configure tlshandshaketimeout time duration aka able write request responseheadertimeout time duration aka close ttfb expectcontinuetimeout time duration aka similar ttfb or implement differently roundtrip define timeout receive response fully read more
83,73291617,1,the unavailability gitlab api make fallback disk serve currently gitlab api unavailable fallback disk serving this ok fully cloud native architecture return proper type error we disable local instance instead return proper error client golang func d domain serve request request resolver todo improve code default serve disk serve get remove request nil return serve local instance return request servefilehttp return true serve false func d domain r bool todo wrong return false fallback servenotfoundhttp handle case return true request return request r
84,72696799,5,allow serve zip disk currently gitlab pages serve remotely store zip archive however want migrate deployment zip support serve local store content this need ensure migrate premise installation nfs local disk zip architecture
85,72676917,1,fix testvfsfindorcreatearchivecacheevict flaky test i find flaky test locally i believe line cause trouble test vfs zip testvfsfindorcreatearchivecacheevict fail testvfsfindorcreatearchivecacheevict error trace error should path sync m sync struct resource reader err file public public public public public subdir public subdir public test testvfsfindorcreatearchivecacheevict message different archive return fail fail fail
86,72631918,3,page enable we silver customer zendesk internal report start get pages project work copy new project that happen hour rollout percentage increase turn feature flag able pages relevant slack thread internal
87,72614208,1,improve zip cache refreshing domain we open bunch archive minute from slack kamil oct pm i think lru time maybe archive refresh work reply kamil day ago look graph appear open bunch archive minute jaime day ago mean refresh kamil hour ago yes time refresh domain api new url return change auth param this mean reload access archive minute edit kamil hour ago due cache hold archive give domain single time
88,72377135,1,add vfs type access log from slack comment i think helpful extend kibana log information file serve zip elk grep log find unique domain serve
89,71929438,1,cache readlink datum currently readlink evaluate time similarly cacheoffset cache symlink to ensure readlink process predictable time minimal request especially case need perform symlink traversal
90,71907954,3,improve tool local golang development local development friendly go newcomer decrease likelihood since module introduce setup fail try remove gopath need anymore remove sh setup rm rm pkg mod sqs pbtype permission deny lint fail erro running error context loading fail file analyze add format people run linter issue
91,71658480,1,negative cache errored zip archive have interval positive cache long time cache likely prolong negative cache short time cache likely prolong the follow discussion address start discussion i believe todo item should cache archive read long period aka negative cache this work positive cache make cache negative cache errored archive forever
92,71443472,1,ignore hash directory perform disk scan in store zipped page site version directory page content but add avoid collision namespace iirc page currently recusively scan subdirectory share page need exclude share it sound irrelevant disable disk scan completely but true self manage instance enable feature flag responsible create page deployment directory appear self manage this create performance problem maybe security but maybe page find file ignore directory automatically need test shrug
93,71430811,3,handle extra header serve compressed zip archive handle miss header lose functionality io copy instead go src reference proposal handle request header if match if unmodified since if none match if modify since use header compress file set response header last modified the follow discussion address start discussion comment question servecontent doc set mime type handle if match if unmodified since if none match if modify since do plan reimplement mime type modify logic do need follow issue
94,71425929,1,implement zip cache callback the follow discussion address start discussion as follow maybe kind callback ziparchive golang func z ziparchive oncacheadde func z ziparchive oncacherefreshe func z ziparchive oncacheevicted we simply method point update metric assume oncacheadde oncacheevicte call and implement test
95,71425440,3,make zip cache configurable a simple memory cache introduce hard code value these configurable proposal add configuration change flag pages add zipcacheconfig type flag zip cache expiration zip cache cleanup zip cache refresh zip open timeout cache dataoffset cache dataoffset prune cache readlink cache readlink prune add documentation add flag omnibus the follow discussion address start discussion comment question value good should configurable future iteration
96,71182750,1,cache dataoffset symlink request zip file currently readlink dataoffset evaluate time cache lower latency serve zip to ensure readlink process predictable time minimal request especially case need perform symlink traversal the follow discussion address start discussion i wish cache dataoffset file dataoffset time make fire additional request
97,70849987,3,make http client configurable in introduce package download artifact support reading range response body the hardcode timeout configurable we pass initialize resource config flag proposal add configuration change flag pages add documentation add flag omnibus add flag chart the follow discussion address start discussion do issue can add link
98,70848619,1,use versione template security scanner some security template change break pipeline merge default branch we use versione template pointing stable branch yaml inclue the follow discussion address start discussion we use versione template
99,70685400,1,testclientstatusclienttimeout flaky run testclientstatusclienttimeout error trace error fail connect internal pages api get context deadline exceed contain client timeout test testclientstatusclienttimeout fail testclientstatusclienttimeout
100,70194664,1,remove gitlab api internal polling remove poll page implement gitlab merge
101,70178333,2,create package allow loading content object storage source create resource read chunk pre sign url add metric traceln
102,70174536,1,support range request zip poc depend define seekablefile interface extend zip http reader support range request
103,70053993,1,abstract vfs root currently page assume project locate subdirectory group subgroup project public while zip object storage vfs archive structure base work want abstract kind root directory project it allow implement zip serve easy
104,69757262,1,support vfs serve lookuppath add vfs type lookuppath extend serve reader hold map vfs resolve file content specify vfs mr
105,69757192,2,vfs implementation zip archive add zip implementation vfs interface introduce depend add zip package open archive source implement vfs interface source update metric acceptance test testprometheusmetricscanbescrape
106,69101016,1,fix intermittent cache test failure job fail plaintext fail testresolve error trace error an error expect get nil test testresolve another job plaintext run testresolve error trace error not equal expect actual test testresolve retry job fix
107,68932846,1,use exponential polling status endpoint the follow discussion address start discussion comment question consider exponential approach some sample library
108,59219708,1,adopt zip package workhorse extract
109,54558743,1,preprocess zip archive load cache file structure preprocess zip archive cache relevant file cache relevant list file reference fetch efficient way cache map search reference code depend consideration a noticeable change come profiler demo see readarchive allocate considerable memory mb production profiler gcp internal allocate memory spike enable zip pages project utc detail summary the follow discussion address start discussion oh yes yes yes it help convert flat list file ideally zip file have offset and drop one cache flat list idea
110,54062784,1,tech evaluation support nfs cloud native deployment alternative object storage pages problem solve support object storage pages currently look arrive early this impact deployment gitlab helm chart migration kubernetes multiple service depend pages include web api service a large opportunity require pages one way potentially solve introduce share storage kubernetes deployment evaluation discuss feasibility idea ask large opportunity open capable utilize share storage kubernetes cluster implement pages helm chart cloud native image look like present today add support share readwritemany pv need service pages sidekiq api web run architecture load test cloud native deployment pages require utilize like rook portworx etc provide readwritemany support strongly consider utilize architecture forward migration dogfooding confirm pages architecture work scale recommend customer launch official support pages helm chart shared storage
111,53851171,1,add metric zip serve zip serve package implement type serving interface we add metric serve zip archive similar track compare serve time archive vs disk zipservingopenarchivestotal zipservingfilesperarchivecount i think os access histogram timing different request stage like connection tls handshake response write response byte response read this allow understand responsive os different stage edit also cache hit miss metric cache entry
112,53850876,1,tech evaluation extract reader logic disk serve package reuse serve disk use type reader struct try find resolve path file system structure this logic reuse serve content zip archive
113,35363254,1,root config contain unknown key pipeline fail root config contain unknown key deprecate we need update
114,35168405,1,remove eslint sast for reason eslint sast decide need pipeline pass warning
115,34952382,1,keep track dev dependency when run setup dev tool instal project local however overwrite file reference tool the dep check rule fail if change commit mistake use file common pattern track dev dependency inside file the release cli example we reference to ensure tool dependency remove leverage go modules i create file in file i list tool dependency import statement to add file call root directory add dev tool dependency dep check add entry consider version lock desire release commit change
116,34867840,1,sast scanning fail intermittently example job sast scanning fail job fail docker error connect post dial tcp lookup docker host from slack thread license scan work fine relate sast case legacy sast orchestrator docker docker way ci configuration implicitly enable docker docker orchestrator sast dind default important difference sast license scanning explicitly call docker run set job definition explain license scanning work i able pull i suggest override rule job trigger project override sast anymore try mr i suggest share static analysis actually need override secret sast gosec sast
117,34789512,2,add dangerbot pages page currently dangerbot suggest reviewer mr in theory engineer work golang able review large pool reviewer the maintainer pool pages small presently work intention develop maintainer additional reviewer add yml project gitlab page reviewer
118,34562513,1,tech evaluation option b serve custom file namespace domain open research issue implement approach b prioritize it tricky implement basically custom namespace level project break break custom domain task update proposal link issue
119,34133160,2,use custom file improved lint rule the follow discussion address start discussion comment be avoid clash client package we use automatic linting golangci lint default set relaxed rule to improve code style add custom file enable set useful linter we use gitlab runner consistency use base set rule want apply pages cc linter from gitlab runner linter enable iteration bodyclose deadcode dogsle goconst gocyclo goimport golint gosec gosimple govet ineffassign misspell structcheck typecheck unconvert unused varcheck whitespace other linter consider list support linter golangci lint linter description wsl improve line space annoying make code readable interfacer linter suggest narrow interface type lll long line unparam reports unused function parameter gocritic the opinionated go source code linter gochecknoinit this help mr x add linter configuration x enable linter
120,34001444,2,remove gitlab server fallback auth server artifact server currently auth server artifact server instead gitlab server command line flag that seamless upgrade deprecation announce remove from comment alternatively i think good remove fallback logic from operational perspective i find surprising gitlab server inherit auth server artifact server i find inverse intuitive but have specify param acceptable so verify main consumer probably omnibus specify gitlab server explicitly worth simply require specify fallback we need x mark auth server deprecate x make release deprecation post draft we change behaviour configuration option gitlab pages if run gitlab pages omnibus base package action require otherwise sure set gitlab server parameter remove auth server later consider remove artifact server use gitlab well new parameter introduce append path
